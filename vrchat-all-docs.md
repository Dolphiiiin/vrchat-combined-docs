# VRChat Complete Documentation Documentation

This document contains automatically collected documentation with metadata headers for each section.



---

## Document: index.md

Path: /avatars/animator-parameters/index.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Animator Parameters

:::caution

This document requires knowledge about Unity's <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/AnimationParameters.html">Animator Controllers</UnityVersionedLink> and <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AnimatorController.html">Animation Parameters</UnityVersionedLink>.

:::

You can use animator parameters in your avatar's [Playable Layers](/avatars/playable-layers/) to control or affect your avatar's animator states.

- Some parameters are [built into VRChat](#built-in-parameters) and you can use them on any Playable Layer.
- You can also create your own [custom parameters](#custom-parameters), which requires creating an [Expression Parameters asset](#expression-parameters-asset).

:::tip 

You should assume that parameters can always change. Avoid "dead ends" - if your states don't have an exit, your avatar's animator may break.

:::
## Built-in Parameters



You can access VRChat's built-in avatar parameters by adding them to your avatar's Playable Layers.
If you add one of these parameters, VRChat automatically updates its value based on what's happening in VRChat. For example, if you add the `VelocityMagnitude` parameter, its value updates based the player's current speed.

All built-in parameters are read-only. You cannot change them with an [Expressions Menu](/avatars/expression-menu-and-controls) or [OSC](https://docs.vrchat.com/docs/osc-overview).

The list below contains all of VRChat's built-in parameters, their description, their type, and their [sync type](#sync-types).

| Name                                                                               | Description                                                                                                                                                                        | Type               | Sync           |
| ---------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------ | -------------- |
| IsLocal                                                                            | True if the avatar is being worn locally, false otherwise                                                                                                                          | Bool               | None           |
| [PreviewMode](/avatars/animator-parameters/preview-mode)                           | Returns `1` if the avatar is being previewed, `0` if it is not                                                                                                                     | Int                | None           |
| [Viseme](/avatars/animator-parameters#viseme-values)                               | [Oculus viseme index](https://developer.oculus.com/documentation/unity/audio-ovrlipsync-viseme-reference) (`0-14`). When using Jawbone/Jawflap, range is `0-100` indicating volume | Int                | Speech         |
| Voice                                                                              | Microphone volume (`0.0-1.0`)                                                                                                                                                      | Float              | Speech         |
| [GestureLeft](/avatars/animator-parameters#gestureleft-and-gestureright-values)    | Gesture from L hand control (0-7)                                                                                                                                                  | Int                | IK             |
| [GestureRight](/avatars/animator-parameters#gestureleft-and-gestureright-values)   | Gesture from R hand control (0-7)                                                                                                                                                  | Int                | IK             |
| GestureLeftWeight                                                                  | Analog trigger L (0.0-1.0)[^1]                                                                                                                                                     | Float              | Playable       |
| GestureRightWeight                                                                 | Analog trigger R (0.0-1.0)[^1]                                                                                                                                                     | Float              | Playable       |
| AngularY                                                                           | Angular velocity on the Y axis                                                                                                                                                     | Float              | IK             |
| VelocityX                                                                          | Lateral move speed in m/s                                                                                                                                                          | Float              | IK             |
| VelocityY                                                                          | Vertical move speed in m/s                                                                                                                                                         | Float              | IK             |
| VelocityZ                                                                          | Forward move speed in m/s                                                                                                                                                          | Float              | IK             |
| VelocityMagnitude                                                                  | Total magnitude of velocity                                                                                                                                                        | Float              | IK             |
| Upright                                                                            | How "upright" you are. 0 is prone, 1 is standing straight up                                                                                                                       | Float              | IK             |
| Grounded                                                                           | True if player touching ground                                                                                                                                                     | Bool               | IK             |
| Seated                                                                             | True if player in station                                                                                                                                                          | Bool               | IK             |
| AFK                                                                                | Is player unavailable (HMD proximity sensor / End key)                                                                                                                             | Bool               | IK             |
| [TrackingType](/avatars/animator-parameters#trackingtype-parameter)                | See description below                                                                                                                                                              | Int                | Playable       |
| VRMode                                                                             | Returns `1` if the user is in VR, `0` if they are not                                                                                                                              | Int                | IK             |
| MuteSelf                                                                           | Returns `true` if the user has muted themselves, `false` if unmuted                                                                                                                | Bool               | Playable       |
| InStation                                                                          | Returns `true` if the user is in a station, `false` if not                                                                                                                         | Bool               | IK             |
| Earmuffs                                                                           | Returns `true` if the user's Earmuff feature is on, `false` if not                                                                                                                 | Bool               | Playable       |
| IsOnFriendsList                                                                    | Returns `true` if the user viewing the avatar is friends with the user wearing it. `false` locally.                                                                                | Bool               | Other          |
| [AvatarVersion](/worlds/components/vrc_station/#detecting-sdk2-avatars) | Returns `3` if the avatar was built using VRChat's SDK3 (2020.3.2) or later, `0` if not.                                                                                           | Int                | IK             |
| IsAnimatorEnabled                                                                  | Returns `false` one frame before the avatar's animator is disabled, and `true` when it's enabled.                                                                                  | Bool               | None           |

[^1]: GestureLeftWeight and GestureRightWeight go from 0.0 to 1.0 in various gestures depending on the trigger pull. For example, if you make a fist but don't pull the trigger on the left hand, GestureLeft will be 1, but GestureLeftWeight will be 0.0. When you start pulling the trigger, it will climb from 0.0 towards 1.0. This can be used to create "analog" gestures or conditionally detect various things.

### Avatar Scaling Parameters

Your Playable Layer can react to the player's current [avatar scale](/avatars/avatar-scaling) by using the parameters below:

| Name               | Description                                                                                                                                                                                     | Type  | Sync     |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----- | -------- |
| ScaleModified      | Returns `true` if the user is scaled using avatar scaling, `false` if the avatar is at its default size.                                                                                        | Bool  | Playable |
| ScaleFactor        | Relation between the avatar's default height and the current height. An avatar with a default eye-height of 1m scaled to 2m will report `2`.                                                    | Float | Playable |
| ScaleFactorInverse | Inverse relation (`1/x`) between the avatar's default height and the current height. An avatar with a default eye-height of 1m scaled to 2m will report `0.5`. Might be inaccurate at extremes. | Float | Playable |
| EyeHeightAsMeters  | The avatar's eye height in meters.                                                                                                                                                              | Float | Playable |
| EyeHeightAsPercent | Relation of the avatar's eye height in meters relative to the default scaling limits (`0.2`-`5.0`). An avatar scaled to 2m will report `(2.0 - 0.2) / (5.0 - 0.2)` = `0.375`.                   | Float | Playable |


### Parameter Types

You have access to three types of variable when defining your parameters in your Parameters object.

You can use up to a total of 256 bits of "memory". This isn't strictly memory in the sense of memory usage of the avatar, but has to do with the bandwidth you use when syncing parameters.

| Parameter Type | Range             | Memory Usage | Notes                              |
| :------------- | :---------------- | :----------- | :--------------------------------- |
| `int`          | `0`-`255`         | 8 bits       | Unsigned 8-bit int.                |
| `float`        | `-1.0` to `1.0`   | 8 bits       | Signed 8-bit fixed-point decimal[^2]. |
| `bool`         | `True` or `False` | 1 bit        |                                    |

[^2]: Remotely synced `float` values have 255 possible values, giving a precision of `1/127` over the network, and can store `-1.0`, `0.0`, and `1.0` precisely. When updated locally, such as with [OSC](https://docs.vrchat.com/docs/osc-overview), float values are stored as native (32-bit) floating-point values in animators. 

### GestureLeft and GestureRight Values

GestureLeft and GestureRight use these as their values:

| Index | Gesture     |
| ----- | ----------- |
| 0     | Neutral     |
| 1     | Fist        |
| 2     | HandOpen    |
| 3     | FingerPoint |
| 4     | Victory     |
| 5     | RockNRoll   |
| 6     | HandGun     |
| 7     | ThumbsUp    |

### Viseme Values

We use the [Oculus viseme index](https://developer.oculus.com/documentation/unity/audio-ovrlipsync-viseme-reference), top to bottom, where `sil` is 0. For reference:

| Viseme Parameter | Viseme |
| :--------------- | :----- |
| 0                | `sil`  |
| 1                | `pp`   |
| 2                | `ff`   |
| 3                | `th`   |
| 4                | `dd`   |
| 5                | `kk`   |
| 6                | `ch`   |
| 7                | `ss`   |
| 8                | `nn`   |
| 9                | `rr`   |
| 10               | `aa`   |
| 11               | `e`    |
| 12               | `i`    |
| 13               | `o`    |
| 14               | `u`    |


### AFK State

The AFK state is triggered by:

- The user removing the headset and the HMD proximity sensor returning that the headset is not being worn
- A system menu is open. This depends on how the platform you're using delivers data when system menus are up-- for example, the Oculus Dash doesn't register as AFK, but SteamVR's menu **does** register as AFK. This is kind of a knock-on, and not a designed behavior.
- The user has pressed the End key, toggling the AFK state.

### TrackingType Parameter

`TrackingType` indicates a few pieces of information. 

If the value is 3, 4, or 6 while `VRMode` is 1, the value is indicating how many tracked points the wearer of the avatar has enabled and currently tracked. **This value can change!** If a user in 6-point tracking removes their extra three points of tracking, they will go from a value of 6 to a value of 3. Take this into account when you design your animator. 

If the value is 0, 1, or 2 while `VRMode` is 1, the value indicates that the avatar is still initializing. You should not design animators to branch based off this combination of values, and it should instead wait for a "valid" value of 3, 4, or 6.

:::caution Account for changes

During avatar initialization, this value may change! Ensure that your animator accounts for possible changes, and that it doesn't "dead-end" into any branch.

:::

| Parameter | Description |
| --- | :-- |
| 0 | Uninitialized. Usually only occurs when the user is switching avatars and their IK isn't sending yet. |
| 1 | Generic rig. The user might have tracking of any kind on, but the avatar is rigged as Generic,so tracking is ignored. _Might_ be a desktop user if `VRMode` is 0. |
| 2 | _Only occurs with AV2,and therefore isn't a state you should expect to be in for very long for AV3 controllers on avatars. May still occur with SDK3 stations._ <br />Hands-only tracking with no fingers. This will only occur in states that are transitions-- as in, you should expect `TrackingType` to change again, and the avatar should not stay in this state. |
| 3 | Head and hands tracking. If `VRMode` is `1`, this user is in 3-point VR. If `VRMode` is `0`, this is a Desktop user in a humanoid avatar. |
| 4 | 4-point VR user. Head, hands, and hip. |
| 5 | 5-point VR user. Head, hands and feet tracked. Basically full Body Tracking but without the hip. |
| 6 | Full Body Tracking VR user. Head, hands, hip, and feet tracked. |

## Custom parameters

You can add your own parameters to your avatar's Playable Layers.

You must [create a Expression Parameters asset](#expression-parameters-asset), which allows you to [control parameters in VRChat](#how-to-control-custom-parameters). For example, you can set up an [expressions menu](/avatars/expression-menu-and-controls) and allow users to customize your avatar in VRChat.

### Expression Parameters Asset

An Expression Parameters asset contains the list of custom parameters that your Playable Layers can use. Each parameter has a name, type, and default value. You can also choose whether the parameter should be synchronized for other players, which allows other players to see changes caused by the animator and custom parameters.

[IMAGE: What expression parameters look like by default.]

:::tip

Learn how to create an Expression Paramaters asset by reading the [Expressions Menu](/avatars/expression-menu-and-controls#creating-an-expressions-menu) documentation.

:::

### How to Control Custom Parameters

After setting up custom parameters in your avatar's Playable Layers and Expression Parameters asset, you can control them in three different ways:

- Set up an [Expressions Menu](/avatars/expression-menu-and-controls), which allows users to easily control the parameters in VRChat, e.g., switch between outfits or play custom animations. Expressions Menus are the easiest and most common method to control custom parameters.
- You can attach the state behaviour [Avatar Parameter Driver](/avatars/state-behaviors#avatar-parameter-driver) to states in your Playable Layer. It can automatically set, add, or randomize parameters that you defined in your Expression Parameters asset.
- You can set up your avatar for [OSC](https://docs.vrchat.com/docs/osc-overview), allowing users and third-party tools to control parameters. For example, [VRCFaceTracking](https://docs.vrcft.io/) uses face and eye tracking hardware to control an avatar's facial expression parameters. 

### Default AV3 Aliasing

There's a few "defaults" in use by the template AV3 VRChat controllers that you can use if you don't want to build out your own controllers. These won't collide with your own use (as long as you don't name them the same thing) thanks to aliasing.

In particular, the Default Action and FX layers use aliasing. You don't need to worry about using a Expression that is in these layers. 

Actions use aliased parameters named `VRCEmote`, which is an Int with a range of 1 to 16.

FX uses aliased Float parameters called `VRCFaceBlendH` (-1,1) and `VRCFaceBlendV` (-1,1), if you want to try out your own menus to use them. The default FX layer requires that you have a skinned mesh named `Body` with `mood_happy` , `mood_sad` , `mood_surprised` , and `mood_angry` blendshapes.

To restate, if you have an avatar that you upload as an Avatar3 avatar without any custom Playable layers, you'll be able to use some built-in emotes with them as long as you've got the above-named blendshapes.

If you also have an `eyes_closed` blendshape, it'll close them when you use the default Die emote or go AFK.

### Cross-Platform Parameter Sync

When using an avatar that has both Quest and PC versions uploaded, parameters are synced by their position in the parameters list and their parameter type, **not** by the names of the parameters. For a given parameter to sync between PC and Quest, it has to be in the same position in the parameter list, and have the same parameter type. 

Given this, you should always use the same Expression Parameters asset for both the PC and Quest versions of an avatar, even if one version doesn't make use of all the parameters.

### Mismatched Parameter Type Conversion

When you choose a [parameter type](/avatars/animator-parameters/#parameter-types) in your [animator](https://docs.unity3d.com/Manual/AnimationParameters.html), it's a good idea to choose the same type as the [built-in parameter](/avatars/animator-parameters/#built-in-parameters) or [custom parameter](/avatars/expression-menu-and-controls/#creating-an-expressions-menu) you're trying to use. For example: If you use VRChat's built-in `AFK` parameter in your animator,  you should choose the type `bool`.

However, you *can* choose a mismatched type for your parameters. VRChat will try convert the parameter's value to the type used by the animator. For example, if you choose the type `float` for your `AFK` parameter, VRChat will automatically set `AFK` to `1.0` or `0.0` instead of `true` or `false`. This also allows you to use the `AFK` parameter in your Animator's [Blend Tree](https://docs.unity3d.com/Manual/class-BlendTree.html).

The table below shows how converting a mismatched parameter changes it. 

| Source Type | Animator Type |                                              Conversion Behavior                                              | Example                               |
|:-----------:|:-------------:|:-------------------------------------------------------------------------------------------------------------:|---------------------------------------|
| `int`       | `float`       | Directly converted to `float`.                                                                                | `1` → `1.0`                           |
| `int`       | `bool`        | `0` is `false`, anything else is `true`                                                                       | `1` → `true`                          |
| `float`     | `int`         | Rounded to closest `int` (same as [`Mathf.Round`](https://docs.unity3d.com/ScriptReference/Mathf.Round.html)) | `0.5` → `0`, `0.6` → `1`, `1.5` → `2` |
| `float`     | `bool`        | `0.0` is `false`, anything else is `true`                                                                     | `0.5` → `true`                        |
| `bool`      | `int`         | `true` is `1`, `false` is `0`                                                                                 | `true` → `1`                          |
| `bool`      | `float`       | `true` is `1.0`, `false` is `0.0`                                                                             | `true` → `1.0`                        |

### Trigger Typed Parameters

At this time we don't recommend using Trigger type parameters in your animation controllers.  These values can become de-synced between versions of your avatar, including remote clients viewing your avatar or in special situations like viewing your avatar in the mirror.  If you are going to represent the state of your avatar please use either Int, Float or Bool typed parameters.

## Sync Types

VRChat synchronizes most [built-in](#built-in-parameters) parameters with other players in the instance, and you can enable synchronization for your own [custom](#custom-parameters) parameters.

The sync type determines how VRChat syncs each parameter. Parameters use one of the following sync types:

- **Speech**
	- Only used for visemes.
	- Driven Oculus Lipsync output parameters depending on your speech.
	- Updated locally, not directly synced (because its driven by audio)
- **Playable**
	- A slower sync mode meant to synchronize longer-running animation states.
	- Updates every 0.1 to 1 seconds as needed based on parameter changes (1 to 10 updates per second), but you shouldn't rely on it for fast sync.
- **IK**
	- A faster sync mode meant to synchronize frequently-changing values.
	- Updates continuously every 0.1 seconds (10 updates per second), and interpolates `float` values locally for remote users.
	- Depending on the parameter, this may also just be calculated based on the avatar's locally rendered IK state.
- **None**
	- This parameter is not synchronized with other player. 
	- For example, `IsLocal` is always true for the local player's avatar and `false` for the avatars of other players. 

If you enable synchronization for your [custom](#custom-parameters) parameters, VRChat usually uses the **Playable** sync type. However, when you control a parameter with a [Puppet control](/avatars/expression-menu-and-controls#types-of-controls), VRChat switches from **Playable** to **IK** sync, improving the update rate smooth interpolation. When you close the Puppet control, it returns to Playable sync.

---

## Document: preview-mode.md

Path: /avatars/animator-parameters/preview-mode.md
# Preview Mode

Preview Mode is an [animator parameter](/avatars/animator-parameters/) that indicates whether the user is currently previewing your avatar in the VRChat menu. Your Animator Controller can use this parameter to play a specific animation to make your avatar preview look more appealing.

## Usage

To set up a preview mode animation for your avatar, follow the steps below:

1. Open your existing Base (Locomotion) Animator Controller.
   - If you do not have a Base layer set up in your Avatar descriptor, you can copy the existing Animator Controller provided by VRChat. It is located under `Packages/VRChat SDK Avatars/Samples/AV3 Demo Assets/Animation/Controllers/vrc_AvatarV3LocomotionLayer`. Copy this animator controller into your assets and assign it to the `Base` slot of your Avatar Descriptor.

[IMAGE: Base Layer Sample]

2. Create a new Animator parameter of type `Int` and name it `PreviewMode`.

[IMAGE: PreviewMode Parameter]

3. Create an Animation Clip to house your preview animation, choose a name (e.g., `PreviewOn`), and drag it into the Animator Controller.
4. Set up a transition between the `Standing` locomotion blend tree (usually the Default state, marked in orange) to the `PreviewOn` state, and set the condition to "`PreviewMode` Equals 1". Uncheck the "Has Exit Time" checkbox.

[IMAGE: PreviewOn Transition]

5. Create another Transition in reverse from `PreviewOn` to `Standing` and set the condition to "`PreviewMode` equals 0". Uncheck the "Has Exit Time" checkbox.

[IMAGE: PreviewOff Transition]

6. The final setup should look something like this:

[IMAGE: PreviewMode Setup]

7. Now assign your Base Animator Controller to the `Controller` slot of your Avatar's Animator component, and set up the animation to your preference.

[IMAGE: Plug In Animator]

:::caution
Please note that Material swapping animations do not work correctly when previewed in the menu. However, you can still do most other things like toggling objects, or adjusting BlendShapes.
:::

8. When you're done - you can Build & Test your avatar.

[IMAGE: Pose Sample]

9. When you preview your avatar in the "Other" section of the Avatars list - you should see it animate into the pose you set up in the `PreviewOn` Animation Clip.

[IMAGE: In Game View]

You can use different kinds of animations for the preview mode, so feel free to experiment.


---

## Document: index.md

Path: /avatars/avatar-dynamics/constraints/index.md
# Constraints

VRChat provides its own custom constraints system, which allows bones on your avatar to move, rotate, and scale relative to other bones.

This is intended to be a like-for-like replacement of Unity's constraints system, with a few additional features based on how VRChat avatars typically use constraints. If you've never used constraints before, you may find it useful to refer to [Unity's documentation for constraints](https://docs.unity3d.com/Manual/Constraints.html).

You should use VRChat's constraints instead of Unity's when creating avatars. If your avatar contains any Unity constraints, they will be automatically converted into VRChat constraints when your avatar is loaded in-game, so using VRChat constraints directly will give you a more accurate representation of how your avatar will behave as well as a more accurate performance rank.

## Constraint Types

VRChat currently provides the following constraint types, which are designed to work in the same way as Unity's six built-in constraints:
- [**VRCAimConstraint**](/avatars/avatar-dynamics/constraints/vrc-aim-constraint) - Rotates the target transform so it aims towards the sources. You can customize which direction is treated as forwards.
- [**VRCLookAtConstraint**](/avatars/avatar-dynamics/constraints/vrc-look-at-constraint) - A simplified Aim Constraint that rotates the target transform to keep its positive Z axis facing towards the sources.
- [**VRCParentConstraint**](/avatars/avatar-dynamics/constraints/vrc-parent-constraint) - Moves and rotates the target transform as if it were a child of its sources.
- [**VRCPositionConstraint**](/avatars/avatar-dynamics/constraints/vrc-position-constraint) - Changes the position of the target transform to match the positions of its sources.
- [**VRCRotationConstraint**](/avatars/avatar-dynamics/constraints/vrc-rotation-constraint) - Changes the rotation of the target transform to match the rotations of its sources.
- [**VRCScaleConstraint**](/avatars/avatar-dynamics/constraints/vrc-scale-constraint) - Changes the scale of the target transform to match the scales of its sources.

Visit the links above for more information about the settings available for each constraint type.

## Advanced Constraint Settings

The Advanced Settings foldout contains some additional functions provided by VRChat constraints.

### Target Transform

The `Target Transform` setting allows you to change the transform targeted by this constraint. By default, this setting is empty, and the constraint is applied to the transform that the constraint component is attached to. Note that changing this transform with an animation is not possible.

This may be useful if you'd like to keep all of the constraint components on your avatar in one place, or if you're setting up a system that uses constraints and you want it to be transferrable between different avatars.

### Solve In Local Space

Normally, a constraint is solved in world space, which means it will match the **world** position/rotation/scale of its sources. If the `Solve In Local Space` option is enabled, the constraint will match the **local** position/rotation/scale of its sources instead.

This can be useful in situations such as setting up additional fake limbs for avatars. You might, for example, have a chain of locally solved rotation constraints that refer to each bone of the avatar's real arm, which would then cause that chain to rotate around as the real arm does. This isn't limited to rotation constraints, however - all types can use local solving.

The video below illustrates the difference between globally and locally solved rotation constraints as an example. In this clip, the middle and right arrows each use rotation constraints to match the rotation of the left arrow, where the middle arrow uses world space solving and the right arrow uses local space solving. Notice how the world solved constraint always matches the rotation of the target in world space. In contrast, the locally solved constraint always matches the direction the target is facing relative to its parent bone.

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/6iBJ5QntrMU?si=YxAkg17x3LvinnL_" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

### Freeze To World

When `Freeze To World` is enabled, the constraint ignores all of its sources and locks its target transform in world space. The transform's position/rotation/scale will stay the same until `Freeze To World` is disabled.

This setting works best when animated on and off. For example:

 1. Set up an [expressions toggle](/avatars/expression-menu-and-controls/#types-of-controls) for `Freeze To World` and disable it by default.
 2. When `Freeze To World` is enabled in your Animation Clip, the transform is locked in world space.
 3. When `Freeze To World` is disabled in your Animation Clip, the transform follows the constraint's sources again.

This allows avatars to drop an object at a fixed position in the world. When you walk away, the object won't follow your avatar. Parent constraints are most suitable for this because they can freeze both the position _and_ rotation of the target transform. However, `Freeze To World` is also available for all the other constraint types.

The `Freeze To World` property only affects axes that are selected as frozen in the Constraint Settings section. You must freeze all axes if you want to stop the object in place completely. Otherwise, those axes will not be updated and the transform will not remain locked in world space.

:::note

Enabling `Freeze To World` is not the same as disabling the constraint component!

- When the constraint is disabled, the affected transform stops moving in **local** space. It still follows your avatar movement.
- When you enable `Freeze To World`, the constraint actively moves the transform in local space to prevent it from moving in **world** space.

Additionally, having `Freeze To World` turned on by default means the constraint will freeze itself at its starting position/rotation/scale relative to your avatar the instant it loads in. This is not a guaranteed way to place it at a certain position/rotation/scale in world space.

:::

#### Rebake Offsets When Unfrozen

When `Rebake Offsets When Unfrozen` is enabled, the constraint will recalculate its offset relative to its sources when it is unfrozen by having `Freeze To World` disabled, instead of the usual behavior of keeping its original offset.

Toggling this value itself has no effect - it just determines what should happen when `Freeze To World` is disabled.

## Performance

There are two performance categories related to constraints. Refer to the [Performance Ranks](/avatars/avatar-performance-ranking-system#avatar-performance-ranks---value-maximums-per-rank) page for the limits applied to each platform.

### Constraint Count

The constraint count is fairly straightforward - it's the total number of constraints attached to your avatar, including disabled constraints. This includes both VRChat constraints and Unity constraints. Unity constraints are automatically converted into VRChat constraints when your avatar is loaded in-game.

Decreasing the total number of constraints can improve your avatar's performance.

### Constraint Depth

When you set up a chain of constraints on your avatar (for example, a chain of rotation constraints along an extra limb), those constraints need to be evaluated one at a time in a specific order, running from the constraint at the base of the chain up to the constraint at the tip. If the chain has 3 constraints along it, then that means the chain has a constraint depth of 3. The avatar's overall constraint depth rating is the longest chain of dependencies across the entire avatar.

Constraint depth can be lowered by reducing the length of the longest chain of constraints. Keep in mind that this category searches for the *longest* chain rather than the sum of all chains - if your avatar has several arms that all have a depth of 3, the overall score for the avatar would still be 3 (assuming there are no longer chains anywhere else on the avatar).

Constraint depth is important because it gives a better estimate of how the constraints on an avatar will perform than just counting how many constraints there are in total. By organizing constraints to minimize the dependencies between them, many of them will be able to run at the same time, which results in better performance compared to situations where the constraints must run one after another.

:::info[Constraint Depth with Unity Constraints]

The constraint depth of an avatar can only be accurately calculated when it uses VRChat constraints exclusively.

If your avatar contains any Unity constraints, the constraint depth is likely to be over-estimated, as the category assumes that Unity constraints can only run one at a time. You can convert all of the Unity constraints on your avatar into equivalent VRChat constraints by using the relevant Auto Fix option in the control panel in the SDK.

:::

## Usage Tips

- If your constraint doesn't seem to work, make sure it's actually running.
	- The `Is Active` option should be enabled.
	- The component itself should be enabled (the tick-box next to its name) and should be attached to an active game object on your avatar.
	- Make sure the `Lock` option is enabled. Otherwise, the constraint will re-evaluate its `At Rest` and `Offset` values instead of affecting the transform.
- The `Target Transform` reference cannot be changed by animations. This is because changing the transform targeted by the constraint would require recalculating the avatar's performance rank. If you want to change the targeted transform of a constraint, you could instead try toggling between several different constraint components each with a different target transform.
- If you can avoid it, don't use animations to change which transforms are referenced by your constraints. Animating a transform reference can cause performance issues for your avatar, as the constraints may need to be re-evaluated each time the references change.
    - This specifically refers to animating a constraint's _reference_ to a transform - animating the transform's position, rotation and scale is okay!
	- It isn't possible to animate transform references for individual sources due to technical limitations. As a simpler alternative to this, you can set up several sources with different transforms and animate their weights instead.

## Editor Tooling Info

If you're an advanced Unity user, you can write your own custom editor tooling in C# that interacts with the constraints converter.

These utilities are only briefly summarized here. Please see the inline documentation for them for full descriptions of how they work.

### Conversion Methods

The SDK class `AvatarDynamicsSetup` contains the conversion methods that the SDK uses to translate Unity constraints into equivalent VRChat constraints. The following constraint conversion methods are exposed for user tooling:
| Method | Description |
|---|---|
| `ConvertUnityConstraintsAcrossGameObjects(List<GameObject> targetGameObjects)` | Converts Unity constraints on a list of GameObjects into VRChat constraints. |
| `ConvertUnityConstraintsAcrossAnimationClips(List<AnimationClip> targetAnimationClips)` | Modifies a list of AnimationClips so any tracks in them targeting Unity constraints are updated to target VRChat constraints instead. |
| `DoConvertUnityConstraints(IConstraint[] unityConstraints, VRCAvatarDescriptor avatarDescriptor, bool convertReferencedAnimationClips)` | Converts an array of Unity constraints into VRChat constraints, optionally including any referenced animation clips. This runs immediately with no confirmation dialog. |
| `RebindConstraintAnimationClip(AnimationClip clip, IConstraint oldConstraint)` | Attempts to modify a single animation clip to retarget tracks from Unity constraints to VRChat constraints, optionally limiting conversions to the given Unity constraint. |
| `TryGetSubstituteAnimationBinding(Type unityConstraintType, string unityConstraintPropertyName, out Type vrcConstraintType, out string vrcConstraintPropertyName, out bool isArrayProperty)` | Attempts to translate a Unity constraint property name and type into an equivalent VRChat constraint property name and type. |

### Delegate Functions

To complement the above methods, the class `AvatarDynamicsSetup` also provides delegates that allow your tooling to control how the converter behaves. The following delegates are available:
| Delegate | Description |
|---|---|
| `bool IsUnityConstraintAutoConverted(IConstraint constraint)` | Given a Unity constraint, return `true` if this constraint will be converted into a VRChat constraint at build time by user tooling. You can use this to suppress the validation warning normally generated by the SDK prompting the user to convert their Unity constraints to VRChat constraints. |
| `bool ConvertUnityConstraintsAcrossGameObjects(List<GameObject> gameObjects, bool isAutoFix)` | Given a list of GameObjects, convert all of the constraints and underlying animation clips on them into VRChat constraints. The `isAutoFix` parameter is set to `true` if this was triggered by the user clicking auto-fix in the validations list, or `false` if it was triggered by a menu entry or a custom user script. Return `true` to prevent the native SDK converter from running. |
| `bool ConvertUnityConstraintsAcrossAnimationClips(List<AnimationClip> animationClips)` | Given a list of animation clips, update all tracks referencing Unity constraints to reference VRChat constraints instead. Return `true` to prevent the native SDK converter from running. |


---

## Document: vrc-aim-constraint.mdx

Path: /avatars/avatar-dynamics/constraints/vrc-aim-constraint.mdx
import ConstraintMainSettings from './_partial-constraint-mainsettings.mdx'
import ConstraintActivation from './_partial-constraint-activation.mdx'
import ConstraintSubSettings from './_partial-constraint-subsettings.mdx'
import ConstraintSources from './_partial-constraint-sources.mdx'
import ConstraintAdvanced from './_partial-constraint-advanced.mdx'

# Aim Constraint

The `VRCAimConstraint` component rotates the target transform so it aims towards the sources. You can customize which direction is treated as forwards.

[IMAGE: Image]

<ConstraintMainSettings />
- **Aim Vector** - Controls the axes that should face towards the sources.
- **Up Vector** - Controls the upwards axis for this constraint. This is the axis of the affected transform that the constraint will try to align with the world up axis defined below.
- **World Up Type** - Controls the world upwards direction used by this aim constraint.
  - **Scene Up** - Treat upwards as the positive Y axis of the scene.
  - **Object Up** - Treat upwards as the vector pointing from the target transform of the constraint to the transform specified in the `World Up Object` property.
  - **Object Up Rotation** - Treat upwards as the `World Up Vector` axis in the local space of the transform specified in the `World Up Object` property.
  - **Vector** - Treat upwards as the `World Up Vector` in world space.
  - **None** - Do not define an upwards direction.

<ConstraintActivation />

## Constraint Settings

<ConstraintSubSettings affectedTrs="Rotation" />

## Sources

<ConstraintSources />

## Advanced

<ConstraintAdvanced affectedTrs="Rotation" />

---

## Document: vrc-look-at-constraint.mdx

Path: /avatars/avatar-dynamics/constraints/vrc-look-at-constraint.mdx
import ConstraintMainSettings from './_partial-constraint-mainsettings.mdx'
import ConstraintActivation from './_partial-constraint-activation.mdx'
import ConstraintSources from './_partial-constraint-sources.mdx'
import ConstraintAdvanced from './_partial-constraint-advanced.mdx'

# Look At Constraint

The `VRCLookAtConstraint` component is a simplified [Aim Constraint](/avatars/avatar-dynamics/constraints/vrc-aim-constraint). It rotates the target transform so its positive Z axis faces towards the sources.

[IMAGE: Image]

<ConstraintMainSettings />
- **Use Up Object** - Controls whether or not to use a separate transform to determine roll.
- **Roll** - Controls the angle (in degrees) around the target transform's Z axis that should be used to determine its upwards direction. Only available when `Use Up Object` is disabled.
- **World Up Object** - When set, the constraint will roll to try and point its positive Y axis towards this transform. Only available when `Use Up Object` is enabled.

<ConstraintActivation />

## Constraint Settings <!--Not partial because look-at does not expose freeze axes.-->

- **Rotation At Rest** - Defines the transform's rotation when the constraint's overall weight is 0.
- **Rotation Offset** - Defines the offset applied to the result of this constraint.
- **Lock** - When enabled, locks the `At Rest` and `Offset` values in place, preventing them from being edited.
  - If you activate the constraint and leave these values unlocked, they'll be recalculated as the target transform's rotation changes.
  - If you lock these values and activate the constraint, the constraint will start taking control of the transform.

## Sources

<ConstraintSources />

## Advanced

<ConstraintAdvanced affectedTrs="Rotation" />

---

## Document: vrc-parent-constraint.mdx

Path: /avatars/avatar-dynamics/constraints/vrc-parent-constraint.mdx
import ConstraintMainSettings from './_partial-constraint-mainsettings.mdx'
import ConstraintActivation from './_partial-constraint-activation.mdx'
import ConstraintSubSettings from './_partial-constraint-subsettings.mdx'
import ConstraintSources from './_partial-constraint-sources.mdx'
import ConstraintAdvanced from './_partial-constraint-advanced.mdx'

# Parent Constraint

The `VRCParentConstraint` component moves and rotates the target transform as if it were a child of its sources.

[IMAGE: Image]

<ConstraintMainSettings />

<ConstraintActivation />

## Constraint Settings

<ConstraintSubSettings affectedTrs="Position/Rotation" />
:::info

Offsets are set individually for each source when using Parent Constraints.

:::

## Sources

<ConstraintSources />

## Advanced

<ConstraintAdvanced affectedTrs="Position/Rotation" />

---

## Document: vrc-position-constraint.mdx

Path: /avatars/avatar-dynamics/constraints/vrc-position-constraint.mdx
import ConstraintMainSettings from './_partial-constraint-mainsettings.mdx'
import ConstraintActivation from './_partial-constraint-activation.mdx'
import ConstraintSubSettings from './_partial-constraint-subsettings.mdx'
import ConstraintSources from './_partial-constraint-sources.mdx'
import ConstraintAdvanced from './_partial-constraint-advanced.mdx'

# Position Constraint

The `VRCPositionConstraint` component changes the position of the target transform to match the positions of its sources.

[IMAGE: Image]

<ConstraintMainSettings />

<ConstraintActivation />

## Constraint Settings

<ConstraintSubSettings affectedTrs="Position" />

## Sources

<ConstraintSources />

## Advanced

<ConstraintAdvanced affectedTrs="Position" />

---

## Document: vrc-rotation-constraint.mdx

Path: /avatars/avatar-dynamics/constraints/vrc-rotation-constraint.mdx
import ConstraintMainSettings from './_partial-constraint-mainsettings.mdx'
import ConstraintActivation from './_partial-constraint-activation.mdx'
import ConstraintSubSettings from './_partial-constraint-subsettings.mdx'
import ConstraintSources from './_partial-constraint-sources.mdx'
import ConstraintAdvanced from './_partial-constraint-advanced.mdx'

# Rotation Constraint

The `VRCRotationConstraint` component changes the rotation of the target transform to match the rotations of its sources.

[IMAGE: Image]

<ConstraintMainSettings />

<ConstraintActivation />

## Constraint Settings

<ConstraintSubSettings affectedTrs="Rotation" />

## Sources

<ConstraintSources />

## Advanced

<ConstraintAdvanced affectedTrs="Rotation" />

---

## Document: vrc-scale-constraint.mdx

Path: /avatars/avatar-dynamics/constraints/vrc-scale-constraint.mdx
import ConstraintMainSettings from './_partial-constraint-mainsettings.mdx'
import ConstraintActivation from './_partial-constraint-activation.mdx'
import ConstraintSubSettings from './_partial-constraint-subsettings.mdx'
import ConstraintSources from './_partial-constraint-sources.mdx'
import ConstraintAdvanced from './_partial-constraint-advanced.mdx'

# Scale Constraint

The `VRCScaleConstraint` component changes the scale of the target transform to match the scales of its sources.

[IMAGE: Image]

<ConstraintMainSettings />

<ConstraintActivation />

## Constraint Settings

<ConstraintSubSettings affectedTrs="Scale" />

## Sources

<ConstraintSources />

## Advanced

<ConstraintAdvanced affectedTrs="Scale" />

---

## Document: _partial-constraint-activation.mdx

Path: /avatars/avatar-dynamics/constraints/_partial-constraint-activation.mdx
The two buttons at the top the inspector are utilities to let you:
- **Activate** the constraint. This saves the current offset from the sources, then activates and locks the constraint.
- **Zero out** the constraint. This resets the offset to its default value, then activates and locks the constraint.

---

## Document: _partial-constraint-advanced.mdx

Path: /avatars/avatar-dynamics/constraints/_partial-constraint-advanced.mdx
- **Target Transform** - Defines the transform affected by this constraint component. If left empty, the transform this constraint is attached to will be affected instead.
- **Solve In Local Space** - If ticked, this constraint will be solved as if the sources are in local space rather than world space.
- **Freeze To World** - If ticked, this constraint will ignore its sources and keep a fixed {props.affectedTrs.toLowerCase()} instead.
- **Rebake Offsets When Unfrozen** - If ticked, this constraint will rebake its offsets relative to its sources when `Freeze To World` is disabled.

See the parent section covering [Advanced Constraint Settings](/avatars/avatar-dynamics/constraints#advanced-constraint-settings) for a more in-depth description of how these advanced settings work.

---

## Document: _partial-constraint-mainsettings.mdx

Path: /avatars/avatar-dynamics/constraints/_partial-constraint-mainsettings.mdx
- **Is Active** - Controls whether the constraint will be evaluated or not. Disabling the entire component and deactivating the game object with the component on it will also stop the constraint from running.
- **Weight** - Controls the overall weight applied to this constraint.
  - This should normally be in the range 0 to 1, but you can tick the `Free edit` box if you want to set values outside of that range.

---

## Document: _partial-constraint-sources.mdx

Path: /avatars/avatar-dynamics/constraints/_partial-constraint-sources.mdx
The "Sources" list determines which transforms affect this constraint. Click the `+` button in the bottom right to add a new source. Click the `-` button to remove the currently selected source. Each source has the following options:
- **Source Transform** - The transform to use as a source.
- **Weight** - Controls how much this source should affect the constraint.
  - This should normally be in the range 0 to 1, but you can tick the `Free edit` box if you want to set values outside of that range.

---

## Document: _partial-constraint-subsettings.mdx

Path: /avatars/avatar-dynamics/constraints/_partial-constraint-subsettings.mdx
- **{props.affectedTrs} At Rest** - Defines the transform's {props.affectedTrs.toLowerCase()} when the constraint's overall weight is 0.
- **{props.affectedTrs} Offset** - Defines the offset applied to the result of this constraint.
- **Lock** - When enabled, locks the `At Rest` and `Offset` values in place, preventing them from being edited.
  - If you activate the constraint and leave these values unlocked, they'll be recalculated as the target transform's {props.affectedTrs.toLowerCase()} changes.
  - If you lock these values and activate the constraint, the constraint will start taking control of the transform.
- **Freeze {props.affectedTrs} Axes** - Allows you to exclude specific axes from evaluation as the constraint is solved. By default, all three axes are selected for evaluation.

---

## Document: contacts.md

Path: /avatars/avatar-dynamics/contacts.md
---
title: "Contacts"
slug: "contacts"
hidden: false
createdAt: "2022-03-03T00:07:46.847Z"
updatedAt: "2022-05-03T19:31:41.007Z"
---
Contacts are a system that allows avatars to detect collisions with itself or other avatars. These collisions can then be used to drive the animation controller and perform all sorts of fun effects. 

These are separate from standard Unity colliders. Contacts are broken down into senders and receivers. Senders simply exist to be detected. Receivers detect senders and then update parameters accordingly.

The amount of contacts on your avatar affect its [performance rank](/avatars/avatar-performance-ranking-system#pc-limits).

## VRCContactSender
The Contact Sender component defines a volume of space that will send a Contact signal upon contact with a Contact Receiver.
[IMAGE: contacts-59b6e82-2022-04-19_11-53-01_Unity.png]
- `Root Transform` - Transform where this contact is placed. If empty, we use this game object's transform.

### Shape
This section contains settings that define the shape of the ContactSender.
- `Shape Type` - Type of collision shape used by this contact. You can choose between Sphere and Capsule.
- `Radius` - Size of the collider extending from its origin.
- `Height` - Height of the capsule along the chosen axis.
- `Position` - Position offset from the root transform.
- `Rotation` - Rotation offset from the root transform.

### Filtering
This section contains settings allowing you to adjust and define how this ContactSender will interact with  [ContactReceivers](/avatars/avatar-dynamics/contacts/#vrccontactreceiver).

- `Collision Tags` - List of strings that specify what it can affect/be affected by. For a successful collision to occur, both the sender and receiver need at least one matching pair of strings. Collision tags are case sensitive.

As an example, the tags below will cause the Sender to send a contact signal when they come into contact with the default Head [ContactReceiver](/avatars/avatar-dynamics/contacts/#vrccontactreceiver) or any custom [ContactReceiver](/avatars/avatar-dynamics/contacts/#vrccontactreceiver) with the tag `Face`-- note the capital F!
[IMAGE: contacts-de34d55-2022-04-19_11-53-34_NVIDIA_Share.png]
### Standard Colliders
A set of "Standard Colliders" are defined in the Avatar Descriptor, in a new section called “Colliders”. This section lets you define a number of standard colliders that exist on every avatar. These will be setup automatically if you don’t touch this, but they may also be tweaked to exactly fit your avatar. These colliders do not affect the performance rating.

- Head
- Torso
- Hands L/R
- Feet L/R
- Fingers L/R
  - Index
  - Middle
  - Ring
  - Little

These colliders act primarily as Contact Senders that other people can detect with their avatars. However, the finger and hand colliders are also used to create global [PhysBone](/avatars/avatar-dynamics/physbones) Colliders that can be used to affect other people’s PhysBones.

## VRCContactReceiver
The Contact Receiver component defines a volume of space that will receive a Contact signal upon contact with a Contact Sender. It will then set an [Animator Parameter](/avatars/animator-parameters) in a certain way, as defined by the user.
[IMAGE: contacts-6f84ac4-2022-04-19_11-57-25_NVIDIA_Share.png]
- `Root Transform` - Transform where this contact is placed. If empty, we use this game object's transform.

### Shape
This section contains settings that define the shape of the ContactReceiver.

- `Shape Type` - Type of collision shape used by this contact.
- `Radius` - Size of the collider extending from its origin.
- `Height` - Height of the capsule along the chosen axis.
- `Position` - Position offset from the root transform.
- `Rotation` - Rotation offset from the root transform.
- `Collision Tags` - List of strings that specify what it can affect/be affected by. For a successful collision to occur, both the sender and receiver need at least one matching pair of strings. Collision tags are case sensitive.

### Filtering
This section contains settings allowing you to adjust and define how this ContactReceiver will interact with  [ContactSenders](/avatars/avatar-dynamics/contacts/#vrccontactsender).

- `Allow Self` - Allow this contact to be affected by yourself.
- `Allow Others` - Allow this contact to be affected by other people.
- `Local Only` - Limit this contact to only work on the local client. If enabled, the contact doesn't reduce your avatar's [performance rank](/avatars/avatar-performance-ranking-system).
- `Collision Tags` - List of strings that specify what it can affect/be affected by. For a successful collision to occur, both the sender and receiver need at least one matching pair of strings. Collision tags are case sensitive.

### Receiver
This section contains settings defining what the Receiver does when it gets a signal.

`Receiver Type` defines the behavior of the parameter setting when a signal is received.
- `Constant` - Informs you when any contacts are present. Resets when no contact is detected. Ideally, use a bool parameter here. Sets `1.0` for a Float, `True` for a Bool, and `1` for an Int.
- `OnEnter` - Informs you the frame a contact is detected. Resets immediately the next frame. Ideally, use a bool parameter here. Sets `1.0` for a Float, `True` for a Bool, and `1` for an Int. Can optionally have a `Min Velocity` defined.
- `Proximity` - Gives you a Float value of `0.0-1.0` depending how close a contact is to the trigger's center. This is calculated as the closest point of the sender onto the receiver. You must use a Float. If multiple contacts are detected, it will give you the closest. 

:::note
If you want to have a more precise measurement of proximity, you need to adjust the Sender's radius to be very small.
:::

- `Parameter` - The parameter updated on the animation controller. This parameter DOES NOT need to be defined on the synced Avatar Parameter list. The parameter can be a Float, Bool, or Int, depending on the Receiver Type used.
- `Value` - Value the parameter is updated to when a collision is detected. Parameter will reset to zero when no collisions are present.
- `Min Velocity` - Minimum velocity needed from an incoming collider to affect this trigger, only active in `OnEnter` type.


---

## Document: debugging-avatar-dynamics.md

Path: /avatars/avatar-dynamics/debugging-avatar-dynamics.md
# Debugging Avatar Components

As Avatar Components can get fairly complex, it’s understandably easy to make a mistake while building your avatar. To help with both testing and debugging problems, we’ve provided users with a few tools to help make the process easier.

### In Game Debugging

:::info

In the video below, "Avatar Dynamics" refers to PhysBones and Contacts. Over time, VRChat added more features to avatars, and the term "Avatar Dynamics" is used less often now.

:::

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/8hqDquZWvhY?si=Mp7pM80fCYZPei81" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Using the Action Menu, you can use the Avatar Overlay option to show visual representations of both [PhysBones](/avatars/avatar-dynamics/physbones) and [Contacts](/avatars/avatar-dynamics/contacts) live in game. These are useful for seeing exactly what is happening, or if objects have been set up properly.

### In-Editor Debugging
Both [PhysBones](/avatars/avatar-dynamics/physbones) and [Contacts](/avatars/avatar-dynamics/contacts) run in the editor as they would in VRChat. By entering Play mode you can simulate these systems and see how your avatar will react without needing to upload it.

You can test [Constraints](/avatars/avatar-dynamics/constraints) in the editor in both Play mode and Edit mode. If you prefer, you can stop constraints running in Edit mode via the SDK Control Panel (VRChat SDK > Show Control Panel > Settings > Execute VRChat Constraints in Edit Mode).

If you add an Animator Controller to your avatar's Animator component before entering Play mode, the parameters on your avatar will be updated just like in VRChat.

Additionally, even if no animation controller is set up, you can still look at each component and see the values they would be giving for each parameter.

---

## Document: index.md

Path: /avatars/avatar-dynamics/index.md
---
sidebar_position: 0
---

# Avatar Components

VRChat's Avatars SDK contains a suite of features to create fun and exciting interactions between avatars.

- [PhysBones](/avatars/avatar-dynamics/physbones) allows bones to be affected by physics or by other players.
- [Contacts](/avatars/avatar-dynamics/contacts) can detect collisions to trigger animations or effects.
- [Constraints](/avatars/avatar-dynamics/constraints) copies the movement of bones on your avatar.
- [Head Chop](/avatars/avatar-dynamics/vrc-headchop) allows you to hide or show bones from your first-person view.

PhysBones and Contacts are governed by the [Permissions and Settings](https://docs.vrchat.com/docs/permissions-and-settings) system, which gives you complete control over who can interact with you.

Learn more about PhysBones and Contacts by trying out the SDK's example avatar ("VRChat SDK" > "Samples" > "Avatar Dynamics Robot Avatar").

---

## Document: physbones.md

Path: /avatars/avatar-dynamics/physbones.md
# Physbones

PhysBones is a set of components that lets you add secondary motion to avatars, permitting you to add motion to things like hair, tails, ears, clothing, and more! Using these well will make your avatar seem more dynamic and real.

PhysBones is a replacement for Dynamic Bones. While both systems share a lot of concepts, there are some major differences with PhysBones, so not all avatars may directly translate over to VRChat’s system.

An example of how to use Physbones can be found in the SDK under `VRCSDK\Examples3\Dynamics\Robot Avatar`.

## VRCPhysBone

Defines a chain of bones to be animated with PhysBones. These can be used to simulate soft-body and secondary motion like hair, tails, floppy ears, and more! It has many configuration options, and can be set up in many ways.

Additionally, PhysBones can be interacted with by you and other people! If you've given the other user permission, other people can grab PhysBones set up on your avatar, and pull the Trigger while holding the PhysBone to "Pose" it and hold it in position. You can also disable this in configuration to not allow posing, not allow grabbing, or allow no collisions at all. 

Although not designed as such, PhysBones also serves as a reasonable cloth substitute until such time that we implement our own Cloth component.

[IMAGE: Image]

### Versions

You can now select the version of VRCPhysBone component you would like to use directly on the component.  By default the latest version will be chosen when creating a new component.  Existing avatars will continue to use their previous version unless manually updated and re-uploaded.

Version 1.0:

- The base version of the VRCPhysBone component.

Version 1.1:

- Squishy Bones update, allowing for bones to squish and length to be affected by motion.
- Gravity now acts as a ratio of how far the bones will rotate when at rest.  A positive Pull is required for bones to move in the direction of gravity.
- Stiffness now acts as a ratio which keeps a bone in it's previous orientation.

### Transforms

`Root Transform` - The transform where this component begins. If left blank, we assume we start at this game object.  
`Ignore Transforms` - List of ignored transforms that shouldn't be affected by this component. Ignored transforms automatically include any of that transform's children.  
`Endpoint Position` - Vector used to create additional bones at each endpoint of the chain. Only used if the value is non-zero. Usually you'll want to increase this along +Y, which points "up" the bone.  
`Multi-Child Type` - Behavior of the root bone when multiple bone chains exist. This has three modes:

 If set to **Ignore**, the root bone will not move, and will ignore physics. Useful for things like hair,   since you can use one Physbone component on the root to affect all of the hair bones!

 If set to **First**, the root bone will form one continuous chain with the first bone chain in the hierarchy. Every other chain will still work, but they will start from the first bone in each respective chain rather than the root like the first chain.

 If set to **Average**, the motion of the root bone will be the average of all of the other chains. This means that the base of each chain will be able to move. 

:::caution

If you are using a single root bone, or a single root bone with several children (but no grandchildren), you **must** define an endpoint position!

For example, if you put the PhysBone component on any of the `RootBone`s below, you **must** define an **Endpoint Position** in order for PhysBones to work. This is different from Dynamic Bones!
 
Single Bone 
- `RootBone`

Multiple Children, Single Root

 - `RootBone`
 - `ChildBone1`
 - `ChildBone2`
 - `ChildBone3`
 - `ChildBone4`
 
You can also address this by adding "end bones" after each `ChildBone`, but that involves editing the armature.

:::

### Forces

**Integration Type** defines the type of math used to simulate the motion of any transform affected by this component. Depending on which you choose, your options available in the Forces section will change. You can choose between two:

- `Simplified` is a more stable method that feels a bit slower and less reactive to external impulses and forces, but is easier to configure.
- `Advanced` is less stable, but allows more complicated configurations, and tends to be more reactive to external impulses and forces.  
  With default settings, both of these modes act fairly similarly, but adjusting the settings and testing them out will quickly reveal how they differ.

:::info

Most (if not all) of the options below allow for Curves by pressing the C button next to the slider. Curves let you adjust the value over the length of the bone chain, and allow for VERY complicated setups within bone chains!

In fact, most PhysBones settings allow for the use of Curves! Learn how to use them and your PhysBones will look amazing!

:::

[IMAGE: physbones-054e326-2022-04-19_11-32-12_Unity.png]

`Pull` - Amount of force used to return bones to their rest position.  
`Spring` - Amount bones will wobble when trying to reach their rest position. Only available in Simplified Integration Type.  
`Momentum` - The amount bones will wobble when trying to reach their rest position. Only available in Advanced Integration Type. Despite the description being the same, the effect is slightly different than Spring.  
`Stiffness` - The amount bones will try to stay at their resting position. Only available in Advanced Integration Type.  
`Gravity` - Amount of gravity applied to bones. Positive value pulls bones down, negative pulls upwards.  
`Gravity Falloff` - Only available if Gravity is non-zero. It controls how much Gravity is removed while in the rest position. A value of 1.0 means that Gravity will not affect the bone while in rest position at all. This allows you to have the effects of gravity when the bone is rotated off the initial position without affecting the bone's rest state.

One way to use the Gravity Falloff parameter is that if your hair is modeled as already being in the pose you want when standing up normally, you can use 1.0 gravity falloff. That way gravity won't affect you when you're just standing there, and your hair will rest in its modeled position. If your hair is modeled 45 degrees straight out and you want it to be affected by gravity enough to have a nice curve (but not completely straight out or completely straight down), the slider allows you to fiddle with it and use like 0.5-0.8 to only have a fraction of gravity at rest pose.

`Immobile Type` changes how `Immobile` works. 

 If set to **All Motion**, `Immobile` reduces any motion as calculated from the root transform's parent. This is the **default mode** for new PhysBones and converted Dynamic Bones. In this mode all PhysBone movement in either scene-space or playspace will be dampened by the `Immobile` factor.

If set to **World (Experimental)**, `Immobile` negates only positional movement from the reference of the scene root transform.  Motion via animation or IK still affects the bones normally. _This mode may change in the future!_

This means that moving around in your playspace will still affect your PhysBones' movement as normal, but locomoting (pushing on your joystick to move) will have its movement dampened by the `Immobile` factor.

### Limits

Setting Limits allows you to limit the amount that a PhysBone chain can move. This is useful when you don't want hair to clip into your head, and is **far** more performant than a collider!

Additionally, when configuring options for Limits, a visualization of those limits will appear in the Scene view when you have the PhysBone chain selected. These can be extremely helpful when fine-tuning Limits!

`Limit Type` has several modes. All of them allow for the adjustment of `Rotation` in terms of `Pitch`, `Yaw`, and `Roll`-- alternately, along the X, Y, and Z axes respectively.

#### None

`None` means no limit is enabled on this bone chain. There are no configuration options.

#### Angle

[IMAGE: physbones-b7abe1f-2022-04-19_11-49-26_Unity.png]

`Angle` means the bone chain will be limited to some `Max Angle`, centered on an axis as defined by `Rotation`. This is visualized as a Cone in the Scene view.

#### Hinge

[IMAGE: physbones-b7723cc-2022-04-19_11-50-04_Unity.png]

`Hinge` means that the bone chain will be limited to some `Max Angle` along the plane defined by the `Rotation`. This is visualized as a slice of a circle, similar to a pizza or a pie.

#### Polar

[IMAGE: physbones-824db3c-2022-04-19_11-51-22_Unity.gif]

`Polar` is a bit more complicated. If you take a `Hinge` and sweep it across `Yaw` by some amount, you get a segment of a sphere in `Polar` coordinates. You can configure `Max Pitch` and `Max Yaw` to adjust the size of the segment, and use `Rotation` to define where that segment is located on the sphere. The visualization for `Polar` is especially helpful.

Don't overuse Polar limits, as they have a non-zero performance cost. Using a huge amount (handwaving: more than 64) will probably cause some issues. If your `Max Pitch` and `Max Yaw` values are similar or the same, an `Angle` limit will suffice and costs less performance-wise.

### Collision

`Radius` - Collision radius around each bone in meters. Used for both collision and grabbing.  
`Allow Collision` - Allows collision with colliders other than the ones specified on this component. Currently the only other colliders are each player's hands and fingers as defined by their avatar.  
`Colliders` - List of colliders that specifically collide with these bones.

### Stretch & Squish

`Stretch Motion` - The amount motion will affect the stretch/squish of the bones.  A value of zero means bones will only stretch/squish as a result of grabbing or collisions.  
`Max Stretch` - Maximum amount the bones can stretch.  This value is a multiple of the original bone length. [Note: Maximum Bounds](/avatars/avatar-dynamics/physbones#maximum-bounds)  
`Max Squish` - Maximum amount the bones can shrink.  This value is a multiple of the original bone length.

### Grab & Pose

`Allow Grabbing` - Allows players to grab the bones.  
`Allow Posing` - Allows players to pose the bones after grabbing.  
`Grab Movement` - Controls how grabbed bones move. A value of zero results in bones using pull & spring to reach the grabbed position. A value of one results in bones immediately moving to the grabbed position.  
`Snap To Hand` - When a bone is grabbed it will snap to the bone grabbing it.

### Options

`Parameter` - Prefix used to provide multiple parameters to the avatar controller. In the following items, setting Parameter to `Tail` would replace `{parameter}` with `Tail`

`{parameter}_IsGrabbed`  
 [Bool] Whether the bones currently being grabbed

`{parameter}_IsPosed`  
 [Bool] Whether the bones been posed after being grabbed

`{parameter}_Angle`  
[Float] Range of 0.0-1.0. Normalized angle between the end bone's current position and its original rest position, with a range of 0-180 degrees mapping to a parameter range of 0-1. In other words, if you rotate a bone to completely opposite its start direction, this parameter has a value of 1.0.

`{parameter}_Stretch`  
[Float] Range of 0.0-1.0. How close the bones are to their maximum stretch length.

`{parameter}_Squish`  
[Float] Range of 0.0-1.0. How close the bones are to their maximum squish length.

`Is Animated` - Allows bone transforms to be animated. Each frame bone rest position will be updated according to what was animated. This must be enabled in order for any bone in the PhysBone chain (Root bone included!) to respect animations applied to it.

`Reset When Disabled` - When this component becomes disabled, the bones will automatically reset to their default position.

### Important Notes, Usage Tips, etc

**Do not have a Constraint and a PhysBone component affecting the same game object**, as this causes execution order issues.

Apply the Constraint to the parent game object instead. You can still have the source transform of the Constraint set to the original game object.

:::caution Quest limitations 

**PhysBones have a hard limit on the Meta Quest.** This is done to prevent a reduction in performance on the Meta Quest devices, which are often already low on CPU resources. 

You can view those limits as the Very Poor limits for Quest described in the [Minimum Displayed Performance Rank](/avatars/avatar-performance-ranking-system#mobile-limits) documentation.

:::

#### Per-Component Limitations

**A single PhysBone component cannot affect more than 256 transforms at a time.** This counts the root bone as well as all children. _This also affects Dynamic Bone conversions!_ 

However, you should aim not to have that many transforms to animate in the first place. Try merging bones in the chain upward to their immediate parents. Community-created tools like Cat's Blender Plugin can do this for you.

#### Animating Properties

PhysBone properties like Spring, Pull, Stiffness, etc are set at initialization and **cannot be animated**.

However, if you animate a property of a PhysBone component and then animate the component off and then on, you _may_ get the behavior you want. Be aware that this is not a supported method of animating these properties, and will not be supported in future changes. (In other words, it might break. If it does, we're not going to try to fix it.)

#### Humanoid Bones

**Do not set Humanoid bones as PhysBone Root bones.** In other words, do not set Hip, Spine, Chest, Upper Chest, Neck, Head, or any of the limb bones as Roots. This will cause major issues.

Instead, duplicate the bone you want to use as root and re-parent all the children bones you want to animate to that new duplicate root. This should be done in Blender. Community-created tools like Cat's Blender Plugin can do this for you.

#### PhysBone Rotation

Unlike Dynamic Bones, **the root bone of a PhysBone chain is permitted to rotate.** It can't translate, though. This can have some consequences with certain setups-- try things out on your own to see how it behaves.

#### PhysBone AV3 Parameters

When affecting parameters, **there is no need to use Synced Parameters as defined by the `VRCExpressionParameters` object**. These parameters are already updated on both the local and remote machines, as both will be running PhysBones.

#### PhysBone Immobile Behavior

Dynamic Bones bases its `Inert` value from where the component is placed, not the root transform. This is probably a Dynamic Bones bug. As such, PhysBones bases its `Immobile` value from the root transform. This may affect behavior in some cases.

### Optimal Component Usage

Because of the multi-threaded nature of PhysBones, it isn't always the most efficient to put all bones into a single chain. Multiple components allows us to break up the work across threads. However, you should still strive to have fewer components... but it's not as bad to have a few on your avatar as it was with Dynamic Bones. 

If you _really_ need a number, you should consider splitting sets of chains when you're getting over 128 transforms affected by a single component. If you have a dress with 256 bones and it splits at a root, splitting it into two or three components will work. 

However, if you're just dealing with something on the order of 32 bones...  don't worry about it. As you can probably tell, these aren't strict rules! We'll likely introduce some soft warnings later on when something looks like it should be set up a different way.

### Maximum Bounds

Each VRCPhysBone component has a bounding box that grows and shrinks as bones move around. These bounding boxes aid the collision detection for players touching and grabbing PhysBones. For efficiency, bounding boxes are forced to a maximum of 10×10×10 meters. PhysBones can go outside of this range and continue to work as expected. However, players may be unable to touch or grab those bones depending on their location.

The bounding box only accounts for bones with collision and a radius greater than zero. In situations where you want to provide extremely long stretching, as long as bones with collision exist past the stretching point, you can avoid hitting this maximum bounds limit.

## VRCPhysBoneCollider

Defines a collider that will affect PhysBones that are configured correctly.

[IMAGE: Image]

`Root Transform` - Transform where this collider is placed. If empty, we use this game object's transform.  
`Shape Type` - Type of collision shape used by this collider. You can choose between a Sphere, Capsule, or Plane collider.  
`Radius` - Size of the collider extending from its origin.  
`Height` - Height of the capsule along the Y axis.  
`Position` - Position offset from the root transform.  
`Rotation` - Rotation offset from the root transform.  
`Inside Bounds` - When enabled, this collider will contain bones within its bounds instead of keeping them out.  
`Bones As Sphere` - When enabled, this collider will treat PhysBone collision radii as spheres centered on the bone's position rather than capsules running the length of the bone.

### Standard Colliders

A set of "Standard Colliders" are defined in the Avatar Descriptor, in a new section called “Colliders”. This section lets you define a number of standard colliders that exist on every avatar. These will be setup automatically if you don’t touch this, but they may also be tweaked to exactly fit your avatar. These colliders do not affect the performance rating.

- Head
- Torso
- Hands L/R
- Feet L/R
- Fingers L/R
  - Index
  - Middle
  - Ring
  - Little

These colliders act primarily as [Contact](/avatars/avatar-dynamics/contacts) Senders that other people can detect with their avatars. However, the finger and hand colliders are also used to create global [PhysBone](/avatars/avatar-dynamics/physbones) Colliders that can be used to affect other people’s PhysBones.

## Automatic Dynamic Bone Conversion

By default, the client will automatically convert Dynamic Bones over to PhysBones. This is done to increase overall performance and is also necessary for interactions between avatars. If desired, you can toggle this off in the Performance Options section of the Main Menu, but you will lose the performance gains and the ability for others to interact with you.

By default, Dynamic Bone conversions use Advanced mode, as we're able to more precisely match DB behavior with the Advanced integration method. Additionally, DB conversions use Ignore for the Multi-Child type. This may cause issues with some edge-case DB setups, but using First or Average causes unwanted behavior in almost all cases during conversion.

Turning off the conversion means you will not have any interaction with avatar bones that are driven by Dynamic Bones.  However, avatars using PhysBones and Contacts natively will not be affected.

**It is important to note that Dynamic Bones and PhysBones are not identical.** The in-program conversion process is not perfect, and we intend to update it more over time. However, keep in mind: the conversion process will never be perfect! The goal of the automatic conversion is to have most setups working decently well and not breaking, not to perfectly replicate behavior. _It is expected that all users will gradually transition to using PhysBones provided they want their avatars to be rendered accurately and future proof._

### Manual Dynamic Bone Conversion

You can choose to use the SDK to convert your avatar from Dynamic Bones to PhysBones. 

This process deletes the previous Dynamic Bone components from your avatar and can not be easily reversed. As a result, make a backup of your avatar before attempting this conversion.

You can access this tool in the SDK by looking at the Build Control Panel, or by accessing it in the Unity menu under `VRChat SDK/Utilities/Convert DynamicBones to PhysBones`. You must select the avatar beforehand for this to work.

### Unmigrated Dynamic Bone Components

Some features and behaviors in Dynamic Bones do not exist in PhysBones, and will not migrate.

`Force` - Dynamic Bone `Gravity` and `Force` values in the X or Z directions are ignored as they have no equivalent in PhysBones.

### Eventual Dynamic Bone Deprecation

Dynamic Bones will eventually be completely removed from VRChat. At that time, all older avatars still using Dynamic Bones will use the automatic conversion.

At a later time, we will give a deprecation date with _plenty_ of time to allow for avatar authors to convert what they want to convert


---

## Document: vrc-headchop.md

Path: /avatars/avatar-dynamics/vrc-headchop.md
# Head Chop

When wearing an avatar, VRChat automatically "chops off" the avatar's head bone by setting its transform scale to almost 0. This stops the head from clipping into view from the user's first-person perspective. `VRCHeadChop` is an optional avatar component that controls which specific bones are scaled down for head chopping, allowing avatar creators to:
- Keep some parts of the avatar's head visible from first-person, like its hair or nose.
- Hide parts of the avatar from first-person that aren't part of the head, such as a hood.

`VRCHeadChop` only affects how the avatar appears from the perspective of the user wearing it. It doesn't affect what the avatar looks like in mirrors or to other players.

## Component properties
[IMAGE: vrcheadchop-618b6e18-2024-02-06_11-48-10_Unity.png]

| Property |  | Description |
| ---- | ---- | ---- |
| **Target Bones** |  | A list of up to 32 bones to control with this component. Each bone can be configured individually: |
|  | *Transform* | A bone transform. |
|  | *Scale Factor* | Sets the scale to apply to this bone.<br/>If the scale factor is 0, the bone will be completely hidden.<br/>If the scale factor is 1, the bone will be fully visible. (Default) |
|  | *Apply Condition* | Controls under which conditions the scaling should be applied to the transform. <br/>- Always apply (Default)<br/>- VR only<br/>- Non-VR only |
| **Global Scale Factor** |  | Multiplies the scale factor of each target bone. You can generally leave this set to 1 unless you want to scale all of the bones at once.<br/>If the global scale factor is 1, each target bone will use its individual scale factor. (Default)<br/>If the global scale factor is 0, all target bones will have a scale factor of 0. |

:::info Usage tips

- Changing the `VRCHeadChop` settings for a parent bone affects all child bones, too.
- If a child bone has its own `VRCHeadChop` settings, it overrides its parent bone's settings.
- There can be a maximum of 16 `VRCHeadChop` components attached to your avatar. If you exceed this limit, the avatars SDK will display an error.
- The "Lock Hip" [lock type](https://docs.vrchat.com/docs/ik-20-features-and-options#lock-types) may cause your avatar's head to block your view if you use `VRCHeadChop`.

:::

## Basic use

The most common way to use `VRCHeadChop` is to keep your avatar's hair visible. On most avatars, hair bones are children of the avatar's head bone.

1. Add the bones you want to be visible to the "Target Bones" list.
2. Set their scale factor to 1.
3. (Optional) Set "Apply condition" to "VR Only" if you don't want these bones to be visible for non-VR players.

This causes the hair bones to be fully visible from your first-person perspective. The rest of the head and all other child bones are kept hidden.

For example, the sample Avatar Dynamics robot included with the SDK has hair and a pair of animal ears. We can keep those parts of the head visible from first-person while hiding the rest of the head by using the following setup. In this example, we're also setting the apply conditions to "VR Only", so the extra parts only appear when playing in VR.

[IMAGE: vrcheadchop-618b6e18-2024-02-06_11-48-10_Unity.png]

Notice that we don't need to list any of the child transforms of the bones we want to show (for example each individual hair strand) since they'll be shown along with the root bones anyway. It also doesn't matter which transform you add the `VRCHeadChop` component to - all that matters is the list of transforms that you set for it in the inspector.

This has the following result; the hair and ears have been scaled back up so they can be seen from first-person, while the eyes are still scaled away so they don't block your view.

[IMAGE: vrcheadchop-618b6e18-2024-02-06_11-48-10_Unity.png]

You can also set the enabled state of this component using an animator - if the component is disabled, it won't have any effect until it's enabled again. This can used to set up expression toggles that control whether certain parts of the avatar are visible in first-person or not. It's recommended that you do this so players using your avatars have the option of turning off first-person visible features if they want to. The global scale can be controlled with an animator if you want to give finer control over how much the bones get scaled away.

## Alternative uses

It's possible to directly change the scale of the head bone itself by including the head bone in the list. In this case, VRChat will no longer scale the head bone away for you automatically, and will instead use the scaling factor you provide for it. You can then shrink away bones that are children of the head that you *don't* want to see in first-person by setting their scale factors to 0. If you take this approach, you'll most likely want to shrink away the part of the face that the viewpoint is in so the wearer doesn't see the inside of the avatar's head.

One additional way of using this component is to hide things elsewhere on the avatar that shouldn't be visible from first-person. For example, if your avatar has a hood weighted to its head that isn't actually a child of the head bone, you could use this component to hide it in first-person by giving it a scale factor of 0.


---

## Document: avatar-impostors.md

Path: /avatars/avatar-impostors.md
---
title: "Impostors"
slug: "avatar-impostors"
hidden: false
---

# Impostors
## What are Impostors?
Impostors are avatar body doubles, allowing you to see avatars in situations where you would typically see a fallback avatar or robot. They are intended to bridge gaps between different systems/user types in VRChat. For example, if a user’s avatar was only uploaded for Windows, VRChat makes an acceptable impostor for Quest automatically. You can only generate impostors for avatars you own and have uploaded.

Even if you've never uploaded a cross-platform version of your avatar, or if your avatar is "performance blocked" due to its performance rank, other users will still be able to see an impostor of your avatar. Eventually, impostors will be auto-generated, but for now, you create them with a few easy steps. Once you've made an impostor, you can toggle it on and off - when it's off, your fallback avatar will be shown instead.

## How do I create an Impostor?
The first step to creating an impostor is to [create and upload an avatar](/avatars/creating-your-first-avatar).

Once you've uploaded an avatar, creating an impostor for it is easy:

- Log in to the VRChat website.

- Navigate to the info page for the avatar you'd like to impostorize. You can do this by pressing "Avatars", then "My Avatars", then the name and icon of the one you want.

- Click "Generate Impostors", or, if the avatar already has an impostor that you'd like to be updated, "Regenerate Impostors"

- Wait.

- Refresh the page, after some time you should now see that your avatar has impostors for Quest and PC.

[IMAGE: A screnshot of an avatar's page on vrchat.com. It allows avatar creators to (re)generate impostors and see which impostors have already been generated. You can see if impostors have been generated for PC and/or Android. You can also see if the impostor has been customized by the avatar creator.]

:::note

Impostors currently only support [humanoid](https://docs.unity3d.com/Manual/AvatarCreationandSetup.html) avatars. [Generic](https://docs.unity3d.com/Manual/GenericAnimations.html) avatars will be supported in the future.

:::

## Previewing an Impostor
Once you've got your impostor generated, you're probably going to be pretty excited to see how it looks! Well, no worries, we've got you covered!

Once you've logged into VRChat, open the Avatar menu, and click the avatar that you generated an impostor for.

You should notice that the "Features" of the avatar now includes "Impostor". 

[IMAGE: A screenshot of the "Features" section of an avatar in VRChat. It shows an "Imposter" icon, among other features.]


You should also see a new button underneath the avatar model preview, which will allow you to switch between viewing the impostor and the normal avatar for a quick preview.

[IMAGE: A screenshot of an avatar being previewed in the VRChat menu.]
[IMAGE: A screenshot of an avatar's imposter being previewed in the VRChat menu. A toggle near the bottom has been enabled.]

:::note
Impostors that are previewed in the menu may exhibit more artifacts than they would when viewed on another player.
:::

## VRCImpostorSettings

Impostors come out pretty good by default. However, complex avatars may benefit from some customization.

To customize your impostor, add the "VRCImpostorSettings" component to your avatar before uploading it. Changing the settings of this component allows you to change the impostor's appearance. You can add multiple "VRCImpostorSettings" to customize different body parts.

### Resolution Scale

Changes the amount of space on the impostors texture atlas that is dedicated to this body part's texture.
For instance, you can place this script on the head bone and change this value to make the head take up more or less of the texture atlas, increasing or decreasing the overall texture quality.
Note that this may shrink other parts of the body on the atlas if needed. 


_This is relative to the bone that VRCImpostorSettings is placed on._


### Transforms To Ignore
Ignores these transforms when capturing data for the impostor. This will hide them from the final result.

_This is independent of the bone that VRCImpostorSettings is placed on._

### Extra Child Transforms
This is good for things like wings and tails, it will tell the Impostorizer to make a separate sprite for the bone this script is on.

As an example of what not to do - you _could_ put one of these on each finger to turn them into independent sprites. However, since all sprites share a single texture sheet, filling it with things like fingers will cause quality to decrease elsewhere - it's a balancing act.

_This is independent of the bone that VRCImpostorSettings is placed on._

### Re-parent Here
Re-parents another bone to this impostor sprite. This means that it will be impostorized with this body part, and be a part of that sprite.

For instance, if you'd like your wings to be a part of the upper body, you can re-parent the root wing bone to the chest bone during impostorization with this.

_This is relative to the bone that VRCImpostorSettings is placed on._

## When is an impostor visible?
Currently, there are only three ways to see an impostor.

- Avatar Preview (e.g. viewing the impostor on the avatar's details page)
- Performance Blocking (e.g. the avatar's performance rank is "Very Poor" but your [minimum displayed performance rank](https://docs.vrchat.com/docs/vrchat-configuration-window#minimum-displayed-performance-rank) is set to "Medium").
- Platform Mismatch (e.g. the avatar is uploaded for PC, but you're on Android or vice versa)


---

## Document: avatar-optimizing-tips.md

Path: /avatars/avatar-optimizing-tips.md
# Avatar Optimization Tips

:::caution

**This guide is not meant to be the end-all, be-all of avatar optimization!** Optimizing your avatar properly requires pretty wide knowledge of a ton of things. We don't expect everyone to know everything.

However, we try our best to keep this document updated with the most common things people miss, and the most important targets to hit.

If you have input on optimization tips, please use the **Suggest Edits** button in the top right and add your own!
:::
Do you want your avatar to be efficient and be loved by everyone because of all the frames you're saving them? Follow these tips and you should be good!

Any recommended numbers or limits in this document are subject to change at any time. Although some of the descriptions provided below are not precise in a technical manner, this document is intended to assist novice users in learning how to optimize their avatars.

Community-created blender plugins like [Cats](https://catsblenderplugin.xyz/) or [Tuxedo](https://github.com/feilen/tuxedo-blender-plugin) allow users to very easily optimize their models and assist with common VRChat avatar problems. We strongly recommend using tools like this! It makes your job easier, and improves performance for all.

As a sidenote, the SDK's Build Control panel provides numbers of components on avatars to help with optimization.

## Optimize your content for Android/Quest

When developing content for Android, please keep the [Content Limitations](/platforms/android/quest-content-limitations) in mind! For example, avatars don't have access to all shaders and avatar components.

In addition, you should [optimize your content for Android](/platforms/android/quest-content-optimization). This improves your avatar's [performance rank](/avatars/avatar-performance-ranking-system) and allows more players to see your avatar.

## Do not use Dynamic Bones!
Dynamic Bones is a Unity Asset that you can purchase that allows you to define bones on your avatar's rig to move around as if they were hanging. You can also define static forces like gravity which can make hair fall more realistically. 

Dynamic Bones is deprecated and will be removed eventually. Use [PhysBones](/avatars/avatar-dynamics/physbones) instead.

VRChat will automatically convert Dynamic Bones to PhysBones at runtime.

## Do not use Unity Constraints!
[Unity Constraints](https://docs.unity3d.com/Manual/Constraints.html) are components provided by the engine that allow you to change the position, rotation and scale of transforms on your avatar based on one or more other transforms.

The engine's constraints are sorted based on the dependencies between them every frame, which means they can cause significant performance problems when enough of them exist at once. Use [VRChat Constraints](/avatars/avatar-dynamics/constraints) instead, because they're designed to provide better performance in the context of VRChat avatars.

VRChat will automatically convert Unity constraints to VRChat constraints at runtime.

## Limit usage of Cloth
Cloth is a default Unity component that has a similar cost to Dynamic Bones and is more difficult to set up. Limit your use of Cloth heavily, and do not apply it to meshes that have greater than 200 or so vertices.

## Reduce the amount of meshes on your avatar
There's two types of Mesh Renderers that your avatar could have on it-- Static Mesh Renderers and Skinned Mesh Renderers. Static Meshes do not deform. Skinned Meshes, however, usually have rigs (bones) that tell the engine how to move and deform the mesh based on the position of the bones. These Skinned Meshes are significantly more expensive, and you should only have one skinned Mesh Renderer on your avatar. There is very little reason to have more than one-- most of the time, additional items can be built into the original model.

On top of that, each additional mesh on your avatar incurs one or more additional "Draw Calls"-- essentially, time spent by your processor telling your graphics card to draw something on the screen.

Therefore, **VRChat recommends that you have one Skinned Mesh Renderer at maximum, and 3 static mesh renderers at maximum.** Merging meshes together is very simple in Blender, and is shown in the Meshes video below.

Finally, ensure that you're not using an excessive amount of triangles. The SDK will warn you if you're trying to upload a model that exceeds 70,000 triangles for PC or 20,000 on Quest. It is very rare that you need even this many polygons for details-- look into baking a normal map and simplifying your mesh via decimation or retopology.

Creating avatars for the Quest can be more challenging due to the reduced limits. The most effective optimization tends to occur during initial design and avatar creation. In other words, you're going to have problems if you try to take a 120,000 made-for-rendering model and squeeze it into 20,000 polygons. Don't make things harder than they have to be-- find a model that starts low! 20k is quite a large amount of leeway.

Notably if you are using Cats Blender Plugin, it merges meshes automatically when you "Fix Model". **If you seperate meshes by Material or by Loose Parts using Cats to assist with decimation or editing, do not forget to merge the meshes again.** 
<iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F1fco-G2j0Jg%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D1fco-G2j0Jg&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F1fco-G2j0Jg%2Fhqdefault.jpg&key=f2aa6fc3595946d0afc3d76cbbd25dc3&type=text%2Fhtml&schema=youtube" width="854" height="480" scrolling="no" frameborder="0" allow="autoplay; fullscreen" allowfullscreen="true"></iframe>

## Reduce the amount of material slots you use
Each additional material slot is also a draw call, which eats more processor time! If you have a lot of materials (more than 10), look into Texture Atlasing. With Community-created tools, atlasing is exceedingly easy. Check out the Materials video for more details.

As an aside, what is important is the number of **material slots on the Renderer components** in your avatar. If you have the same material in 20 slots, you still technically have 20 "materials". 

This is due to the way that Unity splits meshes into submeshes. What really matters for performance is the number of submeshes created, which Unity creates based on Material slots.

<iframe width="854" height="480" src="https://www.youtube-nocookie.com/embed/5LwRi26RxSQ?si=_TuNCYuWLrsWrVIm" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" allowfullscreen="true"></iframe>

## Watch your VRAM usage!

Even if you use texture atlases, you might end end up using more VRAM than you did before!

Textures eat up VRAM. The higher the resolution of each texture, the more VRAM it consumes. Avoid using several high-resolution textures, or reduce their size by reducing the "Max Size" parameter in [Unity's import settings](https://docs.unity3d.com/Manual/class-TextureImporter.html). 

For example: A 30 MB avatar *can* use 3 GB of VRAM if it uses inefficient high-resolution textures. Don't be fooled by an avatar's download size.

Check out [Poiyomi's Texture Optimization guide](https://www.poiyomi.com/blog/2022-10-17-texture-optimization). It's an excellent and comprehensive guide on how to optimize your avatar's textures.

## Use Optimized Shaders
Some shaders can cause excessive time spent rendering on the GPU. Try to stick with the Unity Standard shaders, or shaders that you know perform well. If you don't know how to tell if a shader is well-optimized, that's fine! Here are some examples-- these certainly aren't all the shaders available, but are all well-made and well-optimized with a variety of features.
* VRChat's SDK includes various shaders optimized for mobile devices, such as 'Standard Lite.'
* [Xiexe's "XSToon" Unity Shaders](https://github.com/Xiexe/Xiexes-Unity-Shaders) (MIT) - A collection of PBR 'Toon' shaders for Unity.
* [Silent's Shaders](https://gitlab.com/s-ilent/SCSS) (MIT) - Shaders for Unity for cel shading, originally based off the discontinued CubedParadox's Flat Lit Toon, featuring a number of handy features.
* [Poiyomi's Toon Shader](https://github.com/poiyomi/PoiyomiToonShader/releases) (MIT) - A very robust, powerful shader with a lot of options. 

### Minimize Excess Shader Passes
Speaking more technically, you want to avoid shaders that have excess shader passes. This incurs additional draw calls. This might be a bit too much for most users to worry about, so if you stick with commonly used and proven community shaders, that should suffice.

### Avoid Tessellation
**You should always avoid using shaders on avatars that use Tessellation.** This is very common in "fur" shaders. [Tessellation](https://en.wikipedia.org/wiki/Tessellation_%28computer_graphics%29) is a method by which your graphics card can take meshes and subdivide them for various effects. However, this effect is **extremely expensive** and will slow down even the most powerful of graphics cards. **Do not use shaders with tessellation effects.** If you want a fur effect, consider looking into shaders that reproduce the effect without tessellation, such as [XSFur](https://xiexe.booth.pm/items/1084711) and [Warren's Fast Fur Shader](https://warrenwolfy.gumroad.com/l/atntv).

### Keywords
You should also avoid shaders that use excessive amounts of shader keywords. This can cause serious and unpredictable issues with rendering your view in VRChat, and will fill your output log with a lot of redundant error messages. There is no need to include excessive shader keywords in your shader, so please only use the ones that are required for the features you are targeting.

#### Clearing Keywords
When you change or upgrade your shader, ensure that you remove old, unused keywords from your materials. Having excessive keywords in use is very bad for performance and optimization. Not only will it cause issues with your own avatar, but it may prevent others from seeing **all shaders** properly.

The VRChat SDK contains a tool to remove keywords from materials on your avatar. This tool can also remove keywords you need, so be careful!

Usually, it is best to check the keywords with this tool-- **if you've got too many keywords, you probably need to find another shader.** Swap to Standard, clear keywords, then swap to your new shader. 

#### Note for Shader Authors
You may want to consider using the keywords reserved by the Standard shader as your own keywords. These are essentially guaranteed to already be reserved, so if you must use keywords, use the ones already defined by Standard and Post Processing v2. Here's a [list of recommended keywords to use](https://pastebin.com/83fQvZ3n).

### Alpha Transparency
Alpha transparency is also another expensive part of shaders-- typically you want to be using Cutout or Opaque modes on shaders. Transparency can be quite expensive, so only use it if you know what you're doing! 

### Measuring Draw Calls
The Unity Profiler can be very useful when judging for how many draw calls you're incurring-- just make sure you turn off shadows on your Directional Light for a level playing field.

## Reduce the amount of bones
Even if you have a bunch of bones sitting in a scarf, skirt, or your hair that you're not using for anything, they can incur additional costs during skinning calls that your GPU has to worry about. If you're not going to use a bone, consider deleting the bone and merging it into the parent bone. If you want to know how to merge the weights of a bone into its parent, check out the video on Dynamic Bones above, which includes a part on bone merging.

## Reduce the emission amount/amount of particle systems
Although particle systems can result in a lot of cool effects, having excessively large amounts of them can cause issues for some PCs. Limit the number of particle systems that you're using, and limit the maximum amount of particles emitting at any one given moment.

There are ways to have particle systems with large numbers of particles and retain performance. If you are interested in this, look into dynamic batching for sprite particles, don't use collision, and ensure the movement of your particles is simplistic.

If you're more technically inclined, you can try looking into Unity's Profiler view to judge how much CPU time your particle simulation is taking. Generally speaking, large transparent particles are worse than a lot of smaller, opaque ones. Unity's Particle System is actually quite optimized and runs quickly *if used well.*

## Limit the number of Lights your avatar uses
Lights on avatars are real-time, and as such, are exceedingly expensive. Adding a light to your avatar means that everything that your Light touches will render with *double* the draw calls. Additional lights multiply the effect. This is obviously *very bad for performance.* Do not use Lights that are always on. Try using an Animation Override to turn a flashlight on and off, or alternately, do not use Lights at all.

If you do use a Light, turn off Shadows for the Light. Shadows on Realtime lights are VERY expensive and often don't look that great on something that moves around.

Particle Systems can be configured to have a light on for a number of particles. *Never do this!* Each particle with a light counts as a real-time light, which is (once again) extremely expensive.

**In total, VRChat recommends that you do not use Lights of any type on avatars at all.** Not only do they adversely affect your own avatar's performance, they multiply performance cost of avatars the light is hitting as well.

## Recommended Software/Plugins
There's a large amount of software available to help you optimize your avatar and make it easier to build avatars. 

For example, check out [Pumkin's Avatar Tools](https://github.com/rurre/PumkinsAvatarTools) (MIT) for the Unity Editor. Among other things, this Editor script allows you to quickly see stats on your avatars. This tool is in beta, and may have bugs-- please report any issues on Pumkin's GitHub.

The following software has not been authored by VRChat. Please read and respect the licensing provided with each individual product.

* [Unity](/sdk/upgrade/current-unity-version) 
* [Blender](https://blender.org)
* [Cats Blender Plugin
](https://github.com/absolute-quantum/cats-blender-plugin)
* [Shotariya's Material Combiner](https://github.com/Grim-es/material-combiner-addon)
* [Pumkin's Avatar Tools](https://github.com/rurre/PumkinsAvatarTools)

---

## Document: avatar-performance-ranking-system.md

Path: /avatars/avatar-performance-ranking-system.md
# Performance Ranks

The Avatar Performance Ranking System allows you to see how much a user's avatar is affecting performance via analysis of the components on that user's avatar. You can also use it on yourself to see how performant your avatar is.

This system is provided to inform users what is likely the most performance-heavy components on their avatars, and offer basic advice on what to look into when optimizing their avatar.

It is also used to drive the [Minimum Displayed Performance Rank](/avatars/avatar-performance-ranking-system#minimum-displayed-performance-rank-on-pc) system, which is a way for users to decide what avatars they wish to show based on their Performance Rank.

**This system is not meant to be an end-all-be-all authority on avatar performance**, but is a good general guide to indicate if an avatar needs a bit more work to be performant.
:::danger Perf Ranks are not the final word!

Although the Performance Rank system does as best as it can to judge the "worst case" scenario of an avatar's performance, there are many ways to have a well-optimized avatar appear as Very Poor, and have a FPS hog rank as Excellent.

For the technically inclined: the Performance Rank system is based on a static analysis of the avatar's properties without any consideration paid to things like animators, shaders, texture resolution, pixel lights, and many more factors. *However*, it tends to provide an excellent litmus test for detecting problematic avatars 95% of the time!
:::

## Short Version
**Aim for Good ranking.** If you can't hit that, **Medium is perfectly fine.** 

Creating avatars is already hard, and creating optimized avatars is even harder. It is a skill that takes a long time to build!

Keep in mind that many events, groups, and locations in VRChat may ask you to change your avatar if you show up in a Very Poor avatar. As such, even if you choose to use a Very Poor avatar in small instances with your friends, make sure you also have one meant for usage in instances with more people.

Your avatar affects everyone else's framerate, so be mindful of how your choices affect other people's experiences. Otherwise, they might see you as your Fallback!
## Performance Ranking Icons
When you open your Quick Menu, you'll see icons appear on top of the nameplates of users. 

The ranks are as follows:

| Icon                                                  | Performance Rank | Description                                                                                                                                                                       |
|-------------------------------------------------------|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [IMAGE: image] | Excellent        | This is as good as you can get! The "Gold Star on the Fridge" rank.                                                                                                               |
| [IMAGE: image]      | Good             | Good enough! A great target to aim for.                                                                                                                                           |
| [IMAGE: image]    | Medium           | Don't let the name fool you, Medium is plenty good. If you're here and don't want to work any farther up, you're fine.                                                            |
| [IMAGE: image]      | Poor             | Could use some work.                                                                                                                                                              |
| [IMAGE: image] | Very Poor        | This avatar has some serious performance problems. Since this rank is unbounded, it is very possible that your performance is suffering as a result of this avatar being visible. |

## Viewing Detailed Avatar Stats
If you click on a user with your Quick Menu open, you'll notice a new **"Show Avatar Stats"** button on the left side, displaying the icon of that user's Performance Rank.


[IMAGE: avatar-perormance-breakdown.gif]

If you click this icon, you can view the detailed **Avatar Stats** of that avatar. You can get to this for your own avatar by going to your Avatar Menu, clicking one of your avatars, and clicking the **Avatar Stats** button in the bottom left of the screen.


[IMAGE: avatar-perormance-breakdown.gif]


When you click the **Avatar Stats** button, you'll get a screen pop up with the details of avatar you're looking at, or your own avatar (if you clicked the button in the Avatar tab).

[IMAGE: avatar-perormance-breakdown.gif]


The color of the text matches the rank that the particular stat "drags" the rank down to.

You'll also see a "before and after" in the form of the "Original" and "Perf Filtered" lines. If you're using the [Minimum Displayed Performance Rank](/avatars/avatar-performance-ranking-system#minimum-displayed-performance-rank-on-pc) system, you can see what the stats were before and after the system removed components. In the case of the Minimum Displayed Performance Rank system blocking an avatar for performance reasons, you'll only see the original stats.

In the example given above, Lights and Particle Systems are disabled due to exceeding the limit defined. Because Particle Systems employ at least one material each, the count of materials from Particle Systems is also subtracted from the pre-filtered avatar. 

You can also see that we link to our **Documentation**, in particular our [Avatar Optimization Tips](/avatars/avatar-optimizing-tips).
## Avatar Performance Ranking Stats
Here is a listing of all of the statistics that the system looks at and their description.

Bolded stats will cause the avatar to be fully blocked if they exceed the Minimum Displayed Performance Rank. If other stats (except for bounds) exceed the Minimum Displayed Performance Rank the avatar will only be partially blocked. The avatar will be shown with any components related to the exceeded stats will be removed. 

For example with the Minimum Displayed Performance Rank set to Poor an avatar with 9 Trail Renderers (Very Poor) will be displayed with all of its Trail Renderers removed. Refer to [Minimum Displayed Performance Rank](/avatars/avatar-performance-ranking-system#minimum-displayed-performance-rank-on-pc) for more information.

| Avatar Quality                     | Quality Description                                                                                                                                                                                                                                                                                                                          |
| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Triangles                          | The triangle count of the model in question. (In the past, this was incorrectly referred to as "Polygons.")                                                                                                                                                                                                                                  |
| Bounds Size                        | The total size of the avatar. If this is really huge, that user probably has a large animation on the avatar that isn't showing all the time.<br/>Important note: Bounds Size will not cause the avatar to be blocked, even if it is below the "Minimum Displayed Performance Rank" setting.                                                 |
| Texture Memory                     | The amount of memory estimated to be in use by the avatar's textures. These textures occupy space in both system RAM and in the video card's memory.                                                                                                                                                                                         |
| Skinned Meshes                     | The number of Skinned Mesh Renderer components on the avatar.                                                                                                                                                                                                                                                                                |
| Basic Meshes                       | The number of (non-skinned) Mesh Renderer components on the avatar.                                                                                                                                                                                                                                                                          |
| Material Slots                     | The number of material slots on the avatar. Material slots are the slots on the mesh where you fit materials in. This is what counts toward Submesh creation, which incurs further draw calls. Keep in mind that Particle Systems will use one material slot, Particle System with trails use two, and Line Renderers use one material slot. |
| PhysBones Components               | The number of PhysBone components on the avatar.                                                                                                                                                                                                                                                                                             |
| PhysBones Affected Transforms      | The total number of transforms affected by PhysBones components on the avatar.                                                                                                                                                                                                                                                               |
| PhysBones Colliders                | The number of PhysBone collider scripts on the avatar.                                                                                                                                                                                                                                                                                       |
| PhysBones Collision Check Count    | The sum of how many PhysBone transforms each collider can affect. This can count transforms twice or more, because a single transform can be affected by multiple colliders.                                                                                                                                                                 |
| Avatar Dynamics Contacts           | The number of Avatar Dynamics Contacts on the avatar. Does not count [receivers](/avatars/avatar-dynamics/contacts/#vrccontactreceiver) with [filtering](/avatars/avatar-dynamics/contacts/#filtering-1) set to "Local Only."                                                                                                                                                                                                              |
| Constraint Count                   | The total number of VRChat constraints and Unity constraints on the avatar. [Click here for more detailed info.](/avatars/avatar-dynamics/constraints#performance) |
| Constraint Depth                   | The deepest chain of dependencies across all constraints on the avatar. [Click here for more detailed info.](/avatars/avatar-dynamics/constraints#performance) |
| Animators                          | The number of Animators on the avatar. Important note: This will always be at least 1 due to the root animator being counted. This means that for the Excellent ranking, you can have no additional animators.                                                                                                                               |
| Bones                              | The number of Bones in the avatar's rig.                                                                                                                                                                                                                                                                                                     |
| Lights                             | The number of Light components on the avatar.                                                                                                                                                                                                                                                                                                |
| Particle Systems                   | The number of Particle System components on the avatar.                                                                                                                                                                                                                                                                                      |
| Total Particles Active             | The sum of maxParticles across all particle systems on the avatar.                                                                                                                                                                                                                                                                           |
| Mesh Particle Active Polys         | The total number of triangles of Mesh Particles emitted by Particle Systems that are active. In other words, maxEmission * meshParticleVerts.                                                                                                                                                                                                |
| Particle Trails Enabled            | If any Particle Systems on the avatar have Particle Trails enabled, this will be True.                                                                                                                                                                                                                                                       |
| Particle Collision Enabled         | If any Particle Systems on the avatar have Particle Collision enabled, this will be True.                                                                                                                                                                                                                                                    |
| Trail Renderers                    | The number of Trail Renderers on the avatar.                                                                                                                                                                                                                                                                                                 |
| Line Renderers                     | The number of Line Renderers on the avatar.                                                                                                                                                                                                                                                                                                  |
| Cloths                             | The total number of Cloth components on the avatar.                                                                                                                                                                                                                                                                                          |

## Avatar Performance Ranks - Value Maximums per Rank
Below, you'll find the limits for each of the Performance Ranks. If you go above these numbers for any category, you'll be bumped into the next rank.

For example (on PC), if your avatar has 2 Skinned Meshes, your avatar will be ranked as Good, as that exceeds the rating for Excellent, but does not exceed the rating for Good. 
:::caution All GameObjects and Components are counted!

All GameObjects and Components, **including those that are currently disabled**, count towards the Avatar Performance Rank.
:::

:::caution Mesh Read/Write Disabled

If you disable Mesh Read/Write on **any** mesh on the avatar (including particle systems), the "Triangles" count will read "Mesh Read/Write Disabled" and the avatar's Performance Rank will be immediately downgraded to "Very Poor" regardless of the actual triangle count on the avatar.

The SDK warns you of this and will require that you fix it before you upload.
:::

## PC Limits
| Avatar Quality                                                         | Excellent          | Good         | Medium       | Poor          |
|------------------------------------------------------------------------| ------------------ | ------------ | ------------ | ------------ |
| Triangles                                                              | 32,000             | 70,000       | 70,000       | 70,000       |
| Bounds Size[^1]                                                        | 2.5m x 2.5m x 2.5m | 4m x 4m x 4m | 5m x 6m x 5m | 5m x 6m x 5m |
| Texture Memory                                                         | 40 MB              | 75 MB        | 110 MB       | 150 MB       |
| Skinned Meshes                                                         | 1                  | 2            | 8            | 16           |
| Basic Meshes                                                           | 4                  | 8            | 16           | 24           |
| Material Slots                                                         | 4                  | 8            | 16           | 32           |
| [PhysBones](/avatars/avatar-dynamics/physbones) Components             | 4                  | 8            | 16           | 32           |
| [PhysBones](/avatars/avatar-dynamics/physbones) Affected Transforms    | 16                 | 64           | 128          | 256          |
| [PhysBones](/avatars/avatar-dynamics/physbones) Colliders              | 4                  | 8            | 16           | 32           |
| [PhysBones](/avatars/avatar-dynamics/physbones) Collision Check Count  | 32                 | 128          | 256          | 512          |
| Avatar Dynamics [Contacts](/avatars/avatar-dynamics/contacts)          | 8                  | 16           | 24           | 32           |
| [Constraint](/avatars/avatar-dynamics/constraints) Count               | 100                | 250          | 300          | 350          |
| [Constraint](/avatars/avatar-dynamics/constraints) Depth               | 20                 | 50           | 80           | 100          |
| Animators                                                              | 1                  | 4            | 16           | 32           |
| Bones                                                                  | 75                 | 150          | 256          | 400          |
| Lights                                                                 | 0                  | 0            | 0            | 1            |
| Particle Systems                                                       | 0                  | 4            | 8            | 16           |
| Total Particles Active                                                 | 0                  | 300          | 1000         | 2500         |
| Mesh Particle Active Polys                                             | 0                  | 1000         | 2000         | 5000         |
| Particle Trails Enabled                                                | False              | False        | True         | True         |
| Particle Collision Enabled                                             | False              | False        | True         | True         |
| Trail Renderers                                                        | 1                  | 2            | 4            | 8            |
| Line Renderers                                                         | 1                  | 2            | 4            | 8            |
| Cloths                                                                 | 0                  | 1            | 1            | 1            |
| Total Cloth Vertices                                                   | 0                  | 50           | 100          | 200          |
| Physics Colliders                                                      | 0                  | 1            | 8            | 8            |
| Physics Rigidbodies                                                    | 0                  | 1            | 8            | 8            |
| Audio Sources                                                          | 1                  | 4            | 8            | 8            |

The table below describes the requirements for PC avatars to receive a certain performance rank:


### PC Default Performance Rank Blocking

On PC, the default Minimum Displayed Performance Rank level is "Very Poor". This means that users can see most avatars by default. If you a user enables the [Minimum Displayed Performance Rank](/avatars/avatar-performance-ranking-system#minimum-displayed-performance-rank-on-pc) system, they can choose to hide avatars with poor performance.

However, if your avatar is extremely unoptimized, VRChat may prevent you from using it. You can fix this my improving its performance rank, ensuring that it doesn't exceed VRChat's [avatar size limits](/avatars/avatar-size-limits), and then reuploading the avatar.

## Mobile Limits

VRChat on Android and iOS (phones, tablets, and Meta Quest) has stricter limits than VRChat on PC.

The table below describes the requirements for mobile avatar to receive a certain performance rank:

| Avatar Quality                                                            | Excellent          | Good         | Medium       | Poor         |
| ------------------------------------------------------------------------- | ------------------ | ------------ | ------------ | ------------ |
| Triangles                                                                 | 7,500              | 10,000       | 15,000       | 20,000       |
| Bounds Size[^1]                                                           | 2.5m x 2.5m x 2.5m | 4m x 4m x 4m | 5m x 6m x 5m | 5m x 6m x 5m |
| Texture Memory                                                            | 10 MB              | 18 MB        | 25 MB        | 40 MB        |
| Skinned Meshes                                                            | 1                  | 1            | 2            | 2            |
| Basic Meshes                                                              | 1                  | 1            | 2            | 2            |
| Material Slots                                                            | 1                  | 1            | 2            | 4            |
| Animators                                                                 | 1                  | 1            | 1            | 2            |
| Bones                                                                     | 75                 | 90           | 150          | 150          |
| [PhysBones](/avatars/avatar-dynamics/physbones) Components[^2]            | 0                  | 4            | 6            | 8            |
| [PhysBones](/avatars/avatar-dynamics/physbones) Affected Transforms[^2]   | 0                  | 16           | 32           | 64           |
| [PhysBones](/avatars/avatar-dynamics/physbones) Colliders[^2]             | 0                  | 4            | 8            | 16           |
| [PhysBones](/avatars/avatar-dynamics/physbones) Collision Check Count[^2] | 0                  | 16           | 32           | 64           |
| Avatar Dynamics [Contacts](/avatars/avatar-dynamics/contacts)[^2]         | 2                  | 4            | 8            | 16           |
| [Constraint](/avatars/avatar-dynamics/constraints) Count[^2]              | 30                 | 60           | 120          | 150          |
| [Constraint](/avatars/avatar-dynamics/constraints) Depth[^2]              | 5                  | 15           | 35           | 50           |
| Particle Systems                                                          | 0                  | 0            | 0            | 2            |
| Total Particles Active                                                    | 0                  | 0            | 0            | 200          |
| Mesh Particle Active Polys                                                | 0                  | 0            | 0            | 400          |
| Particle Trails Enabled                                                   | False              | False        | False        | True         |
| Particle Collision Enabled                                                | False              | False        | False        | True         |
| Trail Renderers                                                           | 0                  | 0            | 0            | 1            |
| Line Renderers                                                            | 0                  | 0            | 0            | 1            |

[^1]: Bounds Size is determined by the maximum size of all components on your avatar. Trail and Line Renderers do not count for this calculation.

[^2]: If the Very Poor value is exceeded on mobile, no matter the current "Show Avatar" state of the avatar, all Avatar Dynamics-related components will be removed.

### Mobile Default Performance Rank Blocking
On mobile, The Minimum Displayed Performance Rank is "Medium" by default. This means users can't see any avatars ranked as "Poor" or "Very Poor".

Users can set their Performance Rank Block level to "Poor", allowing them to see "Poor" avatars. However, they cannot set their Performance Rank Block level to "Very Poor".

For example, if a mobile avatar exceeds 20,000 triangles, it's "Very Poor" and users can't see it in VRChat. However, users can forcefully show "Very Poor" avatars by selecting the user and clicking "Show Avatar".

:::warning

In the future, VRChat may remove "Very Poor" mobile avatars and the ability to use "Show Avatar" for "Very Poor" mobile avatars. Please keep this in mind when creating mobile avatars.
:::

### Mobile Avatar Component Limits

Some [avatar components](/avatars/avatar-dynamics) are limited on mobile avatars. You cannot exceed the following limits:

- 8 [PhysBone](/avatars/avatar-dynamics/physbones) components
- 64 [PhysBones](/avatars/avatar-dynamics/physbones) affected transforms
- 16 [PhysBones](/avatars/avatar-dynamics/physbones) colliders
- 64 [PhysBones](/avatars/avatar-dynamics/physbones) collider checks
- 16 [Avatar Dynamics Contacts](/avatars/avatar-dynamics/contacts) 
- 150 [Constraint](/avatars/avatar-dynamics/constraints) components
- A dependency depth of 50 [Constraints](/avatars/avatar-dynamics/constraints)

You cannot bypass the limits above by using "Show Avatar". If a mobile avatar exceeds a limit, all limited avatar components are removed from the avatar in VRChat, even if you enable "Show Avatar".

### Mobile Removed Components
The following components are disabled on mobile devices since they can never appear on avatars:

  * Lights
  * Cloths
  * Total Cloth Vertices
  * Physics Colliders
  * Physics Rigidbodies
  * Audio Sources

These values may still appear in VRChat's avatar details screen, but they are always zero.

## Minimum Displayed Performance Rank
You can choose to manage avatars based on their Avatar Performance Rank. This option is available in the [Performance Options](https://docs.vrchat.com/docs/vrchat-configuration-window) menu, accessible as a button in the top-right of the Safety tab in the main menu.

When you choose a Performance Rank in VRChat's menu, all avatars that are below that level will have their components/display managed as described below.

| Parameter                                                                        | Description                                                                              |
| :------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------- |
| Triangles                                                                        | **Avatar replaced with [Fallback](https://docs.vrchat.com/docs/avatar-fallback-system)** |
| Bounds Size                                                                      | No change                                                                                |
| Texture Memory                                                                   | **Avatar replaced with [Fallback](https://docs.vrchat.com/docs/avatar-fallback-system)** |
| Skinned Meshes                                                                   | **Avatar replaced with [Fallback](https://docs.vrchat.com/docs/avatar-fallback-system)** |
| Basic Meshes                                                                     | **Avatar replaced with [Fallback](https://docs.vrchat.com/docs/avatar-fallback-system)** |
| Material Slots                                                                   | **Avatar replaced with [Fallback](https://docs.vrchat.com/docs/avatar-fallback-system)** |
| Physics Bone Components, Transforms, Colliders, CollisionCheckCount, or Contacts | All PhysBone, PhysBone Collider,and Contact components removed                           |
| Constraint Count or Depth                                                        | All Constraint components removed                                                        |
| Animators                                                                        | All animators (aside from root animator) removed                                         |
| Bones                                                                            | **Avatar replaced with [Fallback](https://docs.vrchat.com/docs/avatar-fallback-system)** |
| Lights                                                                           | All Lights removed                                                                       |
| Particle Systems                                                                 | All Particle Systems removed                                                             |
| Total Particles Active                                                           | All Particle Systems removed                                                             |
| Mesh Particle Active Polys                                                       | All Particle Systems removed                                                             |
| Particle Trails Enabled                                                          | All Particle Systems removed                                                             |
| Particle Collision Enabled                                                       | All Particle Systems removed                                                             |
| Trail Renderers                                                                  | All Trail Renderers removed                                                              |
| Line Renderers                                                                   | All Line Renderers removed                                                               |
| Cloths                                                                           | All Cloth components removed                                                             |
| Total Cloth Vertices                                                             | All Cloth components removed                                                             |
| Physics Colliders                                                                | All Physics Colliders removed                                                            |
| Physics Rigidbodies                                                              | All Physics Rigidbodies removed                                                          |
| Audio Sources                                                                    | All Audio Sources removed                                                                |

### Minimum Displayed Performance Rank on PC
On VRChat for PC, the Minimum Displayed Performance Rank is set to "Very Poor" by default. This means that, by default, no avatars will have their components or display affected for performance reasons on PC. If you wish to change this, you can choose between "Medium", "Poor", or "Very Poor" options.

### Avatar Performance Rank Blocking on Mobile
On VRChat for mobile devices, the Avatar Performance Rank Block is set to "Medium" by default. You can choose to change this to "Poor" to see avatars of that rank, but your performance may suffer as a result.

You cannot disable the Avatar Performance Rank Block system on mobile. In other words, avatars that are ranked as "Very Poor" will always have their display managed VRChat for mobile, and may not display at all.

No matter what setting you choose, if the [Avatar Dynamics](/avatars/avatar-dynamics) component limits are exceeded on mobile devices, all of those components will be removed. In short, there is a hard cap for Avatar Dynamics components on mobile avatars.

### Overriding Individual Avatars
:::danger

**"Show Avatar" for Very Poor avatars functionality may be removed in the future, and Very Poor avatars may be removed from Android and iOS entirely.** Please keep this in mind when creating avatars for VRChat on mobile devices.
:::
You can choose to override the the entirety of the system (and the Safety system) by selecting "Show Avatar" on each user you wish to show.


---

## Document: avatar-scaling.md

Path: /avatars/avatar-scaling.md
---
title: "Avatar Scaling"
slug: "avatar-scaling"
hidden: false
createdAt: "2023-07-26T15:58:00.000Z"
updatedAt: "2023-07-26T15:58:00.000Z"
---

# Technical Considerations around Avatar Scaling

Avatar scaling allows players to change the height of their current avatar.

This page documents how VRChat's avatar scaling works internally to the extent that may be useful for developing community resources around it.

Read the [Avatar Events documentation](/worlds/udon/players/player-avatar-scaling) documentation or our [example script](/worlds/examples/udon-example-scene/avatar-scaling-settings) to learn how to use avatar scaling with Udon. 
Read the [Avatar Parameters](/avatars/animator-parameters) page for available avatar parameters related to scaling.


## Term Definitions

* **Eye Height**: The height above 0 (Y component in transform position) of an avatar's viewpoint while in a T-Pose.
* **Prefab Height**: The eye height of an avatar when scaling is at its default value. This is what you configure in the SDK by placing the "View Position".
* **Target Eye Height**: The eye height an avatar wants to be scaled to, as set by either the player or Udon.
* **Avatar Scale**: The ratio between "Prefab Height" and "Target Eye Height". For example, if the target is 4.5 meters, and the prefab height is 1.5 meters, then "Avatar Scale" is 3.

## Range of Values

The "Prefab Height" is not limited. You can put your avatar's "View Position" at any height in the SDK. Note, however, that your overall avatar scale will affect your performance rank.

The "Target Eye Height" is clamped between 0.1 and 100 meters for Udon, and the usable range of scaling in your Action Menu goes from 0.2 to 5.0 meters. But by uploading an avatar that is outside this range and _not_ using the scale dial, you can still exceed those limits. In that case, "Target Eye Height" will match "Prefab Height," which is not limited.

This restriction means that Udon _must_ re-apply scales on "avatar eye height changed" events to fully enforce scale. Otherwise, users can switch to shorter or taller avatars to bypass the limits put in place by the world.

In worlds where scaling is disabled via the website, "Target Eye Height" will _always_ match "Prefab Height."

## How Scaling is Applied

Scaling an avatar works by changing the "localScale" of the avatar's root transform. **This scale is enforced**. There is no user-accessible way to override the scale of the root of an avatar other than the Udon functions relating to avatar scaling.

Whenever the scale is changed (i.e., whenever you switch avatars, or reset/reload your current one), the avatar is "remeasured" locally. This process adjusts your viewpoint to match the new height and repositions a few internal components, such as your voice position.

Scale is automatically synchronized for each player as "eye height", quantized to 3 decimal points. For remote users, scale changes are smoothed over a short period any time a new height is received.

While using the scale dial in your Action Menu, your avatar is only scaled in mirrors. When confirming the scale on the dial, the new scale will instantly be applied to your avatar and then sent to remote users.

---

## Document: avatar-size-limits.md

Path: /avatars/avatar-size-limits.md

# Avatar Size Limits

Uploading a custom avatar is a great way to express yourself in VRChat. However, unoptimized avatars require more bandwidth, RAM, and VRAM, which decreases VRChat's performance.

This page explains VRChat's maximum **download size** and **uncompressed size** for avatars, and how to decrease your avatar's size.
## Download size and uncompressed size
Here's how VRChat calculates your avatar's file size:
- When you build and upload an avatar, the VRChat SDK packages it into a [Unity asset bundle](https://docs.unity3d.com/Manual/AssetBundlesIntro.html) and compresses it. The **download size** is the file size of your avatar's compressed asset bundle.
- When VRChat downloads an avatar, VRChat decompresses the asset bundle. The **uncompressed size** is the uncompressed bundle size.

When calculating your avatar's size, VRChat does _not_ decompress individual assets! For example: If you set "Compression" to "High Quality" in a [texture's import settings](https://docs.unity3d.com/Manual/class-TextureImporter.html), it increases your avatar's download size **and** uncompressed size.

## Avatar size limits
The maximum size limit depends on the platform you're playing on:

| Platform                | Download Size | Uncompressed Size |
| ----------------------- | ------------- | ----------------- |
| Android                 | 10 MB         | 40 MB             |
| PC                      | 200 MB        | 500 MB            |

## How to know if you are below these limits
Within the SDK it will inform you when making a build if your avatar is breaking either limit and prevent upload, post build it will remind you what the download / uncompressed size was along with the limit. When using Build & Test size limits are not enforced.

:::caution Keep your SDK up to date!
The android uncompressed size was not enforced in the SDK until [3.5.2](/releases/release-3-5-2), ensure you are _at least_ on this version otherwise if you upload it will just fail server-side security checks! The reduced PC limits are enforced starting [3.7.0](/releases/release-3-7-0), so similarly if uploading to PC ensure you are _at least_ on this version.
:::

Within the client you can see both stats within the avatar details, either within the quick menu or main menu.

## How to decrease your avatar's size
You can reduce the size of your avatar by optimizing your assets:
- Textures
  - Reduce the max size in the [texture import settings](https://docs.unity3d.com/Manual/class-TextureImporter.html).
  - Use fewer texture files by deleting/merging textures or materials.
  - Resize your texture to a [power of two](https://en.wikipedia.org/wiki/Power_of_two) (i.e. 512, 1024, 2048) or enable "Non-Power of 2" in the [texture import settings](https://docs.unity3d.com/Manual/class-TextureImporter.html) to improve Unity's texture compression.
- Audio clips
  - Shorten long clips.
  - Reduce the quality of clips or enable "Force to Mono" in the [Audio Clip import settings](https://docs.unity3d.com/Manual/class-AudioClip.html).
- Animation clips
  - Reduce the number of keyframes.
- Blend shapes
  - Remove unused blend shapes.
  - Reduce the number of vertices affected by blend shapes, especially if your model has a high number of blend shapes.

You can find more optimization tips on the [Avatar Optimizing Tips page](/avatars/avatar-optimizing-tips).


---

## Document: creating-your-first-avatar.md

Path: /avatars/creating-your-first-avatar.md
---
sidebar_position: -1
---
# Creating Your First Avatar

VRChat has tens of millions of avatars, and anyone can create them! This page explains how you can create your first VRChat avatar. There are two ways to create an avatar:

- You can use an [avatar creation tool](https://hello.vrchat.com/avatar-systems) to create simple avatars without Unity.
- You can use the [Creator Companion](https://vcc.docs.vrchat.com/) to install [Unity](https://unity.com/), install the [VRChat Software Development Kit (SDK)](https://creators.vrchat.com/sdk/), and to upload a custom avatar.

## Requirements

To upload a custom avatar with Unity and the VRChat SDK, you must meet the following requirements:

- You must have an account on [VRChat.com](https://vrchat.com/).
  - If you're playing on a Steam or Meta account, you'll need to [link your account first](https://help.vrchat.com/hc/en-us/articles/360062659053-I-want-to-turn-my-platform-account-through-Steam-Meta-Pico-or-Viveport-into-a-VRChat-account).
- Your VRChat account must have a [trust rank](https://docs.vrchat.com/docs/vrchat-safety-and-trust-system#trust-rank) of "New User" or higher.
  - If you're new to VRChat, you'll receive an email once you're allowed to upload avatars.

:::tip Need help?

If you get stuck or need help,  here's where you can get help:
- Browse VRChat's [official documentation](https://creators.vrchat.com/). 
- Visit VRChat's [official forum](https://ask.vrchat.com/) or [Discord server](https://discord.com/invite/vrchat) and ask the community.

:::

## Step 1 - Choose a 3D model

Maybe you already have a 3D model that you want to use as an avatar - or you might be downloading a 3D model for the first time. Choose one of the following four ways to get started:

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="option-avatar-step-one">
<TabItem value="avatar-creation-tool" label="1. Use an avatar creation tool" default>

If you've never used Unity or the VRChat SDK, try using one of the following avatar creation tools: 

- The [VRChat Avatar Systems](https://hello.vrchat.com/avatar-systems) page lists several beginner-friendly avatar creation tools.
 	- These tools are similar to customizing your character in a video game.
 	- These tools do not require the VRChat SDK! If you use them, you can skip all other steps on this page.
        - Any VRChat user can use these tools. You do not need the ["New User" trust rank](https://docs.vrchat.com/docs/vrchat-safety-and-trust-system#trust-rank).
- [VRoid Studio](https://vroid.com/en/studio) is an anime-theme character creator for creating VTuber-style models.
	- Characters have hundreds of customization sliders and can be hand-painted.
	- For some examples of what it can do, check out the [VRoid subreddit](https://www.reddit.com/r/VRoid/).
	- It's also available on [Steam](https://store.steampowered.com/app/1486350/VRoid_Studio_v1263/).
	- ⚠VRoid Studio outputs avatars in the **.vrm** format, which isn't natively supported by Unity!
		- If you'd like to import a VRoid Studio model directly for use in VRChat, you may want to look into the community-created [VRMtoVRChat converter](https://github.com/esperecyan/VRMConverterForVRChat) for .vrm avatars. Be sure to [read the documentation for this plugin](https://www.store.vket.com/ec/items/122/detail/) if you use it.

</TabItem>
<TabItem value="example-avatar" label="2. Use VRChat's example avatar">

If you want to upload your own avatar to VRChat, you need to use the VRChat SDK.

If you're new to the VRChat SDK, try uploading the built-in [example avatar](/avatars/creating-your-first-avatar#try-vrchats-example-avatar) first.

After you've successfully uploaded the example avatar, try uploading your own avatar!

</TabItem>
<TabItem value="find-model" label="3. Download a model">

There are many stores on the internet where you can download free or paid VRChat avatars.

Some stores sell 3D models that can be used in VRChat or in other applications. These avatars are great for learning about the VRChat SDK and creating your own VRChat avatar.

- [100 avatars](https://github.com/PolygonalMind/100Avatars) is a free collection of hundreds of avatars. They're simple and easy to import into the VRChat SDK. 
- The [Unity Asset Store](https://assetstore.unity.com/) has free and paid 3D models. They're easy to import into Unity and usually compatible with the VRChat SDK, but they may include assets or scripts that won't work.

Some stores sell avatars that are already prepared for VRChat. They may allow you to skip some steps when setting up the avatar in Unity but might also include advanced features that aren't covered in this article. They are suitable if you want a cool-looking avatar and care less about learning how to create your own. 

- [BOOTH](https://booth.pm/en/items?tags%5B%5D=VRChat) is a Japanese store for VRChat avatars. It's the largest store for anime-style avatars, but you can also find other types of avatars there.
- [Gumroad](https://gumroad.com/discover) is more popular among Western creators and focuses on anime-style and furry avatars.
- [Jinxxy](https://jinxxy.com/) and [Avatown](https://goavatown.com) also have a collection of Avatars that can be used in VRChat.
  
When you look for a model, try to keep the following things in mind:
- If you decide to get your model outside of an asset store, ensure the model is fully "rigged" by the author.
	- A "rigged" model has a skeleton that allows it to move. Creating a rig can be very difficult, but tools like [Mixamo](https://www.mixamo.com/) and [Rigify](https://docs.blender.org/manual/en/latest/addons/rigging/rigify/index.html) can do it automatically.
	- You should also check that the model is in [a format compatible with Unity](https://docs.unity3d.com/Manual/3D-formats.html), such as `.fbx`.
- Ensure that you have a license to use the model in VRChat.
	- Most asset stores display their license on the 3D model's store page.
	- Using them without a license is a violation of the model author's rights and the [VRChat Terms of Service](https://hello.vrchat.com/legal). 
- Ensure that the model that you're using is [below 20,000 for VRChat on Meta Quest](/avatars/avatar-performance-ranking-system#mobile-limits) and [below 70,000 triangles on PC](/avatars/avatar-performance-ranking-system#pc-limits).
	- Uploading an avatar with an excessive triangle count can cause performance issues.
	- On PC, you can upload models above this limit, but the avatar will be ranked as having "Very Poor" performance, which means that fewer players will see it.

</TabItem>

<TabItem value="create-avatar" label="4. Create a model">

While most users choose to find a model as a starting point, anyone can create an avatar model from scratch. You can use any 3D software you like, as long as it supports exporting an FBX with an armature. [Blender](https://www.blender.org/) is free and a very common choice.

If you've never modeled in 3D before, this might be the beginning of a long journey. Learning how to model, rig, and texture a 3D model is very complex. Creating a VRChat avatar combines _all of those skills_!

If you choose to create your model, we suggest starting with something very simple. Even if you don't look as flashy as pre-made models, it is _your_ model, and you can do whatever you'd like with it.

To get you started, here's a VRChat-centric tutorial one of our community members has created:
- [Rainhet's Blender 3D Virtual Avatar Tutorial 2022](https://www.youtube.com/watch?v=OKWsUAIsgpg&list=PL2EEbgwoJzdsC9wfKA2ZO2kAf4HDqC8a8&index=1) - Rainhet's tutorial is long-form, and she explains everything thoroughly as she works through it.
- [Rainhet's 3D Avatar Class](https://www.youtube.com/watch?v=w-yhjgnhaNw) - An older version of Rainhet's tutorial series. Also has a [10-minute version](https://www.youtube.com/watch?v=in9rNze4FD4) that gives you a big-picture view of the process.

import FeedbackButton from "@site/src/components/FeedbackButton";

If you have a tutorial you'd like to suggest, please suggest it by clicking the <FeedbackButton /> button.

</TabItem>

</Tabs>

## Step 2 - Set up the VRChat SDK

Congratulations on choosing or building a model! Before you continue, you'll need to set up the [VRChat Creator Companion](https://vcc.docs.vrchat.com/). It will help you install [Unity](https://unity.com/) and create projects with the [VRChat SDK](/sdk). Watch the video below to get started!

<div class="video-container">
    <iframe src="https://www.youtube.com/embed/0u1g0TYoJsU" title="VRChat Creator Companion" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

Read the Creator Companion's [Getting Started](https://vcc.docs.vrchat.com/guides/getting-started) page to learn more. After setting creating your Unity project, you're ready to continue!

:::tip

Are you new to Unity? Visit [Unity Learn](https://learn.unity.com/) for free tutorials on how to use Unity.

:::

### Try VRChat's example avatar

Before you import your own 3D model into Unity, you can try using VRChat's example avatar instead. This allows you to learn how to upload an avatar without worrying about problems related to your 3D model.

Open your avatar project and go to 'VRChat SDK > Samples > Avatar Dynamics Robot Avatar.'

[IMAGE: The example avatar can help you understand what a complete VRChat avatar project might look like.]

If the example avatar loaded successfully, you can skip to [step 6](/avatars/creating-your-first-avatar#step-6---going-to-the-build-tab--checking-if-the-avatar-is-ok). If you'd rather import your own avatar, continue with step 3 below.

## Step 3 - Get the model into your project
Now that you've set up the VRChat SDK, it's time to import your model into your project. If you're getting it from an asset store, then you can download and directly import it into your project. If you got the model from elsewhere, then you need to import it and any related textures into your 'Assets' folder.

If you are importing your model from a 3D editor, please ensure you keep in mind the difference between coordinate systems. For example, [**Blender**](https://blender.org)'s default coordinate and unit system differs from Unity's. You must export FBX files from Blender and define the exporter as such:

[IMAGE: image]

After you get the model in your assets, select it, you'll want to ensure it has the correct settings in the rig tab in the inspector. Make sure the Animation Type is set to Humanoid.

## Step 4 - Get the model into a scene
Now that you have the model in your Assets folder, with the correct settings applied, you need to put it into a scene. To do so, either drag it into your [Hierarchy](https://docs.unity3d.com/Manual/Hierarchy.html) or directly into the Scene View window. We recommend having one scene per avatar and placing it at the coordinates (0, 0, 0). If needed, rotate the avatar so it is standing up straight, and ensure that its size is what you expect. You can add a Cube to your scene to compare - the cube will be 1 meter on each side and your Avatar will best function between about 0.5-5m tall. The average person is around 1.65 meters tall.
:::caution Avatar Optimization

It is very important that your avatar is optimized so that you do not cause low FPS for yourself and others. The SDK will inform you if something looks wrong. Check out our [Avatar Optimization Tips](/avatars/avatar-optimizing-tips) to check out methods to improve your avatar's Performance Rank.
:::
## Step 5 - Adding an Avatar Descriptor 
The next step is to add a 'VRC Avatar Descriptor' component and prepare its settings.
1. Select the avatar in your hierarchy.
2. Click 'Add Component' in the inspector.
3. Search for the 'VRC Avatar Descriptor' component and add it.
4. Customize its settings, as explained below.

[IMAGE: Add a `VRC Avatar Descriptor` to get started with your avatar.]
### View position
First, you'll want to set the view position. This will be where your camera will be positioned in VRChat. You can see a visual representation of it as a small white sphere in the scene.

If your avatar has a head, place the view position between the avatar's eyes. If your avatar's head is unusually large, its feet may lift off the ground when looking up and down. To avoid this, place the view position closer to where a regular-sized head would be.

If your avatar doesn't have a head, place the view position wherever you think it's appropriate.

[IMAGE: Use the Avatar Descriptor to configure your avatar for VRChat. Make sure to adjust the view position!]
### Lip sync mode
When you talk, you can make your avatar's mouth (or anything else) react automatically.  Open your `VRC Avatar Descriptor` and expand the `LipSync` dropdown. You can choose one of five lip sync modes:

#### Default
[IMAGE: Pressing 'Auto Detect!' is usually enough to let your VRChat avatar react to your speech.]

Press 'Auto Detect!' to let the VRChat SDK automatically detect the appropriate lip sync mode. The mode will then switch to one of the modes below.

#### Jaw Flap Bone
If your avatar uses a single bone to animate the jaw, you can specify it here. Your character's jaw will open depending on how loudly you speak in VRChat. Ensure you've configured the jaw bone in Unity's Humanoid rig for your avatar.

#### **Viseme Blend Shape** (recommended)
Blend shapes/shape keys (named depending on what software you're using) modify the mesh based on vertex positions.  Many models use this for detailed animations for speaking. If your model has these, you should use them!

We use the Oculus Audio library to detect and set visemes. [You can see a reference to what all the visemes should look like and what sound triggers them here](https://developer.oculus.com/documentation/unity/audio-ovrlipsync-viseme-reference). 

VRChat can usually detect your avatar's visemes automatically. If not, you can choose visemes from the dropdown list.

[IMAGE: The 'Viseme Blend Shape' mode is the most common method of making your character's face move when you speak.]

:::caution SIL shape

Unity will delete shape keys/blend shapes that are empty on import, so make sure your "SIL" shape (the shape your mouth makes when no sound is detected, but the mic is active - such as the space between words) moves a single vertex a very small, imperceptible amount. This will prevent Unity from deleting that key.
:::

:::note Viseme Performance Tip!

If you're an avatar creator, consider splitting your avatar into two skinned meshes - one for your body, and one for your head/face.
The performance cost of blend shapes depends on how much of your 3D model they affect. Keeping blend shapes on a separate head mesh and having fewer blend shapes on your body mesh may improve your avatar's performance.
:::

##### Jaw Flap Blend Shape
If your avatar only uses a single blend shape to animate its mouth, configure it here. It will behave similarly to 'Jaw Flap Bone' by animating the jaw blend shape instead of a jaw bone.

##### Viseme Parameter Only
If you're an advanced creator, you can use this mode to control how your avatar reacts to speech with VRChat's built-in [Animator Parameters](/avatars/animator-parameters).

## Step 6 - Going to the build tab / Checking if the avatar is ok
Next, we'll want to check that everything is good in the build window. To do that, use the menu item `VRChat SDK > Show Control Panel`, which opens the VRChat SDK Control panel. After signing in, switch to the "Builder" tab to see the avatar's GameObject mentioned with a "Build" section below. You also see settings, content tags, the avatar's performance rank, errors, and warnings.

[IMAGE: The VRChat SDK build panel.]

Simply follow the steps in VRChat's SDK build panel: 
1. Give your avatar a name.
	- You can add a description, too.
2. Choose your avatar's visibility.
	- Public avatars can be cloned by other VRChat users or shared via pedestals in worlds.
	- Private avatars can only be used by you.
3. Select appropriate content warnings for your avatar to comply with VRChat's  [content gating system](https://hello.vrchat.com/blog/content-gating).
4.  Select a thumbnail image.
	- You can select a file or capture an image from your Unity scene.
5. Read the 'Validations' section. It contains many useful errors and warnings.
	- For example, the SDK may warn you about your avatar having too many triangles, which you can fix by optimizing mesh(es). If you're unable to optimize the mesh, you may need to go back and choose another model.
6. Choose the build type.
	- **Build & Publish Your Avatar Online** uploads your avatar to VRChat and allows other users to see it.
	- **Build & Test Your Avatar** allows you to quickly test your avatar without uploading it.
		- You can find your test avatar in the "Other" avatars section in VRChat.
		- You can use [Build & Test on Android](/platforms/android/build-test-mobile/).
7. Choose which platforms to build your [platform](/platforms/) on.
8. Confirm that the avatar's information is accurate and thatn you have the rights to upload the content to VRChat.
9. When you're ready, click the "Build & Publish" button.


## Step 7 - Building and uploading the avatar!
Now everything is ready. Press the "Build & Publish" button, and the SDK will start building and uploading your avatar. Before uploading your avatar, you should double-check that it complies with VRChat's [Terms of Service](https://hello.vrchat.com/legal) and [Community Guidelines](https://hello.vrchat.com/community-guidelines).

After uploading your avatar, it should be available in VRChat. You can also see your avatar in  `VRChat SDK > Show Control Panel > Content Manager`.

You can also test your avatar without uploading it. To do this, click "Build & Test" instead. Your avatar will appear in the "Other" section of your VRChat Avatars menu. Test avatars can only be seen by you. In order for other players to see your avatar, you need to upload it.

Additionally, you can launch with the `--watch-avatars` launch option that will make it so that if you're wearing an avatar from the "Other" section, any future tests will immediately switch you to the new version of the avatar.

## Step 8 - Enjoy your avatar!

Congratulations on creating your first avatar! We hope everything went smoothly. If you need any help, consider visiting our [Ask Forum](https://ask.vrchat.com/) or our [Discord server](https://discord.com/invite/vrchat).

Creating and uploading VRChat avatars can be fun and creatively fulfilling. If you'd like to improve your avatar creation skills, take a look at the rest of our [Avatars documentation](https://creators.vrchat.com/avatars/).

## Learn more

If you'd like to become better at avatar creation, check out these pages:
- [Quest Content Optimization](/platforms/android/quest-content-optimization) - Learn how to create avatars that work well on Android and Quest.
- [Avatar Optimization Tips](/avatars/avatar-optimizing-tips) - Learn general advice on creating optimized PC or Android avatars.
- [VRChat's performance ranking system?](/avatars/avatar-performance-ranking-system) - Learn why certain avatars are visible or hidden to other players by default.
- [Avatar Dynamics](/avatars/avatar-dynamics/) - Learn how to create physics-driven interactions on your avatar. 



---

## Document: expression-menu-and-controls.md

Path: /avatars/expression-menu-and-controls.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Expressions Menu and Controls

:::tip
You need basic knowledge about <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AnimatorController.html">Unity Animators</UnityVersionedLink> to use expression parameters in your avatar's animators.
:::

You can control your avatar's animators in VRChat with an Expressions Menu. This allows you to play animations or change your avatar's appearance with VRChat's radial menu.

To use the Expressions Menu in VRChat, you need to create (at least) two assets:

- One (or more) Expressions Menu asset
- One Expression Parameters asset

After creating and configuring these assets, make sure to add them to your avatar descriptor in the "Expressions" section.

## Creating an Expressions Menu

1. Create an **Expressions Menu asset** by selecting `Assets > Create > VRChat > Avatars > Expressions Menu`.

[IMAGE: The default view of the Avatar Expressions Menu.]

2. Create an **Expression Parameters asset** by selecting your Expressions Menu asset and clicking the "Create" button. This allows you to create custom parameters for your Expressions Menu. 
	- When you click "Create", the Expression Parameters asset is automatically assigned to your Expressions Menu asset.
	- You can also create an Expression Parameters asset by selecting `Assets > Create > VRChat > Avatars > Expression Parameters`.
    - Expression Parameters have an option to copy parameters from an `Animator` to create your parameters quickly.

[IMAGE: What expression parameters look like by default.]


3. Select the Expression Parameters asset to customize it.
    - The asset contains [three parameters by default](https://creators.vrchat.com/avatars/animator-parameters/#default-av3-aliasing): `VRCEmote`, `VRCFaceBlendH`, and `VRCFaceBlendV`. You can safely delete them unless you use them in your avatar or don't want to create your own Expression menu.
    - Your animators always have access to VRChat's [built-in parameters](/avatars/animator-parameters). For example, you shouldn't add the "AFK" or "GestureLeft" parameters to your Expression Parameters asset.
4. Enter the names of your custom parameters.
    - These names should match the parameters in your animators.
    - You can categorize your parameters by using `/`. For example, `Clothing/Hoodie` and `Clothing/Hat`.
    - VRChat has a few [built-in parameters](https://creators.vrchat.com/avatars/animator-parameters/#parameters).
    You can always use them in animators - don't add them to your own Expression Parameters.
5. Choose a type for each parameter. The type should match your animator's <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/AnimationParameters.html">parameter type</UnityVersionedLink>.
	- `Int` can be any whole number between 0 and 255.
	- `Float` can be any number between -1.0 and 1.0.
	- `Bool` can be either `true` or `false`.
6. Select the `Default` value to set the default value of each parameter.
	- When the avatar is reset, the parameter will revert to this value.
7. Enable `Saved` for parameters that shouldn't reset themselves whenever the avatar is loaded. If your avatar has customization options or settings, `Saved` will prevent them from being reset after switching to a different world or avatar.
8. Enable `Synced` if the state of this parameter should be sent to all other players over the network.
	- The [sync type](/avatars/animator-parameters/#sync-types) of custom parameters is Playable (except for [Puppet controls](expression-menu-and-controls#types-of-controls)).

Next, you should add both assets to your avatar descriptor.

[IMAGE: What expression parameters look like by default.]

9. Select your avatar descriptor and scroll down to the "Expressions" section.
10. Change the "Menu" property to your expressions menu.
11. Change the "Parameters" property to your expression parameters.

After adding both assets to your avatar descriptor, all your expression parameters will now be available in the expression menu, allowing you to customize it.

[IMAGE: What expression parameters look like by default.]

12. In the inspector, click "Add Control." Up to 8 controls can be added to a single menu.
13. Choose a name and [type](/avatars/expression-menu-and-controls#types-of-controls). 
14. You can also add icons, and submenus, or change the order of the controls here.
  - You can find some default icons in `VRCSDK/Assets3/Expression Menu Icons/` .

## Types of Controls

The Expressions Menu supports different types of controls. Choose the type that's most suitable for your use case.

| Type             | Description                                                                                                                                                                                     |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Button           | Sets a parameter when clicked, then resets after the sync/reset has been sent-- usually after about a second. Cannot be held down.                                                              |
| Toggle           | Sets a parameter when the toggle is on, resets when the toggle is turned off.                                                                                                                   |
| Sub-Menu         | Opens another Expression Menu.  Additionally it may also set a parameter when entered, if so that parameter is reset to zero when you exit that menu. You can put sub-menus into sub-menus!     |
| Two-Axis Puppet  | Opens an axis puppet menu that controls two float parameters depending on the joystick position. The parameters are mapped to vertical and horizontal. The float values range from -1.0 to 1.0. |
| Four-Axis Puppet | Opens an axis puppet menu that controls four float parameters depending on the joystick position.  The parameters are mapped in order, up, right, down, left. The float values are 0.0 to 1.0.  |
| Radial Puppet    | Open a radial puppet menu that controls a single float parameter, kind of like a progress bar that you can fill! The float value is 0.0 to 1.0.                                                 |

Controls of the "Puppet" type have two special features:
- The "Parameter" property is optional for puppet controls. If you use it, it will be set while the puppet control is open. This allows your animators to detect whether the puppet control is currently open.
- When you exit a puppet control in VRChat, it keeps the "Parameter Horizontal/Vertical/Radial" value (until you re-open the control or change the value elsewhere). This allows you to navigate your radial menu while "freezing" the puppet control in any state.

### Puppet menu sync

The **Puppet** controls use [**IK Sync**](/avatars/animator-parameters#sync-types) when open. If you want sync that is as close as possible to your inputs for fast/quick movements, you should use a Puppet menu.

**Button**/**Toggle** uses **Playable Sync** which updates on-demand, instead of continuously, and is appropriate for things you "turn on/off" but don't need highly precise syncing.

Puppet menu sync always updates at the maximum rate available, and it smooths the values for remote users - much better when timed replication is important.




---

## Document: index.md

Path: /avatars/index.md
---
sidebar_position: 0
---

import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Avatars

VRChat allows you to create and upload custom avatars! This category explains how to use VRChat's Avatars 3.0 SDK.

## Creating Avatars

To get started, check out [Creating your first avatar](/avatars/creating-your-first-avatar).

There's a whole 'Avatars' category on the sidebar to check out. Here are some of the more impactful and important pages:

- [Rig Requirements](/avatars/rig-requirements) explains how to set up your custom 3D model's hierarchy for VRChat.
- [Avatar Performance Ranking System](/avatars/avatar-performance-ranking-system) explains how some avatars achieve an 'Excellent' performance, and others 'Very Poor'.
- [Avatar Optimization Tips](/avatars/avatar-optimizing-tips) - Now that you know _why_, check out this page to learn how to get all your frames back.
- Continue reading this page to learn more about important Avatars 3.0 SDK concepts.

## What is Avatars 3.0?

**Avatars 3.0** is our name for all the features available for avatars in VRChat. AV3's features are focused on improving expression, performance, and the abilities of avatars in VRChat.

Avatars 3.0 is heavily integrated with the [Action Menu](https://docs.vrchat.com/docs/action-menu) for controlling and interacting with the avatar you're wearing. It's probably best if you hop in and try out the Action Menu before building an AV3 avatar!

## Prerequisites

- [Install & set up the VRChat Avatars SDK](/sdk)
- [Create your first avatar](/avatars/creating-your-first-avatar)

## Understanding the Concepts

In order to understand and use Avatars 3.0, you need to know a few concepts. These concepts will help you understand the construction of avatars, how best to assemble them, and the intended use of various systems.

### Unity Systems

This document is written with the assumption that you know a bit about <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AnimatorController.html">Unity Animators</UnityVersionedLink>. In particular, you should ensure you have basic working knowledge of:

- Animators and animations
- Animator layers, layer weights, and blending
- States and transitions
- Animator parameters
- State behaviors
- Avatar masks

It can also help to know about things like:

- State exit time
- Loop Time for animations
- (Advanced) Time Sync between layers
- (Advanced) Blend trees

### Basics

With Avatars 3.0, you can create a basic avatar with simulated eye movement and visemes very quickly. 

1. Import your avatar, rig as humanoid. Set up your materials, etc.
2. Add the Avatar Descriptor component.
3. Define the eye bones, if you want simulated eye movement.
4. Define the viseme type, if you want visemes. Assign the jaw-flap bone in the Rigging Configuration Screen, or define your visemes by blendshapes. Same as Avatar 2.0.
5. Set your viewpoint.
6. Build and upload!

If you are making a non-humanoid avatar please read the Generic Avatars section below.

You're done! This will create a basic avatar with default gestures and actions. There's some built-in things you can take advantage of, so even if someone slaps in an avatar with blendshapes/bones named a certain way, you'll get some basic Avatar 3.0 features.

However, even with these basic upgraded systems, there are some new features.

### Local Avatar Testing

Ever wanted to iterate and test an avatar without uploading it? Well, with Avatars 3.0, now you can!

In the "Builder" tab of VRChat SDK control panel, you can now select "Build & Test" at "Offline Testing" section. When you click this, your avatar will be built, and then copied into the folder `%LocalAppdata%Low\VRChat\VRChat\Avatars`.

When you launch VRChat, you'll be able to access this avatar locally by looking in the "Other" section of the Avatar menu! Only you will be able to see it, but you can make changes to your avatar, click "Build & Test" again, and after a short build, your avatar will be updated. Simply re-select the avatar in your menu and click "Change" again, and you'll swap into the new testing avatar.

This avatar is _only_ visible to you! To everyone else, you'll look like you're wearing the last avatar you were wearing before swapping into the local test avatar. For our AV3 testers, this made iteration a TON faster. We hope you like it!

To delete the copied local test avatar, go to "Content Manager" tab of the VRChat SDK control panel. You will see your avatar in "Test Avatars" section at the bottom. Click "Delete" and it will disappear from "Other" section of the Avatar menu when you reopen it.

### Simulated Eye Movement

Simulated eye movement is where your eyes will move around, looking at things around you. This isn't _eye tracking_ but it is a pretty good way of making your avatar look more "alive".

You can preview your setup in the editor and adjust how your avatar's eyes look in a combination of states, which are used to determine how your eye bones are set up.

Blinking can be handled via blendshapes or bones. Blendshapes are the usual method, but we included bones as well to allow for more setups.

Blinking blendshapes are defined by three blendshapes, described below:

- Blink - Both eyes blinking
- Looking Up - Blendshape used when looking up-- use this to tweak eye/iris/lid/eyebrow positioning
- Looking Down - Blendshape used when looking down, use this similarly to LookUp

You can set these blendshapes to `-none-` if you don't want to use them.

In addition, you'll notice two sliders-- one goes from Calm to Excited, and the other goes from Shy to Confident. Calm / Excited affects how often you blink. Shy / Confident affects how often you look at other players, and how long your gaze remains on other player's faces until you look away.

You'll learn more about this when we talk about state behaviors, but you can set states in your animator to **disable eye animations** when you reach that state. You can set it up such that you don't have to worry about your blendshapes being overdriven because your "happy" mood closes your eyes, and your blinking is still firing off. 

### Blendshape / Bone-based Visemes

If you just want to stick with the standard jaw-flap bone or blendshape-based visemes, we've got you covered. Both are still present and work just fine.

In addition, you can now configure the angle of the jaw-flap bone viseme for some additional customization!

However, in Avatars 3.0, you can also access an Animator Parameter which indicates which viseme should be currently playing! This means if you can animate it, **you can use it in a viseme.** No more trickery for 2D mouths, robots, whatever-- you can just animate whatever you like for your visemes.

The `Viseme` animator parameter is updated in all viseme modes.

### Proxy Animations

You'll probably notice that the SDK includes a bunch of animations named `proxy_animationName`. These animations are "placeholders" for a variety of default VRChat animations. If you use an animation that starts with `proxy_`, VRChat will attempt to replace it with a built-in animation. This can be done in any playable layer.

Although we will not replace an animation with a `proxy_` prefix if the suffix does not match one of our built-in animations, it is probably best practice to avoid naming any of your animations with the prefix `proxy_`.

### Use Auto Footstep

This is an option in the AV3 Avatar Descriptor. It is on by default.

**"Use Auto Footstep"** only applies to 3-point or 4-point tracking. Turning it off means you're disabling the procedural lower body animation for room-scale movement. This procedural animation is what plays when you move around in room-space while in 3 or 4-point tracking.

Leaving Auto Footsteps on (which is the default state) will still allow you to enable/disable tracking via the Tracking Control state behavior.

If Auto Footsteps is off, enabling/disabling tracking on your legs and hips won't do anything, and you're relying on your animations to drive your lower body at all times.

### Force Locomotion Animations

This is an option in the AV3 Avatar Descriptor. It is on by default.

**"Force Locomotion Animations"** is on by default. It only applies to 6-point tracking (Full-Body Tracking). When "Locomotion Animations" is on, locomoting in FBT (as in, moving your joysticks) will play a walking/running animation as determined by your Base playable layer.

When "Locomotion Animations" is off, locomoting in FBT will NOT play the walking/running animation. This is useful if you wish to "mime" your walking with your full-body tracking movement. **If you are turning off "Locomotion Animations", do not use the default Base and Additive layers.** You're expected to make your own!

### Write Defaults on States

<UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-State.html">Write Defaults</UnityVersionedLink> is an option available for each state in an Animator Controller.

Write Defaults "Off" states will set only the animated property values, and those values will not change unless animated again. This can make it easier to keep track of what properties are animated through any specific layer.

Write Defaults "On" states will set default values for properties that are not being animated. This means that if you are animating a property value to "1" from "0", the value will revert to the default "0" upon exiting the state, unless the subsequent state continues to animate the value as "1".

Regardless of which option you choose, **we recommend keeping your usage of Write Defaults consistent across the entire avatar** - in other words, have Write Defaults "Off" for all states, or "On" for all states. Having both "Off" and "On" states on an avatar is known to cause unexpected property values to be set. This is commonly known as "Mixed Write Defaults". The SDK will give you a warning if it detects that you've done this.

VRChat uses Write Defaults set to "Off" in its built-in and example animators.

If you decide to set Write Defaults to "Off":
- Write Defaults is set to **On** for newly created states, so you'll need to change this value for each new state you create.
- You may need to add animations to initialize or reset properties with specific values.
- It's recommended that for all states in a layer, you explicitly animate every property affected by that layer.
- Each state should have an animation clip ("motion" in the state options) that animates at least one property. It does not have to be a valid property reference. States with "None" motion or entirely empty clips will behave as if Write Defaults is "On".

:::caution Additive layers and direct blend trees

VRChat's avatar creator community recommends setting Write Defaults to "On" for:
- Layers that use additive blending
- Blend trees that use direct blending

You should do this even if you are using "Off" for the rest of the avatar. The SDK will avoid generating warnings about mixed Write Defaults settings in these cases.

:::

### Generic Avatars

Avatar 3.0 also supports non-humanoid generic avatars. If you want access to similar features that AV3 Humanoids have access to, you'll need to follow a few guidelines:

- Import your generic model as an FBX and assign it the 'Generic' rig type, so that an "avatar" object is created
- Make sure this avatar object is referenced in the avatar field of the Animator component at the root of your avatar (the same Game Object as the avatar descriptor).
- Leave the animator controller blank (it will be stripped at runtime) and use the Playable Layers to define your custom animation controllers. Generic avatars have 3 Playable layers: Base, Action, and FX, as the other layers are specific to Humanoids.

If you do not follow these steps, your generic avatar will not have access to many Avatars 3.0 features such as Expression Parameters and State Behaviours. If you are fine with that, you can add an animation controller directly into the root animator, leaving the avatar field blank. This method could be useful if you are just building a hierarchy of static objects in Unity and want a simple animation.


---

## Document: per-platform-avatar-overrides.md

Path: /avatars/per-platform-avatar-overrides.md
# Per-Platform Avatar Overrides

Per-platform overrides allow you to configure different versions of your [cross-platform](/platforms/android/cross-platform-setup) avatar for multiple platforms. When you build & publish your avatar to more than one platform, the SDK automatically uploads different versions of your avatar to each selected platform under the same avatar ID.

Per-platform overrides make it easy to upload an optimized version of your avatar for Android and a fully featured version of your avatar for PC.

:::note

You can manually upload different versions of your avatar for different platforms by performing multiple uploads without changing the avatar ID. However, this is more cumbersome and time-consuming than cross-platform overrides.

:::

# Setup

To set up per-platform overrides, follow these steps:

1. Set up all the versions of the avatar you want to use in the same scene.
2. Switch to the Builder tab in the SDK.
3. Select the avatar you want to use as a base for the overrides. This will be the avatar you select in the Builder panel of the SDK to click "Multi-Platform Build & Publish"
4. Click the `⋮` button next to the "Selected Avatar" dropdown.

[IMAGE: Options Menu]

5. In the popup that appears, press "Add per-platform override".
6. Select the platform for the override, then select the avatar to use for that platform.

[IMAGE: Per-Platform Overrides]

- Repeat the process for all the platforms for which you want to set up overrides.
- The changes are saved automatically, so you can proceed with a multi-platform build & publish.

After setting up per-platform overrides, the SDK will build and upload the "override" version of the avatar for each platform when you do a multi-platform build.

After the overrides are set up - you will also see a new component added to the root of the avatar object called "VRC Per Platform Overrides". This component has the same functionality as the per-platform overrides in the Builder panel, however, we encourage you to use the Builder panel for setting up the overrides. This component is primarily intended for viewing existing overrides and for use in community-made tools.

## Editor Tooling

If you want to create an editor tool that can query the per-platform overrides for an avatar, use the following method:

```cs
using VRC.SDK3A.Editor;

//...

PerPlatformOverrides.GetPlatformOverrides(myAvatarGameObject);
```

It will either return a `List<PerPlatformOverrides.Option>` or `null` if no overrides are set up.

You can also setup the overrides yourself using the following method:

```cs
using VRC.SDK3A.Editor;

//...

PerPlatformOverrides.SetPlatformOverrides(myAvatarGameObject, new List<PerPlatformOverrides.Option> {
    new PerPlatformOverrides.Option {
        platform = BuildTarget.Android,
        avatar = myAndroidAvatarDescriptor
    }
});
```

This will automatically add the override component to the avatar if it doesn't already exist.

The per-platform overrides are currently only set up on the "main" avatar object. So you would generally want to scan every object with a `VRC_AvatarDescriptor` on it for presence of the overrides to get the full picture.


---

## Document: playable-layers.md

Path: /avatars/playable-layers.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Playable Layers

When you create animations for your VRChat avatar, you'll utilize VRChat's 'Playable Layers.' They allow you to cleanly separate some things you might want to do with your avatar into their own animations - such as running, jumping, giving a thumbs-up, smiling, wagging your tail, and combinations of these.
:::caution Unity Knowledge Required

This document is written with the assumption that you know a bit about <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AnimatorController.html">Unity Animators</UnityVersionedLink>.
:::

In the Avatars 3.0 Avatar Descriptor, all humanoid avatars have five buttons:
- Base
- Additive
- Gesture
- Action
- FX

Generic avatars only have three buttons:
- Base
- Action
- FX

These are **Playable Layers**. Each of them takes a Unity Animator, and they layer on top of each other. In other words, you've got five root animators to play with, and each of them can have several **Animator Layers**.

These layers apply in order-- in other words, Base gets applied, then Additive, then Gesture, Action, FX. For example, if something in Additive animates a bone (with 1.0 weight), and then something in Action animates that same bone (with 1.0 weight), the Action animation will take precedence.

We have example Playable Layers available in the SDK. Depending on how you learn and iterate on things, it might be easier for you to use and edit these default layers to figure things out!

When you are running VRChat and you're wearing (or viewing) an Avatar 3.0 avatar, all of these Playable Layers are put together into a combined Animator. This Animator is the root, main animator of your avatar, and you can control any part of it. **This means that there is no reason to add any additional animators on your avatar.** 

As an aside, you should never use the same controller in multiple Playable Layers. This may work for some setups, but it is **very** poor practice and will cause major issues as you expand the functionality of your avatar.
:::danger Only Use Animation Controllers

We only support the use of Animation Controllers in Playable Layer slots. Do not use any other type of controller-- you will run into errors or will be unable to upload the content.
:::
What do these Playable Layers do? Here's the short version:

**Base:** Stuff that should always play, react to movement (like locomotion), or the locomotion state of your avatar (running, falling, crouching, etc). Transform animations only.
**Additive:** Stuff that Base is already using, but you want to "add" to it-- like a breathing animation. Transform animations only.
**Gesture:** Things that get triggered by hand OR by the Expression menu. You can also use this for "idle animations" like a wagging tail, flapping wings, or moving ears. Transform animations only.
**Action:** Full override, similar to AV2 emotes. Transform animations only.
**FX:** Same as Gestures, but for everything that *isn't* a Transform position, rotation, or scale animation.

That's great, but let's go into some more detail.

## Base

The Base layer contains locomotion animations, including blend trees for walking, running, strafing. It also includes animation states for jumping, falling, falling fast, crouching, and crawling, among other things.

Keep in mind that if you put something in here, you'll have to redefine your locomotion animation states. This is pretty complex! Take a look at the example Base Playable Layer to see how complex it can get.

Animations in Base should _only_ affect transforms, and all layers should be using Avatar Masks to ensure you're only affecting the appropriate transforms.

## Additive

The Additive layer is meant for additive transform movement on top of humanoid bones that are animated in Base-- things like breathing animations that can "add on" to the Base layer.

**If you want to add an idle animation to non-humanoid bones-- like a tail, ears, or etc-- use Gesture instead!** Additive is *specifically* for humanoid bones.

The Additive layer is special because it is _always_ set to "Additive" blending. In short, if you've got a transform that moves during locomotion, the Additive animation will "add" its animation on top. This can act really weirdly if you do crazy things to bones in Additive, so try to keep it pretty minimal.

:::caution Additive First Layer Avatar Mask Ignored

The first layer (base layer, 0th layer, etc)'s Avatar Mask is ignored. This is for internal masking purposes. You can still mask other layers, but any mask you apply to the first layer will be ignored.
:::

Animations in Additive should _only_ affect transforms.

## Gesture

The Gesture layer is for animations that need to act on individual body parts while still playing the underlying animations for the rest of the body. Kind of like AV2 Gestures, but applied to any part of the body.

Utilize Avatar Masking to ensure that the animations *only* affect the parts of the avatar you want to animate! So, if you want your gesture parameters to only make hand shapes for left/right hand, you'll want to mask out those hands on each of the layers.

In addition, if you want to have an "idle" animation for non-humanoid bones like a tail, wings, ears, etc-- Gesture is where you should put it.

Animations in Gesture should _only_ affect transforms.

## Action

The Action layer is for bone animations that will override all other layers, when you need to take over total control of the character. Basically, think AV2 "Emotes".

This layer is **blended to zero by default.** Before you do anything in the action layer, you need to use the [Playable Layer Control State Behavior](/avatars/state-behaviors#playable-layer-control) to blend this layer up before transitioning to the actual action you're performing! Make sure you blend it back to zero when you're done.

Animations in Action should _only_ affect transforms.

## FX
FX is a **special layer.** On every other layer, you should not be using material animations, shader property animations, or blend shape animations, because they aren't copied to your mirror clone. Only transforms are.

However, in the FX layer, everything is copied over! In other words, ***everything that isn't a humanoid transform/muscle animation should go into the FX layer.*** This includes (but is not limited to) things like enabling/disabling GameObjects, components, material swaps, shader animations, particle system animating, etc.

The mask in the first FX layer, by default is empty, this will (at avatar init) create a default mask that disables all humanoid muscles, but enables all GameObject animations. This means that any animations in the hierarchy should work, although it is still NOT RECOMMENDED to animate transforms here.

If you have non-muscle animations in your gestures (e.g. your Gesture <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AvatarMask.html">mask</UnityVersionedLink> has any transforms checked at the bottom) those same transforms must be DISABLED in your FX mask. This will allow your Gesture animations to "show through" the FX layer.

:::info Example

Let's say your avatar has the following setup:
- You have a tail on your avatar (a chain of bones not part of humanoid hierarchy).
- Your Gesture animator layer for the tail has a special mask with only the chain of bones enabled.
- Your other Gesture animator layer with an "all-parts mask" also has those bones checked (along with the other body parts animated in the rest of the controller).

In this case, you'd also want to create a custom mask in the first FX layer. This would mask OFF all the muscles (human diagram all red) and mask OFF all the bones in the tail.
You'd also want to make sure this mask has the checkboxes ON for any transforms that have components you will be animating for FX. E.g. a body skinned mesh for animating blend shapes or materials.

:::

Note that if you have a game object in your hierarchy that has both an animated transform (in Gesture) and an animated effect component (in FX), this will not work with the requirements for the masks. This can occur if you have a simple static-mesh embedded in your hierarchy that you are animating in Gesture, but also applying a material change to in FX. Another example, would be putting a particle effect component directly on the example tail bones above. The simple workaround is to make a child game object and put the static-mesh or effect on that. You would not animate the transform of the child, only the parent. If you follow these steps, you should not need to put transform animations in the FX layer.

## Additional Poses
There are some additional poses available for Avatars 3.0 avatars. The buttons for these are under the Playable Layers.

### T-Pose
You can now provide your own T-Pose!

The T-Pose is used to determine various measurements of your avatar, especially for placement of your viewpoint (or view-ball). Viewpoint is dependent entirely on where your view-ball is when your avatar is in this T-Pose animation you provide.

[IMAGE: Standard T-Pose - [Mixamo]](/img/avatars/playable-layers-1.png)

Secondly, it is important for the wrist alignment/twist. The way your wrists are lined up in relation to the palm-down position will affect how your controller twisting in space will turn your wrist and arm.

Finally, your t-pose determines your wingspan-- your full length of your arms when in T-Pose. This also determines your avatar's interpupillary distance (IPD), or the distance between your avatars eyes. Having arms that are too long will make your IPD wider, making everything seem smaller. Having arms that are too short will make your IPD narrower, making everything seem larger.

In addition, (significant) joint bends in T-Pose aren't a good thing. As an example, if your elbows are bent in T-pose, this may affect many different things about your avatar that work off your proportions.

### IK Pose
IK Pose is used to determine major joint bends. In the IK pose, your joints should be bent slightly in the direction they're intended to bend. 

As an example, VRChat will look at the elbow bend from your IK Pose and determine if there is a angle bend in any given direction. That bend determines how your elbow bends.

The foot's rotation in IK Pose will determine how the knees will bend. This is set by first assuming the knee will bend straight forward relative to the avatar, then saving that direction against the foot's rotation in IK Pose. For example if the feet are pointed toes outward in IK Pose, that means the inside edge of the foot is more forward facing and therefore the knees will bend towards the inside edge of the foot. In the opposite case, if the feet are pointing more inward in IK Pose, the outside edge of the the foot is more forward facing (straight forward direction relative to the avatar) and so the knee will tend to bend towards the outside edge of the foot in that case.

In short: if you want your knees to bend more inward, rotate your feet outward in IK Pose. If you want your knees to bend more outward, rotate your feet inward in IK pose.

### Sitting Pose
The controller used in this slot is used for both animation and posing. When you sit, the viewpoint of your avatar is used for calibration. The animation is played, allowing you to create a "sitting down" animation, as well as a "sitting" idle animation.

If you want to make your own, fair warning: this can take some significant tweaking to get right! You may want to employ transition states for sitting down/standing up that will help a bit with how your avatar looks while sitting.

---

## Document: rig-requirements.md

Path: /avatars/rig-requirements.md
# Rig Requirements

:::caution

This page is significantly out of date, but should still be mostly accurate.
:::

This page explains some of the requirements for configuring your avatar's rig, bones, and armature. If you follow these requirements, your avatar's limbs should move correctly in VRChat.

You can also check the [SDK build panel](/avatars/creating-your-first-avatar#step-6---going-to-the-build-tab--checking-if-the-avatar-is-ok) and look for errors in the "Validations" section.
## Export Settings

When exporting your rig from your 3D editor of choice, ensure your coordinate settings are correct. Most of the time, the defaults are correct.

For Blender, ensure that your rest X rotation is 90 degrees.
## Humanoid Rig
Unity will flag your humanoid rig configuration if it does not meet the Mecanim requirements for a humanoid. Please read and be familiar with the [Unity Documentation on configuring avatars](https://docs.unity3d.com/Manual/FBXImporter-Rig.html).

:::danger Humanoid avatar must have head, hands and feet bones mapped.

You will see this message from the VRChat Build Control Panel if your avatar rig is humanoid but does not have the essential bones mapped.",

:::

:::note Non-human avatars

If your avatar diverges greatly from a human (ie. quadruped, hunching monster, etc), you should consider using a Generic rig and your own Animation Controller. See the SimpleAvatarController for an example. This is more advanced than making a humanoid, so you should be very familiar with Unity's Animation Controller system.
:::

## Finger Mappings

:::caution Thumb, Index, and Middle finger bones are not mapped, Full-Body IK will be disabled.

**This warning does not appear for SDK3 avatars, as they have no problem with using armatures without finger bones.** This error only occurs when using VRChat SDK2, which is deprecated and should not be used.

In order to have full IK (allowing crouching and automatic foot placement) you need to have these three finger bones mapped. If you ignore this warning, your avatar will not be able to crouch, and it's feet will not automatically step (unless you use controller locomotion).

It will also prevent custom animation overrides on hand gestures from being played back. (This is **not** currently mentioned by the warning in the SDK.)
:::

## Spine Hierarchy

:::danger Your rig has the UPPERCHEST mapped in the Humanoid Rig. This will cause problems with IK.

**This warning does not appear for SDK3 avatars, as they have no problem with using armatures with a mapped upper chest.** This error only occurs when using VRChat SDK2, which is deprecated and should not be used.

If you must use SDK2, leave the upper chest bone blank when configuring your humanoid.
:::

:::danger Spine hierarchy missing elements, make sure that Pelvis, Spine, Chest, Neck and Shoulders are mapped.

These bones must all be mapped. If you get this message make sure none of these slots are empty. Note that the Neck and Chest slots are optional for Mecanim, but required for VRChat.
:::

:::danger Spine hierarchy incorrect. Make sure that the parent of both Shoulders and the Neck is the Chest.

For the IK to work properly, you must have a specific hierarchy of bones around the chest. In your rig, your shoulder bones (mapped into Left Arm > Shoulder, Right Arm > Shoulder slots) must be direct children of your chest bone (mapped into Body > Chest slot). Also, the neck bone (mapped into Head > Neck slot) must also be a direct child of the Chest.
:::

## Arm and Leg Hierarchy

:::caution LowerArm is not first child of UpperArm or Hand is not first child of LowerArm: you may have problems with Forearm rotations.

VRChat's IK system looks at the first child of a bone when determining the bone layout. If you have other child bones, like prop-placement bones or twist-bones in your rig, they can confuse the IK. In this particular case, the SDK is seeing that your LowerArm is not the first-listed child of your UpperArm bone.

To fix this, move the child bone to the first position in the list of children of the parent bone. **You will have to unpack your avatar prefab to do this.** 

Note that this message is naming the slot, not the actual bone name in your rig, so you'll have to look to see what bone is in that slot.
:::

:::caution LowerLeg is not first child of UpperLeg or Foot is not first child of LowerLeg: you may have problems with Shin rotations.

See above.
:::

## Eye bones

Configure avatar's eye bones as follows: 

- The Y axis should point up.
- The Z axis should point forward.
## General Hierarchy

:::caution This avatar has a split heirarchy (Hips bone is not the ancestor of all humanoid bones). IK may not work correctly.

Some rigs split the hierarchy into two sections, upper and lower body. In this case the bone you put into the Body > Hips slot must be the ancestor (parent or higher) of the rest of the human bones you are mapping. Be very careful with these kinds of rigs! Often, the ancestor of these bones is a root bone on the ground or another placement which is a bad placement for a hip bone. Many of these rigs are unsuitable for use with VRChat and need to be re-rigged to work properly.
:::

## Full-Body Tracking
There are special considerations if you are using Full-Body tracking, ie. you have 3 HTC Tracking Pucks connected. There are several recommendations that will ensure that your avatar works well when using Full-Body tracking.

To see more detailed information on Full-Body Tracking rigging requirements, see our [Full-Body Tracking system guide](https://docs.vrchat.com/docs/full-body-tracking).
:::caution The angle between pelvis and thigh bones should be close to 180 degrees (this avatar's angle is ___). Your avatar may not work well with full-body IK and Tracking.

Full-body tracking is sensitive to the angle between the hip and upper leg bones. It's best to measure this angle when the AvatarTPoseController is applied to your avatar. Ideally, the hip bone is pointing straight up and the upper leg bones point straight down in the TPose, but slight divergence is okay. You can ignore this message if you are not going to use Full-Body Tracking.
:::

## Toe Bones
It is not required to map the Toe bones in a humanoid avatar. However, if you DO map them, your avatar is able to move up and down on their tiptoes. Mapping the toes also makes the automatic foot-stepping look more natural, as well as improving the appearance of balance by aligning the auto stance to the beginning of the toe bone rather than the heel.

---

## Document: shader-fallback-system.md

Path: /avatars/shader-fallback-system.md
---
title: "Shader Blocking and Fallback System"
slug: "shader-fallback-system"
hidden: false
createdAt: "2018-09-25T20:49:23.385Z"
updatedAt: "2022-08-12T01:21:02.481Z"
---
This page serves as a description of the Shader Blocking System, how it operates, and how shader authors can work with it so that their shader falls back gracefully when a user has Shaders blocked on an avatar using a given shader.

## VRChat 2021.4.2 Fallback System Upgrade
Shader fallback improvements work by using the "Tags" field at the top of the shader.
```text
Tags{"Queue"="Geometry"}
```
The tags field might look like this by default.

You can now add different tags, under the `VRCFallback` name, to specify which fallback shader to try to use:
```text
Tags{"Queue"="Geometry" "VRCFallback"="Toon"}
```
Some fallback tags are combine-able, you could for instance use `ToonCutout:`
```text
Tags{"Queue"="Geometry" "VRCFallback"="ToonCutout"}
```
The supported tags are as follows:

```text
Unlit
VertexLit
Toon
Transparent
Cutout
Fade
Particle
Sprite
Matcap
MobileToon
DoubleSided
Hidden //(this will hide the mesh from view if the shader is blocked, useful for things like raymarching effects.)
toonstandard
toonstandardoutline
```

Toon and Unlit can also be combined with Transparent, Cutout, Fade, and DoubleSided tags for more granular control. With Toon supporting such variations as DoubleSided Cutout.

:::caution

Please note that using Transparent or Fade tags with Toon will result in it falling back to Transparent Unlit. You might want to take that into account when picking fallback tags.
:::

Specifying any other tag will result in a Standard shader fallback.

The `toonstandard` and `toonstandardoutline` tags are special, in that they cannot be combined. They guarantee falling back to the `VRChat/Mobile/Toon Standard` and `VRChat/Mobile/Toon Standard (Outline)` shaders respectively. All same-named keywords and properties will be copied over.

If no tag is provided, the old fallback system will be used, following the pattern shader name, keywords, etc.

We now also copy ALL standard shader parameters to the fallback material, including the following:
```text
_MainTex
_MetallicGlossMap
_SpecGlossMap
_BumpMap
_ParallaxMap
_OcclusionMap
_EmissionMap
_DetailMask
_DetailAlbedoMap
_DetailNormalMap
_Color
_EmissionColor
_SpecColor
_Cutoff
_Glossiness
_GlossMapScale
_SpecularHighlights
_GlossyReflections
_SmoothnessTextureChannel
_Metallic
_SpecularHighlights
_GlossyReflections
_BumpScale
_Parallax
_OcclusionStrength
_DetailNormalMapScale
_UVSec
_Mode
_SrcBlend
_DstBlend
_ZWrite
```
## Old Fallback System
When a shader is blocked by the Safety System, it is first checked for one of the internal pre-compiled shaders in this list:
```text title="Pre-Compiled Internal Shaders"
  "Standard",
  "Standard (Specular setup)",
  "Effects/Rim",
  "Effects/GlowAdditiveSimple",
  "Legacy Shaders/Bumped Diffuse",
  "Legacy Shaders/Bumped Specular",
  "Legacy Shaders/Decal",
  "Legacy Shaders/Diffuse",
  "Legacy Shaders/Diffuse Detail",
  "Legacy Shaders/Diffuse Fast",
  "Legacy Shaders/Lightmapped/Diffuse",
  "Legacy Shaders/Lightmapped/Specular",
  "Legacy Shaders/Lightmapped/VertexLit",
  "Legacy Shaders/Parallax Diffuse",
  "Legacy Shaders/Parallax Specular",
  "Legacy Shaders/Reflective/Bumped Diffuse",
  "Legacy Shaders/Reflective/Bumped Specular",
  "Legacy Shaders/Reflective/Bumped Unlit",
  "Legacy Shaders/Reflective/Bumped VertexLit",
  "Legacy Shaders/Reflective/Diffuse",
  "Legacy Shaders/Reflective/Parallax Diffuse",
  "Legacy Shaders/Reflective/Parallax Specular",
  "Legacy Shaders/Reflective/Specular",
  "Legacy Shaders/Reflective/VertexLit",
  "Legacy Shaders/Self-Illum/Bumped Diffuse",
  "Legacy Shaders/Self-Illum/Bumped Specular",
  "Legacy Shaders/Self-Illum/Diffuse",
  "Legacy Shaders/Self-Illum/Parallax Diffuse",
  "Legacy Shaders/Self-Illum/Parallax Specular",
  "Legacy Shaders/Self-Illum/Specular",
  "Legacy Shaders/Self-Illum/VertexLit",
  "Legacy Shaders/Specular",
  "Legacy Shaders/Transparent/Bumped Diffuse",
  "Legacy Shaders/Transparent/Bumped Specular",
  "Legacy Shaders/Transparent/Cutout/Bumped Diffuse",
  "Legacy Shaders/Transparent/Cutout/Bumped Specular",
  "Legacy Shaders/Transparent/Cutout/Diffuse",
  "Legacy Shaders/Transparent/Cutout/Soft Edge Unlit",
  "Legacy Shaders/Transparent/Cutout/Specular",
  "Legacy Shaders/Transparent/Cutout/VertexLit",
  "Legacy Shaders/Transparent/Diffuse",
  "Legacy Shaders/Transparent/Parallax Diffuse",
  "Legacy Shaders/Transparent/Parallax Specular",
  "Legacy Shaders/Transparent/Specular",
  "Legacy Shaders/Transparent/VertexLit",
  "Legacy Shaders/VertexLit",
  "MatCap/Vertex/Textured Lit",
  "Mobile/Bumped Diffuse",
  "Mobile/Bumped Specular",
  "Mobile/Bumped Specular (1 Directional Light)",
  "Mobile/Diffuse",
  "Mobile/Unlit (Supports Lightmap)",
  "Mobile/Particles/Additive",
  "Mobile/Particles/Alpha Blended",
  "Mobile/Particles/Multiply",
  "Mobile/Particles/VertexLit Blended",
  "Particles/~Additive-Multiply",
  "Particles/Additive",
  "Particles/Additive (Soft)",
  "Particles/Alpha Blended",
  "Particles/Alpha Blended Premultiply",
  "Particles/Anim Alpha Blended",
  "Particles/Multiply",
  "Particles/Multiply (Double)",
  "Particles/VertexLit Blended",
  "Sprites/Default",
  "Sprites/Diffuse",
  "Toon/Lit",
  "Toon/Lit (Double)",
  "Toon/Lit Cutout",
  "Toon/Lit Cutout (Double)",
  "Toon/Lit Outline",
  "UI/Default",
  "Unlit/FailShader",
  "VRChat/UI/Default"
```
If an internal shader is matched, the fallback is a new shader of the same type, but using the internally compiled shader. All the parameters are copied. New versions or variants not included will not work, since they will be replaced.

If the shader is not internally matched, The name of the shader (not the filename, but as provided in the top line of the shader source) is used to match some identifying features and replace with a fallback shader of similar type:
```text title="Fallback Shader Name Searches"
  "Unlit",
  "VertexLit",
  "Toon",
  "Outline",
  "Transparent",
  "Fade",
  "Cutout",
  "Particle",
  "Sprite",
  "MatCap"
```
These names can fall anywhere within the full string of the shader name.

Additionally, some shader properties are searched:
```text title="Shader Properties"
"_Ramp" == "Toon"
"_ALPHABLEND_ON" == "Transparent"
"_ALPHATEST_ON" == "Cutout"
```
All matching is case-sensitive.

Attempts are made to create fallback material that approximate the matched names. For example, names containing "Sprite" fallback to the Unity built-in "Sprites/Default" shader.

You can combine "Toon" and "Cutout", or "Toon" and "Outline" for combination shaders, however "Transparent" and "Fade" do not currently have a Toon Lit shader and instead fallback to "Unlit/Transparent".

Support for "Outline" is highly experimental and may be removed if performance suffers.

For "Toon" shaders, the "_Ramp" parameter is copied (Texture2D).
For "MatCap" shaders, the "_MatCap" parameter is copied (Texture2D)

If no matches are found in the shader name, a Standard material is used.

An attempt is made to transfer parameters named "_MainTex" and "_Color" to the fallback shader. If neither parameter is matched, a Matcap shader is provided with the color set to the user's rank color.

All this is highly subject to change as we tune the shader fallback system.

## Previewing Fallback Shaders for your Avatar
It's possible to force your own avatar to use fallback shaders locally via a toggle in the Action Menu. To activate this option, open your Action Menu and choose "Options" -> "Avatar" -> "Fallback Shaders". Once toggled on, any avatar you use will display locally with fallback shaders. The option will stay active when switching avatars but will reset on world change. This option does not affect how others view your avatar.

---

## Document: state-behaviors.md

Path: /avatars/state-behaviors.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# State Behaviors

:::caution Unity Knowledge Required

This document is written with the assumption that you know a bit about <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AnimatorController.html">Unity Animators</UnityVersionedLink>.
:::
When you've got a specific state selected in the Animator view, you'll be able to add State Behaviors. They're a bit like components for states. They do different things. Try adding them, and you'll see what they can do!

All state behaviors run on the first frame of the transition into that state. 

State behaviors *should* run no matter how long the state machine remains in the state containing the state behavior.

:::caution

The term "should" is deliberately used here, as in the <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/StateMachineBehaviours.html">Unity documentation</UnityVersionedLink> does not define any guarantee that state behaviors will execute given very small transition or state durations.

If you wanted to be **completely** safe, ensure the total time spent in the state containing the state behavior and any transitions directly to that state is a minimum of 0.02 seconds-- although in practice, this doesn't seem to be required.

:::

## Animator Layer Controller

[IMAGE: VRC Animator Layer Control component]

The Animator Layer Control allows you to blend the weight of a specific Animator Layer inside any given Playable Layer over any given time.

If the state is exited mid-blend duration, the target layer is immediately set to the goal weight.

The layer weight will remain until some other state runs this State Behavior again and resets it.

| Property Name  | Purpose                                                                                       |
| -------------- | -------------------------------------------------------------------------------------------- |
| Playable       | Allows you to select which Playable Layer you're affecting.                                  |
| Layer          | The Index of the Playable Layer you wish to affect. You can't change the weight of the 0th (base) layer-- it is always set to 1.0 weight. |
| Goal Weight    | Define the weight you want to blend to.                                                      |
| Blend Duration | Define the time period (in seconds) that you want the blend to take. 0 means instant.        |
| Debug String   | When this StateBehavior runs, this string will be printed to the output log. Useful for debugging. |


## Animator Locomotion Control

[IMAGE: VRC Animator Locomotion Control component]

The Animator Locomotion Control allows you to disable locomotion in a given state of an animator. The Locomotion state will remain until some other state runs this State Behavior again and changes it.

In Desktop mode, this disables translational movement, and restricts rotational (view) movement to the vertical axis. In VR, this disables translational and rotational controller movement and restricts half-body IK (full-body IK is unaffected). In both modes, the player's capsule is frozen in place.

| Parameter | Description |
| - | - |
| Disable Locomotion | If set to True, locomotion (moving with the controls) will be disabled. Roomscale movement will still be possible. If set to False, will enable locomotion. |
| Debug String | When this StateBehavior runs, this string will be printed to the output log. Useful for debugging. |

## Animator Temporary Pose Space

[IMAGE: VRC Animator Temporary Pose Space component]

The Animator Temporary Pose Space control allows you to move the viewpoint of the person wearing the avatar to the head at that given point of the animator state.

The view will remain set until some other state runs this State Behavior again and resets or clears it.

This behavior is executed when the delay time has elapsed.

Animator Temporary Pose Space should **only** be used when the view height needs to update due to a posture change, like sitting or laying on the ground. It cannot be used to "scale" the avatar being worn, and will cause major breaking problems if used in this manner.
:::danger

This state behavior **will not execute** if the state this behavior is on is exited or interrupted before `Delay Time` elapses!
:::

| Property Name | Purpose                                                                                                                                                   |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Pose Space    | Enter or exit. Enter sets the pose space, exit will clear it to default.                                                                                    |
| Fixed Delay   | Should the delay time be a fixed period of time, or a percentage of the state's duration?                                                                   |
| Delay Time    | If given a value, the viewpoint will be set after a delay. Useful if you're blending into an animation over a certain time.                                |
| Debug String  | When this StateBehavior runs, this string will be printed to the output log. Useful for debugging.                                                          |


## Animator Tracking Control

[IMAGE: VRC Animator Tracking Control component]

The Animator Tracking Control allows you to enable or disable IK or simulated movement on various different parts of the avatar body. Setting the option to "No Change" will not change the body part from its current value. "Tracking" will set it to following IK or simulated movement. "Animation" will force that body part to respect values as given by the avatar's Animator.

If you set all IK tracking points to Animation, your animation will play as the Animation remotely, instead of being translated through Networked IK. For the various types of tracking, these "IK tracking points" are:

- Desktop: Head, Left Hand, Right Hand
- 3pt Tracking: Head, Left Hand, Right Hand
- 6pt / FBT Tracking: Head, Left Hand, Right Hand, Hip, Left Foot, Right Foot

:::note

All parts are IK-driven, aside from the Eyes and Eyelid, which are simulated. Mouth and Jaw are driven by visemes.

As an example, setting Left and Right Hand to Animation will ignore the position of the hands (and arms) as defined by IK, and will instead use any currently-active state's motion to define the position of the hands and arms. Setting them back to Tracking will use IK instead. 

Setting Eyes & Eyelid to Animation will disable eye movement and eyelid blinking. Setting Eyes & Eyelid to Tracking will re-enable the simulated eye movement and blinking.

Setting Mouth and Jaw to Animation will disable visemes, and viseme parameters will stop being updated. Setting Mouth and Jaw will re-enable visemes and they will start updating again.
:::
The Tracking setting will be kept until some other state runs this State Behavior again and resets it.

| Parameter | Description                                                                                         |
| :-- |:----------------------------------------------------------------------------------------------------|
| Tracking Control | See description above.                                                                              |
| Debug String | When this State Behavior runs, this string will be printed to the output log. Useful for debugging. |

## Avatar Parameter Driver

[IMAGE: image]

The Avatar Parameter Driver can manipulate Animator Parameters in a variety of ways. A single Avatar Parameter can perform multiple operations, and they are done in order from top to bottom. These operations are completed *once* upon entry to the State upon which the behavior resides.

`Local Only` will cause the driver to only operate locally, as a shortcut instead of detecting `isLocal`.

Clicking "Add" will add a new operation to the Driver. The first type (which is selected by default) is "Set".

If modifying a synced parameter (anything defined in the VRCExpressionParameters object) those values will be clamped to their maximum range. Int [0,255] Float [-1,1].

However, Parameters only defined in the Animation Controller (aka, "local parameters") can still be modified by a parameter driver. Those values aren't clamped.

You also cannot drive any of the [VRChat-defined Animator Parameters](/avatars/animator-parameters).

Set, Add, Random, and Copy work for `float` and `int`. Set, Random, and Copy work for `bool`.

### Set
Set will simply set the Value to the named Parameter in Destination.

[IMAGE: state-behaviors-121fe2a-2022-06-02_18-11-13_NVIDIA_Share.png]

### Add
Add will add the Value to the named Parameter in Destination.

As the component points out, using Add may not produce the same result when run on a remote instance of the avatar. When using Add, it is suggested to use a synced Destination Parameter and only run the driver locally.

[IMAGE: state-behaviors-e10bb6a-2022-06-02_18-11-17_Unity.png]
        
### Random
Random will set the Destination Parameter to a random number between Min Value and Max Value.

As the component points out, using Random may not produce the same result when run on a remote instance of the avatar. When using Random, it is suggested to use a synced Destination Parameter and only run the driver locally.

[IMAGE: state-behaviors-99c6248-2022-06-02_18-11-23_Unity.png]

### Copy
Copy will set the value of the Source Parameter to the Destination Parameter. This can be used to set one float to match another float, to remap one float into a different range, or to convert between two different types entirely.
:::caution

VRChat's built-in parameters, such as `GestureLeftWeight`, **can** be specified but do not work as source parameters.
:::

[IMAGE: state-behaviors-bffdb10-2022-06-02_18-11-30_Unity.png]

#### Converting between types
When converting from a `bool`, False counts as 0 and True counts as 1.

When converting to a `bool`, 0 is False and *anything* else is True.
When converting to an `int`, it will always round *down* to the nearest whole number.
When converting to a `float`, it will directly copy the value, even if it goes outside the range that it is capable of syncing to other players.

#### Custom Ranges
You can also use the `Convert Range` checkbox to enable some additional UI that allows you to set custom conversion ranges. This can be used to remap values or to have more control over exactly how it converts from one type to another type.

[IMAGE: state-behaviors-cab639b-2022-06-02_18-35-32_Unity.png]

## Playable Layer Control

[IMAGE: VRC Animator Layer Control component]

The Playable Layer Control allows you to blend the weight of the entire Playable Layer to a specified value over specified duration. Very similar to Animator Layer Control, but instead controls the entire Playable Layer.

The Action Playable layer will use this State Behavior often, as the Action layer has weight zero by default, and should always be blended back to zero after the animation is complete.

If the state is exited mid-blend duration, the playable layer is immediately set to the goal weight.

| Property Name  | Purpose                                                                                                        |
| -------------- | -------------------------------------------------------------------------------------------------------------- |
| Layer          | The Playable Layer to affect.                                                                                   |
| Goal Weight    | The Playable layer weight to target after blending is complete.                                                 |
| Blend Duration | The amount of time to take to blend to the layer. Zero is instant.                                              |
| Debug String   | When this StateBehavior runs, this string will be printed to the output log. Useful for debugging.             |

## Animator Play Audio

[IMAGE: image]

The "Animator Play Audio" behavior modifies an AudioSource when transitioning to the animation state. It can change the audio clip, pitch, or loop value, and it can play the AudioSource.

The relative path of the AudioSource (i.e. `Armature/Hips/Spine/`) must be entered into the "Source Path" property. This property can be filled out automatically by selecting an audio source component. If the audio source is on the root of the avatar, "Source Path" should be blank.


The "Playback order" property does not guarantee that audio clips are played in the same order for all players. For example, the "Random" setting may choose a different clip for each player. If you want to guarantee that all players hear the same clip, use multiple animation states or change "Playback Order" to "Parameter" in conjunction with a synced animator parameter. 

"Animator Play Audio" can be added to states inside a sub-state machine. However, adding it to the sub-state machine itself is not recommended. The state behavior will be applied for every state transition in the sub-state machine, which may cause unintended interactions with other state behaviors.

| Property Name | Purpose |
| ---- | ---- |
| Source Path | The path to the AudioSource relative to the avatar's root transform.<br/>If the AudioSource is not found when transitioning to this state for the first time, AnimatorPlayAudio will be disabled. |
| Playback Order | Determines which audio clip is chosen when transitioning to this state.<br/>• Random: Chooses a random clip. (Default)<br/>• Unique Random: Chooses a random audio clip, but not the same clip twice in a row.<br/>• Roundabout: Chooses the first clip, then the second, and so on. After the last clip, the first clip is chosen again.<br/>• Parameter: Chooses a clip based on an ["int" type avatar parameter](/avatars/animator-parameters#parameter-types). For example, if the parameter is 0, the first clip is chosen. The parameter must be defined in the avatar's Expressions Parameters. If the parameter cannot be found, the first clip is chosen instead. |
| Clips | A list of AudioClips that can be applied to the AudioSource when transitioning to this state. |
| Random Volume | The random volume that is applied to the AudioSource when transitioning to this state. Clamped from 0 to 1.<br/>• Min: The minimum random volume. (Default: 1)<br/>• Max: The maximum random volume. (Default: 1) |
| Random Pitch | The random pitch that is applied to the AudioSource when transitioning to this state. Clamped from -3 to 3.<br/>• Min: The minimum random pitch. (Default: 1)<br/>• Max: The maximum random pitch. (Default: 1) |
| Loop | Whether the AudioSource's looping should be set enabled or disabled when transitioning to this state. |
| On Enter | Whether to start or stop the AudioSource when transitioning into this state.<br/>🗹 Stop Audio Source (Default: Enabled)<br/>🗹 Play Audio Source (Default: Enabled) |
| On Exit | Whether to start or stop the AudioSource when transitioning out of this state.<br/>☐ Stop Audio Source (Default: Disabled)<br/>☐ Play Audio Source (Default: Disabled) |
| Play On Enter Delay In Seconds | The delay before "Play On Enter" plays a clip, if enabled. Clamped from 0 to 60 seconds. (Default: 0 seconds) |

Each audio setting has an additional property. By default, it's set to "Apply If Stopped". This prevents the setting from being applied if the audio source has not finished playing its previous clip and "Stop Audio Source On Enter" is disabled.

| Setting name     | On Enter |
|------------------|------------------------------------------------------------------------------------------- |
| Always Apply     | The setting is applied to the audio source, even if it is currently playing a clip.               |
| Apply If Stopped | The setting is applied to the audio source unless it's already playing a clip. (Default)   |
| Never Apply      | The setting is unused and greyed out in the inspector.                                     |


---

## Document: index.md

Path: /avatars/whitelisted-avatar-components/index.md
---
slug: "whitelisted-avatar-components"
---

import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Allowed Avatar Components

You can add features to your avatar by <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/UsingComponents.html">adding components</UnityVersionedLink> to it. However, not all components can be used in VRChat. 

- Any component on the following list can be used in VRChat.
- Other components or custom scripts won't work in VRChat and may stop you from uploading your avatar.

:::info

The Android version of VRChat has [additional restrictions](/platforms/android/quest-content-limitations#components).

:::
## VRChat

- VRCAvatarDescriptor
- [VRCConstraint](/avatars/avatar-dynamics/constraints)
- [VRCContactReceiver](/avatars/avatar-dynamics/contacts#vrccontactreceiver)
- [VRCContactSender](/avatars/avatar-dynamics/contacts#vrccontactsender)
- [VRCHeadChop](/avatars/avatar-dynamics/vrc-headchop)
- [VRCIKFollower](https://docs.vrchat.com/docs/vrc_ikfollower) - Deprecated! You should use [VRChat Constraints](/avatars/avatar-dynamics/constraints) instead.
- [VRCPhysBone](/avatars/avatar-dynamics/physbones#vrcphysbone)
- [VRCPhysBoneCollider](/avatars/avatar-dynamics/physbones#vrcphysbonecollider)
- [VRCPipelineManager](/sdk/vrcpipelinemanager/)
- [VRCSpatialAudioSource](/worlds/components/vrc_spatialaudiosource#spatial-audio-on-avatars)
- [VRCStation](/worlds/components/vrc_station)

## Unity

- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AimConstraint.html">AimConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Animation.html">Animation</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Animator.html">Animator</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AudioSource.html">AudioSource</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Camera.html">Camera</UnityVersionedLink> (See [notes below](#cameras-on-avatars))
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Cloth.html">Cloth</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/CollidersOverview.html">Collider</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-FlareLayer.html">FlareLayer</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/Joints.html">Joints</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Light.html">Light</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-LineRenderer.html">LineRenderer</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-LookAtConstraint.html">LookAtConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-MeshFilter.html">MeshFilter</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-MeshRenderer.html">MeshRenderer</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ParentConstraint.html">ParentConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/PartSysRendererModule.html">ParticleSystemRenderer</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ParticleSystem.html">ParticleSystem</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-PositionConstraint.html">PositionConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Rigidbody.html">Rigidbody</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-RotationConstraint.html">RotationConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ScaleConstraint.html">ScaleConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-SkinnedMeshRenderer.html">SkinnedMeshRenderer</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-TrailRenderer.html">TrailRenderer</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-Transform.html">Transform</UnityVersionedLink>

### Cameras on Avatars

For avatars worn by the local user, Camera components are fully whitelisted. For remote users, the following rules apply:
    - In all cases, the Camera components of remote users are disabled when the avatar is loaded.
      - You can use animations to enable Camera components.
    - If the local user and remote user are friends, Camera components are not removed.
      - Note that becoming friends with a user does not automatically reload their avatar.
    - If the local user has selected "Show Avatar" for the remote user in VRChat's quick menu, Camera components are not removed.
    - If neither of the above is true, Camera components are removed and cannot be enabled.

## [Root Motion (FinalIK)](http://www.root-motion.com/finalikdox/html/index.html)

VRChat has highly modified its implementation of FinalIK. As such, these components may not work as documented.

We do not directly support or test custom FinalIK implementations on avatars. However, they *should* work fine, and if we must intentionally break one or more of these, we will try our best to inform creators. 

If you discover a bug, please [let us know](https://feedback.vrchat.com).

- [Aim IK](http://www.root-motion.com/finalikdox/html/page1.html)
- [Biped IK](http://www.root-motion.com/finalikdox/html/page4.html)
- [CCDIK](http://www.root-motion.com/finalikdox/html/page5.html)
- [FABRIK](http://www.root-motion.com/finalikdox/html/page6.html)
- [Full Body Biped IK](http://www.root-motion.com/finalikdox/html/page8.html)
- [Grounder](http://www.root-motion.com/finalikdox/html/page9.html)
- [Limb IK](http://www.root-motion.com/finalikdox/html/page12.html)
- [Rotation Limits](http://www.root-motion.com/finalikdox/html/page14.html)
- Shoulder Rotator
- Twist Relaxer
- [VRIK](http://www.root-motion.com/finalikdox/html/page16.html)[^2]

[^2]: Using this script on a humanoid avatar will break it.

## [DynamicBone](https://assetstore.unity.com/packages/tools/animation/dynamic-bone-16743)
:::danger Dynamic Bone Deprecated

Support for Dynamic Bone is deprecated. You should use [PhysBones](/avatars/avatar-dynamics/physbones) instead.
  
:::

- DynamicBone
- DynamicBoneCollider

---

## Document: accessibility.md

Path: /contribute/accessibility.md
# Accessibility

import BrowserWindow from '@site/src/components/BrowserWindow';
import APITable from '@site/src/components/APITable';

You can make your documentation more accessible and inclusive by structuring it well and providing helpful metadata.

This page summarizes some key points from Google's free [Tech Writing for Accessibility](https://developers.google.com/tech-writing/accessibility/self-study) course ([CC BY 4.0](https://creativecommons.org/licenses/by/4.0/)).

## Use simple language

Most users who read VRChat's Creation documentation speak English. But they may not understand complex words or phrases.

- Avoid unfamiliar jargon, US-based slang, pop-cultural references, and complicated linguistic constructions.
- Follow the [style guide](/contribute/style) to improve the clarity of your documentation.

## Create helpful headings

Markdown support different levels of headings. Headings improve the structure of your document and help your readers understand it.

- Every document should use a level-1 heading (`#`) for its title.
- Use other heading levels (`##`, `###`... ) to create sections.
- Don't skip heading levels (i.e., jumping from `##` to `#####`).

## Include informative link text

People who use screen readers often use them to scan a page to hear just the links. Use informative link text to ensure that your audience hears meaningful information, not just "Learn more, learn more, learn more."

- Avoid: [Learn more](/roadmap), [Click here](/roadmap), [This page](/roadmap)
- Better: Learn more about [our roadmap](/roadmap).

## Write helpful alt text

Markdown allows you to provide [alternative text](https://developers.google.com/tech-writing/accessibility/self-study/write-alt-text) for your images. Screen readers narrate alt text for readers who are blind or who have low vision.

Use a short phrase or one or two sentences. Long descriptions interrupt the reading flow for screen reader users.

- Don't include extra words like "Image of" or "Photo of."
- Capitalize the first word and include a final period.
- Use other punctuation as necessary.

For example:

```md
[IMAGE: An avatar with a backpack walks into a blue, holographic world. It's surrounded by floating objects from Unity and Udon.]
```

```mdx-code-block
<BrowserWindow>
```
[IMAGE: An avatar with a backpack walks into a blue, holographic world with floating Unity objects and Udon Graph elements .]
```mdx-code-block
</BrowserWindow>
```



---

## Document: index.md

Path: /contribute/index.md
---
sidebar_position: 50
---
# Contribution guide

Anyone can suggest improvements to VRChat's Creation documentation! Click "Edit this page" at the bottom of any page and follow the [instructions on GitHub](https://github.com/vrchat-community/creator-docs/blob/main/README.md). VRChat will review your changes and publish them.

These guidelines explain how you should write and structure documentation:

- [Accessibility guide](./accessibility)
- [Style guide](./style) 
- [Syntax guide](./syntax) 

:::tip

Use the "Feedback" button to suggest simple changes. We'll take care of it!

:::


---

## Document: style.md

Path: /contribute/style.md
# Style guide

import BrowserWindow from '@site/src/components/BrowserWindow';
import APITable from '@site/src/components/APITable';

This page explains how to write clear, concise, and friendly documentation. It's a summary of Google's free [Technical Writing](https://developers.google.com/tech-writing/overview) course ([CC BY 4.0](https://creativecommons.org/licenses/by/4.0/)) and recommends how to apply it to VRChat's Creation documentation.

You should read this page before you contribute to VRChat's creation documentation. 

:::info

VRChat's Creation documentation predates this style guide. If you want to suggest improvements to any page, please submit a [pull request](https://github.com/vrchat-community/creator-docs/pulls).

:::

## Terms and Acronyms

Unity, VRChat, and the VRChat SDK contain [terms](https://developers.google.com/tech-writing/one/words) that your reader may not be familiar with. Identify those terms when writing your documentation. 

- If you are introducing a new term, explain it. If a term already exists, provide a link to the page that explains it.
	- For example: "The 'Marketplace' tab allows you to see all VRChat worlds that use the [Creator Economy](/economy/).
- Try to use terms consistently. Don't switch between similar versions of the same term.
	- For example: "GameObject" and "game object."
- Use **lowercase** for terms that aren't unique to VRChat or the SDK, even if they mean something specific in VRChat.
	- For example: **a**vatar, **w**orld, **c**reator.
- **Capitalize** terms that are specific to VRChat or SDK, even if they include one of the words above.
	- For example: **A**vatars SDK, **W**orlds SDK, **V**RChat, **C**reator **E**conomy, **C**reator **E**conomy.

You can use acronyms for terms that are used frequently in your document. When you use an acronym in your document for the first time, you should define it. For example:  

- Software Development Kit (SDK)
- VRChat Creator Companion (VCC)
- Creator Economy (CE)

Don't define acronyms that won't be used often - use the full term instead.
## Active voice

You should write most of your documentation in the [active voice](https://developers.google.com/tech-writing/one/active-voice), not in the passive voice. The following table shows how active voice can make your sentences clearer to read:

| Passive voice                       | Active Voice               |
| ----------------------------------- | -------------------------- |
| Avatars can be created by anyone.   | Anyone can create avatars. |
| Products are contained in listings. | Listings contain products. |

The active voice also helps you highlight the actor in your sentence. The passive voice sometimes omits the actor:

| Passive voice                                 | Who is the subject? | Active voice                                      |
| --------------------------------------------- | ------------------- | ------------------------------------------------- |
| Wait for your content to be uploaded.         | The SDK             | Wait for **the SDK** to upload your content.      |
| This option must be enabled in the inspector. | You (the reader)    | **You** must enable this option in the inspector. |

## Clear sentences

Use strong verbs and subjects to write [clearer sentences](https://developers.google.com/tech-writing/one/clear-sentences). Strong verbs improve the clarity of your sentences and engage your readers. Avoid weak, imprecise, or generic verbs. For example:

| Weak verb  | Weak verb                                    | Strong verb                              |
| ---------- | -------------------------------------------- | ---------------------------------------- |
| **Be**     | **Be** careful not to exceed...              | **Ensure** that you don't exceed...      |
| **Occur**  | The issue **occurs** when upgrading the SDK. | Upgrading the SDK **causes** this issue. |
| **Happen** | Avatar performance issues **happen** if...   | Avatars **reduce** performance if...     |

Forms of "be" (is, are, was, were... ) are sometimes the best choice. You don't need to always replace them - but take the time to consider alternatives.

Sentences that start with "There is" combine a weak subject ("There") with a weak verb ("is"). Improve your sentences by replacing "There is" with strong subjects and verbs:

| Sentence with there is / are                                             | Sentence with strong verb and subject                       |
| ------------------------------------------------------------------------ | ----------------------------------------------------------- |
| There is an auto-layout option that arranges your windows automatically. | The auto-layout option arranges your windows automatically. |
| There are many ways to detect the VRChat SDK.                            | You can detect the VRChat SDK in many ways.                 |
| There is no guarantee the master player will respond.                    | The master player may not respond.                          |

## Short sentences

[Short sentences](https://developers.google.com/tech-writing/one/short-sentences) are usually easier to read, understand, and maintain than long sentences.

- Focus each sentence on a single idea. If your sentence contains multiple thoughts, separate it into multiple sentences.
- When you use the conjunction "or" in a long sentence, consider turning it into a bulleted list.
- Replace extraneous phrases with concise words. For example, replace "at this point in time" with "now." 

## Lists and tables

[Lists and tables](https://developers.google.com/tech-writing/one/lists-and-tables) can make your documentation easier to understand. 

- Introduce each list and table with a sentence. Tell readers what it represents.
- Capitalize the first letter of each item. If you use sentences, punctuate them.
- Items should "belong" with each other or be in a similar category.


The following list explains how to choose which type of list you should use:

| Type of list      | Example                                                            | Description                                                                                                                                                |
| ----------------- | ------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Bulleted list** | <ul><li>Avatars</li><li>Worlds</li></ul>                           | Use bulleted lists for unordered items. Changing the order does not change the meaning of the list.                                                        |
| **Numbered list** | <ul><li>1. Download the SDK.</li><li>2. Install the SDK.</li></ul> | Use numbered lists for ordered items. Changing the order changes the meaning of the list.<br/>Start each item with an imperative verb, such as "download." |


:::warning

Markdown syntax does not support line breaks or lists inside tables. You can use HTML tags like `<br/>`, `<ul>`, and `<li>` instead, but this usually affects the table's formatting.

:::

## Paragraphs

[Paragraphs](https://developers.google.com/tech-writing/one/paragraphs) help the reader by breaking up complex ideas into smaller topics. Here's how to structure good paragraphs:

- Write a great opening sentence. It should establish what the paragraph is about.
- Focus each paragraph on a single topic. Move or remove sentences that don't relate to the current topic.
- Avoid very long paragraphs. Walls of text intimidate readers.
- Avoid very short paragraphs. Combine them or turn them into lists.

## Audience

When you write documentation, consider who your [audience](https://developers.google.com/tech-writing/one/audience) is and what you want them to learn. Here are some assumptions you can almost always make:

- Your audience has access to VRChat on Steam, Oculus, Pico, Android, or iOS. 
- Your audience knows about basic VRChat concepts such as players, avatars, worlds, friends, and virtual reality.
- Your audience speaks English but might not be native speakers.
- Your audience knows how to create a VRChat world or avatar Unity project with the Creator Companion.

VRChat's Creation documentation has a wide audience. Some pages are meant for beginners who need introductory guides. Other pages are for experts who are already familiar with the basics. If your audience already knows something, you don't need to repeat it. For example: 

- The audience of [Getting Started](/sdk/) wants to create something with the SDK.
	- You want to teach them how to use the Creator Companion to create a simple Unity project with the VRChat SDK.
	- You don't need to explain what VRChat is.
- The audience of [Avatar Scaling](/avatars/avatar-scaling) knows how to use the Avatars SDK.
	- You want to give them a detailed explanation about the limitations of avatar scaling.
	- You don't need to explain how to get started with the VRChat Avatars SDK.


---

## Document: syntax.md

Path: /contribute/syntax.md
# Syntax guide

import BrowserWindow from '@site/src/components/BrowserWindow';
import APITable from '@site/src/components/APITable';

Most documentation pages consist of text. However, you can use additional syntax to make your pages easier to read.

## Markdown

Your pages are written in [Markdown](https://en.wikipedia.org/wiki/Markdown). Markdown documents are easy to edit and preview in any text editor. Here is a very simple example of a documentation page:

```md
# Example page

This is an example page with a title and some text.
```

The VRChat Creation documentation is built with [Docusaurus](https://docusaurus.io/). Docusaurus turns your Markdown file into a web page:

```mdx-code-block
<BrowserWindow>
```

# Example page

This is an example page with a title and some text.

```mdx-code-block
</BrowserWindow>
```

Docusaurus uses [MDX](https://mdxjs.com/), an extension of Markdown. You can use Docusaurus and MDX to enhance your documentation in various ways.

:::tip

You can learn how any page was created by clicking "Edit this page" at the bottom of any page.

:::

## Preview your changes

If you want to submit complex changes to VRChat's documentation, you should preview them on your computer. This allows you to see how your changes will look on the website.

To preview your changes, follow the [instructions on GitHub](https://github.com/vrchat-community/creator-docs?tab=readme-ov-file#local-development):
1. [Create your fork](https://github.com/vrchat-community/creator-docs/fork) of the [creator documentation repository](https://github.com/vrchat-community/creator-docs) on GitHub.
2. Clone your fork with [Git](https://www.git-scm.com/).
3. Install Docusaurus with [npm](https://www.npmjs.com/) by running `npm install` in the `Docs/` folder. 
4. Start Docusaurus with [npm](https://www.npmjs.com/) by running `npm run start` in the `Docs/` folder. 

## Front matter

[Front matter](https://docusaurus.io/docs/markdown-features#front-matter) is optional data about your markdown file. You can use it to change how Docusaurus presents your page in the documentation.

You can add front matter at the top of the file, enclosed by three dashes (`---`). The content is parsed as [YAML](https://yaml.org/spec/1.2.2/).

```
---
unlisted: true
---
```

The following table shows the most useful frontmatter fields. You can find a [full list in Docusaurus's documentation](https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-docs#markdown-front-matter). 

```mdx-code-block
<APITable>
```

| Name                    | Type      | Default value         | Description                                                                                                | Recommendation                                                       |
| ----------------------- | --------- | --------------------- | ---------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| `sidebar_label`         | `string`  | Markdown title (`#`)  | The title of your page in the sidebar.                                                                     | Consider improving your page title instead of using `sidebar_label`. |
| `sidebar_position`      | `number`  | Alphabetical ordering | The position of your page in the sidebar.                                                                  | Only use `sidebar_position` when the sidebar order is important.     |
| `slug`                  | `string`  | Markdown file name    | The URL of your document.                                                                                  | Consider using an appropriate file name instead of using `slug`.     |
| `toc_min_heading_level` | `number`  | `2` (`##`)            | The minimum heading level shown in the table of contents. Must not be higher than `toc_max_heading_level`. | Consider creating multiple pages instead.                            |
| `toc_max_heading_level` | `number`  | 3 (`###`)             | The max heading level shown in the table of contents. Must be between `2` and `6`.                         | Consider creating multiple pages instead.                            |
| `unlisted`              | `boolean` | `false`               | Hides the page from the sidebar after being published on `creators.vrchat.com`.                            | Do not unlist pages that readers may find important.                 |
```mdx-code-block
</APITable>
```

- Do not use the [`title`](https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-docs#unlisted) property. Use a Markdown title (`#`) instead.
- Do not use the [`last_update`](https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-docs#last_update) property. It is automatically calculated.

## Admonitions

You can use admonitions to highlight short, important information. Admonitions stand out from the rest of our text.

- Don't overuse admonitions.
- Don't override admonition titles.


```
:::tip

Use this for important recommendations or shortcuts.

:::

:::info

Use this for important limitations or context.

:::

:::warning

Use this important warnings or potential errors.

:::

:::danger

Use this for actions that can lead to irreversible damage. 

:::
```

```mdx-code-block
<BrowserWindow>
```
:::tip

Use this for important recommendations or shortcuts.

:::

:::info

Use this for important limitations or context.

:::

:::warning

Use this for potential errors or how to avoid them.

:::

:::danger

Use this for actions that can lead to irreversible damage. 

:::
```mdx-code-block
</BrowserWindow>
```

## Code blocks

To include UdonSharp code on your page, use three backticks to create a [code block](https://docusaurus.io/docs/markdown-features/code-blocks). This is especially helpful for examples.

````md
```
// This is an example code block.
Debug.Log("Hello, world!");
```
````

```mdx-code-block
<BrowserWindow>
```

```
// This is an example code block.
Debug.Log("Hello, world!");
```

```mdx-code-block
</BrowserWindow>
```

You can make code blocks easier to read by enabling additional options:

````md
```csharp showLineNumbers title="Assets/Example.cs"
// This is an example code block.
Debug.Log("Hello, world!");
```
````

```mdx-code-block
<BrowserWindow>
```
```csharp showLineNumbers title="Assets/Example.cs"
// This is an example code block.
Debug.Log("Hello, world!");
```
```mdx-code-block
</BrowserWindow>
```

- Enable C# [syntax highlighting](https://docusaurus.io/docs/markdown-features/code-blocks#syntax-highlighting) with `csharp` or `cs`.
- Enable [line numbering](https://docusaurus.io/docs/markdown-features/code-blocks#line-numbering) with `showLineNumbers`,
- Show a [file name](https://docusaurus.io/docs/markdown-features/code-blocks#code-title) with `title=""`, if appropriate.

## Code Tabs

You can show an Udon Graph screenshot and UdonSharp code side by side. Readers can choose which language they prefer, and all code tab components synchronize the reader's preference.

Here's an example of how to import and use `Tabs` and `TabItem`:

````md
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: Three Udon Graph nodes that gets all players.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs showLineNumbers
var players = new VRCPlayerApi[VRCPlayerApi.GetPlayerCount()];  
VRCPlayerApi.GetPlayers(players);
```

</TabItem>
</Tabs>
````

```mdx-code-block
<BrowserWindow>
```

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: A screenshot of the Udon Graph.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs showLineNumbers
var players = new VRCPlayerApi[VRCPlayerApi.GetPlayerCount()];  
VRCPlayerApi.GetPlayers(players);
```

</TabItem>
</Tabs>

```mdx-code-block
</BrowserWindow>
```


---

## Document: faq.md

Path: /economy/faq.md
---
description: "Read frequently asked questions about the Creator Economy."
sidebar_position: 7
sidebar_custom_props:
    customIcon: ❓
---

# FAQ

import SellerNotification from '/docs/economy/_sellers-notification.mdx';
import ThemedCreditIcon from '/docs/economy/_credit-icon.mdx';

<SellerNotification/>

This page answers frequently asked questions about the Creator Economy.

If your question isn't listed here, please let us know by clicking the <FeedbackButton /> button.

## General Information

#### What's the Creator Economy? ####

The Creator Economy allows you to earn VRChat Credits by setting [listings](/economy/listings), [subscriptions](/economy/subscriptions) and [stores](/economy/store). You can spend earned Credits in VRChat, or [request a payout](/economy/payout) via PayPal.

#### How do I get started?

 [Apply to join the CE](https://www.surveymonkey.com/r/creator-economy-application-seller) if you're not already an approved seller.
 
You need to [get started with Tilia](./getting-started) before you can create [listings](./listings), [subscriptions](./subscriptions), [products](./products), or [stores](./store).

***
## Payment Processing ##

#### What are VRChat Credits?
VRChat Credits<ThemedCreditIcon/> are VRChat's currency for the Creator Economy. They are similar to premium currencies found in other video games.
Users can purchase VRChat Credits and spend them on creators.
Creators can earn credits and pay them out in USD, if eligible.

#### What’s the conversion of VRChat Credits to USD?

When you request a [payout](/economy/payout), your earned VRChat credits are paid out at the following rate:

1<ThemedCreditIcon/> ≈ 0.005 US$

200<ThemedCreditIcon/> ≈ 1 US$

In other words, for each 1200<ThemedCreditIcon/> (≈10 US\$) users spend in your store, your [payout](/economy/payout) increases by approximately 5 US\$.

Please refer to the [Creator Economy Program Rules](https://hello.vrchat.com/legal/economy) and the [payout documentation](/economy/payout) to learn more.

#### What's the revenue split?

After paying out your earnings, you earn approximately 50% of what users spent in your store (excluding VAT).

Please refer to the [payout](/economy/payout) page to learn more

#### What's Tilia? ####
Tilia is VRChat's business partner for Creator Economy.
Tilia is a payment platform for accounts, wallets, payments, invoices, and payouts. As a VRChat seller, you'll be interacting with Tilia when [getting started](/economy/getting-started) and [requesting payouts](/economy/payout).

#### What payment methods are available? ####
VRChat credits are purchased through your platform's payment system, such as Steam or Meta.

Please note that VRChat Plus and VRChat Credits are not yet available on all platforms. Please send us [feedback](https://feedback.vrchat.com/) if there's a platform you'd like us to support!

#### What payout methods are available? ####
Tilia currently supports payouts to PayPal.
Additional payout methods may become available in the future. If you're a seller, tell us on [Canny](https://feedback.vrchat.com/creator-economy-sellers) what payout methods you would like to see!

#### How long does it take Tilia to process payouts?
Payout requests are usually processed within 1-2 business days. If your payout takes longer than 5 business days, please check your email inbox to see if it was rejected.

#### Why did my payout get rejected?
If your payout got rejected, it's usually for one of the following reasons:

- Your name on PayPal does not match your name on Tilia. Ensure that you entered your name correctly.
- PayPal does not support sending payouts to your country. Check your country in [PayPal's documentation](https://developer.paypal.com/docs/payouts/standard/reference/country-feature/). 

When your payout gets rejected, Tilia usually sends you an email. Please check your inbox and spam folder for an email from Tilia.

#### Can users refund group subscriptions?
Yes. If users buy a group subscription, they choose how many months to buy in advance. If they purchase two or months, they can refund any remaining months, excluding the current month.
For example, if a user buys a 3 month group subscription, they can cancel their subscription and receive a refund for the remaining 2 months of credits. Transaction fees are not refunded.

***
## Products and Listings

#### How can worlds use the Creator Economy?
Worlds can use [Udon](/worlds/udon/) and [Udon products](/economy/products/udon) to detect purchases. Support for Udon products and the Creator Economy is [built into the Worlds SDK](/economy/sdk/).
#### What can world creators do with the Creator Economy SDK? ####
- Create Udon products on [VRChat.com](https://vrchat.com/home/) and link them to Udon products in your world.
- Unlock exclusive areas, items, or features.
- Open your store directly, making it easy for customers to support you.
- Create a list displaying the names of all your supporters.
- And more!

Visit the [Creator Economy SDK documentation](/economy/sdk/) to get started!

#### Can I use products from another creator? ####
No. You must be the content owner to use a product. For example, if you own a world, you can't use Udon products from another creator.

You **can** open another creator's store, group, or listing with the [SDK](/economy/sdk/udon-documentation#storeopenlisting).

#### Can I sell avatars in my world store?

Yes, you can add [avatar products](/economy/products/avatar) to permanent listings. However, you can't add avatar products to temporary listings, instant listings, or subscriptions.

#### If I sell a permanent listing, what are the support requirements?  
  
If you wish to continue to be eligible to receive payouts from the Creator Economy, you must make reasonable efforts to update your content for security, technical and other reasons, including ensuring compatibility with the latest version of the Platform and all hardware on which the Platform is available. If you wish to opt out of ongoing participation in the Creator Economy, please contact us.

***
## Miscellaneous

#### Am I allowed to make changes to my listings and subscriptions?

Yes. You may change listings, subscriptions, and the products they contain. Depending on your content, users may expect different types of changes, additions, or removals. This helps you support your existing customers and improve your content.

However, don't "bait-and-switch" users by taking away their purchases unexpectedly. Don't deceive users.

Some product types, such as [avatar products](/economy/products/avatar), cannot be removed from a listing after any user has purchased the listing.
#### Do users have to be part of my group to buy a subscription?

Yes. However, if your group is not set to "Free Join", you can allow paying users to join your group by enabling the [Enable Free Join for Subscribers](/economy/subscriptions#4-role-permissions) setting in your subscription role settings.

Users can leave your group after buying a subscription. They lose access to their subscription role, but keep all products until the subscription expires. 

#### Can I split my earnings with another creator? ####
There is currently no split pay functionality. The [payout](/economy/payout) process is only available to the seller.

#### Can a listing be free? ####
No, listings cannot be free. Read our [pricing guidelines](/economy/listings#31-pricing) to learn more

However, for [testing](/economy/sdk/testing), you can purchase your own listings for 0<ThemedCreditIcon/> in VRChat.

#### Where can I provide feedback? ####
VRChat uses Canny for our community feedback and bug reports. Feel free to post on the Creator Economy section of our [feedback page.](https://feedback.vrchat.com/creator-economy)

#### If a creator deletes a product, will that automatically update/delete any listings that contain that product? ####
You cannot delete products that have any owners or active subscribers. You will see an error informing them that the product has active purchases and that it cannot be deleted. Instead, you may wish to delete the listing that the product is contained in.

:::info

import FeedbackButton from "@site/src/components/FeedbackButton";

Do you have another question? Ask us by pressing the <FeedbackButton /> button!

:::


---

## Document: getting-started.md

Path: /economy/getting-started.md
---
description: "Set up Tilia and create your first store."
sidebar_position: 1
sidebar_custom_props:
    customIcon: 💡
---

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

# Getting Started With Tilia

<SellerNotification/>

Before you can use the Creator Economy, you need to request authorization from Tilia, VRChat's payment partner. Tilia ensures that you have a safe selling experience by verifying your identity, complying with local laws, and detecting fraud.

To get started, watch the video or read the steps below:

:::warning

The video below explains how to use the Creator Economy and group stores. To learn about world stores and the avatar marketplace, please read our [stores documentation](/economy/store/).

:::

<iframe
    width="100%"
    height="400"
    src="https://www.youtube.com/embed/NuRPDYrYhSM?si=NZblzqFKR7r1OG0E"
    title="YouTube video player"
    frameborder="0"
    allow="clipboard-write; encrypted-media; picture-in-picture; web-share" allowfullscreen>
</iframe>

<div class="video-container">
    <iframe src="https://www.youtube.com/embed/NuRPDYrYhSM?si=NZblzqFKR7r1OG0E" title="VRChat Creator Companion" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

## Step 1 - Open Marketplace

Open [VRChat.com](https://vrchat.com/home), go to the [Marketplace](https://vrchat.com/home/marketplace/) tab in the left-hand sidebar, and open your [Storefront](https://vrchat.com/home/marketplace/storefront).

[IMAGE: Marketplace]

## Step 2 - Get Started

Click **Get Started with Tilia**.

[IMAGE: Review Tilia TOS]

## Step 3 - Verify Identity

Make sure to check **"I agree"** after reading Tilia's **Terms of Service** and **Privacy Policy**. Then, go ahead and verify your information by filling out the following section and submitting it.

[IMAGE: Tilia Page]

Ensure that your personal information is correct! Otherwise, you may not be able to use the Creator Economy.

## Step 4 - Wait

Wait for your Tilia to accept your information. This usually takes around 5 business days, but may rarely take up to 30 calendar days.

:::info

If it takes Tilia longer to accept you than expected, please try the following these steps:

- Repeat [Step 2](#step-2---get-started) and click "Get Started with Tilia" again.
	- Tilia may have already accepted you. If that's the case, clicking "Get Started" may cause VRChat to check your acceptance and redirect you to the Storefront page.
- Check your inbox.
	- You may have already been accepted, or there may be an issue. Tilia may reach out to you via Email 
- If you continue experiencing technical problems, please contact Tilia or VRChat.

:::

## Step 5 - Accepted

Once you've been accepted, the **Storefront** page will now show that you are **Authorized** to sell in VRChat! Any credits earned from now on will be eligible for [payout](/economy/payout). 

[IMAGE: Now Authorized]

You're now ready to create [products](./products), [subscriptions](./subscriptions), [listings](./listings), and [stores](./store)!

---

## Document: guidelines-avm.md

Path: /economy/guidelines-avm.md
---
description: "Follow these rules when selling in VRChat."
sidebar_position: 99
sidebar_custom_props:
    customIcon: 📜
unlisted: true
---

# Content Guidelines

import SellerNotification from '/docs/economy/_sellers-notification.mdx';
import ThemedCreditIcon from '/docs/economy/_credit-icon.mdx';

<SellerNotification/>

Creators who sell content through VRChat's Creator Economy must adhere to the following rules and guidelines.

Please note that the Creator Economy is a growing and evolving system. These rules are subject to change as VRChat continues to explore new implementations and use cases. 

All Creator Economy content must follow the rules below.

## General
1. You must follow VRChat's [Terms of Service](https://hello.vrchat.com/legal).
	1. This includes the [Creator Economy Program Rules](https://hello.vrchat.com/legal/economy), [Community Guidelines](https://hello.vrchat.com/community-guidelines), and [Creator Guidelines](https://hello.vrchat.com/creator-guidelines).
	2. You may only sell content that you fully own or have the legal right to distribute, including any third-party elements. Ensure you have the necessary licenses or permissions. (See section 8.4 of VRChat's [Terms of Service](https://hello.vrchat.com/legal))
2. If your content is found to be in violation of VRChat's [Terms of Service](https://hello.vrchat.com/legal) or any of the Content Guidelines listed on this page, you must make reasonable efforts to address the violation within 10 days of being alerted via email of the issue.
	1. For example, if your avatar contains content activated by use of a toggle that is not permitted on the marketplace, you must make reasonable efforts to upload a new avatar build that removes this content within 10 days of being notified.
3. Clearly define what the user is purchasing.
	1. Listings, subscriptions, and products should have clear names and sufficiently detailed descriptions.
	2. Content should avoid engaging in [Dark Patterns](https://en.wikipedia.org/wiki/Dark_pattern) (or Deceptive Design Patterns) such as misdirection, bait-and-switch, and others.
	3. Content must avoid false advertising and not misrepresent the content or prices of listings and subscriptions. Names, tags, descriptions, acknowledgements, images, and previews used should not be misleading. Keep in mind that if your content looks very different in VRChat than in the images you've used to showcase it, buyers may be disappointed.
	4. Listings containing different types of products should make it clear where those products can be used. For example, if you are selling a bundle containing [avatar products](/economy/products/avatar) *and* [Udon products](/economy/products/udon), ensure the buyer understands that while they can use the avatars anywhere, the Udon Products can only be used in specific world(s).
4. If feature parity exists, the Creator Economy should be used in addition to any off-platform monetization methods.
	1. For example, if perks or benefits for a VRChat world are sold through an off-platform subscription service, then those perks should also, when possible, be available for purchase in the Creator Economy.
	2. Don't price your external offering to drive VRChat users off-platform.
	3. If you cannot replicate the same external monetization offering inside VRChat (e.g. avatar source file downloads), these rules may not apply to you. Feel free to explore the Creator Economy's current offerings. If VRChat does not currently support your monetization method, try your best, and make a [feature request](https://feedback.vrchat.com/creator-economy).
5. Don't use VRChat's Creator Economy systems as a marketing tool for your external monetization offerings. For example:
	1. Don't prompt customers to refund their purchase and use a different payment method instead.
	2. Don’t use your listing description to advertise a cheaper price on other platforms.
	3. Don't encourage users to purchase your content on another platform so they can gain access to source files.
6. You cannot use VRChat Credits as a method of fundraising.
	1. Fundraiser payment methods must be hosted outside of the VRChat platform.
	2. It is allowed to ask for donations for external fundraisers that are not funded through the Creator Economy.
	3. You are permitted to ask for donations through your supporters, though donations towards fundraisers and charity organizations are often taxed differently between countries, and should be managed only with fiat currencies.
7. Costs should always be displayed in "VRChat Credits", the VRChat Credit icon<ThemedCreditIcon/>,
 or "\V".
	1. Many users are in different countries with different currencies. Use "VRChat Credits" to correctly convey the cost of your products to your buyers.

## Worlds
1. Worlds cannot promote lotteries, raffles, or other "games of chance" involving real currency.
	1. Any systems integrating with real-world currency in methods of gambling, casino-style events, or with real-world benefits are strictly forbidden.
2. You cannot give a user a strictly negative experience in your world without having made a purchase.
	1. For example, don't drop users into a hole if they haven't paid. All users should have a comfortable experience when entering your world.
3. Your [instant](/economy/listings#instant) listings, [temporary](/economy/listings#temporary) listings, and [subscriptions](/economy/subscriptions) may not be priced higher than 10,000<ThemedCreditIcon/>.
## Avatars
1. Your avatar must be optimized and not cause significant performance issues in VRChat.
	1. Your avatar should have a performance rank of "Excellent," "Good," "Medium," or "Poor." 
	2. "Very Poor" avatars are only accepted on a case-by-case basis.
2. Your avatar must have a high degree of visual and technical fidelity.
	1. Avatars with cross-platform support are highly recommended. If your avatar is available on multiple platforms (e.g. PC, Android and/or iOS), its appearance should be similar on all platforms.
	2. If your avatar uses [expression menus](/avatars/expression-menu-and-controls/) or [components](/avatars/avatar-dynamics/), avoid technical issues or bugs.
3. Your avatar should not use colliders or [stations](/worlds/components/vrc_station/) to fly, teleport, or move quicker than other VRChat avatars.
	1. For example: You may use GoGo Loco, but not GoGo Flight.
4.  If your listing contains [avatar products](/economy/products/avatar), its price must be least 1,200<ThemedCreditIcon/> per different avatar product in the listing, excluding variants of the same avatar. For example:
	1. If your listing contains two different avatars, it must cost at least 2,400<ThemedCreditIcon/> (1,200 <ThemedCreditIcon/> × 2).
	2. If your listing contains two variants of the same avatar, i.e. different colors or outfits, it must cost at least 1,200<ThemedCreditIcon/>.
	3. If your listing contains a single avatar, it must cost at least 1,200<ThemedCreditIcon/>.
5. Your avatar must follow the avatar content guidelines below.
	1. If your listing contains avatar products and Udon products, ensure that the Udon product is also consistent with the content guidelines below.

:::info

VRChat may reject some avatars despite fulfilling all the criteria above. VRChat currently only accepts a limited number of avatars. High-quality avatars are more likely to be accepted.
 
This restriction will become less strict in the future. Please visit our avatar seller Discord community for additional information.  

:::


### Avatar content guidelines

The guidelines below clarify what type of content is suitable for the avatar marketplace. These content guidelines apply to all configuration and viewing options for an avatar. Content that violates these guidelines in an alternate state or viewing mode (e.g. through a toggle, hidden in a texture, or otherwise "locked" to be inaccessible to the user) is not permitted.
 
#### Properties

1. Your avatar's name, description, tags, acknowledgements, images, and previews for marketplace avatars must adhere to VRChat's [public content guidelines](https://hello.vrchat.com/creator-guidelines) for avatars.  
2. English must be the primary language of all words or characters in your avatar's properties, textures, or expressions menus.  
    - You're permitted to add additional non-English translations (with English equivalents).  
    - For example: The text in your expressions menu must be in English, but you may use icons to provide a Japanese translation.

#### Clothing & Appearance

Your avatar must have private areas appropriately covered or presented in a non-sexualized manner.

The marketplace allows creativity and stylization, but avatars should avoid conveying overt sexuality or nudity. For example, private areas with patterned textures may convey a sense of being covered, while flat shading resembling skin may imply nudity.

|                                                                      |                                                                                                                                                                                                                                                                                                               |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **This content can be sold on the marketplace.**                     | <ul><li>Swimsuits, underwear</li><li>Fantasy outfits</li><li>Tasteful clothing that isn’t overly revealing</li><li>Torsos that that imply coverage (e.g., robot plating, fur, or other stylized designs)</li></ul>                                                                                                                                                                                          |
| **This content may receive less visibility on the marketplace.**[^1] | <ul><li>Revealing or tight-fitting outfits</li></ul>                                                                                                                                                                                                                                                          |
| **This content is not permitted on the marketplace.**[^1]            | <ul><li>Sexually suggestive nudity</li><li>Visible or exaggerated sexual features</li><li>Extreme body exaggerations designed primarily for sexual appeal</li><li>Lingerie</li><li>Suggestive animations</li><li>Exposed breasts that convey a sense of nakedness or sexuality</li><li>Sexually suggestive underbust exposure on clothed avatars</li></ul> |


#### Weapons & Violence

Your avatar may feature cartoon-like or stylized weapons, but should not depict realistic violence.

|                                                                      |                                                                                                           |
| -------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| **This content can be sold on the marketplace.**                     | <ul><li>Stylized and toy-like weapons (e.g., swords, shields, bows, bubble guns)</li></ul>                |
| **This content may receive less visibility on the marketplace.**[^1] | <ul><li>Realistic firearms</li><li>Military gear</li></ul>                                                |
| **This content is not permitted on the marketplace.**[^1]            | <ul><li>Graphic violence (e.g., blood splatter)</li><li>Depictions of injury, torture, or death</li></ul> |


#### Spooky & Dark Themes

Minor horror elements are acceptable, but extreme content should be avoided. 

|                                                                      |                                                                                                                                                                                             |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **This content can be sold on the marketplace.**                     | <ul><li>Mildly creepy designs (e.g., skeletons, glowing eyes)</li></ul>                                                                                                                     |
| **This content may receive less visibility on the marketplace.**[^1] | <ul><li>Unsettling or shadowy designs</li></ul>                                                                                                                                             |
| **This content is not permitted on the marketplace.**[^1]            | <ul><li>Extreme horror (e.g., mutilation, grotesque imagery, realistic tragic events)</li><li>References to drugs or criminal activity</li><li>References to real-world tragedies</li></ul> |

#### Properties and Metadata  
  
Your avatar's properties should follow our [content guidelines](https://hello.vrchat.com/creator-guidelines) and be in English.  
  
|  |  |   
| --- | --- |  
| **This content is not permitted on the marketplace.**[^1] | <ul><li>Non-English names or icons in [VRC Expressions Menu](/avatars/expression-menu-and-controls/)</li><li>Avatar properties that violate [public content guidelines](https://hello.vrchat.com/creator-guidelines) (e.g., name, description, acknowledgements, images, etc.)</li></ul> |  
  
#### Audio Sources  
  
Your PC avatars may use audio sources, but they shouldn't be intrusive.  

|                                                                      |                                                                                                                                                                                                                                                                                                               |  
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |  
| **This content is not permitted on the marketplace.**[^1]            | <ul><li>Noisy or overbearing sounds that may make other users uncomfortable</li></ul> |  
  
[^1]: Your avatar's thumbnail may not contain any of this content.

:::tip

In the early stages of the marketplace, we will collaborate closely with you on these guidelines to help ensure your success. These guidelines will also evolve over time as VRChat introduces new content controls and moderation tools.

If you have any questions or concerns, don’t hesitate to ask us directly!

:::

## Enforcement
Breaches of the guidelines above may result in the following actions being taken against your account:

- Your content or your store may be removed temporarily or permanently.
- Your permission to sell content may be revoked temporarily or permanently.
- Your user account may be banned temporarily or permanently.


---

## Document: guidelines.md

Path: /economy/guidelines.md
---
description: "Follow these rules when selling in VRChat."
sidebar_position: 99
sidebar_custom_props:
    customIcon: 📜
---

# Content Guidelines

import SellerNotification from '/docs/economy/_sellers-notification.mdx';
import ThemedCreditIcon from '/docs/economy/_credit-icon.mdx';

<SellerNotification/>

Creators who sell content through VRChat's Creator Economy must adhere to the following rules and guidelines.

Please note that the Creator Economy is a growing and evolving system. These rules are subject to change as VRChat continues to explore new implementations and use cases. 

All Creator Economy content must follow the rules below.

## General
1. You must follow VRChat's [Terms of Service](https://hello.vrchat.com/legal).
	1. This includes the [Creator Economy Program Rules](https://hello.vrchat.com/legal/economy), [Community Guidelines](https://hello.vrchat.com/community-guidelines), and [Creator Guidelines](https://hello.vrchat.com/creator-guidelines).
	2. You may only sell content that you fully own or have the legal right to distribute, including any third-party elements. Ensure you have the necessary licenses or permissions. (See section 8.4 of VRChat's [Terms of Service](https://hello.vrchat.com/legal))
2. If your content is found to be in violation of VRChat's [Terms of Service](https://hello.vrchat.com/legal) or any of the Content Guidelines listed on this page, you must make reasonable efforts to address the violation within 10 days of being alerted via email of the issue.
	1. For example, if your avatar contains content activated by use of a toggle that is not permitted on the marketplace, you must make reasonable efforts to upload a new avatar build that removes this content within 10 days of being notified.
3. Clearly define what the user is purchasing.
	1. Listings, subscriptions, and products should have clear names and sufficiently detailed descriptions.
	2. Content should avoid engaging in [Dark Patterns](https://en.wikipedia.org/wiki/Dark_pattern) (or Deceptive Design Patterns) such as misdirection, bait-and-switch, and others.
	3. Content must avoid false advertising and not misrepresent the content or prices of listings and subscriptions. Names, tags, descriptions, acknowledgements, images, and previews used should not be misleading. Keep in mind that if your content looks very different in VRChat than in the images you've used to showcase it, buyers may be disappointed.
	4. Listings containing different types of products should make it clear where those products can be used. For example, if you are selling a bundle containing [avatar products](/economy/products/avatar) *and* [Udon products](/economy/products/udon), ensure the buyer understands that while they can use the avatars anywhere, the Udon Products can only be used in specific world(s).
4. If feature parity exists, the Creator Economy should be used in addition to any off-platform monetization methods.
	1. For example, if perks or benefits for a VRChat world are sold through an off-platform subscription service, then those perks should also, when possible, be available for purchase in the Creator Economy.
	2. Don't price your external offering to drive VRChat users off-platform.
	3. If you cannot replicate the same external monetization offering inside VRChat (e.g. avatar source file downloads), these rules may not apply to you. Feel free to explore the Creator Economy's current offerings. If VRChat does not currently support your monetization method, try your best, and make a [feature request](https://feedback.vrchat.com/creator-economy).
5. Don't use VRChat's Creator Economy systems as a marketing tool for your external monetization offerings. For example:
	1. Don't prompt customers to refund their purchase and use a different payment method instead.
	2. Don’t use your listing description to advertise a cheaper price on other platforms.
	3. Don't encourage users to purchase your content on another platform so they can gain access to source files.
6. You cannot use VRChat Credits as a method of fundraising.
	1. Fundraiser payment methods must be hosted outside of the VRChat platform.
	2. It is allowed to ask for donations for external fundraisers that are not funded through the Creator Economy.
	3. You are permitted to ask for donations through your supporters, though donations towards fundraisers and charity organizations are often taxed differently between countries, and should be managed only with fiat currencies.
7. Costs should always be displayed in "VRChat Credits", the VRChat Credit icon<ThemedCreditIcon/>,
 or "\V".
	1. Many users are in different countries with different currencies. Use "VRChat Credits" to correctly convey the cost of your products to your buyers.

## Worlds
1. Worlds cannot promote lotteries, raffles, or other "games of chance" involving real currency.
	1. Any systems integrating with real-world currency in methods of gambling, casino-style events, or with real-world benefits are strictly forbidden.
2. You cannot give a user a strictly negative experience in your world without having made a purchase.
	1. For example, don't drop users into a hole if they haven't paid. All users should have a comfortable experience when entering your world.
3. Your [instant](/economy/listings#instant) listings, [temporary](/economy/listings#temporary) listings, and [subscriptions](/economy/subscriptions) may not be priced higher than 10,000<ThemedCreditIcon/>.
## Avatars
1. Your avatar must be optimized and not cause significant performance issues in VRChat.
	1. Your avatar should have a performance rank of "Excellent," "Good," "Medium," or "Poor." 
	2. "Very Poor" avatars are only accepted on a case-by-case basis.
2. Your avatar must have a high degree of visual and technical fidelity.
	1. Avatars with cross-platform support are highly recommended. If your avatar is available on multiple platforms (e.g. PC, Android and/or iOS), its appearance should be similar on all platforms.
	2. If your avatar uses [expression menus](/avatars/expression-menu-and-controls/) or [components](/avatars/avatar-dynamics/), avoid technical issues or bugs.
3. In general, your avatar's updates should be limited to bug fixes, performance improvements, and new/improved features.
	1.  If you want to visibly and materially change a base avatar that has already been purchased, please contact us to discuss it. We may adjust this policy in the future.
4. Your avatar should not use colliders or [stations](/worlds/components/vrc_station/) to fly, teleport, or move quicker than other VRChat avatars.
	1. For example: You may use GoGo Loco, but not GoGo Flight.
5.  If your listing contains [avatar products](/economy/products/avatar), its price must be at least 1,200<ThemedCreditIcon/> per different avatar product in the listing, excluding variants of the same avatar. For example:
	1. If your listing contains two different avatars, it must cost at least 2,400<ThemedCreditIcon/> (1,200 <ThemedCreditIcon/> × 2).
	2. If your listing contains two variants of the same avatar, i.e. different colors or outfits, it must cost at least 1,200<ThemedCreditIcon/>.
	3. If your listing contains a single avatar, it must cost at least 1,200<ThemedCreditIcon/>.
5. Your avatar must follow the avatar content guidelines, available to authorized avatar sellers.


## Enforcement
Breaches of the guidelines above may result in the following actions being taken against your account:

- Your content or your store may be removed temporarily or permanently.
- Your permission to sell content may be revoked temporarily or permanently.
- Your user account may be banned temporarily or permanently.


---

## Document: index.md

Path: /economy/index.md
---
sidebar_position: 3
---
# Creator Economy

import SellerNotification from './_sellers-notification.mdx';

<SellerNotification/>

The Creator Economy allows you to monetize your worlds, groups, and avatars - directly in VRChat!

- Create [products](products) that unlock content for buyers.
- Sell [listings](./listings) to earn VRChat Credits.
- Use [stores](/economy/store/) to help users discover listings. 
- [Pay out](./payout) your earnings with Tilia and PayPal.

import DocCardList from '@theme/DocCardList';

<DocCardList />


---

## Document: listings.md

Path: /economy/listings.md
---
sidebar_position: 2
sidebar_custom_props:
    description: Create listings, add products, and sell them.
    customIcon: 🛍
---

# Listings

import SellerNotification from '/docs/economy/_sellers-notification.mdx';
import ThemedCreditIcon from '/docs/economy/_credit-icon.mdx';

<SellerNotification/>

Listings allow you to monetize your VRChat content by selling rewards, such as unlocking avatars or world features.

Users can buy listings, which contain [products](/economy/products/). Each listing can contain 1-15 products. Users keep the products until the listing expires, depending on its [duration type](#2-duration-type). For example, [permanent](#%EF%B8%8Fpermanent) listings never expire, and [instant](#instant) listings expire immediately.

You can choose your listing's [visibility](#visibility). Listings can appear in your [store](/economy/store), or you can use Udon in your world to [open a listing](#udon-store-prefabs-in-your-world) directly, even if your store is not published.

Listings are similar to [subscriptions](/economy/subscriptions).

## Create a listing

Create your first listing by following the steps below:

---

import Columns from '@site/src/components/Columns';
import Column from '@site/src/components/Column';

<Columns> 
<Column className='text--left'>

### 1. Create new listing

Open the [My Listings](https://vrchat.com/home/marketplace/storefront/listings) section of your [Storefront](https://vrchat.com/home/marketplace/storefront/) on [VRChat.com](https://vrchat.com/home/) to create a listing.

Click "Create Listing" to create your first listing.

:::info

After creating your first listing, return to this screen to edit, publish, unpublish, or delete your listings.

:::

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 2. Duration Type

Choose one of the three duration type for your listing:

- Instant
- Temporary
- Permanent

You cannot change the type after creating your listing.

The differences between duration types are explained below.

</Column>
<Column className='text--left'>

[IMAGE: Choose listing duration on VRChat.com]

</Column>
</Columns>

<Columns> 
<Column className='text--left'>
#### ♾️Permanent
The duration of permanent listings is **unlimited**. Buyers gain lifetime access to the listing.

You can add the following products:
- [Udon products](/economy/products/udon)
- [Avatar products](/economy/products/avatar)

For example, you could sell permanent access to avatars, world features, or world cosmetics. 

</Column>
<Column className='text--left'>
#### ⌛Temporary
The duration of temporary listings is **five minutes to three months**. Buyers own the listing until the duration expires, similar to [group subscriptions](./subscriptions).

You can add the following products:
- [Udon products](/economy/products/udon)

For example, you could sell temporary benefits for your VRChat world, such as boosts, cosmetics, features, or trials.

You choose the duration of a temporary listing by editing its [details](#3-details). Buyers can't purchase the listing again until its duration expires.

</Column>
<Column className='text--left'>
#### ⚡Instant

Instant listings **do not have a duration**. Instead, you give buyers an immediate reward with Udon. Buyers can purchase the listing as many times as they want.

You can add the following products:
- [Udon products](/economy/products/udon)

For example, you could sell spawnable items, pickups, animations, or virtual persistent currencies for your world.

Only users who are currently in your world can buy instant listings. Otherwise, the purchase screen asks them to visit your world first.

</Column>
</Columns>

Click "Next" after choosing a duration type.

---

<Columns>
<Column  className='text--left'>

### 3. Details

Choose the name, price, and other details of your listing.

- **Add Products**: Choose 1 to 10 [products](./products).
	- Users own these products until the [duration](#2-duration-type) expires.
	- You can add the same products to different listings.
	- Users who look at your listing can see the name, description, and thumbnail of the products.
- **Name**: The name of your listing.
- **Description**: The description of your listing.
- **Thumbnails**: The image representing your listing.
- **Duration**: The duration of the listing. (Only appears for [temporary](#temporary) listings)
- **Price**: Choose the  purchase price of your listing (see [pricing](#31-pricing) below).

:::tip

You should create an eyecatching thumbnail and an accurate description - but you don't need to do it immediately. You can edit the listing later.

:::

</Column>
<Column className='text--right'>

[IMAGE: Create listing screen on VRChat.com]

</Column>

</Columns>

#### 3.1 Pricing

You may choose a price of 100-100,000<ThemedCreditIcon/> for most listing types.[^1] You can change the price later - users who currently own your listing are be affected.

However, non-[permanent](/economy/listings#%EF%B8%8Fpermanent) listings and [avatar products](/economy/products/avatar) have the following limitations:

- Your [instant](/economy/listings#instant) listings, [temporary](/economy/listings#temporary) listings, and [subscriptions](/economy/subscriptions) may not be priced higher than 10,000<ThemedCreditIcon/>.
- If your listing contains [avatar products](/economy/products/avatar), its price must be least 1,200<ThemedCreditIcon/> per different avatar product in the listing, excluding variants of the same avatar. For example:
	1. If your listing contains two different avatars, it must cost at least 2,400<ThemedCreditIcon/> (1,200 <ThemedCreditIcon/> × 2).
	2. If your listing contains two variants of the same avatar, i.e. different colors or outfits, it must cost at least 1,200<ThemedCreditIcon/>.
	3. If your listing contains a single avatar, it must cost at least 1,200<ThemedCreditIcon/>.


You can also find this information in our [guidelines](/economy/guidelines#avatars).

Click "Next" after choosing the listing details.

---

<Columns>
<Column  className='text--left'>

### 4. Visibility

Choose where users can see your listing.

- **Store Availability**: Choose the world stores where users can buy this listing.
	- You can add the same listing to multiple world stores.
	- You can create new stores in the [store manager](https://vrchat.com/b/home/marketplace/storefront/stores).
	- If your listing contains [avatar products](/economy/products/avatar), the [avatar marketplace](/economy/store/avatar-marketplace) is automatically chosen.
- **Visibility**: Choose whether to save the listing as a draft or publish it immediately.
	- Users can't see or buy your listing until you publish it.
	- You can publish listings without selecting any stores.

</Column>
<Column className='text--right'>
	
[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

Click "Next" to save your listing. Congratulations! Users can now buy your listing in the stores you chose.

:::tip

If you have a world, you can use the [open listing example prefab](/economy/sdk/examples/open-listing) to open any published listing.

:::

## Edit your listing

You can edit the details of your listings on the [My Listings](https://vrchat.com/home/marketplace/storefront/listings/) page.

### Details

You can edit most details of your listing at any time, even after publishing it:
- ✅You can edit listing's **name, description, thumbnail,** and other general properties.
- ✅You can edit the **product name, description, thumbnail**, and other properties of products in your listing.
	- If you reupload an [avatar product](/economy/products/avatar), VRChat must review it first.
- ✅You can edit your listing's **price**.
    - If your listing is a subscription, existing owners are unaffected by the price change.
- ✅You can **add products** to your listing.
	- New and existing owners gain access to the products you added.
- ✅You can **remove [Udon products](/economy/products/udon) and [subscription role products](/economy/products/paid-role)** from your listing.
    - This is helpful if you want to reorganize your store or to give your supporters additional rewards.
	- Careful when removing these products - don't accidently remove benefits that your customers expect to own.
- ✅You can **change the duration** of [temporary](#temporary) listings.

Some aspects of your listing cannot be changed:
- ❌You cannot **change the [duration type](#2-duration-type)** of listings after creating them.
- ❌You cannot **remove [avatar products](/economy/products/avatar)** that any user currently owns.



### Delete

Click "Delete" on [My Listings](https://vrchat.com/home/marketplace/storefront/listings/) to delete a listing. You only delete listings that don't have any owners.

- [Instant](#instant) listings can always be deleted.
- [Temporary](#temporary) listings can be deleted after you [unpublish](#4-visibility) them and wait for all current owners to expire.
- [Permanent](#%EF%B8%8Fpermanent) listings **cannot be deleted** after any user has purchased them.

### Visibility

The visibility of a listing depends on its status. Open [My Listings](https://vrchat.com/home/marketplace/storefront/listings/page/1) to change the status of your listings:

- "Published" listings can be purchased by users.
- "Draft" listings cannot be purchased by users. If users already purchased the listing, they keep it.

If your listing contains any [avatar products](/economy/products/avatar), it's automatically published on VRChat's avatar marketplace. In addition, you may add it to a [world store](/economy/store).

If your listing does not contain any avatar products, users can only find it if you add it to your [world store](/economy/store) or if you have a store prefab in your world that uses Udon to open listings. (Use both to make your listings easier to find.)

:::tip
Use a combination of [stores](/economy/store) and Udon [store prefabs](/economy/sdk/examples/) to make your world listings easier for users to find.
:::

#### World stores

- Users see your world [store](/economy/store) when looking at your world in VRChat's menu.
- World stores are easy to create and manage from the [Store Manager](https://vrchat.com/home/marketplace/storefront/stores)
- The world store is visible when users look at your world details in VRChat's menu.
- Users don't have to be in your world to use your world store.

#### Avatar marketplace

- If your published listing contains any [avatar products](/economy/products/avatar), users automatically see your listing on the avatar marketplace. 

#### Udon store prefabs in your world

- You can use [Udon](/worlds/udon/) to create "Buy" buttons or custom stores inside your world.
- The [Open Listing](/economy/sdk/examples/open-listing) prefab allows you to easily add a "Buy" button that users can press when visiting your world.
- You can also create "hidden" listings that users can't find in your world store or elsewhere.
- If you're experienced with Udon, write your Udon scripts with the [Store.OpenListing](/economy/sdk/udon-documentation#storeopenlisting) method.

### Quantity Purchases

You can allow users to buy [instant](#instant) listings in large quantities. Go to the listing details and select "Enable Quantity Purchases". When users buy the listing, they can choose to buy it up to 99 times at once.

You should use the Udon method (OnPurchaseConfirmedMultiple)[/economy/sdk/udon-documentation#onpurchaseconfirmed] to detect the quantity of the purchase and give users an appropriate reward.


## Refunds

Refunds are processed on a case-by-case basis by VRChat. You cannot directly issue refunds to your buyers. If you need help issuing refunds to buyers of your listings, please contact VRChat.

[^1]: VRChat may change the Creator Economy's minimum and maximum listing price in the future. We will inform you in advance before we implement a new minimum or maximum.

---

## Document: payout.md

Path: /economy/payout.md
---
description: "Pay out your earnings with PayPal."
sidebar_position: 5
sidebar_custom_props:
    customIcon: 💵
---

# Payout

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

You can pay out your VRChat Credit earnings in USD through Paypal by visiting the [Payout](https://vrchat.com/home/marketplace/storefront/payout) page and requesting a payout from Tilia, VRChat's payment processor.

## Payout requirements

- Only authorized sellers may request a payout.
- You can request a payout every 14 days.
- You must have earned at least 30,000 VRChat Credits.
	- Only earned VRChat Credits (from selling to other users) can be paid out.
	- Purchased or promotional VRChat Credits cannot be paid out. If you buy VRChat Credits or receive them through a promotion, those credits do not count towards the minimum payout threshold.

## How to pay out

1. Navigate to [vrchat.com/home](https://vrchat.com/home)
2. Open the **Marketplace** in the left-hand sidebar and click **Storefront**.
3. Expand the **Sell in VRChat** section and find the **Pay Out Now** button.

[IMAGE: Click Pay Out Now]

4. Proceed to Tilia’s website and connect your PayPal account. If you have already connected your account, simply select the one you wish to use.

:::warning

Ensure that your name on PayPal is correct! It must match [the name you gave Tilia](/economy/getting-started#step-3---verify-identity). Otherwise, Tilia may deny your payout request.

:::


[IMAGE: PayPal]


5. Enter the requested amount of VRChat Credits to pay out.
    - Tilia automatically converts the amount from VRChat Credits into USD.
    - A 1.5% transaction fee is deducted from the payout.

[IMAGE: Review Payout]

6. Click **Review Payout** and finalize the payout process.
7. Confirm everything is correct, then click **Pay Out Now.**

After the payout has been approved, you'll receive a confirmation email from Tilia. Most payouts are approved within 1-2 business days. Congratulations on your payout!

## Revenue split

VRChat shares the Creator Economy's revenue with sellers.

[IMAGE: Approximate revenue split]

After VRChat Credits have been purchased, spent, and successfully paid out to creators, the revenue split approximates the following values:
- 30%:[^1] to the platform (Steam/Meta),
- 50%:[^1] to creators,
- 20%:[^1] to VRChat and its payment processor.

## Fees

Fees are collected in the following three steps:
1. **Buying Credits**: Users purchase VRChat Credits on Steam or Meta.
	- The total purchase fee is approximately 40%[^1].
	- In addition, the user pays [VAT](https://en.wikipedia.org/wiki/Value-added_tax), depending on their country of residence.
1. **Spending Credits**: Users spend VRChat Credits in a creator's store.
	- The total transaction fee is approximately 15.3%[^1].
2. **Paying out Credits**: Sellers pay out credits via Tilia and PayPal.
	- The total payout fee is approximately 1.5%[^1].

[^1]: The percentages are approximate and do not include VAT. The percentages can vary based on rounding, platforms, payout methods, and how VRChat Credits have flown through the Creator Economy before payout. For additional information, please refer to the [Creator Economy Program Rules](https://hello.vrchat.com/legal/economy).


---

## Document: avatar.md

Path: /economy/products/avatar.md
---
description: "Give access to uploaded avatars."
sidebar_custom_props:
    customIcon: 🧍
---

# Avatar Product


import SellerNotification from '/docs/economy/_sellers-notification-avm.mdx';

<SellerNotification/>

This page explains how to configure your [avatar's properties](#create-an-avatar) and create an [avatar product](#create-an-avatar-product).

Avatar products allow you to give users avatars when they buy a [listing](/economy/listings) from you. Each avatar product is associated with one of your uploaded avatars.


After you publish your avatar product, users can discover it in several places:
- The [avatar marketplace](/economy/store/avatar-marketplace) contains all avatar products published in any of your listings.
- Your [world store](/economy/store/world-store) (if you have one) can sell permanent listings containing avatar products.
- Users can access details page of avatar products from various other places in VRChat's menu. For example, users can select other users and press the "Open Avatar Details" button.

## Create an Avatar

Before you can create an avatar product, you must upload an [avatar](/avatars/) in Unity and configure its [details](#avatar-details) on the VRChat website.

:::info

If this is your first time creating an avatar, learn how to [create your first avatar](/avatars/creating-your-first-avatar).

:::

After uploading your avatar, you can find it on the VRChat website in [My Avatars](https://vrchat.com/home/avatars) and configure its [details](#avatar-details).

### Avatar Details

Avatar details give users additional information about your avatar. They help users find and buy your [avatar product](#create-an-avatar-product). 

Open [my Avatars](https://vrchat.com/home/avatars) and click the "✏️" icon to edit your avatar's details. Most details are optional and you can change them at any time.

:::info
If you list multiple variants of the same avatar as separate products, please give them thoughtful and descriptive names.
:::

| Detail | Type | Limitations |
| - | - | - |
| Name | Text |Up to 64 characters |
| Description | Text | Up to 256 characters |
| Thumbnail | Image | Between 64x64 and 2048x2048 px, 1:1 aspect ratio, up to 10 MB |
| Gallery | Image | Up to 6 images, up to 1MB each, exactly 1920x1080 recommended |
| Primary Style | Single-select | Up to 1 [avatar style](#avatar-styles) |
| Secondary Style | Single-select | Up to 1 [avatar style](#avatar-styles) |
| Tags | Text | Up to 10 tags, up to 64 characters each |
| Acknowledgements | Text | Up to 300 characters |
| Content warnings | Multi-select | Up to 5 content warnings |

When users view your avatar product, they can also see automatically generated details, such as its [performance rank](/avatars/avatar-performance-ranking-system), [platforms](/platforms/), and file size. They also see a list of all listings that contain the avatar product, making it easy to buy the avatar immediately.

After creating an avatar and editing its details, you can create an [avatar product](#create-an-avatar-product).

### Avatar Styles

You can choose a primary style and a secondary style in your [avatar details](#avatar-details). Styles are optional, but they help buyers find the types of avatars they are interested in.

You can choose between the following styles:

- **Animal**: Animal-inspired avatars
- **Anime**: Avatars inspired by Japanese stylistic conventions
- **Cartoon**: Avatars with a stylized or toon-shaded aesthetic
- **Fantasy**: Avatars inspired by dragons, fairies, elves, and other mythical beings
- **Fashion**: Stylishly dressed avatars
- **Furry**: Anthropomorphic animal-inspired avatars and/or avatars associated with furry fandoms
- **Human**: Avatars that resemble people
- **Objects**: Inanimate avatars (appliances, food, shapes, vehicles, etc.)
- **Pop Culture**: Avatars inspired by content that appeals to a mass audience
- **Realistic**: Avatars rendered in a style that is representative of the natural world
- **Sci-Fi**: Futuristic, robotic, cybernetic or alien avatars

You cannot choose the same primary and secondary style. For example, you can't choose "Anime" and "Anime" twice.

If you don't want to set either a primary or secondary style, choose "Not Specified" instead.

## Create an Avatar Product

You can create avatar products on the VRChat website and submit them for review.

import Columns from '@site/src/components/Columns';
import Column from '@site/src/components/Column';

---

<Columns>
<Column>
1. Open [My Products](https://vrchat.com/home/marketplace/storefront/) and create a new product.
    - Open the [VRChat website](https://vrchat.com/home/marketplace/storefront/products/) and go to [Marketplace](https://vrchat.com/home/) > [My Store](https://vrchat.com/home/marketplace/) > [My Products](https://vrchat.com/home/marketplace/storefront/).
    - Click "Create Product." 
</Column>
<Column>
[IMAGE: Creat product]
</Column>
</Columns>

---

<Columns>
<Column>
2. Select "Avatar Product" and click "Next."
</Column>
<Column>
[IMAGE: Choose product type avatar]
</Column>
</Columns>

---

<Columns>
<Column>
3. Select one of your [avatars](#create-an-avatar), review its details, and click "Next."

- You can only choose private avatars. If your avatar is public, change it to private in [My Avatars](https://vrchat.com/home/avatars).
- Make sure to configure your avatar's [details](#avatar-details), too. Details give VRChat helpful information when reviewing your avatar. You can change all details later.
- Ensure that your avatar and all details abide by the Creator Economy [content guidelines](/economy/guidelines).
</Column>
<Column>
[IMAGE: Review avataravatar]
</Column>
</Columns>

---

<Columns>
<Column>
4. Confirm that your avatar fulfills all guidelines.

- Review the [terms of service](https://hello.vrchat.com/legal) requirements and [content guidelines](https://creators.vrchat.com/economy/guidelines).
- Check your avatar's performance rank.
- Click the checkbox to confirm.
- Click "Submit for Review."
</Column>
<Column>
[IMAGE: Review avataravatar]
</Column>
</Columns>

---

<Columns>
<Column>
5. Wait 1-2 working days for VRChat to review your avatar.

Once your avatar has been reviewed, you will receive an email and a notification on the VRChat website:
  - **Approved**: You can sell the product by adding it to a listing or subscription and publishing it.
  - **Rejected:** Please view the rejection reason(s) from the email.
</Column>
</Columns>

## Update an Avatar Product

If you want to improve or update your avatar, you can edit it in Unity and upload a new version (using the same avatar ID).

When you upload a new version an avatar product, you must wait 1-2 business days for VRChat's approval. Afterwards, the update is automatically published.

:::warning

After you have sold your avatar to one or more users, limit your updates to the following changes:

- Bug fixes
- Performance improvements
- New or improved features

:::

While waiting for approval, users can continue buying and using the previously approved version of your avatar. When VRChat approves the new version, all owners see the new version instead.

While waiting for approval, you can also continue uploading newer versions of your avatar. If you upload multiple versions in a short period of time, VRChat only reviews the latest version, ignoring older versions.

## Avatar content guidelines

Your avatar must meet VRChat's marketplace standards and Terms and Conditions. Our reviewers verify performance, compatibility, and eligibility.

:::warning

The avatar content guidelines may change rapidly while the avatar marketplace is still in development.

:::

Review the Creator Economy [content guidelines](/economy/guidelines) to learn more.


---

## Document: index.md

Path: /economy/products/index.md
---
sidebar_position: 1
sidebar_custom_props:
    description: Create products that unlock features in your world or group.
    customIcon: 🔑
---

# Products

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

When a VRChat user buys a listing or subscription, you can give them access to one or more **products**.

The Creator Economy currently has the following types of products:

import DocCardList from '@theme/DocCardList';

<DocCardList />

---

## Document: paid-role.md

Path: /economy/products/paid-role.md
---
description: "Gives access to group features."
sidebar_custom_props:
    customIcon: 👥
---

# Subscription Role Product

All [subscriptions](/economy/subscriptions) contain a subscription role product. This product automatically makes them a member of your group and gives them a subscription role. You can give users with subscription roles special permissions, such as access to announcements, group instances, or priority queues.  

Subscription roles are always connected to a single [subscription](/economy/subscriptions). Unlike [Udon products](/economy/products/udon), you cannot manually add or remove subscription role products from a subscription.

## Create a subscription role product

You can create a subscription role product by creating a subscription or creating a paid role.

### Create a subscription

[Create a subscription](/economy/subscriptions) on the [My Subscriptions](https://vrchat.com/home/marketplace/storefront/subscriptions/page/1) page. This is the easiest way to create a subscription role product.


### Create manually

You can create a subscription role product manually, which also creates a subscription for you. This process is more complex than creating a subscription first.

:::warning Known issue

The text and screenshots in this section use the outdated term "paid role" instead of "subscription role product."

:::

1. Navigate to [vrchat.com/home](https://vrchat.com/home)
2. Go to your **Groups** tab in the left-hand sidebar.
3. After choosing a Group you own, go to **Settings** > **Roles**.
4. Choose **Create Paid Role**.
    1. Note: You will be prompted to agree to the Tilia Terms of Service before you can set up paid roles. [Read on setting up with Tilia here.](/economy/getting-started)

[IMAGE: Create paid role]

:::warning known issue

You cannot create more than five (paid) roles with the "View all members" permission. See [Canny](https://feedback.vrchat.com/creator-economy-sellers/p/cannot-create-more-than-five-paid-roles-with-view-all-members-permission).

:::

5. Enter a name and description for your role.
6. You can set any role-specific permissions here.

[IMAGE: Edit paid role]

7. Click the Save button. You’ve made your first paid role!

Subscriptions are tied directly to your Paid Roles, but have plenty of other customization options! You can find out how to edit your subscription on the [Your Store](/economy/store) tab.


***
## Restrictions

When creating a subscription role, please keep the following restrictions in mind: 

* You can only create subscription roles for Groups you own.
* Subscription roles can't give users access to moderation permissions in your Group.
* The role cannot violate our [CE Content Guidelines](/economy/guidelines), [Community Guidelines](https://hello.vrchat.com/community-guidelines) or [Terms of Service](https://hello.vrchat.com/legal).

---

## Document: udon.md

Path: /economy/products/udon.md
---
description: "Gives access to world features."
sidebar_custom_props:
    customIcon: 🌍
---

# Udon Product

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Your worlds can detect Udon products and reward players who own one of your listings. You can unlock new areas, customize your world, display a "Thank you" message, or something else.

Before you can use Udon products in your world, you need to create them on the VRChat website by following these steps:

## Creating Udon products

1. Navigate to [vrchat.com/home](https://vrchat.com/home)
2. Go to the **Marketplace** tab in the left-hand sidebar, then open **Storefront**.
3. Scroll down and select **My Products**.

[IMAGE: How to create Udon products on VRChat.com..]

4. Click on **Create Udon Product**.
5. Enter a display name.
6. Add a description and image for your Udon product. This is optional, but we recommend doing so.

[IMAGE: How to create Udon products on VRChat.com..]

7. Click **Create**. 

## Editing Udon products

[IMAGE: How to create Udon products on VRChat.com..]

1. Click "Edit" next to any Udon product.
2. Change the name, description, or upload an image.
3. Click **Save Changes**.

You can change the product's name, description, image, and the 'Owner Names in Udon' setting. Any changes you make will apply to all your VRChat worlds without needing to reupload them. 

[IMAGE: How to create Udon products on VRChat.com..]

If you'd like to use the VRChat SDK's [Store.ListProductOwners](/economy/sdk/udon-documentation#storelistproductowners) to list the owners of a Udon product in your world, 'Owner Names in Udon' must be enabled.


## Udon products and the VRChat SDK

Adding an Udon product to your store is just the first step. You need to actually create something for people to buy, and then attach it to an Udon product in your store.

- Use VRChat's [example prefabs](/economy/sdk/examples/) to get started with Udon products.
- Use the [Creator Economy SDK](/economy/sdk/) if you're experienced with Udon. You can write your own scripts to detect if a player owns a product.


---

## Document: debug-logging.md

Path: /economy/sdk/examples/debug-logging.md
---
description: "A screen for listing, debugging, and logging products in your world."
sidebar_custom_props:
    customIcon: 🪲
---

# Store Debug Logging

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Store Debug Logging is a prefab that helps log store-related events on an in-world console or screen. You can set this up in your worlds to give supporters a way to check what purchases they've made, what purchases they can make, and to open your store.

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

##### Prefabs Included
* **StoreDebugLoggingPrefab**: A prefab that contains a store-related console window, which supporters can interact with.

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) prefab. Otherwise, your project will be missing what it needs for a complete scene.
:::

### How to Use

For this (and most!) prefabs, you'll first need an UdonProduct to check for and a way for players to purchase this product. 

Once you've created a purchasable product:

1. Drag the **StoreDebugLoggingPrefab** into your scene.

[IMAGE: EventPrefabtoScene]

2. In the inspector, locate the **Products** drop down and drag a product over. You can also drag multiple products at once. The order in the inspector is not important, but make sure you only list each product once. 

<div class="video-container">
    <iframe src="https://assets.vrchat.com/videos/docs/DebugLogging_AddProduct.mp4" title="Overhead Indicator" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

3. Fill the **Group Id** variable with your group ID. 
   -   Find your group ID by opening your group [on the website](https://vrchat.com/home/groups) and copying the ID in the address bar of your browser. For example: `grp_a4f791af-a167-4c91-b849-2e37e37f509a`. Any short code (i.e. `EXAMPL.9920`) will **not** work.

[IMAGE: DebugGroupID]

4. The **Debug Text** object, **Scrollbar**, and **Auto Scroll Toggle** are text and UI elements that should be left as is.

5. Run Build & Test!

### Inspector Parameters

* `Products` - The Udon products a user can purchase, with a `Size` value for the number of products and `Element` values for each product link.
* `Debug Text` - The text that appears when a player clicks one of the buttons on the console.
* `Group Id` - The ID for your group, which contains your store and purchasable products.
* `Scrollbar` - The scrollbar that shows up in the console.
* `Auto Scroll Toggle` - The toggle that lets players turn auto scrolling on or off.


---

## Document: floating-overhead.md

Path: /economy/sdk/examples/floating-overhead.md
---
description: "A floating indicator above players who own an Udon product."
sidebar_custom_props:
    customIcon: 👑
---

# Floating Overhead Buy Indicator

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

1. Open [the Example Central Window](https://vrc-beta-docs.netlify.app/sdk/example-central) from the window from the Unity Editor Menu under "VRChat SDK > 🏠 Example Central"
2. If you haven't yet specifically made examples visible yet:
	1. Press the ⚙️ gear icon in the Example Central window to open Example Central settings.
    2. Enable "Show Creator Economy Examples".
3. Find this prefab in the list or search for it by title (same as the title of this page).
4. Press the "Import" button to import the Unitypackage into your project.

Floating Overhead Buy Indicator is a prefab that spawns an indicator over a player's head once they have purchased something. Customize it in various ways to highlight your supporters.

[IMAGE: FloatingPrefab]

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

##### Prefabs Included
* **FloatingOverheadBuyIndicatorPrefab**: A script that adds the `FloatingObjectPrefab` above players who own the `ExampleProduct`.

* **FloatingObjectPrefab**: What's spawned above the player when they own the product. You can customize this or replace it with another GameObject to be anything you'd like.

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) prefab. Otherwise, your project will be missing what it needs for a complete scene.
:::

### How to Use

For this (and most!) prefabs, you'll first need an UdonProduct to check for and a way for players to purchase this product. 

Once you've created a purchasable product:

1. Drag the **FloatingOverheadBuyIndicatorPrefab** into your scene. It's invisible by default as there's no image or model to display yet.

[IMAGE: FloatingPrefabtoScene]

2. In the Inspector, locate the **Product** variable. Click on the circle button and replace the example file with your own product.

[IMAGE: ProductAdd]

3. Next, locate **Overhead Indicator Prefab**. This is what will spawn over the players head when they purchase this product. Think of it like the green diamond from the Sims! You can replace this with whatever GameObject you'd like, but just make sure it has no colliders.

[IMAGE: ObjAdd]

4. Use **Height Above Head** to customize how far above the player's head you want the indicator to float.

[IMAGE: HeightChange]

5. If you'd like the player to be able to look up and see their own indicator, leave **Show Indicator Above Local Player** enabled. Disable it if otherwise.

<div class="video-container">
    <iframe src="https://assets.vrchat.com/videos/docs/BuyIndicator-ShowIndicatorAboveLocalPlayer.mp4" title="Overhead Indicator" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

6. Run Build & Test!

### Inspector Parameters

* `UdonProduct` - The Udon Product that when owned adds a floating object above a player.
* `Overhead Indicator Prefab `- The indicator GameObject that you want to float above players head. Make sure this object doesn't have any colliders or you'll likely run into issues.
* `HeightAboveHead` - How far above the player's head you want the indicator to float.
* `Show Indicator Above Local Player` - Whether or not you should see an indicator above yourself if you own the product.


---

## Document: index.md

Path: /economy/sdk/examples/index.md
---
sidebar_position: 5
sidebar_custom_props:
    description: Add prefabs to your world that are easy to customize.
    customIcon: 📚
---

# Example Prefabs

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Example Prefabs allow world creators to use the Creator Economy quickly and easily without writing their own Udon scripts. The prefabs can be tweaked and customized to create a better experience for your supporters.

Many of the examples require knowledge on how to set up Udon products, which should be done before you proceed here. Head to our [Getting Started with the Creator Economy SDK page](/economy/sdk/getting-started/) to learn more.

import DocCardList from '@theme/DocCardList';

<DocCardList />

## Adding Prefabs

Each prefab shares the same starting steps:

1. Download the Unity package for the prefab you need, which can be found in the left sidebar.

2. Import the package into your Unity project.

[IMAGE: DragAndDrop]

3. Drag the prefab into your scene.

[IMAGE: ImportPrefabtoUnity]

And you're ready to customize! Browse our different prefabs in the left-hand sidebar to see what they do and how to customize them.


---

## Document: open-group-page.md

Path: /economy/sdk/examples/open-group-page.md
---
description: "Opens your group or group store."
sidebar_position: 1
sidebar_custom_props:
    customIcon: 🔗
---

# Open Group Page

OpenGroupPage is a prefab that allows you to open your group page or your group store. Use it to create buttons that make it easy for users to access your group.

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

## Prefabs included
* **OpenGroupPagePrefab**: Includes a button that opens a group page. Also includes a text description.
* **OpenGroupPageSimplePrefab**: Includes a button that opens a group page. Does not include a text description.

[IMAGE: OpenGroupPrefab]

## How to Use

For each prefab, you'll need to replace any ID with the ID of your own group.

1. Select the chosen prefab in your Unity scene.
2. Set the ID of the group that owns the product in the `Group ID` field in the inspector window.
    -   Find your group ID by opening your group [on the website](https://vrchat.com/home/groups) and copying the ID in the address bar of your browser. For example: `grp_a4f791af-a167-4c91-b849-2e37e37f509a`. Any short code (i.e. `EXAMPL.9920`) will **not** work.

[IMAGE: DragGroupID]

3. Toggle the **OpenToStorePage** toggle on the prefab if you want to open to your store page directly. If unchecked, the button will open to your group page instead of directly to your store.
4. For **OpenListing/OpenListingSimple:** Set the ID of the listing in the `Listing ID` field in the inspector window.
    - Find your listing ID by [opening the listing section](https://vrchat.com/b/monetization/home/marketplace/storefront/listings) of your store and copying its ID. 

[IMAGE: DragListingID]

5. Toggle the **OpenToStorePage** toggle on the prefab if you want to open to your store page directly. If unchecked, the button will open to your group page instead of directly to your store.

[IMAGE: IDPasting]

6. Run Build & Test!

## Inspector Parameters

#### OpenGroupPage 
* `Group ID` - The group ID of the group you want to open.
* `Open To Store Page` - If true, will open the store page for the group instead of the group info page.


---

## Document: open-listing.md

Path: /economy/sdk/examples/open-listing.md
---
description: "Opens a listing."
sidebar_position: 0
sidebar_custom_props:
    customIcon: 🔗
---

# Open Listing

This example contains two prefabs that allow users to open one of your listings by pressing a button.

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

## Prefabs included

* **OpenListingPrefab**: Includes a button to open to a listing page. Also includes a text description.
* **OpenListingSimplePrefab**: Includes a button to open to a listing page. Does not include a text description.
* **OpenListingAndReactToPurchasePrefab**: Includes a button to open to a listing page. Plays a sound effect when a given product is purchased.

[IMAGE: OpenListingPrefab]

* **OpenListingDeluxePrefab**: Includes a thumbnail, and fields for the name, type and price of the listing.

[IMAGE: OpenListingPrefab]

## How to Use

For each prefab, you'll need to replace any ID with the ID of your own group or product.

1. Select the chosen prefab in your Unity scene.

2. Set the ID of the listing in the `Listing ID` field in the inspector window.
    - Find your listing ID by [opening the listing section](https://vrchat.com/home/marketplace/storefront/listings) of your store and copying its ID. 

[IMAGE: DragListingID]

3. For **OpenListingAndReactToPurchase** only:
    - Use the [UdonProducts Manager](https://creators.vrchat.com/economy/sdk/getting-started#udonproducts-manager) to locate the `UdonProduct` asset of the product that should play a sound effect when purchased.
    - Set the `Trigger Product` field to the `UdonProduct` asset.

4. For **OpenListingDeluxe** only:
    - Set the Thumbnail for the listing using the `Thumbnail` field in the inspector window. It's best if you use the same thumbnail that the user will see when opening your listing, but you have the ability to use any square Sprite in your project.
    - Set the three text lines using the `Display Name`, `Type` and `Price` fields. Just like the thumbnail, it's best if these match what the user will see in your listing, but you can enter any information you like.

[IMAGE: OpenListingDeluxeFields]

5. Run Build & Test!

### Inspector Parameters

The prefabs have the following parameters:

### OpenListing & OpenListingSimple
* `Listing ID` - The listing ID of the listing you want to open.

### OpenListingAndReactToPurchase
* `Trigger Product` - The `UdonProduct` asset that triggers the sound effect when purchased.
* `Optional Purchase Sfx` - The sound effect that plays when purchasing the product.
* `Optional Purchase Sfx Source` - The `AudioSource` component that plays the sound effect.

### OpenListingDeluxe
* `Thumbnail` - The sprite shown in the prefab, typically the same as the thumbnail set for the listing.
* `Display Name` - The first line of text, typically the Display Name of the listing.
* `Type` - The second line of text, typically the Type of the listing - Consumable, Instant, etc.
* `Price` - The third line of text, typically the Price of the listing in VRChat Credits.


---

## Document: open-world-store.md

Path: /economy/sdk/examples/open-world-store.md
---
description: "Opens your world store."
sidebar_position: 1
sidebar_custom_props:
    customIcon: 🏪
---

# Open World Store

The OpenWorldStore prefab offers visitors a convenient way to access your world store. Customize its appearance to attract visitors and highlight your store.

You can visit the [Open World Store Example World](https://vrchat.com/home/world/wrld_fef974b9-fe44-4731-8bd1-7629e80eccc9) to see how it works first-hand. Notice that there is a real product available in the store - don't buy it!

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

## Prefabs included
* **OpenWorldStorePrefab**: A vending machine that opens a world store when the user interacts with it. Includes a customizable graphic and interaction text.

[IMAGE: OpenWorldStorePrefab]

## How to Use

1. Create a [world store](/economy/store/world-store), publish the store, and add at least one published listing.
2. Set the Interaction Text you want users to see when approaching the prefab.

[IMAGE: OpenWorldStoreInteractionText]

3. Set the Door Graphic you want displayed on the front of your vending machine by selecting a texture in the "Door Graphic" picker.

[IMAGE: OpenWorldStoreDoorGraphic]

4. Build & Publish your world.
  - "Build & Test" does _not_ allow you to open world stores. You must "Build & Publish" to test your world store in VRChat.
  - If you're adding a world store to an existing world, you should "Build & Publish" to a new world ID. This allows you to test the prefab before publishing it to your existing world.

## Creating a New Door Graphic

You can create a graphic using Photoshop or any other image editor.

### Using Photoshop

The example includes a Photoshop file for easy editing at the path `Assets/Examples/OpenWorldStore/Prop_VendingMachine/Textures/glass_Screen_TEMPLATE.psd`.

[IMAGE: OpenWorldStorePhotoshopTemplate]

1. Replace the contents of the "REPLACE ME!" layer with a graphic that represents your listing(s).
2. Update the text in the "FeaturedText" layer with your own words.
3. Edit any of the other layers as you see fit, keeping the overall size and masking of the graphic the same.
4. Export your new version as a 24-bit PNG with transparency - you can save it directly into the Assets folder of your project.

### Using Another Image Editor

The example includes a PNG for easy editing at the path `Assets/Examples/OpenWorldStore/Prop_VendingMachine/Textures/glass_Screen_UV_Map`.

1. Open "glass_Screen_UV_Map.png" in an image editor.
2. Edit the white area of the template. You can add whatever graphics you want.
3. Save your file as a 24-bit PNG with alpha transparency.
4. Move the file into your project.
5. Select the texture in the Project window, and set its Alpha Source to "Input Texture Alpha" in the inspector.
6. Drag and drop the file from your project window to the "Door Graphic" input slot in the OpenWorldStorePrefab's inspector.

---

## Document: product-owners-instance.md

Path: /economy/sdk/examples/product-owners-instance.md
---
description: "Lists all product owners in the current instance."
sidebar_custom_props:
    customIcon: 👥
---

# Product Owners In Instance

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Product Owners In Instance is a prefab that lists the product owners or non-product owners who are currently in the instance via a text console.

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

##### Prefabs Included
* **ProductOwnersInInstancePrefab**: A prefab with a console that shows all the product owners in the instance.
* **NonProductOwnersInInstancePrefab**: A prefab with a console that shows all the non-owners in the instance.

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) prefab. Otherwise, your project will be missing what it needs for a complete scene.
:::

### How to Use

For this (and most!) prefabs, you'll first need an UdonProduct to check for and a way for players to buy this product. 

Once you've created a purchasable product:

1. Drag the **ProductOwnersInInstance** prefab into your scene.

[IMAGE: EventPrefabtoScene]

2. In the inspector, locate the **Udon Product** variable. Click on the circle button and replace the example file with your own product.

[IMAGE: ProductAdd]

3. If you'd like the console to show non-owners instead, you can check **List Non Product Owners Instead,** or use the **NonProductOwnersInInstance** prefab. Otherwise, leave this unchecked.

[IMAGE: NonOwnersvsOwners]

4. Run Build & Test!

### Inspector Parameters

* `Udon Product` - The Udon Product which will be checked for ownership.
* `Product Owners Text` - The textfield that will be updated with the list of product owners. Each product owner will be on a new line.
* `List Non Product Owners Instead` - If true, all the players who don't own the product will be listed instead.


---

## Document: product-owners-only.md

Path: /economy/sdk/examples/product-owners-only.md
---
description: "An area that only Udon product owners can enter."
sidebar_custom_props:
    customIcon: 🔐
---

# Product Owners Only Area

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Product Owners Only Area is a prefab that sets up an area that is only accessible to owners of a target product. Use this to create exclusive areas, events, and experiences in your world.

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

##### Prefabs Included
* **ProductOwnersOnlyAreaExamplePrefab**: A prefab that contains a full example of how to use the ProductOwnersOnlyArea script.

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) and [Udon Product Toggle](/economy/sdk/examples/product-toggle) prefabs. Otherwise, your project will be missing what it needs for a complete example scene.
:::

### How to Use

For this (and most!) prefabs, you'll first need an UdonProduct to check for and a way for players to purchase this product. 

Once you've created a purchasable product:

1. Open the **ProductOwnersOnlyAreaExampleScene** from your Project window. The scene contains a building asset to help you test and understand how the prefab works.

[IMAGE: PrefabScene]

2. In the Hierarchy, click on the **ProductOwnersOnlyAreaExamplePrefab**. 

[IMAGE: HierarchyClick]

3. In the Inspector, add which Udon Product you would like to check for when a player enters or is inside of a certain area.

[IMAGE: AddProduct]

5. In the Hierarchy, select **OpenListingSimplePrefab**. Paste your listing ID here. This will show a link to purchase the product where necessary.
    -   To get your listing ID, go to [vrchat.com/home](https://vrchat.com/home), then Marketplace -> Storefront -> My Listings.

[IMAGE: AddListingID]

6. In the Hierarchy, click on the **ProductOwnersOnlyAreaExamplePrefab** again. You'll see a few different settings:

    -    **Trespassing Message** is what appears if a player enters/is inside a product owner-only area and does not own the correct Udon Product.

    - **Trespassing Teleport Location** is where the player is sent if they try and enter or have ended up in a location they do not have access to. You can move this in your scene to wherever you like, just make sure it's outside of the owner-only area.

    - **Area Colliders** are what keep non-owners out of your exclusive area. In this prefab, it is a box collider inside of our example asset. You should adjust this in your scenes to best fit your needs.

[IMAGE: TrespassingText]

7. If you would like to keep non-owners inside of a specific area instead, enable **Keep People In Area**. If enabled, make sure your spawn and Trespassing Teleport Location are within the collider instead of outside the collider. 

:::tip
Enable this if you are creating a large, exclusive area, and want to keep all non-owners together. Think lining up to buy tickets before getting into an amusement park. We recommend you keep it disabled if you're only sectioning off a small part of your world, like an exclusive room.
:::

8. In the Hierarchy, click on the drop down arrow next to **ProductOwnersOnlyAreaExamplePrefab**. Click on **ProductOwnersOnlyAreaBlockerToggle**. 

9. In the Inspector, select the same Udon Product you chose earlier. Now, when a player owns this product, this door will be disabled.
    -  You can read more about disabling and enabling blockers like doors and walls on the [Udon Product Toggle](/economy/sdk/examples/product-toggle) prefab page.

9. Run Build & Test!

### Inspector Parameters

* `Udon Product` - The Udon Product that determines ownership.
* `Trespassing Message` - The GameObject that will be activated and shown when the player is trespassing to show them the trespassing message.
* `Trespassing Teleport Location` - The location the player will be teleported to when they have trespassed.
* `Area Colliders` - The colliders that define the area only owners/non-owners can access, depending on the Keep People In Area Toggle. These will be disabled at runtime to save performance.
* `Keep People In Area` - Toggle this on to force players to stay in area instead of keeping them outside the area. Make sure your spawn and Teleport Location are inside the area if you use this.


---

## Document: product-toggle.md

Path: /economy/sdk/examples/product-toggle.md
---
description: "Toggle a GameObject for players who own an Udon product."
sidebar_custom_props:
    customIcon: 🔄
---

# Udon Product Toggle

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Udon Product Toggle is a prefab that enables/disables a GameObject when a user owns the Udon Product assigned. This can be used for both local and instance-based objects. Use this in unique ways, like setting up doors that let product owners into private areas, or creating fun, purchasable pop-ups for the entire instance.

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

##### Prefabs Included
* **UdonProductToggleObjectOffLocalPrefab**: Sets the target object to be disabled when the local player owns the product.
* **UdonProductToggleObjectOffAnyonePrefab**: Sets the target object to be disabled when anyone in the instance owns the product. 
    - Use these prefabs when a player must be a product owner to remove something for either themself or the entire instance, like a door to an exclusive part of your world.  

* **UdonProductToggleObjectOnLocalPrefab**: Sets the target object to be enabled when the local player owns the product.
* **UdonProductToggleObjectOnAnyonePrefab**: Sets the target object to be enabled when anyone in the instance owns the product.
    -  Use these prefabs when a player must be a product owner to enable something for either themself or the entire instance, like spawning cool effects or new objects.

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) prefab. Otherwise, your project will be missing what it needs for a complete scene.
:::

### How to Use

For this (and most!) prefabs, you'll first need an UdonProduct to check for and a way for players to buy this product. 

Once you've created a purchasable product:

1. Drag the chosen prefab into your scene. Which prefab you use depends on what logic you would like to have in your world. Each prefab has its own behavior, which you can view in the **Prefabs Included** section.

[IMAGE: DraggingPrefab]

2. In the Inspector, add which Udon Product you would like to check for.

[IMAGE: AddProduct]

3. In the Inspector, replace the Target object with whatever object you would like to be enabled/disabled when a player owns the Udon Product. Here's an example of **ToggleObjectOff** in action:

<div class="video-container">
    <iframe src="https://assets.vrchat.com/videos/docs/ProductToggle_Demo.mp4" title="Product Toggle" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

4. Run Build & Test!

### Inspector Parameters

* `Udon Product` - The Udon Product that determines ownership.
* `Targets` - The objects that will be activated/deactivated when the product is bought/expired.
* `Default State` - The default state the target's active state will be set to when the product is not bought.
* `Local Only` - If true, will only activate/deactivate when it's bought/expired by the local player. If false, will activate/deactivate when it's owned by any player.


---

## Document: supporter-list.md

Path: /economy/sdk/examples/supporter-list.md
---
description: "A customizable list of all users who own an Udon product."
sidebar_custom_props:
    customIcon: 🥇
---

# Supporter List

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

The Supporter List prefab displays all the names of users that have purchased an UdonProduct. This can be customized for how many UdonProducts are displayed, their color, text size, and more.

[IMAGE: SupporterListPreview]

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) prefab. Otherwise, your project will be missing what it needs for a complete example scene.
:::

### Prefabs Included
* **SupporterListPrefab**: The full panel with the default settings.
* **SupporterListPrefabAutoScrolling**: The full panel, but scrolling is handled automatically.

## How to Use

This prefab requires an Udon Product for each "Tier" you'd like to include in your supporter list.

Importantly, this Udon Product **must** have "Owner Names in Udon" enabled on the VRChat website. You can enable this setting by navigating to ["My Products"](https://vrchat.com/home/marketplace/storefront/products) (`Marketplace > Storefront > My Products`) and editing the Udon Products you would like to use.

1. Drag either "SupporterListPrefab" or "SupporterListPrefabAutoScrolling" into your scene and unpack it. (This allows you to customize your supporter list.)
2. Find the "SupportTiers" GameObjects within the prefab.

[IMAGE: SupportTiersHierarchy]

3. The prefab has three "SupportTier" objects by default. If you need more or fewer than the three tiers, feel free to duplicate, modify, or delete them as needed. (This is why you unpacked the prefab in step 1.)
4. Customize each [Support Tier](supporter-list#support-tier) with your Udon Product, the title, the color that you want, and any font sizing you'd like to use.

## Inspector Parameters

### Supporter List

[IMAGE: SupporterListInspector]

This prefab controls the scrolling and update behavior of the supporter list.

| Parameter | Type | Description |
| --- | --- | --- |
| **References** | --- | --- |
| Label | TextMeshPro UGUI | The text label that displays the list. |
| Scroll Rect | Scroll Rect | The scroll rect for scrolling the list up and down. |
| View Port Rect Transform | Rect Transform | The rect transform for the viewport of the scroll view. |
| **Settings** | --- | --- |
| Auto Scroll | Bool | If true, the list scrolls automatically. |
| Scroll Speed | Float | The speed at which the list scrolls. If 0, the list will not scroll. Value is in pixels per second. |
| Fade Time | Float | The time it takes for the list to fade in and out. |
| Time Between States | Float | The time before it starts scrolling after fade in and time before it starts fading out after scrolling to bottom. |
| **Performance** | --- | --- |
| Update When Player Is Behind | Bool | If true, the list updates when the player is physically standing behind the list and cannot see the front. Only use if the list is visible from the back. |
| Update When Player Not Looking | Bool | If true, the list only updates when the player is not looking at it. Improves performance but can result in the list not immediately updating when the player looks at it. |
| Min Update Delay | Float | The minimum time between updates. At 0, the list updates every frame. Increase this value to improve performance at cost of list scrolling looking choppy. |
| Max Update Delay | Float | The maximum time between updates. This value is used when the player is behind the list, not looking at the list, or outside the "Distance Outside Max Update Delay" distance. |
| Distance Within Min Update Delay | Float | If the player is this close to the prefab, the min update delay is used. |
| Distance Outside Max Update Delay | Float | If the player is this far away from the prefab, the max update delay is used.  |


### Support Tier

Each tier of your supporter list is represented by a customizable supporter tier object.

[IMAGE: SupportTierInspector]

| Parameter | Type | Description |
| --- | --- | --- |
| **References** | --- | --- |
| Ownership Product | UdonProduct | The product that is checked for ownership. |
| **Tier Settings** | --- | --- |
| Product Label | String | The name of the tier. |
| Name Separation String | String | The string that separates each supporter's name. |
| Add Product Label | Bool | If true, the product label is added to the board content. |
| **Text Settings** | --- | --- |
| Text Color | Color | The color of the text. |
| Product Label Font Size | Integer | The font size of the product label. |
| Name Label Font Size | Integer | The font size of the name label. |
| Max Names Per Line | Integer | The maximum amount of names per line. If 0, there is no limit. |

---

## Document: timed-event.md

Path: /economy/sdk/examples/timed-event.md
---
description: "An event that only Udon product owners can trigger."
sidebar_custom_props:
    customIcon: ⏱
---

# Product Event Timed

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

A ProductEvent is an event that only can be sent by a player who owns a product. Use this to enable GameObjects for a set amount of time when the product event is executed.

This can be customized in a variety of ways! For example, create a paid product that allows those players to set off fireworks for a certain amount of time. 

You can read more about Udon events [here](https://creators.vrchat.com/worlds/udon/graph/event-nodes/) and [here](https://udonsharp.docs.vrchat.com/events/).

<div class="video-container">
    <iframe src="https://assets.vrchat.com/videos/docs/ProductEvent_Preview.mp4" title="Timed Event" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

import HowToImportExample from '/docs/economy/_ce-how-to-import.mdx';

<HowToImportExample/>

##### Prefabs Included
* **SendProductEventPrefab**: A prefab that sends the product event when the button is pressed and enables the GameObject for the set amount of time. Though only a player who owns the product can set off the event, `OnProductEvent` will be executed by all users. Meaning, only people who pay for the product can activate the event, but anyone can see or interact once the event is activated.

:::caution
If viewing the example scene, you'll also need the [Open Group Page](/economy/sdk/examples/open-group-page) prefab. Otherwise, your project will be missing what it needs for a complete scene.
:::

### How to Use

For this (and most!) prefabs, you'll first need an UdonProduct to check for and a way for players to buy this product. 

Once you've created a purchasable product:

1. Drag the **ProductEventTimedSetActivePrefab** into your scene.

[IMAGE: EventPrefabtoScene]

2. In the inspector, locate the **Udon Product** variable. Click on the circle button and replace the example file with your own product. This product must be owned by the player trying to send the event.

[IMAGE: EventProductAdd]

3. Next, locate **Enable On Product Event GameObject**. This is what will be enabled when the player with the correct UdonProduct clicks the button. You can replace this with whatever GameObject you'd like.

[IMAGE: EventObjAdd]

4. Use **Enabled Time** to how long you want this GameObject to be enabled. This can range from .5-10 seconds.

5. Run Build & Test!

### Inspector Parameters

* `UdonProduct` - The Udon product that will be used when sending the event. This product must be owned by the player sending the event.
* `Enable Product Event GameObject` - The GameObject that will be enabled when the event is executed.
* `Enabled Time` - How long the GameObject will be enabled for in seconds.


---

## Document: getting-started.md

Path: /economy/sdk/getting-started.md
---
description: "Add your first Udon product to your world."
title: Getting Started
sidebar_position: 0
sidebar_custom_props:
    customIcon: 💡
---

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

This page explains how to get started using the Creator Economy in the VRChat Worlds SDK. Before you begin, you'll need to have created a [VRChat World in Unity](/worlds/creating-your-first-world).

You must also have created an Udon product in your Store. Please visit the [Udon product page](/economy/products/udon) if you haven't done this yet.

If you've done everything above, you're ready to edit your Unity project.

## UdonProducts Manager

The **UdonProducts Manager** is an editor window that shows you all Udon Products you've created on VRChat.com. If you haven't created any yet, this window will be blank.

You can add Udon products to your project automatically with the UdonProducts Manager.

[IMAGE: A screenshot of the UdonProducts manager.]

To open the UdonProducts Manager window, open the **VRChat SDK** tab at the top of the Unity Window, then click **UdonProducts Manager**.

The manager lets you:
- Fetch the thumbnail image of the product. This creates a texture you can use in your Unity project.
- Ping the product asset in the **Project** window, making the product easy to find.
- Purchase and expire the product for debugging purposes if you have ClientSim installed.

The manager lists all products in two lists: "Used in the scene" and "Used in the project". The former will update its list whenever you save your current scene.

Any error or other information will appear at the bottom of the window.

:::note 
Fetched textures inside your project do not automatically update if you update your Udon product's image on VRChat.com. To update the fetched texture, delete and fetch it again in your Unity project.
:::

### Creating an Udon product manually

You can also create and manage your Udon Products manually.

1. Right-click in your Assets window or click "Assets" > "Create" at the top of your Unity window.
2. Click "VRChat" > "UdonProduct" to create an UdonProduct asset in your Assets folder.
3. (Optional) Choose a file name.
4. Select the UdonProduct asset and view it in Unity's inspector.

[IMAGE: A blank UdonProduct after creation]

5. Copy the ID of your Udon Product from VRChat.com, and paste it in the "ID" field of your UdonProduct asset.
6. (Optional) Click "Fetch product details" to see the name and description of your product in Unity.
7. (Optional) Click "Fetch product image" to create a texture based on your product's current thumbnail image.

## Adding UdonProducts to your world

After creating UdonProduct assets, you can use them in Udon scripts.

The VRChat SDK has [examples and prefabs that can be used with your Udon product](/economy/sdk/examples/) by dragging a prefab into your scene and choosing an UdonProduct asset. The prefabs are beginner-friendly and don't require any Udon or coding knowledge.

If you're experienced with Udon and the VRChat Worlds SDK, you can create your own scripts and use them with Udon products.

To learn how, read our full documentation on the [Creator Economy's SDK features](/economy/sdk/udon-documentation).


---

## Document: index.md

Path: /economy/sdk/index.md
---
title: Creator Economy Worlds SDK
sidebar_position: 5
sidebar_custom_props:
    description: Use the Creator Economy in your world.
    customIcon: 🛠
---

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

The VRChat Worlds SDK allows your worlds to use [Udon](/worlds/udon/) to interact with the Creator Economy.

import DocCardList from '@theme/DocCardList';

<DocCardList />

- Get started by [creating your first Udon Product](/economy/sdk/getting-started),
- Check out our official [example prefabs and scenes](/economy/sdk/examples/) and use them in your own world,
- Try out your own Udon products by [testing them](/economy/sdk/testing),
- Or write your own custom scripts by reading [Creator Economy Udon documentation](/economy/sdk/udon-documentation).

---

## Document: testing.md

Path: /economy/sdk/testing.md
---
description: "Test your Udon products before publishing your world."
sidebar_position: 3
sidebar_custom_props:
    customIcon: 🪲
---

# Testing Udon Products

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

When you add Creator Economy features to your VRChat World, you should test it before publishing.

## Testing in ClientSim

While developing your world in Unity, you can use ClientSim in conjunction with the [UdonProducts Manager](/economy/sdk/getting-started#udonproducts-manager). It allows you to activate and expire products without launching VRChat.

## Testing in VRChat

You can test Creator Economy SDK features with the "Build & Test" option.

:::warning

Some features of the Creator Economy cannot be tested locally and require a private world upload instead.

:::

- When testing locally or logged into VRChat as the world/group owner, all listings/subscription are free. Your VRChat wallet balance does not decrease.
- When testing locally, purchased listings automatically expire after 60 seconds, no matter how many months you choose when purchasing it.
- You can purchase published listings/subscriptions without publishing them in your store. This allows you to make test purchases without allowing users to see or buy your listings/subscriptions. 

---

## Document: udon-documentation.md

Path: /economy/sdk/udon-documentation.md
---
description: "All Udon types, methods, and events related to the Creator Economy."
sidebar_position: 4
sidebar_custom_props:
    customIcon: 🛠
---

import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Udon Documentation

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

This page documents all Udon types, methods, and events related to the VRChat Creator Economy. You can use them to create your own [Udon scripts](/worlds/udon) with the [Udon Node Graph](/worlds/udon/graph) or [UdonSharp](https://udonsharp.docs.vrchat.com).

## Types

VRChat's SDK contains objects types to support the management of Udon products that your customers can purchase.

### UdonProduct
UdonProduct is a <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ScriptableObject.html">ScriptableObject</UnityVersionedLink> that you can create in your project. It represents a product from your store, allowing you to interact with it in Udon.
A world will only receive events based on products that are being used within it, therefore it is necessary to reference a product's UdonProduct equivalent in any UdonBehaviour at least once before uploading.

For example, even if you don't directly use the UdonProducts anywhere, you would need to have an array of UdonProducts on at least one UdonBehaviour somewhere in the scene to receive OnPurchaseConfirmed, OnPurchaseExpired or OnPurchasesLoaded events for those products across all UdonBehaviours.

UdonProducts can be created with the UdonProductManager ("VRChat SDK" → "UdonProduct Manager") or by creating an UdonProduct asset manually ("Assets" → "Create" → "VRChat" → "UdonProduct").

Read [Getting Started](/economy/sdk/getting-started) to learn more about creating an UdonProduct asset in your project.

[IMAGE: A blank UdonProduct after creation]

#### Fields

| Field name | Type | Description |
| - | - | - |
| ID | string | Unique identifier of your Udon product. Enter it by copying it from your store on the VRChat website. |
| Name | string | The name of your Udon product. | 
| Description | string | The description of your Udon product. | 

#### Equals

**Description**
This method compares if the product ID is equal to another product's ID.

**Input**
- `IProduct` or `UdonProduct`: Product to compare this product to.

**Output**
- `bool`:  `true` if the two products are equal, otherwise `false`.

### IProduct
This is the equivalent of a UdonProduct returned by all the Udon Creator Economy methods and events.

| Field name | Type | Description |
| - | - | - |
| ID | string | Unique identifier of your Udon product. |
| Name | string | The name of your Udon product. | 
| Description | string | The description of your Udon product. | 
| Buyer | VRCPlayerAPI | The player who purchased this product. |

#### Equals

**Description**
This method compares if the product ID is equal to another product's ID.

**Input**
- `IProduct` or `UdonProduct`: Product to compare this product to.

**Output**
- `bool`:  `true` if the two products are equal, otherwise `false`.

:::note

UdonProduct's and IProduct's "Name" & "Description" fields are currently filled in from the UdonProducts present in the world.

:::

## Methods

The SDK contains methods for interacting with player purchases or VRChat's store pages. These methods can be found under the 'Store' namespace.

### Store.DoesPlayerOwnProduct
This method will check if a player owns a certain product.

**Input**
- `VRCPlayerApi`: Player that you want to check the product ownership of.
- `UdonProduct` or `IProduct`: Product that you want to check the ownership of.

**Output**
- `bool`: `true` if the player owns the product, otherwise `false`.

:::caution Race condition

It is not advised to use this immediately after the "Start" event. Udon may not have received players purchases yet. It is advised to use the [OnPurchasesLoaded](#onpurchasesloaded) event instead.
:::

### Store.DoesAnyPlayerOwnProduct
This method will check if any player in the instance owns a certain product.

**Input**
- `UdonProduct` or `IProduct`: Product that you want to check the ownership of.

**Output**
- `bool`: `true` if any player in the instance owns the product, otherwise `false`.

### Store.GetPlayersWhoOwnProduct
This method will get all the players who own a certain product.

**Input**
- `UdonProduct` or `IProduct`: Product that you want to check the ownership of.

**Output**
- `VRCPlayerApi[]`: An array of players that own this product.

### Store.OpenWorldStorePage
Opens a the world store page of the current world, if it has one.

### Store.OpenGroupPage
Opens a group's **Group Info** page in VRChat's main menu.

**Input**
- `string`: ID of a group (i.e. `grp_00000000-0000-0000-0000-000000000000`)
  - To find the group ID, open the group on VRChat.com and copy the ID from your browser's address bar.

### Store.OpenGroupStorePage
Opens a group's **Store** page in VRChat's main menu.

**Input**
- `string`: ID of a group (i.e. `grp_00000000-0000-0000-0000-000000000000`)
  - To find the group ID, open the group on VRChat.com and copy the ID from your browser's address bar.

### Store.OpenListing
Opens the purchase screen of a [listing](/economy/listings) in VRChat's main menu.

You can open any of your activated listings, even if you didn't add it to your group [store](/economy/store) or world [store](/economy/store).

**Input**
- `string`: ID of the listing (i.e. `prod_00000000-0000-0000-0000-000000000000`)

### Store.SendProductEvent
Sends the [OnProductEvent](#onproductevent) event to all players in the instance on the target UdonBehaviour.
Before sending or receiving the networked event, this method checks if the player using `SendProductEvent` has purchased the product.

**Input**
- `UdonBehaviour`: The Udon Behaviour that will receive the resulting [OnProductEvent](#onproductevent) event.
- `UdonProduct` or `IProduct`: Product that you want to use for the event.

### Store.ListPurchases
Sends an [OnListPurchases](#onlistpurchases) event to the target UdonBehaviour with an array of all the purchases made by a target player.

**Input**
- `UdonBehaviour`: Udon Behaviour that will receive the resulting [OnListPurchases](#onlistpurchases) event.
- `VRCPlayerApi`: Player that you want to check the purchased products from.

### Store.ListAvailableProducts
Sends an [OnListAvailableProducts](#onlistavailableproducts) event to the target UdonBehaviour with an array containing all  products used in the world.

**Input**
- `UdonBehaviour`: An UdonBehaviour that will receive the resulting [OnListAvailableProducts](#onlistavailableproducts) event.

### Store.ListProductOwners
Sends an [OnListProductOwners](#onlistproductowners) event to the target UdonBehaviour. This event allows you to retrieve the names of all your supporters and, for example, display their user names in your world.

- For this event to work properly, you'll first need to enable the ["Owners Names in Udon" setting](/economy/products/udon#editing-udon-products) for the Udon product on [VRChat.com](https://vrchat.com/home/marketplace/storefront/products). Otherwise, [OnListProductOwners](#onlistproductowners) will not fire.
- If you are locally testing your world, OnListProductOwners will load the placeholder user names "VRCat, Fred, VRRat" instead of real user names.
- If your GameObject contains multiple UdonBehaviour components, this event may not work properly.

**Input**
- `UdonBehaviour`: An UdonBehaviour that will receive the resulting [OnListProductOwners](#onlistproductowners) event.
- `UdonProduct`: The UdonProduct for which to retrieve the owner's user names.

## Events

:::info Don't disable your script

If a game object or its Udon behaviour is disabled, it won't execute most of the events related to the Creator Economy.

:::

### OnPurchaseConfirmed
This event is triggered once a player's purchase has been loaded and confirmed. Purchases are loaded in the following situations: 
- when joining the instance, both for the local player and any other players,
- when any new players join the instance, and
- when any player in the instance purchases one of the world's products.

**Output**
- `IProduct`: The product that has been purchased.
- `VRCPlayerApi`: The player who has purchased the product.
- `bool`: `true` if the purchase was just made, `false` if it was made as part of loading the player's purchases upon joining the world.

### OnPurchaseConfirmedMultiple
This event is triggered every time [`OnPurchaseConfirmed`](#onpurchaseconfirmed) is triggered. However, this variant also supports [Quantity Purchases](/economy/listings/#quantitypurchases). If you use [instant](/economy/listings#instant) listings in your world, you should always use this event instead of `OnPurchaseConfirmed`.
The `quantity` value represents the amount that the user purchased. For [instant](/economy/listings#instant) listings with [Quantity Purchases](/economy/listings#quantity-purchases), `quantity` ranges from `1` to `99`. For all other listing types, `quantity` is always `1`.

**Output**
- `IProduct`: The product that has been purchased.
- `VRCPlayerApi`: The player who has purchased the product.
- `bool`: `true` if the purchase was just made, `false` if it was made as part of loading the player's purchases upon joining the world.
- `int`: The quantity purchased at once.

:::caution

Use either `OnPurchaseConfirmed` _or_ `OnPurchaseConfirmedMultiple`. Don't use both in the same script!

Both events detect every purchase. If you use both, you may accidentally detect the same purchase twice. Generally, you should use `OnPurchaseConfirmedMultiple` because it's compatible with [Quantity Purchases](/economy/listings#quantity-purchases).

:::

### OnPurchaseExpired
This event is triggered when the local client detects that one of the products owned by a player in the instance has expired.

**Output**
- `IProduct`: Product that has expired.
- `VRCPlayerApi`: The player whose product has expired.

### OnPurchasesLoaded
This event is triggered when all of a player's purchases have been loaded, either when the local player joins an instance or when another player has joined later.
If the player does not own any products, the event will still fire, and the IProduct[] array will be empty.

**Outputs**
- `IProduct[]`: An array of products owned by the player.
- `VRCPlayerApi`: The player whose purchases have been loaded.

### OnProductEvent
This event is triggered when a player uses [Store.SendProductEvent](#storesendproductevent). Both the local player and VRChat's servers will check that the local player has purchased the product before executing this event.

**Output**
- `IProduct`: The product that has been 'sent' alongside the event.
- `VRCPlayerApi`: The player who has used their product.

### OnListPurchases
This event is triggered when the local player uses [Store.ListPurchases](#storelistpurchases). It returns an array of all the purchases made by the target player.

**Outputs**
- `IProduct[]`: An array of products owned by the target player.
- `VRCPlayerApi`: The target player whose purchases have been retrieved.

### OnListAvailableProducts
This event is triggered when the local player uses [Store.ListAvailableProducts](#storelistavailableproducts). It returns an array of all the products (UdonProduct) used in the world.

**Outputs**
- `IProduct[]`: An array of IProducts representing all UdonProducts used in the world.

### OnListProductOwners
This event is triggered after an Udon script calls [Store.ListProductOwners](#storelistproductowners). It returns an array containing the display names of all players who own the target product. The list includes **every** user who owns that product, not just users in the current instance.

To check if a player in the instance owns an Udon product, [Store.DoesPlayerOwnProduct](#storedoesplayerownproduct) should be used instead.

**Outputs**
- `IProduct`: The product passed in the initial [Store.ListProductOwners](#storelistproductowners) call.
- `string[]`: An array of strings containing the names of all users who own this product.


---

## Document: avatar-marketplace.md

Path: /economy/store/avatar-marketplace.md
---
description: "Contains all avatar product users can buy in VRChat."
sidebar_custom_props:
    customIcon: 🛒
---

# Avatar Marketplace

import SellerNotification from '/docs/economy/_sellers-notification-avm.mdx';

<SellerNotification/>

The avatar marketplace contains [avatar products](/economy/products/avatar) available for purchase in VRChat. It's the most convenient way to discover, buy, and sell VRChat avatars.

## Browse the Marketplace

The avatar marketplace is located in the "Avatars" section of the VRChat menu. Users can browse the marketplace, search for published avatars, and see their [details](/economy/products/avatar#avatar-details). Selecting any avatar product takes the user to its details page.

## Publish an Avatar on the Marketplace

Follow the steps below to publish your avatar on the marketplace:

1. Upload an [avatar](/avatars/creating-your-first-avatar).
2. Create an [avatar product](/economy/products/avatar).
3. Wait for VRChat to review and accept your avatar product.
4. Create a [listing](/economy/listings).
5. Add your avatar product to your listing.
6. Publish your listing.
7. (Optional) Add your listing to a [world store](/economy/store/world-store).

Users can now buy your avatar in VRChat and discover it on the marketplace.

## Become an avatar seller

Only authorized avatar sellers create and publish avatar products on the marketplace. To become an authorized avatar seller, please [submit an application](https://www.surveymonkey.com/r/MC5X89R). We will slowly authorize more avatar sellers over time.

 If you are already a seller in the Creator Economy and wish to gain access to the avatar marketplace, please apply.

---

## Document: group-store.md

Path: /economy/store/group-store.md
---
description: "Contains subscriptions for your group."
sidebar_custom_props:
    customIcon: 👥
---

# Group Stores

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Group stores allow you to easily sell [subscriptions](/economy/subscriptions) for your group. After you publish a group store, users can use your group's "Store" tab to discover and buy subscriptions.

If you have a VRChat world, you can add a button that opens your store. Use the [Open Group Page prefab](/economy/sdk/examples/open-group-page) or [`Store.OpenGroupStorePage`](/economy/sdk/udon-documentation#storeopengroupstorepage).

## Create a Group Store

The easiest way to create a group store is to create a [subscription](/economy/subscriptions). If your group does not have a store, creating a subscription also creates a group store.

Alternatively, you can create a group store from the [Store Manager](https://vrchat.com/home/marketplace/storefront/stores) by following the steps below:

1. Open the [store manager](https://vrchat.com/home/marketplace/storefront/stores) on the VRChat website.
2. Click the "Set up new store" button.
3. Select "Group Store."
4. Select one of your groups.
5. Click "Create" to create your group store.
	  - After creating your group store, users won't see it until you publish subscriptions and publish the store.
6. Create [subscriptions](/economy/subscriptions) and add them to your group.
	- You can use the [store manager](https://vrchat.com/home/marketplace/storefront/stores) to rearrange the order in which users see subscriptions in your store. 
7. Publish the subscriptions.
8. Publish your group store in the [store manager](https://vrchat.com/home/marketplace/storefront/stores).

[IMAGE: Publish store]

:::info

If you have a world, use [Udon](/economy/sdk/udon-documentation) to sell your published listings and subscriptions. For example, the [Open Listing prefab](/economy/sdk/examples/open-listing) makes it easier for users to buy subscriptions, increasing your sales.

If you don't want to publish a world store at all, you can use Udon to sell subscriptions instead!

:::

## Viewing your Group Store

After you publish your group store, users can find it by opening the group in VRChat (or the VRChat website) and pressing the "Store" button. They can browse your published subscriptions and buy them.


[IMAGE: Store page]

[IMAGE: Store page in-game]

You can share your group by copying its URL from the VRChat website or by sharing its group ID (e.g., `GROUP.1234`). Users can enter the ID in the Groups tab in VRChat, allowing them to view or join your group.

[IMAGE: Copy group URL]


## Limitations

- Group stores cannot contain [listings](/economy/listings).
- You cannot transfer your group if it has any subscribers.


---

## Document: index.md

Path: /economy/store/index.md
---
sidebar_position: 4
sidebar_custom_props:
    description: "Create stores to sell your listing."
    customIcon: 🏪
---

# Stores

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

Stores make it easy for users to discover your [listings](../listings) and [subscriptions](../subscriptions) in VRChat. You can have multiple stores, and you can publish listings in multiple stores.

import DocCardList from '@theme/DocCardList';

<DocCardList />

:::info

You can use [Udon](/economy/sdk/udon-documentation) to sell your published listings and subscriptions - even if you didn't publish them in your store.

:::

---

## Document: world-store.md

Path: /economy/store/world-store.md
---
description: "Contains listings for your world."
sidebar_custom_props:
    customIcon: 🌏
---

# World Stores

import SellerNotification from '/docs/economy/_sellers-notification.mdx';

<SellerNotification/>

World stores allow you to showcase [listings](/economy/listings) for your world. After creating a world store, users will see it when viewing your world in the VRChat menu or website. 

[IMAGE: World store]

You can also use Udon to open your world store. For example, you can add an "Open Store" button that uses the `Store.OpenWorldStorePage()` method to open your store.
## Create and publish a world store

You can create a world store for any of your worlds by following the steps below:

1. Open the [Store Manager](https://vrchat.com/home/marketplace/storefront/stores) on the VRChat website (Marketplace >My Store > Store Manager).
2. Select "Set Up New Store".

[IMAGE: Setup new store]

3. Select "World Store", choose one of your worlds from the dropdown, then press "Create".

[IMAGE: Choose world]

4. Add published [listings](/economy/listings) to your world store.
	- You can use the [store manager](https://vrchat.com/home/marketplace/storefront/stores) to rearrange the order in which users see subscriptions in your store. 
	- Read the [listings documentation](https://creators.vrchat.com/economy/listings) to learn how to add listings to your store.

5. Open your store in the store manager and publish it.

[IMAGE: Publish store]

6. Open your world in VRChat. You can now see the world store in the VRChat menu.

[IMAGE: World store in VRChat]

## Limitations

Keep the following restrictions in mind when using world stores:

- You can sell the same listing to multiple world stores.
	- You can sell listings that give users benefits in multiple worlds.
	- Users can't buy the same listing if they already own it.
- You can sell [permanent](/economy/listings#%EF%B8%8Fpermanent) or [temporary](/economy/listings#temporary) listings without adding them to your world store. 
	- You can use Udon to open listings directly, i.e. with [Store.OpenListing](/economy/sdk/udon-documentation#storeopenlisting).
	- You can't sell [instant](/economy/listings#instant) listings without adding them to your world store. In addition, only users who are currently visiting your world can buy instant listings.
- You cannot add [subscriptions](/economy/subscriptions) to your world stores.
	- Use group stores instead.


---

## Document: subscriptions.md

Path: /economy/subscriptions.md
---
sidebar_position: 3
description: Create subscriptions in your Group.
sidebar_custom_props:
    customIcon: 👛
---


# Subscriptions

import SellerNotification from '/docs/economy/_sellers-notification.mdx';
import ThemedCreditIcon from '/docs/economy/_credit-icon.mdx';

<SellerNotification/>

Subscriptions are the easiest way to monetize your VRChat group. Users can visit your group store to buy a subscription and unlock world or group benefits.

Subscriptions can contain the following product types:
- [Subscription role products](/economy/products/paid-role)
- [Udon products](/economy/products/udon)

You can choose your subscription's [visibility](#visibility). Subscriptions can appear in your group store, or you can use Udon to [open a published subscription's purchase screen](/economy/sdk/examples/open-listing) directly, even if your store is unpublished.

Subscriptions are similar to [listings](/economy/listings).

## Subscriptions, roles, and products

Each subscriptions consists of a subscription, a subscription role product, and a subscription role. Here's how they're related:

<Columns> 
<Column className='text--left'>

### Subscription

Users buy subscription in your group [store](/economy/store). Subscribers gain access to the subscription's [products](/economy/products/). They lose access when their subscription ends.

Each subscriptions contains exactly one [subscription role product](#subscription-role-product). You can also add multiple [Udon products](/economy/products/udon).



</Column>
<Column className='text--left'>

### Subscription role product

Users who own this [product](/economy/products/) gain access to a [subscription role](#subscription-role) in your group.

When you create a subscription, you automatically create a role product. You cannot create subscription role products manually.


</Column>
<Column className='text--left'>

### Subscription role

Users with this [group role](https://wiki.vrchat.com/wiki/Groups#Group_roles_and_permissions) can gain special permissions in your group or group instances. You can use it as a reward for your subscribers.

To learn more, read the [subscription role documentation](/economy/products/paid-role).

</Column>
</Columns>

## Create a subscription

Follow the steps below to create your first subscription. You'll create a subscription, a subscription role product, and a subscription role.

import Columns from '@site/src/components/Columns';
import Column from '@site/src/components/Column';

---

<Columns> 
<Column className='text--left'>

### 1. Create new subscription

Create a new subscription on any of the following sections of the VRChat website: 

- [My Subscriptions](https://vrchat.com/home/marketplace/storefront/subscriptions)
	- Click "Create Subscription."
- [Store Manager](https://vrchat.com/home/marketplace/storefront/stores/)
	- Select a group.
	- Click "Create Subscription."

After creating your first subscription, you can also edit your subscriptions by visiting the pages above.

</Column>
<Column className='text--right'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 2. Group

Choose a group for your subscription. If the group has no [group store](/economy/store/group-store), the website automatically creates a group store for you.

Each subscription is always connected to a single group. You cannot move the subscription to a different group later.

If you already chose a group in step 1, this step is skipped.

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 3. Role details

Choose the subscription role's name and description. This also determines the initial name of the name of the subscription role product.

:::tip

You can add a thumbnail to your subscription role product by editing it on the [My Products](https://vrchat.com/home/marketplace/storefront/products/). 

:::

Click "Next" to save the subscription role details.

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 4. Role permissions

Users who buy your subscription also receive a group role. Choose the permissions of the group role. You can allow subscribers to view all members, enter group instances, gain instance queue priority, and more.

:::tip

Turn on "Enable Free Join for Subscribers" to allow subscribers to join your group directly, even if the original group settings are set to "Request to Join" or "Invite-Only". This makes it easier for users to subscribe without needing prior group access.

:::

You can change the permissions later in your [group settings](https://vrchat.com/home/groups). Read the [subscription role documentation](/economy/products/paid-role) to learn more.

Click "Next" to create the subscription, product, and role.

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]


</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 5. Subscription details

Choose the name, description, thumbnail, and price of your subscription. When users browse your group store, they'll see the following details:

- **Name**: The name of your subscription.
- **Description**: An description of what subscribers get.
- **Thumbnail**: An image representing the subscription.
- **Monthly price and plans**: The price of your subscription.
	- Choose a price of 100-10,000<ThemedCreditIcon/> per month.[^1]
	- Subscribers can buy 1, 3, 6, or 12 months at once.
	- You can encourage users to subscribe by offering reduced monthly rates for multi-month plans.

Click "Next" to save the subscription details.

:::tip

You can change the subscription details later. Take your time to create an appealing thumbnail!

:::

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 6. Subscription products

Choose the [products](/economy/products/) that are included in this subscription. You can give subscribers access to up to 10 products.

The [role you created in step three](/economy/subscriptions#3-role-details) is always included and cannot be removed from the subscription. However, you can freely add and remove other products, such as [Udon products](/economy/products/udon), even while users are already subscribed.

Click "Next" to save your subscription as a draft.

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

---

<Columns> 
<Column className='text--left'>

### 7. Publish

After you create a subscription, it is saved as a draft. You must publish it before users can buy it.

Open the [Store Manager](https://vrchat.com/home/marketplace/storefront/stores/) and select your group store.

- Change the status of your store from "Unpublished" to "Published" by click the button in the top right.
- Change the status of your subscription from "Draft" to "Published" by opening the subscription's setting and clicking "Publish."

</Column>
<Column className='text--left'>

[IMAGE: Create listing screen on VRChat.com]

</Column>
</Columns>

Congratulations! Users can purchase published subscriptions in your group store.

## Visibility

The visibility of a subscription depends on its status. Open [My Subscriptions](https://vrchat.com/home/marketplace/storefront/subscriptions) to change the status of your subscriptions:

- "Published" subscriptions can be purchased by users.
- "Draft" subscriptions cannot be purchased by users. If users already purchased the subscription, they keep it.

After publishing a subscriptions, users can only see it if you added it to a group [store](/economy/store) or if you have a store inside your world. 

:::tip
To maximize your sales, you should use world [stores](/economy/store) **and** add Udon stores to your world!
:::

## Details about renewal, payout, and cancellation

When you use subscriptions to monetize your VRChat group, remember the following details:

- Subscriptions do not automatically renew when their duration expires.
	- Users see a notification when their subscription is about to expire.
- Users can extend their subscription before their current subscription ends.
	- For example: If a user's subscription expires in 7 days, and they buy a 12-month subscription, their subscription is extended to 12 months and 7 days
- When a user subscribes, you receive VRChat Credits for the first month immediately. If they subscribe for more than one month, you receive the remaining credits every month.
	- For example: If a user subscribes for 12 months, you immediately receive the VRChat Credits for the first month. Next month, you will receive the VRChat Credits for the second month, and so on.
- You do not receive VRChat Credits for remaining months when a user cancels their subscription.
	- For example: If a user subscribes for 12 months and immediately cancels, you only receive VRChat Credits for the first month.
- The subscription price includes a ~15.3% transaction fee.
	- See [CE Program Rules](https://hello.vrchat.com/legal/economy) and [Payout](/economy/payout).

[^1]: VRChat may change the Creator Economy's minimum and maximum subscription price in the future. We will inform you in advance before we implement a new minimum or maximum.

---

## Document: welcome-to-the-ce.md

Path: /economy/welcome-to-the-ce.md
---
description: "Learn how VRChat's Creator Economy works."
sidebar_position: -1
sidebar_custom_props:
    customIcon: 🛈
---

# Welcome to the Creator Economy

import SellerNotificationAVM from '/docs/economy/_sellers-notification-avm.mdx';

The Creator Economy allows you to sell your content directly in VRChat, earn VRChat Credits, and pay out real money doing what you love. Whether you're an avatar creator, world builder, group leader, or all three, the Creator Economy gives you the tools to monetize your creations, engage your community, and grow your store.

<iframe
    width="100%"
    height="400"
    src="https://www.youtube.com/embed/cNvmvPa4T3c"
    title="YouTube video player"
    frameborder="0"
    allow="clipboard-write; encrypted-media; picture-in-picture; web-share" allowfullscreen>
</iframe>

This page provides a high-level overview of what the Creator Economy is, what you can sell, how it works, and how to get started.

## What is the Creator Economy?

The Creator Economy is a system built into VRChat that lets you do the following:

- **Sell [products](/economy/products/)** like like [world features](/economy/products/udon), [avatar access](/economy/products/avatar), or [group roles](/economy/products/paid-role).
- **Create [stores](/economy/store/)** so users can easily find and buy your content.
- **Earn VRChat Credits**, which can be paid out into real money.

You can sell content through three main systems:
- **[Listings](/economy/listings/)** - One-time purchases (permanent, temporary, or instant).
- **[Subscriptions](/economy/subscriptions)** - Ongoing monthly benefits sold through group stores.
- **[Stores](/economy/store/)** - The places users go to buy your content, like the avatar marketplace, your group page, your world page, or Udon UIs inside your world.

## What can you sell?

There are three product types you can create and sell:

### 🌍 Udon Products

Sell [Udon products](/economy/products/udon) that unlock features inside your worlds: Cosmetics, effects, items, access to special areas, supporter boards, and more. These are great for world creators and game worlds.

### 👥 Subscription Role Products

Sell [roles](/economy/products/paid-role) for your VRChat group. Roles grant access to groups, group instances, announcements, queues, or exclusive events.

### 🧍Avatar Products

:::info

Only approved avatar sellers can create and publish avatar products on the marketplace.

:::

Sell [avatar products](/economy/products/avatar) that give users access to your avatars. You can sell avatars in permanent listings, and they appear in the [avatar marketplace](/economy/store/avatar-marketplace).

## How do sales work?

Users don't directly buy [products](/economy/products/). Instead, they buy [listings](/economy/listings) in [stores](/economy/store/).

### 🛍 Listings & Subscriptions

[Listings](/economy/listings) are flexible packages that bundle one or more products. You can create three types of listings:

- **Permanent**: The user keeps the products forever.    
- **Temporary**: The products expire after a set time (like 5 minutes or 3 months).
- **Instant**: The effect happens once and immediately (e.g., spawn a pickup).

[Subscriptions](/economy/subscriptions) are similar to listings:

- **Subscriptions**: Ongoing monthly access, only sold in group stores.

### 🏪 Stores

[Stores](/economy/store/) are where users buy your listings or subscriptions. There are three kinds of stores:

- **[Avatar Marketplace](/economy/store/avatar-marketplace)** - Where all published avatar listings live.
- **[World Stores](/economy/store/world-store)** -  Attached to your world page. Contains listings.
- **[Group Stores](/economy/store/group-store)** - Attached to your VRChat group page. Contains subscriptions.

To maximize reach, you can add the same listing in multiple stores. In addition, you add stores to your world or [open listings directly with Udon](/economy/sdk/getting-started).

The chart below shows you how different types of stores, listings, and products are connected:

[IMAGE: This chart shows which types of listings can be added to listings and subscriptions, and which store types support listings and subscriptions.]

## Earning Money

Users buy your content with **VRChat Credits**. You can:
- Spend credits in other VRChat stores.
- Or, **request a [payout](/economy/payout)** in USD to your PayPal account.

### 💵 Revenue Split

- **~50%** goes to you, the creator.
- **~30%** goes to the platform users bought credits from (e.g., Steam or Meta).
- **~20%** goes to VRChat and its payment partner, Tilia (transaction and platform fees).


:::note
- Credit purchase price:	120 Credits	≈ 1 USD
- Credit payout rate:		200 Credits	≈ 1 USD  
- Minimum to cash out:	30,000 Credits ≈ 150 USD
:::

Learn more about payouts on the [payout](/economy/payout) page.

### Content Guidelines and Requirements

All content must follow VRChat’s terms. Please review the rules on the [Content Guidelines page](https://creators.vrchat.com/economy/guidelines).

## How do you join?

If you’re not already part of the Creator Economy:

1. [Submit an application](https://www.surveymonkey.com/r/MC5X89R).
2. Wait for your application to be reviewed. Keep an eye on your inbox for an invitation or rejection email.
3. If you're accepted, follow the instructions in the email!

Once you have joined the Creator Economy, you can start creating listings, stores, and products immediately. If you're an avatar creator, we may also grant you access to the avatar marketplace.

We look forward to seeing what you'll create!


---

## Document: _ce-how-to-import.mdx

Path: /economy/_ce-how-to-import.mdx
### How to Import
1. Open [the Example Central Window](/sdk/example-central) from the window from the Unity Editor Menu under "VRChat SDK > 🏠 Example Central"
2. If you haven't enabled Creator Economy examples yet:
    1. Press the ⚙️ gear icon in the Example Central window to open the Example Central settings.
    2. Enable "Show Creator Economy Examples".
3. Select this prefab in Example Central.
4. Press the "Import" button to import the example assets into your project.

---

## Document: _credit-icon.mdx

Path: /economy/_credit-icon.mdx
import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';

<ThemedImage
  alt=" \V"
  sources={{
    light: useBaseUrl('/img/economy/Icons_Credits@20_dark.svg'),
    dark: useBaseUrl('/img/economy/Icons_Credits@20.svg'),
  }}
/>

---

## Document: _sellers-notification-avm.mdx

Path: /economy/_sellers-notification-avm.mdx
:::tip

Only approved avatar sellers can create avatar products for the marketplace.

:::



---

## Document: _sellers-notification.mdx

Path: /economy/_sellers-notification.mdx
:::tip

[Submit an application](https://www.surveymonkey.com/r/ce-creator) if you want to join the Creator Economy!

The page below is only relevant to sellers with access to VRChat's Creator Economy.

:::



---

## Document: getting-started.md

Path: /getting-started.md
---
sidebar_position: -99
---
import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';

# Welcome!

VRChat is a social platform where you can meet people, explore user-created worlds, and express yourself through custom avatars. Whether you're a seasoned developer or a newcomer, the VRChat SDK helps you bring your own ideas to life.

- [Get started with the VRChat SDK](/sdk)
- Design custom [avatars](/avatars)
- Build immersive [worlds](/worlds)
- Develop for multiple [platforms](platforms)
- Join the [Creator Economy](/economy)
- [Contribute](/contribute) to our documentation
- Explore our [creators roadmap](/roadmap)

## Quickstart

Follow the steps below to quickly set up the VRChat SDK:

<div class="video-container">
    <iframe src="https://www.youtube.com/embed/0u1g0TYoJsU" title="VRChat Creator Companion" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

1. Download & Install [the Creator Companion](https://vrchat.com/download/vcc).
2. If Unity is not installed, the Creator Companion will help you download Unity Hub, install Unity version [<CurrentUnityVersion/>](/sdk/upgrade/current-unity-version/) (VRChat SDK 3.4.2 or earlier is Unity 2019.4.31f1), and [create a Unity Account](https://id.unity.com/account/new).
3. Use the Creator Companion to create a new Worlds or Avatar project, and open it with Unity.
4. Build your [world](/worlds/creating-your-first-world) or [avatar](/avatars/creating-your-first-avatar) in Unity, and test it in VRChat using the SDK Control Panel.
5. Once ready, use the SDK control panel to publish your world or avatar to VRChat!

## World Creation

To make a VRChat world, you construct a scene in Unity using typical 3D models, materials and lighting. You can add interactivity with [Udon](/worlds/udon), our custom scripting system. Udon can be built with the visual [Udon Graph](/worlds/udon) or by writing C#-like code using [UdonSharp](https://udonsharp.docs.vrchat.com). You can use our [Networking](/worlds/udon/networking) system to synchronize experiences between players.

## Avatar Creation

To make a VRChat avatar, you must first create or find a 3D character, then ensure that it is [rigged](/avatars/rig-requirements) to work with VRChat. You can then [import your rigged model](/avatars/creating-your-first-avatar#step-3---get-the-model-into-your-project) into Unity and add [Expressions and Controls](/avatars/expression-menu-and-controls), [Avatar Dynamics](/avatars/avatar-dynamics) and much more. 


---

## Document: android-best-practices.md

Path: /platforms/android/android-best-practices.md
---
sidebar_position: 1
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Mobile Best Practices

Making your VRChat worlds cross-platform is a great way of allowing more players to enjoy it. Most VRChat players are on Android, so it’s worth creating an Android of your VRChat world.

However, mobile players and VR players will experience your world quite differently! In this guide, we’ll explain a few ways to make your mobile VRChat world more comfortable and enjoyable.
:::info

VRChat is available on Android as an [open beta](https://play.google.com/store/apps/details?id=com.vrchat.mobile.playstore).

:::
## 1. Publish Your VRChat World to Android

To make your world accessible to more users, publish it on all platforms supported by VRChat.

Any worlds uploaded to Android are available on Oculus Quest and Android mobile devices. If you’ve previously published a Quest version of your world, it’ll be available on phones and tablets as well!

To learn how to upload your world to Android, please refer to our [cross-platform setup documentation](https://creators.vrchat.com/platforms/android/cross-platform-setup).

:::note

If you see the term ‘Quest’ in reference to the VRChat SDK, it generally applies to Android, too.

For example: Existing tools like [EasyQuestSwitch](https://vcc.docs.vrchat.com/vpm/curated-community-packages#easyquestswitch) are great for cross-platform development. A Meta Quest isn’t required!

:::

## 2. Detect Mobile Players in Your World Automatically

When an Android player joins your world, you may want to tweak certain aspects of it. Players on an Android mobile device won’t have access to VR controllers, just like VR players won’t have access to a touchscreen.

Use [OnInputMethodChanged](/worlds/udon/input-events/#oninputmethodchanged) to detect whenever the player's input method has changed. For example:

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: A screenshot of an Udon Graph. The OnInputMethodChanged event is used to branch the execution based on whether the inputMethod parameter is Touch.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
public override void OnInputMethodChanged(VRCInputMethod inputMethod)  
{  
    if (inputMethod == VRCInputMethod.Touch)  
    {  
        // Run code for touch input  
    }  
    else  
    {  
        // Run code for non-touch input  
    }  
}
```

</TabItem>
</Tabs>

You can also use GetLastUsedInputMethod to detect the input method at any time. For example:

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: A screenshot of an Udon Graph. GetLastUsedInputMethod is used to branch the execution based on whether the inputMethod parameter is Touch.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
if (VRC.SDKBase.InputManager.GetLastUsedInputMethod() == VRCInputMethod.Touch)  
{  
    // Run code for touch input
}  
else  
{  
    // Run code for non-touch input  
}
```

</TabItem>
</Tabs>

## 3. Optimize Your World for Android

Android devices are usually less powerful than PCs. Read our [Quest Content Optimization guide](https://creators.vrchat.com/platforms/android/quest-content-optimization/) to optimize your world’s performance.

Good news: If your world runs OK on the Quest, it will probably run well on Android mobile devices. Phones and tablets usually have a lower resolution than VR headsets, and performance issues will cause less nausea than in VR.

You should still ensure that Quest players have an acceptable frame rate.

## 4. Test Your World on Android

Testing your world on an Android phone will help you improve the experience of mobile players. Even if your world is still in the early stages of development, consider how it will play on a mobile device.

When rapidly iterating on VRChat worlds, it may be convenient to test them in the Unity Editor or the Steam version of VRChat. A joystick gamepad can be an appropriate substitute for VRChat’s mobile control screen.

- On a touchscreen, _virtual_ joysticks control the player’s movement and camera.
- Touchscreens make screen-space interfaces easier to interact with other input devices.
- Playtest your world with mobile players

## 5. Design Your User Interfaces for Touchscreen

Phone screens are different from PC and VR devices. You may want to adjust your user interfaces to make them easier for mobile users to read and interact with.

- Make text easy to read. Use legible fonts, large text sizes, and big buttons.
- Remove unnecessary text. Reading large amounts of text is difficult on a mobile device.
- Localize text. Mobile users user a much wider spectrum of languages than on other platforms.
- Avoid relying on interactions that require a VR device or complex camera movements.
- Try using [screen-space user interfaces](https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/UICanvas.html). On a touchscreen, they are easier to interact with than world space canvases. Consider adding a user interface that users can open from anywhere without needing to walk over to an in-world menu panel.
- Use the `OnScreenUpdateEvent` to get the orientation and resolution of the player's screen. This will trigger once when they first load into the world, and whenever the orientation of their device changes.


## In Conclusion: Give Players a Smooth User Experience

When a player joins your world, try to make the experience as smooth as possible. Try to apply the other tips mentioned in this article, and think of how you could use them in your world.

- **Don't** reupload your PC world without optimizing your materials.
- **Do** optimize your world for users on Android and enhance their experience.

- **Don't** force players to follow complex steps before enjoying your world.
- **Do** make your world enjoyable automatically, without any user input.

- **Don't** upload your world without testing it.
- **Do** listen to user feedback.

---

Following these steps will help make your world an excellent experience for mobile players.

Do you have any tips or tricks you’d like us to include in this article? Submit your feedback below, and we’ll do our best to help share your knowledge with the VRChat Community.


---

## Document: build-test-mobile.md

Path: /platforms/android/build-test-mobile.md
---
sidebar_position: 0
---

import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';

# Build and Test for Android Mobile

You can test a VRChat world on your Android device without publishing it using the Build and Test feature. This document describes how you can set up and use this functionality to build worlds more quickly!

## Set Up For Build and Test

To use Build and Test for Android Mobile you need to set up your Unity Android Tools, your Project, and your Device.

### Set Up Unity Android Tools

You need the Android Build Support module installed for your VRChat-compatible Unity Editor to work on Android worlds in the first place. You may already have this, as the VRChat Creator Companion installs it by default. Follow the steps below to check this.

1. Open Unity Hub and navigate to "Installs" on the left.
2. Find the install for the Unity version that your project uses (the current recommended version is [<CurrentUnityVersion/>](/sdk/upgrade/current-unity-version/)). If your install lists "Android" below the Editor path, then you already have the module installed, and you can move on to Setting up your Project. Otherwise, continue to step 3.

[IMAGE: Unity Install with Android Module]

3. Click on the gear icon next to that install and click "Add modules".
4. Find "Android Build Support". If the box and check the box next to it if 
5. Click continue to install the Android build support module.

You should now be able to build worlds for Android.

### Set Up Your Project to Target Android

Open the SDK panel by selecting "VRChat SDK"->"Show Control Panel" and then select the Builder tab.

Find the "Select Platform" section and change it to "Android".

### Set Up Your Android Device to Test Worlds

Build and Test for Mobile makes use of the [Android Debug Bridge](https://developer.android.com/tools/adb) (ADB) to transfer built world files to your android device.

ADB uses USB debugging on an android device to communicate with the device. This allows ADB to send files and launch apps, among many other debug related features.

Enabling USB debugging also requires you to enter developer mode on your device.

:::caution Warning

USB debugging allows your computer to perform many potentially dangerous operations without any notification. You should only use it with applications that you trust. 

The VRChat SDK uses USB debugging to send files to your device, open the VRChat app, and launch your test world.

:::

#### 📱 Enabling Developer Mode on Android Phones and Tablets

To enable developer mode on your Android phone or tablet you must do the following:

1. Ensure that your phone is plugged in to your computer with a USB cable capable of data transfer.
2. Enable developer mode by going to "Settings"->"About Phone" and scrolling down to the "Build number" at the bottom. Tap the build number 7 times to enable Developer mode.
3. Now that developer mode is enable you can see more developer options. Go to "Settings"->"System"->"Developer Options" and locate the "USB Debugging" checkbox. Check "USB Debugging".

#### 🥽 Enabling Developer Mode on a Meta Quest Headset

To build and test on your Meta Quest device, you also need to enable developer mode and allow USB debugging.

You must use the [Meta Quest Developer Hub](https://developers.meta.com/horizon/documentation/unity/ts-odh/) to switch your Meta Quest headset into developer mode.

To learn how to set up developer mode on your headset, read [Meta's instructions](https://developers.meta.com/horizon/documentation/unity/unity-quickstart-mqdh/#connect-headset-to-meta-quest-developer-hub).

## Use Build and Test

With developer mode enabled, USB debugging enabled, and your Android device plugged in, you should now be able to build and test.

### First Launch

* Ensure that you have launched the app at least once to allow app directories to be generated before trying to test a world, and then close VRChat. 
* The VRChat appplication must be closed before launching into a test world for the first time.
* Your Android device must remain unlocked for ADB to be able to launch the VRChat app into a test world.

With everything above set up, and your Project in Android mode, press the "Build and Test New Build" button to test the world on your device.

After the world is built you should see the VRChat app automatically open. If you are not already logged into the app you will be sent directly to the login screen. After logging in you will be sent directly to the test world.

If you were already logged in, you should be sent directly to the test world after the client is done loading. The play button at the bottom indicates the loading status of the client, and once it's done loading you should be sent to the world after a short delay.

When making future changes to your world, press "Build and Test New Build" again. Your world will be rebuilt, sent to your device, and reloaded without any further action.

## Tools & Troubleshooting

This section describes how to fix some common issues as well as some tools that can help in your mobile development journey.

### Troubleshooting

If you're a developer who uses debugging mode for other reasons, please make sure to unplug or disable USB debugging on all other devices except the Android device that you would like to build and test on.

For Android phones and tablets, if USB debugging is enabled but your computer is unable to see your phone/tablet, the best way to troubleshoot this is to completely restart the USB debugging process.
   1. Unplug the Android device.
   2. Disable developer mode and USB debugging.
   3. Plug in the Android device.
   4. Enable developer mode by tapping "About Phone"->"Build Number" 7 times.
   5. Enable USB debugging in the "System"->"Developer Options" section.
   6. Attempt to Build and Test again.

If for some reason your VRChat app does not have the package name `com.vrchat.mobile.playstore` you can modify which package name the SDK looks for in the project settings. This can be found at "VRChat"->"SDK"->"Android App Package Name"

This may be useful if you are trying to build and test on a beta build of the VRChat app, or for some reason you are not using the live version from the Google Play store. Keep this as `com.vrchat.mobile.playstore` unless you have good reason to change it.

### Useful Device Mirroring Tool

You may want to be able to view your phone from a window on your desktop instead of having to look down at your phone every time. There is a useful open source tool called [scrcpy](https://github.com/Genymobile/scrcpy) which can facilitate this. 

[scrcpy](https://github.com/Genymobile/scrcpy) makes use of ADB to display a screen capture of your device in a small window on your desktop. You can use this to interact with your phone using a mouse instead of having to use your phone.

To use this tool, download the [latest release](https://github.com/Genymobile/scrcpy/releases) for your platform (For example, download the `scrcpy-win64` zip file on Windows). This will give you a zipped folder with all the required files to run `scrcpy.exe`. Unzip this somewhere convenient.

You can run `scrcpy.exe` either by double clicking it or running `scrcpy.exe` in a command prompt in that folder. If you've successfully set up USB debugging, this will display a window mirroring what you see on your device.

Please note that ADB is unable to record the lock screen so the preview window will be completely black while trying to unlock the phone. You can unlock your phone physically and continue interacting through the mirror window.

Also it is recommended to launch scrcpy *after* launching Unity. This is because scrcpy will launch it's own ADB server if there isn't one running already, but Unity will kill any existing ADB servers when it launches, which will close your device mirror window.

You may also find it useful to enable the "Stay Awake" in "System"->"Developer Options" to avoid having to tap the device to keep it awake and prevent locking. This keeps the device awake forever as long as it is plugged in and charging.

### Build and Test Over Wi-Fi

You can also build and test wirelessly. This may be more convenient for some setups, but it also requires some command line interaction in order to connect, so this is not recommended over USB debugging in general.

In order to enable wireless debugging you will need to interact with ADB directly on the command line.

1. First make sure Unity is open so ADB will use Unity's ADB server process
2. Navigate to the Unity install folder for the version of Unity you are using for your project.
    * This can be found by opening Unity Hub, click "Installs" on the left, click the gear next to your install, click "Show in Explorer".
    * `adb.exe` can be found in Data/PlaybackEngines/AndroidPlayer/SDK/platform-tools
    * Open a command prompt in this folder by launching command prompt and navigating to the folder using `cd [your unity install path]/Data/PlaybackEngines/AndroidPlayer/SDK/platform-tools`.

Now you can use ADB commands. If you still have USB debugging enabled, a good command to test if things are working is to use `adb devices -l` which should list all debugging-enabled devices. You can also try `adb shell ls` to print out some of the top level folders on the device, again requiring debugging to be enabled.

Now that we've located ADB, what about that fancy Wi-Fi debugging?
1. Disable USB debugging and just to be sure unplug the device
2. Enable System->Developer Options->Wireless Debugging.
3. Tap Wireless Debugging to find more options.
4. Tap "Pair device with pairing code" and you should get a 6 digit code to pair with, along with an IP address and port to use.
5. Run `adb pair [ip]:[port]` 
    * For example `adb pair 127.0.0.1:1234` if the pairing screen had IP address `127.0.0.1` and port `1234`
    * Note that the port will be randomized every time, so you will have to come back to this step every time you want to debug over Wi-Fi.
6. Enter the pairing code when asked.
7. Now type `adb connect [ip]:[port]` to connect to the device

You should be able to use ADB over Wi-Fi now.

Try running `adb devices -l` to see if it's working. You should see your device in the list of devices now.

You can now go back to the SDK and click "Build & Test New Build" to test a world over Wi-Fi.


---

## Document: cross-platform-setup.md

Path: /platforms/android/cross-platform-setup.md
---
sidebar_position: 0
---

# Cross-Platform Setup

Setting up a cross-platform world or avatar is actually quite straightforward! In short, all you have to do is switch Unity to the desired target platform and build the content.

If you need a bit more detail on how to do this properly, here's a short guide.

## Setting up for Android

First, you'll want to switch your project to target Android to perform first-time setup and ensure your content can be built for the platform.

1. Open the SDK Control Panel and switch to the Builder tab
2. In the "Build" section select the platforms dropdown. Uncheck "Windows" and check "Android"
3. In the popup that appears, click "Switch" to confirm the change
4. Inspect the validation messages that appear in the SDK control panel to ensure your content is compatible with Android

## Fine-tuning and Optimization

Now that you've got your project ready, you'll need to start optimizing. **You cannot skip this.** Modern android devices are pretty powerful, but not nearly as powerful as a typical VR-ready PC. You'll need to check out our [Quest Content Optimization](/platforms/android/quest-content-optimization) page to see what you need to do. For worlds this means baking lighting, lowering geometry complexity, avoiding transparency, and lowering texture resolution. For avatars, this means removal of excess components, excess bones, lowering geometry complexity, avoiding transparency, and reducing texture size.

This will take a while, and is expected to be challenging. Optimizing for mobile hardware is difficult! Thankfully, there's a ton of resources out there, and even a cursory YouTube search for "optimizing Unity for mobile" reveals a ton of good content.

You can also check out some of our documentation on optimizing content for Oculus Quest.

- [Quest Content Optimization](/platforms/android/quest-content-optimization)
- [Quest Content Limitations](/platforms/android/quest-content-limitations)
- [Avatar Performance Ranking System](/avatars/avatar-performance-ranking-system)

We also highly recommend using tools like EasyQuestSwitch (available as a package in the VRChat Creator Companion) to adjust the content per-platform.

:::info

If you have multiple version of your avatar available for different platforms. E.g. a dedicated PC version and a Quest version - you can use the [Per-Platform Override](/avatars/per-platform-avatar-overrides) functionality in the SDK to use them.

:::

## Uploading Content

Once your world or avatar is ready, you can upload! This upload process is identical to the VRChat PC upload process, although the SDK will be a lot more aggressive with warning you about performance issues.

If you want to upload your content for all the platforms at once - you can select multiple targets in the "Platforms" dropdown of the Build section in the SDK Control Panel.

**You need to upload your world or avatar to the same blueprint ID as you have for the VRChat PC version of the content.** Blueprint ID is defined by a [Pipeline Manager component](/sdk/vrcpipelinemanager) on a Game Object, which usually accompanies a VRC Scene Descriptor, typically on your VRCWorld prefab. Press the "Detach" button to edit the blueprint ID, and paste in the ID from the first version that you uploaded (you can also find this in the "Content Manager" tab of the VRChat SDK control panel).

The version you're uploading depends on the originating project's build target. If you're on a project set up for Android, it'll upload for Quest. If the build target is Windows, then you're uploading a PC version. That's basically it-- once you've uploaded, any client that views your content will talk to our servers a bit like this:

>"Hey, I'm a Meta Quest and I want this content."
>"Ok, here's a VRChat Android version."

>"Hey I'm a VRChat PC user and I want this content."
>"Ok, here's the VRChat PC version."

>"Hey, I'm a VRChat iOS user and I want this content."
>"OK, here's the VRChat iOS version."

:::info

VRChat is experimenting with content fallback systems for iOS. If your world is available on Android but not iOS, VRChat attempts to load the Android version on iOS.

This tends to work well for content that primarily uses the Standard Lite shader as outlined by [Quest Content Limitations](/platforms/android/quest-content-limitations). Uploading an iOS version of your content using the SDK is recommended for best results.

:::

If an avatar isn't available for the platform you're on, you'll see an [impostor avatar](https://creators.vrchat.com/avatars/avatar-impostors/) instead.

If a world isn't available for the platform you're on, you'll be unable to enter portals to that world or join it through the UI.

**However**, if you join a world that has both Android and PC versions, and the people in the instance have both Android and PC versions of their avatars, you'll view the world appropriately for your platform and be able to hang out with everyone, with no issues!

:::danger Armatures MUST be identical!

For avatars to work properly cross-platform, the armature path MUST be identical between the PC and Quest versions to essential bones like the head, hands, and feet. Additionally, the scale and rotation of the "root bone" (the first bone in the hierarchy) MUST be identical between versions.

:::

The rigging (armatures) between Android and PC avatars must be mostly identical. If you want to remove non-essential bones like skirt/hair/etc bones for the Android version, that's fine-- but do not change the base structure of the armature layout. Doing so will result in strange behavior when viewed across platforms.

Most importantly, the "root bone" (as in, Hips) should be the first bone in the hierarchy after the Armature GameObject. To be specific, as long as the setup (scale, rotation) of the "root bones" is identical, you should have no problems.

## Tips

- Your VRChat PC avatar can have all kinds of bells and whistles that the VRChat Android avatar can't have. Depending on the platform, users will see whatever version is appropriate for their client.
- You can be a bit creative with this as well-- you could have a high-poly world or avatar for PC users, and then a low-fi (but still stylish) version for Quest users.
- Define a set of box colliders or a low-poly mesh collider for both the PC and Quest versions of the world and use that instead of a mesh collider. Parent the colliders to an empty GameObject at a specific coordinate, and if you update one project, you can copy/paste that object to the other project easily. That way you'll never see users on different platforms "float", and you won't have issues with expensive and complex high vertex count mesh colliders.
- Remember, avoid transparency at all costs! It is quite expensive.
  - As an aside, yes, "alpha cutout" counts as transparency.


---

## Document: index.md

Path: /platforms/android/index.md
# Android

This page contains helpful pages on creating VRChat worlds and avatars for Quest or Android mobile devices.

## Guides
- [Setting up Unity for Creating Quest Content](/platforms/android/setting-up-unity-for-creating-quest-content) - How to enable Android support in Unity.
- [Quest Content Optimization](/platforms/android/quest-content-optimization)- How to optimize worlds and avatars for mobile devices.
- [Cross-Platform Setup](/platforms/android/cross-platform-setup) - How to develop worlds and avatars for multiple platforms.
- [Quest Content Limitations](/platforms/android/quest-content-limitations) - Read about some of the limitations you'll need to keep in mind while creating VRChat content for Android.
- [Mobile Best Practices](/platforms/android/android-best-practices) - Read helpful advice about world creation on Android.

---

## Document: quest-content-limitations.md

Path: /platforms/android/quest-content-limitations.md
---
title: "Quest Content Limitations"
slug: "quest-content-limitations"
hidden: false
createdAt: "2019-05-15T01:40:38.749Z"
updatedAt: "2022-07-04T09:34:33.253Z"
---
This page will describe various limits in place for the Oculus Quest version of VRChat. These limitations are in place in the interest of performance, user safety, and discouraging malicious behavior.

Find more information about limited components on our [Quest Content Optimization](/platforms/android/quest-content-optimization) page.
## Avatar-Specific Limitations
Although the current version of VRChat does not implement a hard limit, **we may implement a hard limit for avatars based on triangle count, material counts, mesh counts, and other qualities in the future.** Please keep our recommendations in mind as described in [Quest Content Optimization](/platforms/android/quest-content-optimization).

Currently, if you upload an avatar or avatar world that features avatars exceeding our recommendations, that world or avatar may be removed from public access.
## Shaders
VRChat on Quest only permits the shaders provided with the latest SDK on avatars. The shaders are listed below with a short description and their inputs. This list may change, and we'll announce in our patch notes when new shaders are available.

All of the shaders listed below are under `VRChat/Mobile` in the shader selection dialog.

**For performance reasons, make sure you always enable "Enable GPU Instancing" on your materials.**

| Shader Name                | Shader Description |
| :-- | :-- |
| Toon Standard              | The most powerful and configurable Toon-style shader available for VRChat on mobile platforms. It is recommended for most cases where Standard Lite is not the right choice. It supports features such as: <ul> <li>Detail and Emission maps from UV0 or UV1.</li> <li>Custom shadow ramps, configurable simplified specular lighting, rim lighting and Matcaps.</li> <li>Maskable hue-shift for albedo, emission and detail.</li> <li>Normal maps including tilable and maskable detail normals.</li> <li>Mask textures with configurable color channels for combining multiple maps into different packed formats.</li> </ul> Note: The "Outline" version is only supported on PC, mobile devices will fall back to the non-outline variant automatically. You can use this shader on PC avatars as well, although it does not support realtime shadows at this time. |
| Standard Lite              | A "Lite" version of Unity Standard that requires less VRAM. <ul> <li> Supports the channel mappings of Unity's Standard Metallic setup, except Alpha and Parallax. </li> <li> The diffuse texture is tinted by the mesh's vertex colors. </li> <li> You can optimize different channels by packing them into the same texture: <ul> <li> Texture 1: Albedo (RGB) and Detail Mask(A) </li> <li> Texture 2: Metallic (R), Occlusion (G), and Smoothness (A) </li> </ul> </li> <li> Not recommended on PC because it does not support real-time lighting. </li> </ul> |
| Bumped Diffuse             | Diffuse but with a normal map. The diffuse texture is tinted by the vertex colours.                                                                                                                                                                                 |
| Bumped Mapped Specular     | Diffuse, but with a specular map (shininess) on the alpha channel. The diffuse texture is tinted by the vertex colours. Normal map also supported.                                                                                                                |
| Diffuse                    | Just diffuse! The diffuse texture is tinted by the vertex colours.                                                                                                                                                                                                 |
| Matcap Lit                 | Diffuse, but with a matcap input. Can be used to simulate a shiny metal surface. The diffuse texture is tinted by the vertex colours.                                                                                                                               |
| Toon Lit                   | Provides toon-like shading and shadows. Should be used on cartoon-like characters with flat colors. The diffuse texture is tinted by the vertex colours.                                                                                                          |
| Particles/Additive         | Should be used on particles. Blends using Additive mode.                                                                                                                                                                                                             |
| Particles/Multiply         | Should be used on particles. Blends using Multiply mode.                                                                                                                                                                                                             |
| Lightmapped (Only for worlds) | A basic diffuse shader that supports lightmapping. This shader is only meant for use on worlds. It cannot be used on avatars. It does not support real-time lighting.                                                                                          |
| Skybox (Only for worlds)      | This shader is an optimized skybox shader, meant for use in worlds.                                                                                                                                                                                                    |
| Supersampled UI (Only for worlds) | An unlit shader which is is supersampled at the texture sample phase. Use with mipmapping to make in-world UI text crisp without being grainy or distracting.

## Components

The following components are not supported on Android or Quest and will not work. This list may change. We'll note in the Patch Notes and updated documentation when these change.

| Shader Name                | Shader Description |
| :-- | :-- |
| Dynamic Bones              | Completely disabled on Android and Quest. Use [PhysBones](/avatars/avatar-dynamics/physbones) instead!! |
| Cloth                      | Completely disabled on Android and Quest. |
| Cameras                    | Completely disabled for avatars on Android and Quest. Permitted for use in Worlds. Be careful with overuse. |
| Lights                     | Completely disabled for avatars on Android and Quest. |
| Video Players | Works with some limitations. Read more in [Video Players](/worlds/udon/video-players). |
| Post-Processing | Post processing systems are disabled completely on Android and Quest. The GPU is not designed to handle these effects very well. |
| Audio Sources | Audio sources are disabled completely for avatars on Android and Quest. Audio sources consume a significant amount of CPU resources and voices have priority. |
| Physics Objects | Rigidbodies, colliders, and joints are disabled completely for avatars on Android and Quest. <br /> They are permitted in worlds, but you should be careful not to go overboard with them. |
| Particle Systems | Particles are limited heavily on avatars for Android and Quest, with settings mirroring the [Avatar Particle System Limits](https://docs.vrchat.com/docs/avatar-particle-system-limits) on PC. |
| Constraints | Unity constraints are disabled completely for avatars on Android and Quest due to complex performance issues. Use [VRChat Constraints](/avatars/avatar-dynamics/constraints) instead.<br /><br />Permitted for use in Worlds. Be careful with overuse, as they impact performance more than previously thought, especially with the limited resources of Quest and mobile devices. |
| FinalIK | Custom FinalIK components are completely disabled for avatars on Android and Quest.<br />FinalIK components are an unbounded source of resource usage. We do not currently plan to enable them on these platforms. |


---

## Document: quest-content-optimization.md

Path: /platforms/android/quest-content-optimization.md
---
title: "Quest Content Optimization"
slug: "quest-content-optimization"
hidden: false
createdAt: "2019-04-08T23:52:28.397Z"
updatedAt: "2023-02-03T01:02:49.409Z"
---
Creating content for VRChat Quest is a challenge-- you have to create attractive, compelling content all the while keeping the content optimized for a mobile device. These are the same challenges that game developers must deal with while building for mobile. 

Here, we'll give you some general guidelines of what you need to keep in mind while building content for VRChat Quest.

The items below will apply to both avatars and worlds unless otherwise noted.

Unity has a guide for [Optimizing your VR/AR Experiences ](https://learn.unity.com/tutorial/optimizing-your-vr-ar-experiences) which has quite a lot of good points.

There's also this [excellent video on optimizing your VR content by Lucas Rizzotto](https://www.youtube.com/watch?v=w0n4fuC4fNU)! It is very well done and covers a lot of what we cover here. **This video was not created by VRChat or for VRChat specifically, and as a fair warning, contains some harsh language.** A lot of the items in this post are covered in this video.

As a final note, all items on this list are subject to change. In other words, we're not quite done nailing down restrictions and recommendations, so keep that in mind.
## Limit Enforcement
The Oculus Quest has several hard (and soft) limits for content on avatars. Check out [Quest Content Limitations](/platforms/android/quest-content-limitations) to find out more, as well as our page [Avatar Performance Ranking System](/avatars/avatar-performance-ranking-system) for some more details on how blocking works.

If you upload an avatar or avatar world that features avatars greatly exceeding our recommendations, that world or avatar may be removed from public access.
## Unity Profiler
We strongly, strongly recommend that you check out the [Unity Profiler](https://docs.unity3d.com/Manual/Profiler.html). Using the profiler, you can quantify precise values for  various performance metrics for your world or avatar. Of particular interest is probably the number of draw calls in a scene, or the proportional amount of frame time a component uses. 

Of course, the profiler on your powerful PC won't represent how a profiler on the Quest might look, but you can still see that X component is using a ton of frame time versus rendering, or etc. Its all relative!

There's lots of tutorials on how to use the Unity Profiler out there, including two from Unity: [Profiler Overview for Beginners](https://unity3d.com/learn/tutorials/topics/interface-essentials/profiler-overview-beginners) and the [intermediate Introduction to the Profiler](https://unity3d.com/learn/tutorials/topics/interface-essentials/introduction-profiler). These tutorials were made for older versions of Unity, but still cover the basic concepts quite well.
## File Size
You've only got a limited amount of memory on mobile platforms, and keeping that in mind is extremely important. You can see the size of your assets once you've built the content (press "Build & Publish" in the SDK) and search your Editor log for "statistics". The pre-compressed size is what you're looking for.

As a rule of thumb, avoid large (>1k) textures. They are the primary culprit of high memory usage. Utilization of vertex colors and flat colors can help greatly with reducing texture size.

Please note that Crunch compression does _not_ help with in-memory size! Crunch compression only helps with download size. Your content package should be within the limits without Crunch.

**Worlds**

You cannot upload or access worlds that exceed 100MB in size after build-time compression for VRChat Quest.

**Avatars**

You should be aiming for a maximum of 5-8 MB. You cannot upload or wear/view avatars that exceed 10MB in size after build-time compression for VRChat Quest.
## Triangle Count
Keeping triangle count low is very important on mobile platforms. Although the Quest is quite powerful for a mobile headset, its hardware does have limits. Keeping an eye on your polygon count is very important to keep performance high.

These recommendations are technically enforced via our [Avatar Performance Ranking System](/avatars/avatar-performance-ranking-system).

**Worlds**

While building worlds, you should try to keep triangle count low. You want to leave room for the user's avatars as well. **We recommend that you budget approximately 50,000 triangles for your world in total.**

**Avatars**

The same general rules apply for avatars that apply for worlds. Keep in mind that you may have 10 or more users in the same room, so you'll want to budget your triangle usage pretty heavily. **We recommend that you aim for under 10,000 triangles for your avatar.**

This is a challenge for avatar authors that prefer to import characters from various sources rather than create an avatar themselves. Decimation down to this level can be destructive, and you may need to look into techniques like retopologizing geometry to keep your polygon count low.
## Mesh Count
This applies to both worlds and avatars.

No matter what tool you use to do it, you should limit the number of meshes you use in your content. For static objects in worlds, this isn't so important (due to the need for occlusion culling) but for avatars, it is exceedingly important.

You should only ever have one Skinned Mesh Renderer on your avatar. Any accessories or additions to your avatar should be done in 3D editing software like Blender, and merged into the original mesh. Any animations or movement should be handled via shape keys or bones.

A hard Mesh Count limit will be established in the near future for VRChat Quest avatars.

For worlds, you should think in terms of "objects" in the world. A set of pots on the ground could be a single object, but you probably wouldn't want to merge the set of pots into the ground mesh. Otherwise, you might run into various optimization issues as well as difficulty with editing the world later on.
## Materials
Reducing material count is important for both avatars and worlds. Additional materials creates additional submeshes, which costs draw calls. Reducing the number of draw calls necessary to render your viewport is very important.

**Worlds**

You should aim to have the minimal possible material count for your world. That being said, you can be a little less careful with the world than you are with avatars. Its best to think of your world as a collection of objects, and combine materials accordingly.

For example, if you have a beach scene, a chair/umbrella/blanket set should probably be a single material on a single texture atlas. A set of rocks a little bit farther down the beach would be another material and texture. That way, you can separate out the object for occlusion culling purposes.

Getting too aggressive with combining materials and atlasing in worlds results in some non-optimal behavior when Unity does batching and its own runtime optimization.

**Avatars**

You should be aiming for 1 material on your avatar, although having 2 in cases where you need a different shader variant may be permissible. Atlasing textures is essential.

A hard Material limit will be established in the near future for VRChat Quest avatars.

**Avatars and Worlds**

You should be enabling GPU Instancing on all of your materials. Although the actual use case of this is more complex and technical, it is best just to turn it on.
## Textures
Concerns for texture size apply evenly across both avatars and worlds, but keep in mind that avatar texture size should be reduced, as you'll have multiple avatars in a single instance (but only one world).

Keeping texture size low is important. You should aim for using 1k (1024x1024) resolution textures at maximum. You should also create efficiently packed atlases, allowing for more texture resolution in the same size.

Avatars cannot exceed 10MB in size after compression, and worlds cannot exceed 100MB after compression. Since most of this is usually texture data, you should keep your textures small and compress them. 

Consider using Crunch compression, but keep in mind that this may break your avatars later on if a new Unity version employs an incompatible version of Crunch.
## Lighting
This section only applies for worlds.

Baking lighting for your world is **essential**. It is not unreasonable to write off real-time lights completely, as they are very expensive. Make extensive use of baked lighting and light probes. Keep your lightmap resolution low. Even with low lightmap resolution, lighting can look very good.
## Occlusion Culling
This section only applies for worlds.

Baking occlusion culling is exceedingly important. Doing so will allow the hardware to only render what it needs to, and ignore what you can't see. Setting up occlusion culling doesn't take long at all.

This is also the reason you don't want to be too aggressive in merging meshes in worlds-- if you've got some objects like a building set on some ground, you probably don't want to merge the building mesh into the ground mesh so you can cull out the building.
## Bone Count
Keeping bone count low is important to keep the cost of skinning calls low. If a bone isn't animated by an animation or by the rig, you should merge its weights into its parent and delete the original bone. Tools like [Cat's Blender Plugin](https://github.com/michaeldegroot/cats-blender-plugin) make this exceedingly easy.

Since Dynamic Bones is disabled on VRChat Quest, this means that there's no need for extra bones for dynamic bits. You'll want to merge the weights for those bones into their parents.

A hard Bone limit will be established in the near future for VRChat Quest avatars.
:::caution Matching Rigs

Ensure that the basic bone layout and hierarchy of your rigs are identical, including scale, rotation, and position. This especially applies to your root (usually hip) bone. Having a mismatch can result in strange behavior when viewing content cross-platform.
:::

## Shaders
**Avatars**

Shaders are restricted for avatars in VRChat Quest, and you can only use the VRChat Mobile shaders included in the VRChat SDK.

You can read about these variants on our [Quest Content Limitations](/platforms/android/quest-content-limitations) page.

If you don't have a normal map for your avatar, don't use Bumped variants. It won't do anything for you, and you'll incur a little bit of a performance cost. Same for Specular.

**Worlds**

Shaders are not restricted for worlds in VRChat Quest. However, you should be *extremely careful* when writing and using custom shaders. Aim for performance above all else. If you're looking for a highly optimized basic world shader, use `Mobile/VRChat/Lightmapped` and bake your lighting.

You should avoid needing transparency completely. Alpha fill rate is a significant performance sink for mobile GPUs, so design around not having transparency whenever possible.
## Other Components

### Cloth

Cloth components are disabled completely in VRChat Quest.

### Cameras

Camera components are disabled on avatars in VRChat Quest.

They are permitted in worlds, but you should be careful not to go overboard with them.

### Lights

Lights are disabled completely on avatars in VRChat Quest.

### Post Processing (v1 and v2)

Post processing systems are disabled completely in VRChat Quest.

### Audio Sources

Audio sources are disabled completely on avatars in VRChat Quest.

Audio sources are restricted in worlds in VRChat Quest.

### Rigidbodies, Colliders, and Joints

Rigidbodies, colliders, and joints are disabled completely on avatars in VRChat Quest.

They are permitted in worlds, but you should be careful not to go overboard with them.

### Particles

Particles are limited heavily on avatars in VRChat Quest.

Numbers for limits pending.

---

## Document: setting-up-unity-for-creating-quest-content.md

Path: /platforms/android/setting-up-unity-for-creating-quest-content.md
---
title: "Setting up Unity for Creating Quest Content"
slug: "setting-up-unity-for-creating-quest-content"
hidden: false
createdAt: "2019-04-10T00:53:35.417Z"
updatedAt: "2019-10-28T19:23:09.636Z"
sidebar_position: -1
---
[IMAGE: Building for Mobile instructions]

If you're starting a brand new project, this won't take long at all. However, if you're converting a Windows platform project to an Android platform project, you will have to convert your assets appropriately. This can take quite a while for larger projects.

For more details on best practices when working with dual-platform projects, read our documentation on [Cross-Platform Setup](/platforms/android/cross-platform-setup).

## 3 Steps to get your world on VRChat for Quest

### 1. Open Your Build Settings

You can access your [Build Settings](https://docs.unity3d.com/Manual/BuildSettings.html) from Unity's main menu by going to "File" -> "Build Settings". Or you can use the keyboard shortcut `Ctrl` + `Shift` + `B`.

### 2. Switch Platform to Android

:::caution Requires Additional Setup

If the Android option isn't appearing, [you need to install Unity's Android SDK.](https://docs.unity3d.com/Manual/android-sdksetup.html)

:::

Click "Android" -> "Switch Platform". Unity will reimport your assets for Android. This will take a while for larger projects with many assets.

### 3. Publish -> New Build

That's it! Your content is now available on Quest! Note that you must **upload** your content to test it. You can't use the SDK's "Build and Test" feature for Android content.

---

## Document: index.md

Path: /platforms/index.md
---
sidebar_position: 2
---

# Platforms

The VRChat SDK allows you to upload Worlds and Avatars for the following platforms: 
- [Windows](/platforms/pc/)
  - VR mode (with a compatible VR device)
  - Desktop mode
- [Android](/platforms/android/)
  - Meta Quest 2 (or newer devices)
  - PICO 4 (or newer devices)
  - HTC Vive XR Elite
  - Phone/Tablet with Android 10 (or above)
- [iOS](/platforms/iOS/)
  - iPhones and iPads with iOS 17.0 (or above)


---

## Document: build-test-mobile.md

Path: /platforms/iOS/build-test-mobile.md
---
sidebar_position: 0
---

import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';

# Build and Test for iOS

This guide shows you how to test your VRChat world on iOS by connecting an iOS device to Unity. Build and Test allows you to quickly test your world in VRChat without publishing it.

## Set Up For Build and Test

To use Build and Test for iOS, you must set up your Unity project and connect your iOS device to the SDK.

### Set Up iOS Build Support Unity Module

You must install Unity's iOS Build Support module to build or publish VRChat worlds on IOS. Follow the steps below to install it:

1. Open Unity Hub and navigate to "Installs" on the left.
2. Find the install for the Unity version that your project uses (the current recommended version is [<CurrentUnityVersion/>](/sdk/upgrade/current-unity-version/)).
  - If your install lists "iOS" below the Editor path, then the module is already installed, and you can [set up your project](#set-up-your-project-to-target-ios).

[IMAGE: Unity Install with iOS Module]

3. Click on the gear icon next to that install and click "Add modules".
4. Find "iOS Build Support". Check the box next to "iOS Build Support" to include it.
5. Click continue to install the iOS build support module.

You should now be able to build worlds for iOS.

### Set Up Your Project to Target iOS

1. Open the SDK panel by selecting "VRChat SDK"->"Show Control Panel" and then selecting the Builder tab.

2. Find the "Select Platform" section and change it to "iOS".

3. After switching your platform to iOS, you should see `[VTP] Listening on port 9002...` in the console.
See [debugging steps](#debugging-connection-issues) if you do not see this.

### VRChat Test Protocol

Build and Test for iOS makes use of the VRChat Test Protocol (VTP) to facilitate communication between the SDK and iOS devices.

The SDK uses VTP to send World and Avatar files to your iOS device over your local network, so you can instantly see the results of a build in the iOS client.

### Connecting the SDK to your iOS Device

You can connect the SDK to your iOS device by entering its local IP address in the iOS app settings.

1. Find the local IP address of the machine running the SDK, which can be found in the SDK settings tab by pressing the "Show Local IP Address" button.
2. Enter the local IP address found in the SDK settings panel into the iOS app settings under "Settings"->"Apps"->"VRChat"->"SDK IP Address"
3. Launch VRChat and press the "Play" button to enter a world.
4. Once loaded into the world, the app may ask for permission to communicate over your local network. You must allow this for the VRChat Test Protocol to be able to communicate with your device.
5. After accepting the local network permission, check the SDK console to see if the connection was successful. You should see `[VTP] Client connected.` along with details about what device was connected. See [debugging steps](#debugging-connection-issues) if you do not see this.
6. You can now click Build and Test to test content directly on your iOS device.

## Debugging Connection Issues

If you find that you are unable to establish connection between your iOS device and the SDK, follow these steps to debug the issue.

- If you do not see `[VTP] Listening on port 9002...` after switching to the iOS platform in the SDK, ensure that no other editors are open with iOS selected. Additionally, ensure that no other running applications are using port 9002, since only one application can open the port at a time.

- If you do see `[VTP] Listening on port 9002...` in the console, but you're unable to establish a connection:

- Make sure that the IP address shown in the SDK settings tab matches the one in the VRChat iOS App settings page under "Settings"->"Apps"->"VRChat"->"SDK IP Address".

- Make sure that both the SDK machine and the iOS device are on the same Wi-fi network.

- Make sure you have allowed local network access on your iOS device. This can be found at "Settings"->"Privacy & Security"->"Local Network." Locate the VRChat app and enable the permission.

- Make sure you have allowed local network access on your SDK machine. On Windows, local network access requests appear as a prompt titled "Windows Security," on which you must click "Allow access" with the Public networks checkbox checked.

[IMAGE: Windows local network access permission prompt]

- It's possible you've disallowed access previously and the prompt does not reappear. In this case you must locate the rule in Windows Defender Firewall and allow it.
    - To quickly test if this is the issue, you can temporarily disable the firewall, although it's much safer to follow the steps below to allow Unity access to your local network.

- To enable local access for the Unity editor on Windows:
    1. Search "Firewall," find "Windows Defender firewall," and look for "Inbound Rules."
    2. In the list of inbound rules, look for any titled "Unity Editor"
    3. Delete any rules titled "Unity Editor" that have a red circle with a cross through it
    
[IMAGE: Disallowed Windows firewall rule for Unity Editor]

    4. Relaunch the Unity editor. Once launched (and with iOS selected as the platform) you should see the "Windows Security" asking for local network permission.

# VPN usage
- Since VTP communicates over the local network, usage of a VPN can prevent the SDK and iOS device from establishing connection depending on the VPN configuration. It is recommended to disable your VPN when using VTP.


---

## Document: index.md

Path: /platforms/iOS/index.md
# iOS

:::warning
VRChat on iOS is currently in Beta. Please report issues on [Canny](https://feedback.vrchat.com/ios-mobile-beta). (Your VRChat account must have a trust rank of "New User" or higher.)
:::

This section contains helpful pages on creating VRChat Worlds and Avatars for iOS devices.

:::info
We're still working on our iOS documentation. Please check back often for changes or new pages.
:::

Guidelines that refer to "Android" or "Quest" apply to iOS, too. Use these guides to learn more about optimization and best practices.

## Guides
- [Setting up Unity for Creating iOS Content](/platforms/iOS/setting-up-unity-for-creating-ios-content) - How to enable iOS support in Unity.
- [Content Optimization](/platforms/android/quest-content-optimization)- How to optimize Worlds and Avatars for mobile devices.
- [Cross-Platform Setup](/platforms/android/cross-platform-setup) - How to develop Worlds and Avatars for multiple platforms.
- [Content Limitations](/platforms/android/quest-content-limitations) - Read about some of the limitations you'll need to consider when creating VRChat content for mobile platforms.
- [Mobile Best Practices](/platforms/android/android-best-practices) - Read helpful advice about World creation on mobile platforms.

---

## Document: setting-up-unity-for-creating-ios-content.md

Path: /platforms/iOS/setting-up-unity-for-creating-ios-content.md
# Setting up Unity for Creating iOS Content
:::warning
VRChat on iOS is currently in Beta. Please report issues on [Canny](https://feedback.vrchat.com/ios-mobile-beta).
:::
This page explains how to publish your World or Avatar on iOS.

[IMAGE: Building for iOS instructions]

If you're starting a brand new project, this won't take long at all. However, if you're converting a Windows or Android platform project to an iOS platform project, the SDK has to reimport your assets appropriately. This can take quite a while for larger projects.

For more details on best practices when working with cross-platform projects, read our documentation on [Cross-Platform Setup](/platforms/android/cross-platform-setup).


## 1. Open Your Build Settings

You can access your [Build Settings](https://docs.unity3d.com/Manual/BuildSettings.html) from Unity's main menu by going to "File" -> "Build Settings". Or you can use the keyboard shortcut `Ctrl` + `Shift` + `B`.

## 2. Switch Platform to iOS

:::caution Requires Additional Setup

If the iOS option isn't appearing, [you need to install Unity's iOS module.](https://docs.unity3d.com/hub/manual/AddModules.html)
You do not need a macOS device or XCode installed to create iOS content for VRChat! Adding the iOS module to your Unity editor is sufficient.

:::

Click "iOS" -> "Switch Platform". Unity will reimport your assets for iOS. This will take a while for larger projects with many assets.

## 3. Publish -> New Build

That's it! Your content is now available on iOS! Note that you must **upload** your content to test it.


---

## Document: index.md

Path: /platforms/pc/index.md
# PC

This page contains information specific to developing VRChat content on PC. Most of VRChat's documentation refers to PC development, so read our [Getting Started](/sdk/) page to learn how to develop PC content.

This category currently only contains one page:

- [SteamVR Skeletal Hand Tracking Driver Guide](./steamvr-drivers)


---

## Document: steamvr-drivers.md

Path: /platforms/pc/steamvr-drivers.md
---
sidebar_label: SteamVR Drivers
---
# SteamVR Skeletal Hand Tracking Driver Guide

This guide is intended to help authors of custom **SteamVR Skeletal Input Drivers** get their drivers working well with VRChat, now that VRChat is updating to SteamVR Input 2.0. Whether you’ve got an existing driver you’d like to ensure works properly, or you are creating a brand new driver to use with VRChat via SteamVR, it might be a good idea to review [Valve’s documentation on creating a SteamVR Skeletal Driver](https://github.com/ValveSoftware/openvr/wiki/Creating-a-Skeletal-Input-Driver) as well as their more general [Driver API Documentation](https://github.com/ValveSoftware/openvr/blob/master/docs/Driver_API_Documentation.md)

## When & How Does VRChat use SteamVR Skeletal Data?

### Animating Avatars

For the purposes of animating an avatar’s hands, VRChat will use any skeletal data that is bound to the ```SkeletonLeftHand``` or ```SkeletonRightHand``` actions whenever they are bound to an input source and are available. In every such case, the skeletal animations for ```VRSkeletalMotionRange_WithoutController``` will be fetched from the action and stored into an intermediary. The internal representation of the intermediary will store bone *positions* as well as *rotations*, however, as of the writing of this document, the retargeting that gets applied to the avatar will *only* provide rotations. This is because, unless an avatar’s 3d hand mesh was carefully and thoughtfully designed to work well with joint positions for hands of arbitrary finger lengths, they can appear distorted or crunched. The downside to this is that an avatar hand of arbitrary proportions cannot be guaranteed to accurately serve as visual feedback for actions such as pinching and grabbing.

### As A Gameplay/Menu/etc Input

VRChat decides to use the provided skeletal animation data as an input on a per-hand basis whenever the Skeleton Action’s ```eSkeletalTrackingLevel``` value is ```VRSkeletalTrackingLevel.VRSkeletalTracking_Full``` 

As a recap, ```eSkeletalTrackingLevel``` has the following values:

* ```VRSkeletalTracking_Estimated``` - body part location can’t be directly determined by the device. Any skeletal pose provided by the device is estimated by assuming the position required to active buttons, triggers, joysticks, or other input sensors. Vive Controllers are the most well known example
* ```VRSkeletalTracking_Partial``` - body part location can be measured directly but with fewer degrees of freedom than the actual body part. Certain body part positions may be unmeasured by the device and estimated from other input data. E.g. Index Controllers, Etee controllers, gloves that only measure finger curl, etc
* ```VRSkeletalTracking_Full``` - body part location can be measured directly throughout the entire range of motion of the body part. E.g. Ultraleap tracking, Meta hand tracking, MediaPipe hand tracking, gloves that measure rotation of each finger segment

As such, it should be apparent why we use this value - it tells us directly how much *actual information* regarding the hand’s pose is available inside of the supplied skeleton. It’s the only part of the API that offers up this kind of information, so we have to use it for this purpose.


The interaction model for full fidelity skeletal hand tracking is built upon us doing quite a bit of involved processing on the skeleton data. We calculate our own **pinch detection** by doing distance checks from the thumbtip to the fingertip, and use it for ‘clicks’ in the UI, as well as gestural inputs that are built around thumb-fingertip pinches for all fingers, index, middle, ring, and pinky. Here are the current gestural actions:

Left Hand:

* thumb-index pinch:
    * when the palm is directly facing the user’s head: menu open
    * when the palm is facing away, and a raycast is active: ui click
* thumb-middle pinch: locomotion
* thumb-ring pinch & hold when generally facing the user’s head: mic mute
* thumb-pinky pinch & hold when generally facing user’s head: disable gesture inputs

Right Hand:

* thumb-index pinch: None
* thumb-middle pinch: turning
* thumb-ring pinch when generally facing user’s head: jump
* thumb-pinky pinch when generally facing user’s head: cancel/drop

This means that you **do not need to provide these actions** from any non-skeletal, non-pose (boolean, scalar, vector2, etc) [input component handles](https://github.com/ValveSoftware/openvr/blob/master/docs/Driver_API_Documentation.md#creating-components) that are related to the ‘device’ that the skeletal hand tracking is come from. In fact, doing so may cause double clicks and/or accidental activations. We’ll go into this more in the **Controller Emulation** section later.

This also means that *calculating your joint poses correctly is of utmost importance*. Most tracking systems will require some kind of coordinate space conversion to properly match SteamVR’s, and this process presents an opportunity for errors to slip in. This leads us to the next section, visually checking your skeleton data.

### Debugging Your Skeleton Data Visually

You can visualize your skeleton data for debugging purposes.

[IMAGE: Accurate Hands Image]

These are called the *accurate hands* in our menu. They always appear in menus and loading scenes, or when the avatar is a generic (non humanoid) avatar. They can optionally be enabled to *replace* the avatar’s hands locally (not visible over the network) in the controls menu

As indicated in the caption above, VRChat has a hand visualization that we are calling *Accurate Hands* (as opposed to Avatar Hands). These are the closest possible representation of the underlying tracking data that we can provide while still looking like a 3d hand mesh. These are useful in many cases, but for the purposes of this document, we invite you to use them as a debugging/confirmation tool to ensure that your provided tracking data is accurate and dialed in to provide the best input experience possible. Fingertips should touch when making pinching gestures, and if the tracking system you are using measures the length of each joint, that should be reflected in this as well. 

To activate this mode, you’ll want to open the **Main Menu**, then go to the **Settings** page, then the **Controls** category.


[IMAGE: Controls Page]


Click the ‘Accurate’ button to the right. The hands should switch.

## Controller Emulation

To date, the most common technique for getting optical finger tracking (or less frequently, gloves) working in SteamVR is an approach called ‘controller emulation'. This is where a custom SteamVR driver uses an [input profile](https://github.com/ValveSoftware/openvr/wiki/Input-Profiles), tracked device objects with the [properties](https://github.com/ValveSoftware/openvr/blob/master/docs/Driver_API_Documentation.md#device-properties) of, and rendermodels of, an existing, well-known device in the SteamVR ecosystem, usually Touch or Index controllers, in an attempt to pass off as them. Then sending the skeletal data from the source tracking system (such as Meta Quest or Ultraleap) along the skeletal tracking input handle so that it goes into the application’s skeletal tracking actions, and sometimes sending the fidelity level as full. While this does get the finger tracking data into an application, it is not an ideal approach.

* Applications can’t tell what the actual hardware being used is
* Some properties of a controller (such as fidelity level enum) cannot be changed after the skeletal input component is initialized, which makes multimodal switching between controllers and hands at runtime impossible for the application to respond to
* The path-of-least-resistance to filling the virtual controller’s other inputs (trigger, joysticks, buttons, etc) is to put in simple invisible gestures that are frustrating from a user experience perspective.
* The virtual inputs for other actions (the aforementioned trigger, joysticks, buttons, etc) can clash with application-side inputs generated from the tracking data. This could manifest in ways such as double-clicks for menu interactions, or a grab event being triggered by the driver and the application’s gestural input system at the same time. This can lead to unexpected and confusing outcomes for the user.
* Users will not be able to be able to have a separate binding for finger tracking vs holding a controller. If a user changes or disables an input-action mapping for hands (likely to avoid the previously listed problem), that binding will also remain when they go back to controllers. In the case of clicking or grabbing, this would leave them unable to click or grab when they go back to controllers.

For these reasons, we do not officially support this ‘controller emulation’ approach. We have some code that will try to detect when this is happening, and may tell the user that the input is unsupported, possibly having unintended side effects.

*Please* do not misrepresent the hardware/inputs you are sending to SteamVR/VRChat. You may notice that Valve indicates [in their documentation](https://github.com/ValveSoftware/openvr/blob/master/docs/Driver_API_Documentation.md#notes-on-hand-tracking-compatibility) that VRChat checks to see if the current controller is Knuckles before activating finger tracking, and that you should use their built in generic controller emulation for targeting VRChat. **This is no longer true**. This guide should be considered authoritative. If you have already set up controller emulation bindings for VRChat using this emulation system, they should be removed.

## Recommended Approaches

### Streaming Applications

If you’re building a streaming application that connects a standalone device (like Meta Quest) to SteamVR, your application will likely want to support tracked controllers like Touch in addition to controllerless-hand tracking. You may also want to support fast-switching from controllers to hands, in addition to ‘multimodal’ usage, where one hand is holding a controller and the other is tracked in a controllerless fashion. Existing SteamVR drivers such as lighthouse show us that **multiple input devices can live within a single SteamVR driver**. Our recommended approach then is to:

Make a virtual controller ([input profile](https://github.com/ValveSoftware/openvr/wiki/Input-Profiles), tracked device id & [properties](https://github.com/ValveSoftware/openvr/blob/master/docs/Driver_API_Documentation.md#device-properties), [input component handles](https://github.com/ValveSoftware/openvr/blob/master/docs/Driver_API_Documentation.md#creating-components), etc) for each pre-existing physical controller type your streaming application supports.

Make a totally new virtual controller that is just for controllerless hand-tracking.

#### Physical Controllers

For these, just replicate the controllers you’re passing through. These should have the same input profile and components as they’d normally have - thumbsticks, buttons, etc, and the same tracked device properties (model name, rendermodel, manufacturer, etc), and same input sources/roles (left/right hand for controllers, head for the HMD), and initialize the skeletal tracking level to whichever the controller offers (for touch this would be Estimated).

#### Hand Virtual Controller

For these, you’ll want an input profile and component handles that provide the minimal necessary inputs.  These are:

* Dashboard
* System click (for interacting with the dashboard)
* Hand Pose
* Skeleton

You can provide other inputs if you like (especially if your gestures are well-designed and/or you have an overlay that provides feedback for them), but we recommend leaving them out of the default bindings you provide to VRChat.

From here you’ll want to provide a descriptive set of properties for virtual your hand controller. Let’s use a hypothetical example: Your streaming app is ‘**Bitriver**,’ and it streams the skeletal hand tracking from a Meta Quest. You could do the following for each property:

Both left and right hands:

| Property                       | Value                             |
| ------------------------------ | --------------------------------- |
| Prop_ManufacturerName_String   | Meta                              |
| Prop_TrackingSystemName_String | Oculus Insight                    |
| Prop_ModelNumber_String        | Bitriver_Hand                     |
| Prop_ControllerType_String     | Bitriver_Hand                     |
| TrackedDeviceClass             | Controller                        |
| Prop_InputProfilePath_String   | *Path to input profile json file* |

For the left hand:

| Property                      | Value              |
| ----------------------------- | ------------------ |
| Prop_SerialNumber_String      | BitRiver_Left_Hand |
| Prop_ControllerRoleHint_Int32 | 1                  |


For the right hand:

| Property                      | Value               |
| ----------------------------- | ------------------- |
| Prop_SerialNumber_String      | BitRiver_Right_Hand |
| Prop_ControllerRoleHint_Int32 | 2                   |

:::note
Every controller that supports Skeletal Input will have a tracked device, and the **Pose** component of this tracked device is called the **Base Pose** of the skeleton - the skeleton’s transform coordinate space is a child of this base pose.
:::

When your user’s VR system indicates that it is switching between hand tracking and controller tracking, you will want to indicate this switch by changing the booleans you send in each tracked device’s **Base Pose** components when calling `vr::VRserverDriverHost()->  TrackedDevicePoseUpdated()`. The relevant fields in DriverPose_t are:

- `poseIsValid`
- `deviceIsConnected`

When your **controllers** are active, set their ```poseIsValid``` to ```true``` (unless your controller’s API provides better values for this, such as in the case the API you are using indicates a pose is low-confidence and should be rejected) and ```deviceIsConnected``` to true. Then set ```poseIsValid``` in your virtual hand to ```false```, and your ```deviceIsConnected``` in your virtual hand to ```false```

When your **hand tracking** is active, you will want to set the opposite values. Set your controller’s tracked device pose component’s ```poseIsValid``` and ```deviceIsConnected``` to ```false```, and your virtual hand's ```poseIsValid``` to ```true``` when the hand is tracked, and ```false``` when it is untracked, and ```deviceIsConnected``` to ```true```. 

#### PCVR Peripherals

In the case that you are building a single peripheral for PCVR (such as writing your own computer vision hand tracking system, or you are building a glove), you will only need to do the second part of the previous section - building a new virtual controller, named appropriately, to represent the hand. You will not need to do any controller vs hand hand-off. 

## Finger Tracking Exclusive Mode

:::warning Deprecated

VRChat may remove this feature in the future. Any non-conformant drivers that provide their own inputs to various actions will provide a worse user experience.

*VRChat used this feature during development. All drivers supplied inputs to SteamVR Actions that VRChat's custom tracking-based input system could infer on its own. Finger Tracking Exclusive Mode allowed full-fidelity hand tracking during development without getting double clicks, double grabs, etc.*

:::

When users enable Finger Tracking Exclusive mode, VRChat disregards any SteamVR inputs bound to actions other than Pose and SkeletonLeftHand and SkeletonRightHand. 


---

## Document: roadmap.md

Path: /roadmap.md
---
sidebar_position: 100
---
# Roadmap

This page gives you an overview of upcoming changes to the VRChat Worlds and Avatars SDK.

:::note Last updated: November 21, 2024

This page may be out of date. For the latest information, visit VRChat's [feedback board](https://feedback.vrchat.com/),  [forum](https://ask.vrchat.com/c/official/31), and [SDK release notes](/releases/).

:::

| Status          | Name                                                                                                                                                         |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Done            | [Save & Load persistent World Data](https://feedback.vrchat.com/udon/p/save-load-persistent-world-data)                                                      |
| Done            | [Example Central](https://feedback.vrchat.com/udon/p/example-central-for-worlds-sdk)                                                                         |
| Done            | [Permanent Purchases in Worlds](https://feedback.vrchat.com/creator-economy-sellers/p/one-time-purchases-in-worlds)[^4]                                      |
| Done            | [Expose some highly-requested types to Udon](https://feedback.vrchat.com/udon/p/expose-some-highly-requested-types-to-udon)                                  |
| Closed Beta[^1] | [New Character Controller for Worlds](https://feedback.vrchat.com/udon/p/new-character-controller-for-worlds)                                                |
| In progress[^2] | [Udon 2](https://feedback.vrchat.com/udon/p/udon-2)                                                                                                          |
| In progress[^2] | [Build & Publish on multiple platforms automatically](https://feedback.vrchat.com/sdk-bug-reports/p/build-publish-on-multiple-platforms-automatically)       |
| In progress[^2] | [Build & Test on mobile devices](https://feedback.vrchat.com/sdk-bug-reports/p/build-test-on-mobile-devices)                                                 |
| Planned[^3]     | [Recurring Payment in Group Stores](https://feedback.vrchat.com/creator-economy-sellers/p/recurring-payment-in-group-stores)[^4]                             |
| Planned[^3]     | [Allow VCC to install Android and iOS modules directly](https://feedback.vrchat.com/sdk-bug-reports/p/allow-vcc-to-install-android-and-ios-modules-directly) |

Please keep in mind that this list is subject to change. It also doesn’t include:
- minor planned changes,
- [Creator Companion](https://vcc.docs.vrchat.com/) changes,
- documentation changes,
- features that haven't been announced yet.

[^1]: "Planned" means that we haven't started major development on the feature, but we plan on working on it. The feature may require some design and scoping work.

[^2]: "In Progress" means that the feature is getting active development work! We are building the feature and performing internal testing and feedback cycles.

[^3]: "Closed Beta" means that this feature is getting tested with a selected group of users to collect feedback and find bugs.

[^4]: This URL leads to a private feedback board for creators participating in the Creator Economy.

[^5]: Use the `persistence-beta` branch on Steam!


---

## Document: build-pipeline-callbacks-and-interfaces.md

Path: /sdk/build-pipeline-callbacks-and-interfaces.md
---
title: "Build Pipeline Callbacks and Interfaces"
slug: "build-pipeline-callbacks-and-interfaces"
hidden: false
createdAt: "2023-04-11T21:01:07.855Z"
updatedAt: "2023-04-11T21:04:48.137Z"
---
VRChat SDK contains multiple interfaces that can be used via Editor Scripts to enhance the World and Avatar build process.

## For Scene Components

The interfaces outlined below can be used in combination with `MonoBehaviours` and as such - be placed on scene objects directly, which can be useful in a situation where you need to hold some specific scene references to perform your modifications.

### IEditorOnly

`VRC.SDKBase.IEditorOnly`

The interface has no members to implement.

You can use `IEditorOnly` to mark a script Editor-only for the SDK Validation. This will make it so the SDK ignores it when scanning your World or Avatar for incompatible scripts.

### IPreprocessCallbackBehaviour

`VRC.SDKBase.IPreprocessCallbackBehaviour`

Members to implement

```csharp
public void OnPreprocess()
{
}

public int PreprocessOrder { get; }
```

This interface allows you to execute custom code when the build process is about to begin. This can be useful if you need to perform modifications before content gets built and uploaded to VRChat.

> 🚧 Note that this does not automatically bypass the SDK validation. You should also use `IEditorOnly` if your scripts exist directly on the avatar you're uploading

## For Project-Wide Scripts

These interfaces are suited for anything that does not rely on particular scene objects and performs bulk modifications to the scene/avatar before it gets uploaded to VRChat.

### IVRCSDKBuildRequestedCallback

`VRC.SDKBase.Editor.BuildPipeline.IVRCSDKBuildRequestedCallback`

Members to implement

```csharp
    public int callbackOrder => 0;

    public bool OnBuildRequested(VRCSDKRequestedBuildType requestedBuildType)
    {
        return true;
    }
```



Where `VRCSDKRequestedBuildType` is an enum of the following shape

```csharp
public enum VRCSDKRequestedBuildType
{
    Avatar,
    Scene,
}
```



This interface allows you to perform some logic before the VRChat SDK starts building the content. 

`OnBuildRequested` can also abort the build by returning `false`.

---

## Document: detecting-vrcsdk.md

Path: /sdk/detecting-vrcsdk.md
import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';
import UnityVersionedLink  from '@site/src/components/UnityVersionedLink.js';

# Detecting the VRChat SDK

There are several ways to detect the VRChat SDK in a Unity project. This can be helpful when developing Unity tools or libraries that do not depend on the VRChat SDK, but may still want to utilize [VRChat's SDK API](/sdk/public-sdk-api).

## Using Version Defines

The best way to detect the VRChat SDK is with <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/ScriptCompilationAssemblyDefinitionFiles.html#define-symbols">Version Defines</UnityVersionedLink> in your assembly definition file.

You can define symbols in your assembly when `com.vrchat.base`, `com.vrchat.avatars`, or `com.vrchat.worlds` are installed.
It is recommended to only use the "Expression" property to define your symbol when the installed VRChat SDK version is compatible with your tool.
For versioning of VRChat SDK, please refer to the [Creation Companion documentation](https://vcc.docs.vrchat.com/vpm/packages/#brandingbreakingbumps).

Since Version Defines is a feature for UPM packages, this method only works for VPM-based SDKs, which are treated as UPM packages by Unity.
If you also want to detect legacy `.unitypackage`-based SDKs, use legacy method below by defining the same symbol as the VRCSDK defines, or adding the following code to every file:

```csharp
#if !YOUR_VRCSDK3_AVATARS && !YOUR_VRCSDK3_WORLDS && VRC_SDK_VRCSDK3
    #if UDON
        #define YOUR_VRCSDK3_WORLDS
    #else
        #define YOUR_VRCSDK3_AVATARS
    #endif
#endif
```

## Using Legacy VRCSDK-defined scripting symbols (Deprecated) {#using-scripting-symbols}

The other method to detect VRChat SDK installation is with VRCSDK-defined scripting symbols.
For all VRCSDK projects, `VRC_SDK_VRCSDK3` will be defined, and for world projects, `UDON` will be defined.

This method is deprecated and will be removed in the future. Do not solely depend on this method.

In the old VRChat SDK, `VRC_SDK_VRCSDK3` and `UDON` symbols were used internally. But because those symbols are active in the whole project, many tools depend on those symbols for detecting the VRChat SDK.

Currently, in the VRChat SDK, all those symbol usages are migrated to Version Defines. Please migrate to Version Defines as soon as possible!



---

## Document: example-central.md

Path: /sdk/example-central.md
# Example Central

Example Central provides examples for the VRChat SDK, which you can browse, download and modify to learn from for your own projects.

[IMAGE: Example Central Window Layout]

:::info

Example Central has only recently been released.

- We're working on improving the features, design and examples.
- Currently, only world examples are available, Avatar examples will be added in the future.
- You can send us your feedback on the [Example Central Canny Board](https://feedback.vrchat.com/example-central).
- Your VRChat account must have a trust rank of "New User" or higher.

:::

## Basic Usage
Open the window from the Unity Editor Menu under "VRChat SDK > 🏠 Example Central"

[IMAGE: Opening Example Central From Menu]

Example Central has two main sections - a listing of examples on the left, and information about the selected example on the right.

[IMAGE: Example Central Window Layout]

* Browse the list and select an example to see more information about it.
* Once selected, the example's details are shown on the right.
* Press the "Docs" button to open a page with detailed information and a walkthrough of using the example.
* Press the "Import" button to import the example's `.unitypackage` into your project.

## Example Details

Each example has a thumbnail, title, version, tags, description, guide, and example scene. World examples also have a published VRChat world. Lots of information to help you get started!

### Version

Each example has a version indicator. When an example is updated, you'll see the newest version in Example Central.

Examples use [Semantic Versioning](https://semver.org/).

:::warning

Currently, you cannot see the version of an example after importing it. This makes it difficult to see whether you are using the latest version. 

In the future, versions will have release notes and a mechanism to check whether you're using the latest version.

:::


### Tags

Look at the tags of examples to quickly understand the systems and concepts involved. You can search for any tag to filter the list of examples.

### Guide

Each example has a detailed guide in the Creator Docs, which you can access by pressing the "Docs" button in the window.

### Example World

Visit the example world in VRChat to get a better understanding of how the example works on each platform!


### Settings

The gear icon (⚙) beside the search box opens up the settings of Example Central. 

[IMAGE: Example Central Window Layout]

There is one setting:
- Show Creator Economy Examples

:::warning

The setting is disabled by default because it is currently in Beta testing. You can enable it, but the examples will not function properly if you are not a Beta tester.

:::


## Feedback

What do you think of Example Central?
- Use the [Example Central Canny Board](https://feedback.vrchat.com/example-central) to tell us your feature requests and report bugs.
- Your VRChat account must have a trust rank of "New User" or higher.


---

## Document: index.md

Path: /sdk/index.md
---
sidebar_position: -1
---

# Getting Started

Before you can create [avatars](/avatars) and [worlds](/worlds), you need to perform the following steps.

:::tip

If you're new to VRChat, read the [VRChat's "Getting Started"](https://vrch.at/getting-started) page.

:::

The **[VRChat Creator Companion](https://vcc.docs.vrchat.com/)** is the easiest and quickest way to get started. It installs [Unity](https://unity.com/) and the VRChat software development kit (SDK) for you.

- VRChat uses the Unity game engine. Avatars and worlds are also created in Unity.
- The VRChat SDK allows you to use Unity to create avatars and worlds. 

## Your first project
You should use Windows to create your first project.

1. [Download the VRChat Creator Companion (VCC)](https://vrchat.com/download/vcc).
    - Read the [documentation](https://vcc.docs.vrchat.com/). 
2. Install the VCC.
	- The default install location is `%LocalAppData%/Programs/VRChat Creator Companion`, but you can change this as you'd like.
4. The VCC should open automatically. If not, search for "Creator Companion" in Windows.
5. Click "Create New Project".
6. Choose "Avatar" or "World project".
7. Name your project.
8. Choose a location.
9. Click "Create Project".

:::note
Do you want to upload to Android, Quest, or iOS? Read the [platforms](/platforms) page.
:::

## Opening your project

You can now open your new project! After creating a new project, the next page in the Creator Companion will show an **Open Project** button. You can also access it from the **Projects** tab on the left sidebar.

If your project isn't listed, click the dropdown menu next to **Create New Project** and then **Add Existing Project** via the project screen and select it. After the project is open:

1. Check the title bar to ensure it ends with `PC, Mac & Linux Standalone <DX11>`. 
    - If it does not, then go to `File > Build Settings...`, select `PC, Mac & Linux Standalone`, then click `Switch Platform` in the bottom left.

2. Navigate to `VRChat SDK > Show Control Panel > Authentication`. 

3. Sign into your VRChat account. You'll need to do this to upload any content you create.
    - You must have a VRChat account of at least "New User" [Trust Rank](https://docs.vrchat.com/docs/vrchat-safety-and-trust-system) to upload content. You cannot use a Steam, Meta, or Viveport account to upload content.

## Using Unity Hub instead
Though we don't recommend this, if you'd like to install Unity yourself without the VCC, check the [Current Supported Unity Version](/sdk/upgrade/current-unity-version) page and install the version of Unity that VRChat currently supports using the Unity Hub.

If you didn't use the VCC to set up your project, you'll also need to install the SDK. Do so via the [VRChat Creator Companion](https://vcc.docs.vrchat.com/guides/getting-started).

To create projects using just the Unity Hub:
* Open Unity Hub (or just the editor, if you chose to go that route).
* Create a new project, **set it to 3D, and save it**.
* Don't use HDRP or URP. VRChat doesn't use it.

To open projects using just the Unity Hub:
* Click **Open** in the top right, then select the directory where your project lives.

## Tips 

* If you're building content for VRChat for Meta Quest, you should also be building for Android. Check our [Android documentation](/platforms/android/index.md) for more details.
* Save your projects in a mass-storage drive with a lot of space. Unity projects can get quite large, especially if you use versioning software
* Do not use a single project for tons of different avatars or worlds. This is a quick way to make future migrations a huge pain in the butt!
* If you know how to use version control software like [Git](https://git-scm.com/) or [Unity Version Control](https://unity.com/solutions/version-control), use it! It makes it very easy to roll back changes that break your project.

### Understanding the Terms "Player" vs. "User"

In VRChat, the terms "player" and "user" can refer to different things depending on the context:

- User: This is the standard term for anyone using VRChat, whether they're in the same world as you or not. It’s the general term used for all participants on the platform.
- Player: In technical terms, a "player" specifically refers to the individual instantiation of a user within a world instance. This distinction is more relevant for the underlying system and certain technical features (like multiplayer interactions). For example, when locally testing worlds there can be multiple players of the same user in a world instance.

### What's Next?
Your project is ready! You can move on to [World Creation](/worlds) or [Avatar Creation](/avatars).

If there are any errors, even with a brand new empty project, [please contact our Support team](https://vrch.at/support).


---

## Document: public-sdk-api.md

Path: /sdk/public-sdk-api.md
---
title: "Public SDK API"
slug: "public-sdk-api"
hidden: false
createdAt: "2023-08-18T21:01:07.855Z"
updatedAt: "2023-08-18T21:04:48.137Z"
---

The VRChat SDK provides a set of interfaces and methods you can use to enhance your world and avatar build process. 

You can find the **Public SDK API** folder in both SDKs:

- For worlds: Packages/VRChat SDK - Worlds/Editor/VRCSDK/SDK3/Public SDK API
- For avatars: Packages/VRChat SDK - Avatars/Editor/VRCSDK/SDK3A/Public SDK API

However, most of the events and methods are shared between both the world and avatar SDKs and are defined in the **Base SDK Package**: `Packages/VRChat SDK - Base > Editor/VRCSDK/Dependencies/VRChat/Public SDK API`.

Other methods marked as `[PublicAPI]` are also be a part of Public SDK API. E.g., "Packages/VRChat SDK - Base/Editor/VRCSDK/Dependencies/VRChat/API/VRCApi.cs" for updating description of contents.

:::note

These types are in assembly definitions that are auto referenced. If you are writing code in your own project, the types will usually be available by default. If you're writing a redistributable package and have your own assembly definition, you will need to add the appropriate assembly definition references:

For avatars: `VRC.SDK3A.Editor`  
For worlds: `VRC.SDK3.Editor`  
For both: `VRC.SDKBase.Editor`

:::

# What's available?

For the most up-to-date list of events and methods, we recommend looking at the files directly mentioned above.

But here is a short list of what is available:

- OnEnable/OnDisable events of the main SDK Panel
- Build Start/End events
- Upload Success/Error events
- Build, Build and Test, and Build and Upload methods

:::note
If you run into exceptions during the build process, you can view the list of expected exceptions in the Interface definitions.
:::
## Examples

### Getting an instance of a builder

Connecting to `OnSdkPanelEnable` will ensure that the SDK window was opened and the builders were registered. You can then use `TryGetBuilder` to get an instance of the builder you need.

> You can call `VRCSdkControlPanel.TryGetBuilder` at any point in time, but it will return false if the SDK window is not open or the builder you're trying to access is not available.

```cs
[InitializeOnLoadMethod]
public static void RegisterSDKCallback()
{
    VRCSdkControlPanel.OnSdkPanelEnable += AddBuildHook;
}

private IVRCSdkAvatarBuilderApi _builder;

private static void AddBuildHook(object sender, EventArgs e)
{
    VRCSdkControlPanel.TryGetBuilder<IVRCSdkAvatarBuilderApi>(out _builder);
}
```

### Running code before the build

`OnSdkBuildStart` runs right before the SDK kicks off the build process, but after validations and Build Request Callbacks have passed.

```cs
[InitializeOnLoadMethod]
public static void RegisterSDKCallback()
{
    VRCSdkControlPanel.OnSdkPanelEnable += AddBuildHook;
}

private static void AddBuildHook(object sender, EventArgs e)
{
    if (VRCSdkControlPanel.TryGetBuilder<IVRCSdkAvatarBuilderApi>(out var builder))
    {
        builder.OnSdkBuildStart += OnBuildStarted;
    }
}

private static void OnBuildStarted(object sender, object target)
{
    Debug.Log("Building " + ((GameObject) target).name);
}
```

### Building from script

```cs
[MenuItem("My Tools/Build Selected Avatar")]
public static async void BuildSelectedAvatar()
{
    var avatar = Selection.activeGameObject;
    if (!VRCSdkControlPanel.TryGetBuilder<IVRCSdkAvatarBuilderApi>(out var builder)) return;
    try {
      await builder.BuildAndTest(avatar);
    } catch (Exception e) {
      Debug.LogError(e.Message);
    }
}
```
## Heads up
:::caution
If you're currently using reflection to access the SDK internals, we recommend switching to the public API as soon as possible.
:::
We're going to make our best effort to provide a stable API, but it's still subject to change in the future. We recommend leveraging semver to define which version of the SDK your tools are compatible with. [Learn more here](https://vcc.docs.vrchat.com/vpm/packages/#versions-and-ranges).



---

## Document: sdk-troubleshooting.md

Path: /sdk/sdk-troubleshooting.md
---
title: "SDK Troubleshooting"
slug: "sdk-troubleshooting"
excerpt: "Common SDK issues and how to solve them"
hidden: false
createdAt: "2017-09-29T02:44:14.279Z"
updatedAt: "2020-04-23T03:39:19.161Z"
---
Here are common issues you may come across when using the SDK and how to solve them. You can find some additional assistance at our [Help Knowledgebase](http://help.vrchat.com).

## The build control panel isn't appearing in the VRChat SDK menu dropdown!
There are two main reasons this might be happening: 

Make sure you're using the recommended version for VRChat. (See [Setting up the SDK](/sdk))

Check your console tab to ensure there aren't any compilation errors from third-party scripts or components. If there are, you may need to remove those components/scripts.

## I uploaded my content but I can't see it in-game!
There are a few reasons this might be the case. Here are some things to check:
- Make sure you are using the [correct version of Unity](/sdk/upgrade/current-unity-version).
- Make sure you are using the correct account in-game and are not logged into a platform account.
- Check the `Content Manger` tab found in the control panel window to see if your content is there.
- Check the editor console to see if there were any errors when uploading.

## I can't see one of the windows but there aren't any errors!
In rare cases, Unity tabs can go off screen and become inaccessible. You'll need to delete some registry keys to get these windows back on your screen. 

1. Close Unity.
2. Press your Windows key and type `regedit`. Press Enter. You'll be prompted by UAC to permit Administrator access.
3. Be very careful in `regedit`! This application contains all of the settings for your PC.
4. Find the following key: `Computer\HKEY_CURRENT_USER\Software\Unity Technologies\Unity Editor 5.x`. You can do by pasting it into the bar at the top of `regedit`, or if you don't have a bar at the top of the window, navigating through the directory listing on the left.
5. Remove ALL keys in that directory that start with `VRC`, including `VRCSDK2` or any other related keys.
6. Close `regedit`.
7. Reopen Unity. You should be good to go!

## I'm getting errors related to SDK3 or Udon in a project using SDK2 or VRC_SpatialAudioSource in a project using SDK3!

1. Follow [the correct steps](/sdk/updating-the-sdk) on removing your SDK by closing Unity and removing all the SDK related folders and their related `.meta` files.
2. Go to your `Project Settings` and find `Scripting Define Symbols` under `Player > Other Settings`.
3. Remove the symbols that are not associated with the SDK your project was made on. For projects made with SDK2 remove `UDON` and `VRC_SDK_VRCSDK3`. For projects made with SDK3 remove `VRC_SDK_VRCSDK2`. The symbols are separated by `;`. Afterwards save changes by pressing `Enter`.
4. Import the correct SDK into the project.

## I have a problem that the Knowledgebase doesn't solve and isn't listed here!

Sorry about that! Please browse our [official knowledgebase](http://help.vrchat.com/) or [submit a support request](https://help.vrchat.com/hc/en-us/requests/new). We're happy to help you.

---

## Document: updating-the-sdk.md

Path: /sdk/updating-the-sdk.md
---
title: "Updating the SDK"
slug: "updating-the-sdk"
hidden: false
createdAt: "2019-07-24T03:33:36.520Z"
---
If you need to update your SDK, it is important that you follow these steps to ensure the update proceeds properly and you don't have any old/conflicting files.

## Version Control
If you know how to use it, you may find it beneficial to use version control software like [Git](https://git-scm.com/) to manage your project. You don't need to upload your repository to Github or similar service to gain the benefits of version control. Create a commit before you upgrade SDKs just to be sure.

## VRChat Creator Companion
Keeping your SDK up to date is extremely easy with the VCC. See the [VRChat Creator Companion docs](https://vcc.docs.vrchat.com/guides/getting-started) to learn how to use it!

## Migrating to the VCC
If you want to learn how to migrate your project to use the VCC, check out the guide [here](https://vcc.docs.vrchat.com/vpm/migrating).

## Manual Updates
If you're using the VCC, you don't need to worry about manual updates.
However, if you wish to, you can download the SDK on the [VRChat website](https://vrchat.com/home/download) after signing into your VRChat account.

## Legacy SDK3
:::caution 

These instructions only apply to users of our Legacy SDK (`Assets\VRCSDK`).
If your SDK is in your `Packages` folder (`Packages\com.vrchat.base`), do not follow the instructions below.
:::

**For SDK3, you should be able to update by simply importing the new SDK over the old one, also known as an in-place upgrade.** This is especially important for SDK3-Avatars, as you may lose State Behaviors on your animators if you incorrectly update!

If you want to be super careful, always back up your projects before updating the SDK.

### SDK3 - World
1. Close Unity.
2. Back up your Unity project! You don't have to backup your Library folder, these files are auto-generated by Unity.

:::caution Pre-2020.3.2 SDK3 Upgrade

**This is an uncommon step and you probably don't need to do it.** 

If you are upgrading from an SDK older than 2020.3.2, go into your project's `Assets` folder and delete the `VRCSDK` and `Udon` folders as well as the `VRCSDK.meta` and `Udon.meta` files.
:::
3. Open your Unity project.
4. Import the new SDK3 - World over the old one.

### SDK3 - Avatars
:::danger Do not perform "Deletion Reinstalls" For SDK3 - Avatars!

***If you delete the SDK folders with Unity closed and open Unity without the SDK installed, you will lose State Behaviors.*** They are fragile and do not persist through full deletion upgrades. Make sure you back up your projects often, and save/document your state behavior setups.

If you **must** perform a full deletion reinstall of your SDK3 - Avatars package, back up your project first. You will have to set up your State Behaviors again, so ensure you have documented them well.
:::
1. Close Unity.
2. Back up your Unity project! You don't have to backup your Library folder, these files are auto-generated by Unity.
3. Open your Unity project.
4. Import the new SDK3 - Avatars over the old one. If you get errors after import is complete, try restarting Unity afterward. 

:::note SDK3 Expected Errors on Avatar Dynamics Upgrade

It is expected to have a handful of errors when you first upgrade SDK3 for Avatars to the Avatar Dynamics SDK. This is due to the SDK installing the Burst and Mathematics packages during the install process, and Unity getting a bit ahead of itself in importing them early.

If you clear the errors or restart Unity, they should go away.
:::

### SDK3 - Avatars - Separate Project Process
If you run into issues with upgrading via the above process, try this instead:
1. Close Unity.
2. Make a new, blank project.
3. Import the new SDK3 - Avatars package into that project.
4. Close that Unity project.
5. Using Explorer (Do not open Unity yet!), delete the VRCSDK3 folders from the project you're upgrading. Until this guide says otherwise, ***do not open Unity.***
6. Edit the references of the VRChat SDK3 from `Packages/vpm-manifest.json` to the new SDK version from the project you're upgrading.
7. From your new blank project that you imported the SDK into, copy the VRCSDK3 folders into the project that you're upgrading.
8. After you copy the files, open Unity and open your upgraded project. You may delete the blank project.

### Advanced Update Process

If you're reinstalling the SDK in a project that contains a world using complex trigger setups, here's a safer way to update your SDK.

1. Close Unity
2. Back up project to another folder (do not back up the Library folder, these files are auto-generated by Unity)
3. Delete SDK and Plugins folder, as well as the the associated .META files
4. Edit the references of the VRChat SDK3 from `Packages/vpm-manifest.json` to the new SDK version from the project you're upgrading.
5. Create a new "dummy" Unity Project by creating a blank Unity project with Unity Hub.
6. Install the latest VRChat SDK on the dummy project.
7. Copy the newly added `SDK/Plugin` folder and associated `.meta` files from the dummy project into your original project.
8. Done. You can now open your upgraded project.

## Updating Unity

If you are updating from a previous version of Unity, we [have a guide for updating](/sdk/upgrade/index.md) to our latest version we support!


---

## Document: current-unity-version.md

Path: /sdk/upgrade/current-unity-version.md
---
sidebar_position: 1
---
import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Current Unity Version

The current Unity version used by VRChat is <UnityVersionedLink versionKey="patch" url="https://unity.com/releases/editor/whats-new/<VERSION>"><CurrentUnityVersion/></UnityVersionedLink>

The simplest way to install the latest Unity version is with the [Creator Companion](https://vcc.docs.vrchat.com/#download-it). After installing the Creator Companion, simply follow the instructions. 

Alternatively, if you have Unity Hub installed, you can <UnityVersionedLink url="unityhub://<VERSION>">click this link</UnityVersionedLink> to install the correct version of Unity. <CurrentUnityVersion/> is also available in the [Unity editor release archive](https://unity.com/releases/editor/archive).

In the installation screen, choose "Android Build Support" if you'd like to be able to create worlds or avatars for Android or Quest.

For instructions on how to upgrade from Unity 2019, [visit our Unity 2019 to 2022 documentation](/sdk/upgrade/unity-2022).

## Differences from previous versions

Unity 2022 includes many improvements such as faster iteration times, improved asset import times, *much* faster platform switching times, better editor stability, fully featured C# 8 support, a quick search feature, [and much more!](https://unity.com/releases/lts)


## Known Issues

* The first time you open a Scene and select a GameObject inside a prefab with a U# Behaviour, the GUI for the component directly below that U# Behaviour will not show its GUI. Deselecting and re-selecting the prefab fixes this.
* Buffer Particles don't work as they did in Unity 2019, [there is a workaround to fix them from community member hfcRed here](https://x.com/hfcRedddd/status/1696915379090604179).
* Unity 2022 sometimes causes Rider's debugger to stop for unhandled exceptions in Unity's IMGUI.
    * Please refer to [this workaround](https://forum.unity.com/threads/rider-debugger-breaks-on-unhandled-exception.1135879/#post-7305256) and [Jetbrains's bug tracker](https://youtrack.jetbrains.com/issue/RIDER-64944) for more information.
* Spatialized Audio Sources can create warnings when entering playmode or adjusting their settings.

---

## Document: index.md

Path: /sdk/upgrade/index.md
---
excerpt: Learn how to update to a newer version of Unity
sidebar_position: -1
---
# Managing Unity

If you've worked with the VRChat SDK in the past, your project may be using an old version of Unity and the VRChat SDK. To use the latest version of the VRChat SDK, you'll first need to update Unity.

- [Check which versions of Unity you already have installed](unity-2022.md#managing-unity-versions) on your PC that are VRChat compatible.
- Read our [Unity 2022 migration guide](/sdk/upgrade/unity-2022) to learn how to upgrade your Unity 2019 project to Unity 2022.
- Learn how to perform a [minor Unity version upgrade](/sdk/upgrade/migrating-to-a-newer-minor-unity-version).

:::info Starting a new project?

Read [Setting up the SDK](/sdk/index.md) to learn how to create new projects with VRChat's latest Unity SDK.

:::

---

## Document: migrating-to-a-newer-minor-unity-version.md

Path: /sdk/upgrade/migrating-to-a-newer-minor-unity-version.md
---
title: "Minor Unity Upgrades"
---
Occasionally, VRChat will update within minor Unity versions. For example, VRChat might update from Unity 2022.1.**1** to Unity 2022.1.**2**.

## Install the new Unity version

1. Close all of your open Unity projects.

2. Check the [Currently Supported Unity Version](/sdk/upgrade/current-unity-version) and install the new version of Unity via Unity Hub. 
    - Although we list the standalone installer on that page, we strongly recommend using the Hub. For this doc, we're assuming you're using it.

## Copy your project

1. Copy or back up your project.
	- If you're using the [VRChat Creator Companion](https://creators.vrchat.com/), it will automatically suggest copying your project before migrating it. You can create a backup of your project with the "Make Backup" button.
	- Otherwise, duplicate the whole project folder and give it a new name.
	- Export your entire project as a Unity Package. This takes a long time and may cause errors.

:::danger Don't skip this step!
Upgrades can fail. If you keep your original project files safe, you can restore them, try again, and find out what went wrong.

Without a backup, you don't get a second try. If you make a mistake or the upgrade fails, fixing it may be difficult or even impossible.
::: 

If you're an advanced user and know how to use version control like [Git](https://git-scm.com/), you should use that.

## Open your project

1. Open the copy of your project in the new version. 
    - You'll get some upgrade warnings. This is fine! Click the affirmative button.

2. After some time, your migration will be complete. That's it!

## Optional info and tips

SDK updates aren't always needed in minor version upgrades. If they are, this is when you'd do it.

1. Close your project after upgrading.
2. Use the [VCC](https://vcc.docs.vrchat.com/) to upgrade your SDK.

#### Unity warnings

There are a few Unity warnings that may pop up during migration that you can safely click past. Here are a few you may see:

[IMAGE: migrating-to-a-newer-minor-unity-version-f3995eb-image_10.png]

[IMAGE: migrating-to-a-newer-minor-unity-version-b20553b-image_11.png]

#### Clean up the copy

If your project is large, migration might take a long time. There are a few folders that you don't need to migrate over if the project is especially huge. You can delete any of these folders safely from the copy.

```text
/Library/
/Temp/
/Obj/
/Build/
/Builds/
/Logs/
/UserSettings/
```
#### Version warnings

The SDK may warn you that you're on the wrong version, even though you _know_ you're on the correct one.

[IMAGE: migrating-to-a-newer-minor-unity-version-1b8194d-2022-11-30_10-35-54_chrome.png]

This is fine! If you know for a fact you're on the correct version, you can ignore this message.

---

## Document: unity-2022.md

Path: /sdk/upgrade/unity-2022.md
---
title: Upgrading Projects to 2022
sidebar_position: 2
---
import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';

This page explains how to upgrade your VRChat project from version 2019.4.31f1 to Unity <CurrentUnityVersion/>.
Unity <CurrentUnityVersion versionKey="major"/> is required to use the latest version of the VRChat SDK. You can check out the [benefits to upgrading here](/sdk/upgrade/current-unity-version).

If you're using the Creator Companion, upgrading your project is easy! But first, make sure you create backups of your projects.

## Backing up your Unity project

If you're using the [VRChat Creator Companion](https://creators.vrchat.com/), it will automatically suggest backing up your project before migrating it.

1. To back up your project, click the three dot menu next to the Manage Project button, then choose the "Create Backup" option. This is the recommended method of backup, especially for newer creators! 
	- Note that "Create Backup" will not back up the `Udon`,  `UdonSharp`, or `VRChat Examples` folder. If you made changes to those folders, choose a different backup option.
	- You can also back up the project by duplicating the whole project folder with a new name, such as `MyProject-Backup`.  
	- You *can* export your entire project as a Unity Package, but this takes a long time and may cause errors. We don't recommend it.

[IMAGE: Creating a backup.]

:::danger Don't skip this step!
Keeping a backup when making major changes to your precious project is always a good idea.

Upgrades can fail. If they do, your backup can be used as a checkpoint. If you keep your original project files safe, you can restore them, try again, and find out what went wrong.

**Without a backup, you don't get a second try.** If you make a mistake or the upgrade fails, fixing it may be difficult or even **impossible.**
:::

1. Open your project in Unity 2019 to see if there are any errors or warnings in [Unity's console](https://docs.unity3d.com/Manual/Console.html) or the [VRChat SDK Build panel](https://creators.vrchat.com/worlds/creating-your-first-world#step-4---configure-your-world-in-the-sdk-build-panel).
	- If you don't fix issues in your Unity 2019 project, they may cause issues in Unity 2022.
	- *Some* warnings can be safely ignored, but you should try to understand why they're present.

Now you're ready to upgrade!

:::danger Test your content before uploading it

After successfully uploading a world or avatar with Unity 2022, you won't be able to upload it again with Unity 2019.

:::

## Using the Creator Companion 

There are two ways you can upgrade your project from the VCC: Directly from your Projects page or from each Manage Project page. **Make sure the project you are trying to upgrade is closed before proceeding.**

1. Go to Settings, then click Updates to see if your Creator Companion needs to be updated. Without updating, prompts to upgrade to Unity 2022 will not show.

[IMAGE: Check VCC updates.]

2. On the Projects page, you'll see a new **Unity** column with a version switcher for each of your projects. Click this, then click Migrate to Unity 2022.

[IMAGE: Click the correct project.]

Otherwise, click **Manage Project** on any project and you'll see an Upgrade to 2022 banner.

[IMAGE: Upgrade via Manage Project.]

## Using the Unity Hub

Unity Hub is a separate application that allows you to seamlessly install and work with multiple Unity versions at one time. You can also use it to install Unity 2022 if you do not wish to use the Creator Companion.

1. Install the [Unity Hub](https://unity.com/download).
	- You can follow Unity's official [installation guide](https://learn.unity.com/tutorial/install-the-unity-hub-and-editor).
	- You'll need to create a [Unity account](https://id.unity.com/account/new) after installing Unity Hub.
2. Visit [Unity's download archive](https://unity.com/releases/editor/archive).
3. Click **Unity 2022.x**.
4. Scroll down until you see Unity <CurrentUnityVersion versionKey="patch"/> and click the blue **Unity Hub** button.
	- Do not choose the first Unity version in the list!
	- You can also go to the [Current Unity Version page](/sdk/upgrade/current-unity-version) to find a link to download the correct version of Unity.

[IMAGE: Select the right version to install in the Unity Archive.]

[IMAGE: Accept the browser prompt to open Unity Hub.]

5. Click **Open Unity Hub** in your web browser.

[IMAGE: Enable Android Build support if you'd like to be able to develop content for Android devices.]

6. Enable **Android Build Support** in the Unity installation screen.
	- You can skip this if you're not planning on uploading content to Android or Quest yet.
	- You can complete this step later by choosing [Add modules](https://docs.unity3d.com/hub/manual/AddModules.html) in the Unity Hub.
7. Click **Continue** to install Unity <CurrentUnityVersion versionKey="patch"/>.

## Managing Unity versions

It's easy to check what versions of Unity are available on your PC for use with the Creator Companion. You can also change what version of Unity is used to open all *new* projects.

1. In the CC, go to **Settings**.
2. Under **Unity Editors**, use the dropdown menu to change the default Unity editor. This will **not** apply retroactively to any projects already created.
3. If you have not already installed Unity <CurrentUnityVersion versionKey="patch"/>, [follow the instructions above](#using-the-creator-companion). 
4. If you don't see a version of Unity here that you've installed, try using the refresh button or finding the path directly using the file button.

## Packages

If you are trying to add packages to your 2022 project, please keep in mind:

- Every Curated Package has a version which works in 2022.
- Other packages *may* work, but some may need a new version from the package author!
- Many errors will result from using out of date packages, so make sure anything you import is compatible with Unity 2022.

# Troubleshooting

- Test your world before uploading it. Check Unity's console for errors, and test your world in VRChat to see if it work.
	- After successfully uploading a world with Unity 2022, you won't be able to upload that same world with Unity 2019.
- [Make sure to activate your Unity Personal license](https://support.unity.com/hc/en-us/articles/211438683-How-do-I-activate-my-license-) before using VRChat's SDK. Unity is free for personal use.
- To learn more about the Unity Hub, visit [Unity's documentation](https://docs.unity3d.com/hub/manual/index.html).
- If you're experiencing issues related to the SDK itself, please read our [SDK Troubleshooting](/sdk/sdk-troubleshooting) page.


---

## Document: worlds-and-avatars-in-2022.md

Path: /sdk/upgrade/worlds-and-avatars-in-2022.md
---
title: New Worlds and Avatars in 2022
sidebar_position: 2
---

import CurrentUnityVersion from '@site/src/components/UnityVersionedText.js';

Looking to make a new project in Unity 2022? Luckily it's pretty easy: The Creator Companion will handle most of the work for you!

### Download the Creator Companion
**If you don't already have the VCC**, you'll need to download it! 

Follow the steps on our [Getting Started](/sdk/) page.

This is the easiest way to create a new project with the correct Unity version. The Creator Companion will automatically install Unity <CurrentUnityVersion/>, the world SDK, and the avatar SDK for you.

**If you already have the VCC**, [make sure it's updated and upgraded to Unity <CurrentUnityVersion versionKey="major"/>](unity-2022.md#using-the-creator-companion), and you're [launching all new projects in Unity <CurrentUnityVersion versionKey="major"/>](unity-2022.md#managing-unity-versions).

---

## Document: vrcpipelinemanager.md

Path: /sdk/vrcpipelinemanager.md
---
title: "VRCPipelineManager"
slug: "vrcpipelinemanager"
hidden: false
createdAt: "2017-11-22T18:54:45.512Z"
updatedAt: "2019-10-28T19:23:09.669Z"
---
Used to store the ID of a world or avatar.
:::note Added Automatically

This component is added automatically when the component it depends on is added to an object. You should not need to add this component manually.
:::

| Parameter    | Description                           |
|--------------|---------------------------------------|
| Blueprint ID | The unique id for the avatar or world |

If you want to upload the world or avatar to a different blueprint you can press the `Detach (Optional)` button
:::danger Required Blueprint Format

Blueprint IDs can only be of the following format where 0 is replaced with [0-9] [a-f]:

`avtr_00000000-0000-0000-0000-000000000000`

`wrld_00000000-0000-0000-0000-000000000000`

Any other ID format will not be accepted. This is normally done automatically, so you shouldn't ever have to create your own Blueprint ID-- just click "Attach" and one will be generated for you.
:::

[IMAGE: vrcpipelinemanager-7d57e76-Unity_2017-12-10_01-35-44.png]

If you have a blueprint id that you want to upload to you can attach a new one with the `Attach (Optional)` button

[IMAGE: vrcpipelinemanager-db63e77-Unity_2017-12-10_01-37-47.png]

:::caution TIP

Don't have more than one PipelineManager in the scene when building a world! You may end up uploading to the wrong blueprint ID.

:::

---

## Document: index.md

Path: /worlds/clientsim/index.md
---
sidebar_position: 0
---

# ClientSim

[IMAGE: ClientSim screenshot. The Scene view shows the local player and a remote player. The Game view shows ClientSim's "Pause" menu, with buttons to respawn the player, spawn remote players, close the menu, and various other options. The ClientSim Settings window and PlayerData window are also visible.]

ClientSim, short for client simulator, is a part of the Worlds SDK that replicates VRChat client behavior in the Unity editor and can be used to speed up development.

## Features

- Test your World in Unity without needing to open VRChat.
- Control the player with your Mouse and Keyboard or a Gamepad.
- Inspect Udon variables in Play Mode.
- Grab Pickups, use Interacts, UI, and Stations.
- Delete EditorOnly objects when entering Play Mode.

Always test your world in VRChat before making it public! ClientSim can't simulate all of VRChat's features. 

## Windows

ClientSim adds several Unity Editor windows to help you debug and test your world: 

- The ClientSim Settings allow you to change the local player's name and the player's height, disable ClientSim, and more.
- While in Play Mode, open an in-game settings window by pressing the "Escape" key.
- The [ClientSim PlayerData](playerdata-editor-window) window allows you to debug PlayerData.
- The [ClientSim PlayerObject](playerObject-editor) window allows you to debug PlayerObjects.

## Getting started

1. Open your VRChat world scene.
2. Press play in Unity.
3. Test your world in Unity's "Game" window.

Learn more about how all the systems work in the [Systems](systems) section

## Networking Differences in ClientSim

ClientSim only simulates the local VRChat player, not remote players. [Deserialization events](/worlds/udon/networking/network-components/#ondeserialization) are simulated for the local player, but not for spawned remote players.

Some parts of the VRChat server are simulated. For example, the local player receives a `OnPlayerRestored` events when you spawn a remote player.

ClientSim has a different implementation of VRChat's networking serializer. Due to this, there are differences in amount of data stored & serialized in event properties. Data in events like `OnPostSerialization` and `OnDeserialization` differs between ClientSim and the VRChat (see below).

### [OnPostSerialization(SerializationResult)](/worlds/udon/networking/network-components/#onpostserialization)

ClientSim only executes this event if it's part of a synced Player Object.

|                               | In ClientSim                                  | In VRChat                            |     |
| ----------------------------- | --------------------------------------------- | ------------------------------------ | --- |
| SerializationResult.success   | Always true                                   | True if serialization was successful |     |
| SerializationResult.byteCount | Number of properties serialized on the object | Number of bytes sent                 |     |


### [OnDeserialization(DeserializationResult)](/worlds/udon/networking/network-components/#ondeserializationdeserializationresult)

ClientSim only executes this event if it's part of a synced Player Object.

|                                     | In ClientSim    | In VRChat                                              |
| ----------------------------------- | --------------- | ------------------------------------------------------ |
| DeserializationResult.sendTime      | Always 0        | The time in seconds at which this message was sent.    |
| DeserializationResult.receiveTime   | Always 0        | The time in seconds at which this message was received |
| DeserializationResult.isFromStorage | Works as normal | True if sent from persistent storage                   |

---

## Document: playerdata-editor-window.md

Path: /worlds/clientsim/playerdata-editor-window.md
# PlayerData Editor

ClientSim can simulate the VRChat SDK's "Persistence" feature. The PlayerData editor window allows you to debug persistent data in your world. You can open it by going to "VRChat SDK" > "ClientSim PlayerData".

## Usage

[IMAGE: ClientSim PlayerData Window]

1. A dropdown for selecting which player's PlayerData to display.
	* By default, the local player is selected.
	 * If a remote player has been spawned in Play Mode, they can be selected as well.
2. The list of selected player's PlayerData keys, values, and data types.
	* The display updates in real-time as PlayerData is updated.
3. "Clear All PlayerData" deletes all PlayerData for the current scene.
	* For example, this allows you to "start over" if you change how your world uses PlayerData.
4. "Refresh" allows you to refresh the PlayerData list.
	* You can manually view or edit the scene's JSON file. The changes apply immediately while in Play Mode, but you must click the "Refresh" button to see the changes.
5. "Open Local Data Folder" opens the folder where ClientSim stores JSON files for this scene's persistent data.
	* If your scripts use PlayerData, ClientSim automatically creates the JSON files. They're saved in your project and persist between Play Mode sessions.
	* PlayerData files are unique to scenes. Each scene using PlayerData will have a JSON file associated with it. The scene name is used for this association: If you rename a scene and want to keep your data, you must rename the corresponding JSON file to match the new scene name. 
7. "Add Test Data For Remote Player" allows you to create PlayerData for remote players.
	* This button is only displayed while a remote player is selected in Play Mode and the local player has data.
	* Since PlayerData can only be set for the local player, this button duplicates the local player's test data JSON file and randomizes each value. The assumption here is that the structure of PlayerData should be consistent between players, but values can be different.
	* Creating test data like so posts the corresponding OnPlayerDataUpdated events and allows creators to verify that their world handles data updates between multiple players correctly.
	* The remote player's data is randomized every time you click the button.

The data for PlayerData can be found in the root of your project (next to the Assets folder, not inside of it) in `<root>/ClientSimStorage/PlayerData`.

---

## Document: playerObject-editor.md

Path: /worlds/clientsim/playerObject-editor.md
# PlayerObject Editor

ClientSim can simulate how PlayerObjects work. When entering play mode, PlayerObjects will be spawned in, and their synced properties restored.

## Usage

[IMAGE: ClientSim PlayerObject Inspector]

When you enter play mode, ClientSim spawns PlayerObjects and restores their persistent properties. Select any PlayerObject in your [Hierarchy window](https://docs.unity3d.com/Manual/Hierarchy.html) to see its `ClientSimNetworkingView` and `ClientSimNetworkIdHolder` components. 

The `ClientSimNetworkIdHolder` component shows the names and values of a component's synced properties.

1. **Network Id**: The network ID of the game object.
    - This property is filled in just before Unity loads the scene. The scene will not run if it has network ID issues.
2. **Network Components**: A list of saved components on this game object.
    - This property contains all the persisted data of this object.

The data used by ClientSim for PlayerObjects is stored in your project at `projectName/ClientSimStorage/PlayerObjects/PlayerObjects_#_SceneName.json`. You can find this file using your standard file browser.


---

## Document: architecture.md

Path: /worlds/clientsim/systems/architecture.md
# Architecture

The architecture of ClientSim has a focus on small components with an event based observer pattern, mixed with manual dependency injection where each class is initialized only with the dependencies it needs. The included player controller is based on generic dependency providers, which allows for the eventual extension to using VR without rewriting the core systems.

## Observer Pattern

ClientSim uses the observer pattern to send events within the system that anything can listen to without knowing what handles them. Events help decouple the different systems, improving testability as one system does not need to directly depend on another just to send messages when something happens. See [EventDispatcher](runtime/event-dispatcher.md) for specific details.

## Dependency Injection

ClientSim’s architecture uses a manually-handled dependency injection. On creation of a system, all dependencies are passed to it, either through its constructor or through an initialization method. Dependencies are structured as providers, and must extend an interface that declares what methods it provides. When a class needs a specific item, it depends on the provider interface instead of the class that implements it. This allows for different implementations of the provider without the dependent code needing to change. The provider pattern allows for dependencies to easily be mocked in tests.

---

## Document: editor-runtime-linker.md

Path: /worlds/clientsim/systems/editor/editor-runtime-linker.md
# Editor Runtime Linker

This system links and unlinks, on enter and exit playmode, the Editor only hooks in the [ClientSim Menu](../runtime/menu.md) for checking if settings are invalid and a method to open the [ClientSim Settings Window](settings-window.md).

---

## Document: helper-editors.md

Path: /worlds/clientsim/systems/editor/helper-editors.md
# Helper Editors

Some of the ClientSim SDK Helper components have specialized editors that offer insight into the VRC component.

### SyncableEditorHelper
* Provides helper method to display the current owner of an IClientSimSyncable. This is a dropdown selector allowing you to change the current owner of the object.

### ObjectSyncHelperEditor
* Displayed on ObjectSyncHelper
* Shows the owner selector dropdown

### ObjectPoolHelperEditor
* Displayed on ObjectPoolHelper
* Shows the owner selector dropdown

### UdonHelperEditor
* Displayed on UdonHelper
* Shows the owner selector dropdown
* Displays an editor for all public variables in the Udon Program
* Displays buttons to SendCustomEvent for each exported custom event in the Udon Program

### SpatialAudioHelperEditor
* Display nothing instead of ONSP audio’s editor


---

## Document: index.md

Path: /worlds/clientsim/systems/editor/index.md
# Editor

These systems help set things up in the Unity Editor.

---

## Document: settings-window.md

Path: /worlds/clientsim/systems/editor/settings-window.md
# Settings Window

The Settings window displays all the [ClientSim Settings](../runtime/settings.md) that can be edited. Some of these values cannot be changed at runtime. There is also a button to spawn remote players and a text field to give those remote players a custom name.
The Settings window can be opened through the “VRChat SDK/Utilities/ClientSim” option.

## Project Setting Warnings

If the Unity Project Settings do not match what is needed to run ClientSim, warnings will display for each project setting that is invalid. 

## Project Settings Setup

ClientSim requires specific Unity Project settings to run properly. These settings are not default for a project and require action from the user to modify. The ClientSim Settings Window will display the current incorrect project settings with buttons to update the project to the correct setting. This behaviour differs from CyanEmu, which on every assembly reload would automatically force update project settings.

### Input Manager settings are incorrect
ClientSim requires the new Unity Input System. Upon importing this package, it will ask the user to enable it and restart Unity. Neither option in this dialog is the correct setting for ClientSim and the user must enable both old input and new input. Clicking the “Do it!” button in the settings window will set the correct input and force a Unity restart.

### Input Axes differ from VRChat’s
While not used within ClientSim, this is helpful for users to test getting input within Udon Programs.

### Audio Spatializer not set
ClientSim depends on the Oculus Audio Spatializer.

### Project Layers and Collision Matrix not set
The user must open the VRChat Build Control Panel to properly set this.

---

## Document: index.md

Path: /worlds/clientsim/systems/index.md
# Systems

This documentation includes details on how the systems within ClientSim work if you'd like to understand them better, troubleshoot them or contribute to this Project! Choose a topic on the left to get started.

---

## Document: blacklist-manager.md

Path: /worlds/clientsim/systems/runtime/blacklist-manager.md
# Blacklist Manager
The BlacklistManager is an interface into Udon’s blacklist system. Its only job is to add an object’s hierarchy into the blacklist. This is used when spawning players through the [PlayerManager](player-manager.md) as well as spawning the ClientSim system itself.


---

## Document: event-dispatcher.md

Path: /worlds/clientsim/systems/runtime/event-dispatcher.md
# Event Dispatcher and Events

The EventDispatcher is responsible for notifying other systems when specific events happen within ClientSim. A behaviour can subscribe to an event type or send an event of specific type to all of ClientSim without knowing what will handle it. The EventDispatcher is just a collection of event types paired with event handlers. This method decouples the different systems in ClientSim without needing to create a direct dependency. All events sent must extend the IClientSimEvent interface, but can contain any data needed with the event.

---

## Document: helpers.md

Path: /worlds/clientsim/systems/runtime/helpers.md
# VRCSDK Helpers

The Helper components are added to an object to help with handling the behavior of VRC SDK components. The role of these components remains the same compared to CyanEmu and Phase 2, although some logic not specific to the function of the object itself has been stripped out. As an example, in CyanEmu the CyanEmuPickupHelper script handled the logic for holding pickups. Now this behavior has been moved outside the pickup helper class, and into the pickup management system. The PickupHelper code now only provides data for how the PlayerHand should handle the pickup.

Helper classes may also extend interfaces that are used in ClientSim. There are two categories of interfaces: [Usables](#usable-interfaces) and [Handlers](#handler-interfaces). 

## Usable Interfaces

Usable interfaces normally end in “able”, and represent items that can be used somehow within ClientSim. They provide information on how they can be used, but do not include the methods to use them.

| Name                       | Description                                                      |
|----------------------------|------------------------------------------------------------------|
| IClientSimInteractable     | Represents an object that can be interacted with                 |
| IClientSimPickupable       | Represents an object that can be picked up, Extends Interactable |
| IClientSimStation          | Represents an object that the player can use to sit              |
| IClientSimSyncable         | Represents an object that can have an owner                      |
| IClientSimPositionSyncable | Represents an object that syncs its position, Extends Syncable   |

## Handler Interfaces

Using these two interface types, the Helper classes are ways of wrapping VRChat SDK component information to provide it to ClientSim.

| Name                       | Description                                                      |
|----------------------------|------------------------------------------------------------------|
| PositionSyncedHelperBase   | Helper for VRCObjectSync,  Extends PositionSyncedHelperBase. Syncable, PositionSyncable, RespawnHandler |
| ObjectSyncHelper| Helper for VRCObjectSync, Extends PositionSyncedHelperBase. Syncable, PositionSyncable, RespawnHandler |
| UdonHelper          | Helper for UdonBehaviour, Extends PositionSyncedHelperBase. Syncable, PositionSyncable, RespawnHandler, Interactable, PickupHandler, StationHandler, SyncableHandler |
| PickupHelper     | Helper for VRCPickup. Pickupable |
| StationHelper | Helper for VRCStation. Implements IClientSimStation |
| ObjectPoolHelper| Helper for VRCObjectPool. Syncable |
| CombatSystemHelper | Helper for Udon CombatSetup. Implements IVRC_Destructible. Helper component is added to the player object directly when initialized. |
| SpatialAudioHelper | Helper for VRCSpatialAudioSource |

---

## Document: highlight-manager.md

Path: /worlds/clientsim/systems/runtime/highlight-manager.md
# HighlightManager

The HighlightManager will take an object and display an outline highlight effect for that object. This system wraps VRChat’s HighlightFX class. HighlightFX only takes a single renderer, whereas the HighlightManager takes a GameObject. Matching how VRChat handles highlighting objects, all renderers on the object and on its children are used for highlighting. Renderers that are disabled, have a null mesh, or are part of a static batch are ignored. If an object has no valid renderers, then a Highlight Proxy is used based on the first collider on the object. The Highlight Proxy will copy the transform values of the original mesh and also apply the collider size and scale to make it appear that the collider is being highlighted. The HighlightManager is used to visualize the results from the [PlayerRaycaster](player.md#playerraycaster) system. There is no set limit to the number of objects that can be highlighted, but only 2 objects are expected to be highlighted at once through ClientSim, one object per player hand. The HighlightManager links to the VRCSDK API for InputManager.EnableObjectHighlight. This hook only takes in renderers though and does not go through the full steps of finding children objects and creating proxies. 

:::note
The HighlightManager currently shows only a preview for how the object will look on Quest. A style matching Windows systems is forthcoming.
:::

---

## Document: index.md

Path: /worlds/clientsim/systems/runtime/index.md
# Runtime Systems

These systems help simulate things that happen at Runtime in VRChat worlds.

---

## Document: input.md

Path: /worlds/clientsim/systems/runtime/input.md
# Input

In ClientSim, all input calls are in one class to handle input and send events. The ClientSimInputManager uses the new Input System, allowing for event-driven input. It uses the PlayerInput component to gain access to the specific input events based on the Input Bindings displayed below. Since the new Unity Input System package is not included by default, and Unity requires a special setting to enable, all references to the Input System are wrapped in define conditions, which prevents errors when importing into new projects.

## Input Events

Similar to the [EventDispatcher](event-dispatcher.md), the InputManager also has its own Events that different systems can listen to directly. These events are separated from the EventDispatcher itself because all input events have similar parameters and also has input values that are not broadcasted through events but require the listening system to poll for updated axis values.

## Input Bindings

The Input System also allows for different bindings for various control schemes. See below for the included bindings: KeyboardMouse, Gamepad, and Experimental XR Controller bindings. Note that XR input bindings within the InputSystem are very limited in Unity 2019. The InputManager will need to be expanded to properly support various VR Controllers


## UdonInput

The UdonInput system is part of the InputManager Prefab, which subscribes to the proper events in the InputManager and also polls for updates on movement and look-based inputs. Due to the timing of when Unity sends input events, and when Udon should receive input events, all button-based input is queued and processed later in the frame at the same time as movement and look-based input. This queuing and processing allows input events to happen after Udon’s update method is called, similar to how it is in VRChat.

---

## Document: interactive-layer-provider.md

Path: /worlds/clientsim/systems/runtime/interactive-layer-provider.md
# InteractiveLayerProvider

The InteractiveLayerProvider simply listens to menu open state events and provides a layer mask for which layers are currently interactive. When the menu is open, only the UI and UIMenu layers are interactive. When the menu is closed, all other layers, excluding MirrorReflection, are interactive. InteractiveLayerProvider is used by [Raycasters](player.md#raycaster) and the [ClientSimInputModule](input.md).


---

## Document: main.md

Path: /worlds/clientsim/systems/runtime/main.md
# Client Sim Main

ClientSimMain is the central point of ClientSim that handles initialization and destruction of ClientSim. It is contained in the ClientSimSystem prefab. On creation, all core systems will be initialized with their dependencies. This system also maintains all the implementations of the VRCSDK hooks to link VRC components to the ClientSim Helpers. ClientSimMain is a singleton to ensure only one instance is running at a time and to help easily pass information from Editor Windows and Tests. None of the runtime systems within ClientSim depend on ClientSimMain being a singleton.

[IMAGE: ClientSimSystem Hierarchy]

---

## Document: menu.md

Path: /worlds/clientsim/systems/runtime/menu.md
# Client Sim Menu

The ClientSimMenu has four pages that can be displayed depending on the situation. The menu is now positioned in world space instead of being an overlay to the camera. It will render on top of everything to ensure players can use the menu.

## Warning Page

[IMAGE: Warning]

The Warning page will be displayed every time ClientSim starts. This page informs the user that ClientSim is not the same as VRChat, and there will be differences. It only has one button, which the user must press to dismiss the page and close the menu.

## Pause Page

[IMAGE: Warning]

The Pause page is displayed whenever the user opens the menu after accepting the Warning page. This page has three sections: Actions, Player Info, and Settings.

## Actions

The actions section contains four buttons:
1. Close Menu - Close the menu and allow player movement
2. Respawn - Close the menu and teleport the player to the spawn point
3. Settings Window - Open the ClientSim [Settings Window](../editor/settings-window.md)
4. Exit Playmode - Exit Play mode and go back to Edit mode.

## Player Info

The Player Info section contains info regarding the local player.
1. Player Name
2. Player ID
3. Is the local player the master
4. Is the local player the instance owner
5. A button to spawn remote players for testing

## Settings

The Settings section provides options to change the current ClientSim Runtime Settings. Changing these will save the values even after Playmode ends.
* **Show Tooltips** - Toggle the display of interaction tooltips.
* **Desktop Reticle** - Toggle the desktop reticle in the center of the screen. This does not disable the UI pointer if hovering over a UI interactive object.
* **Invert Mouse Look** - Toggle whether the mouse Y should be inverted.
* **Console Logging** - Toggle whether debug information should be logged to the console.
* **Player Height** - A slider to set the player’s height. Default value is 1.9 Unity units tall. The slider is limited between 0.2 and 4 units. If the value in the ClientSim Unity Settings Window is set, then the height can be overridden up to 80 units. Toggling the menu will clamp the max value to keep the slider usable without exiting playmode. Note that PlayerHeight is different from TrackingScale, although the values are related.

## Delay Start Page

[IMAGE: Delay]

The Delay Start page is displayed whenever the [ClientSim Settings](settings.md) has a non zero value for how long ClientSim should be delayed before starting. This page will dismiss automatically when ClientSim starts. If the player controller was spawned, the Warning page will then be displayed. The user cannot close out of this page and must wait the duration or exit playmode.

## Invalid Settings Page

[IMAGE: Invalid Settings]

The Invalid Settings page is displayed when the user has Unity Project Settings that are not set up to use ClientSim. This can happen when ClientSim has just imported, or if the user modifies a setting that ClientSim relies on. When this is displayed, the [Settings Window](../editor/settings-window.md) is forced to be displayed so that users can click the buttons needed to modify project settings. In the case the player does not have the correct Unity Input settings, the buttons on the menu will do nothing. There is no way to get past this page except to exit playmode and correct the invalid settings.

---

## Document: player-manager.md

Path: /worlds/clientsim/systems/runtime/player-manager.md
# Player Manager
The PlayerManager system is responsible for VRCPlayerApi data during ClientSim’s runtime. This system handles creating and destroying players, managing who is the current master, and sending the related [Events](event-dispatcher.md) such as OnPlayerJoin, OnPlayerLeft, and OnNewMaster. The PlayerManager is similar to how it was in CyanEmu, but this time is an instanced class rather than static. Most of the VRCPlayerApi SDK hooks are linked to static functions within this class.

---

## Document: player-spawner.md

Path: /worlds/clientsim/systems/runtime/player-spawner.md
# Player Spawner
The PlayerSpawner system is responsible for spawning and initializing local and remote players. Players are spawned from a prefab, set to the location of a spawn point provided by the [SceneManager](scene-manager.md), and then initialized through the [PlayerManager](player-manager.md).

---

## Document: player.md

Path: /worlds/clientsim/systems/runtime/player.md
# Player

The ClientSim representation of a player has been split into many components compared to CyanEmu. Each component handles a different aspect of the player. Below you can see the hierarchy of both the Local and Remote player prefabs.
[IMAGE: Local Player Hierarchy][IMAGE: Remote Player Hierarchy]

## ClientSimPlayer

The ClientSimPlayer class is the container that holds all the systems for the player. While both local and remote players have a ClientSimPlayer, it is only initialized for the local player. All systems for the remote player are left blank, other than the [Avatar}(#avatar) and VRCPlayerApi changeable data. The ClientSimPlayer is the first component on the top level object on the Player prefabs. In the inspector, you can view and modify VRCPlayerApi data such as Locomotion Settings and Audio Settings at runtime.

## TrackingProvider

The TrackingProvider interface is a generic way to define how tracking data for the player should be controlled. The abstract TrackingProviderBase class provides data on the head, hands, and playspace position, and also determines the player’s current stance based on the head height. The tracking provider can be scaled to move the player camera up or down, helping test various player avatar scenarios. It will listen to PlayerHeightUpdate events and calculate a new tracking scale based on the requested player height. The default avatar height is 1.9, which represents TrackingScale 1. Since this class is abstract, it must be extended to be used in ClientSim. Currently only the DesktopTrackingProvider is included in ClientSim. Implementing VR in ClientSim would need a new VRTrackingProvider. The tracking provider is expected to be a child of the [PlayerController](#playercontroller), but will need to be reconsidered when implementing VR as playspace x/z offset is not applied to the player controller.

### DesktopTrackingProvider

Currently the only implemented TrackingProvider for ClientSim. This tracking provider locks the hand positions relative to the camera. Camera height is modified based on [Crouch and Prone Input Events](input.md). On every frame, this tracking provider checks for look input changes and updates the Camera’s x rotation (up/down). If the player is sitting in a station, then the head y rotation is unlocked to allow the player to look left and right, up to 90 degrees off the playspace rotation.

## PlayerController

The PlayerController now only controls the movement of the player. In CyanEmu, the PlayerController class contained everything related to the player. Now these systems have been split off, making the PlayerController focused on simply handling the player’s movement. Every frame, the controller will check for movement input as well as [TrackingProvider](#trackingprovider) stance to know how much the player should move that frame.

## PlayerStationManager

The PlayerStationManager manages how players interact with stations. It stores the current station the player is in, as well if the player is locked to the station. While locked to a station, at the end of the frame, for all Update, LateUpdate, and FixedUpdate methods, the [PlayerController’s](#playercontroller) position is updated to the station’s. This happens at the end of the frame to ensure that any other script modifying the station’s position happens first. 

## InteractManager

The InteractManager is responsible for determining if a given GameObject can be interacted with and performing the interaction. It calculates the current distance the player can interact with using the [TrackingProvider’s](#trackingprovider) current TrackingScale and each Interact’s proximity value.

## Raycaster

ClientSim interact detection is handled through the Raycasters. This system will search for Interactables based on a provided ray used in Physics.Raycast. The [InteractiveLayerProvider](interactive-layer-provider.md) is used to know what layers to consider when raycasting. All the hit objects are then filtered based on the components found. Objects with UIShape are always prioritized first. The InteractManager is used to determine the components on the object which can be interacted with. For each raycast, a RaycastResult is returned. This contains information about the ray, the object hit, and the type of interactable, if there is one.

### RayProvider
The Raycaster uses a RayProvider to know what direction and origin to raycast. RayProviders are a generic way to supply the ray without knowing exact detail. ClientSim implements two RayProviders:

#### CameraRayProvider
Given a camera and the current mouse position, create a ray that goes through the mouse from the camera. This is the RayProvider used when TrackingProvider is set to not VR.

#### TransformRayProvider
Given a transform, create a Ray based on the position of the transform and the forward direction. This is used to raycast from the hands when the TrackingProvider is set to VR.

## PlayerRaycaster

The PlayerRaycaster is responsible for searching the world for interacts and sending events based on what it finds. It will also update the [PlayerHand](#playerhand) system for both the left and right hands. When initialized, the PlayerRaycaster will create two [Raycasters](#raycaster), one for the left and another for the right hand. If the TrackingProvider is not VR (is desktop), then the right hand uses a Raycaster with a mouse based [RayProvider](#rayprovider). The left hand is left uninitialized as it will never be used when not in VR. If the [TrackingProvider](#trackingprovider) is in VR, then the left and right Raycasters are initialized with a transform-based ray provider using the TrackingProvider’s hand transforms. Every frame, both hand Raycaster systems are updated to search for Interactables and the results are sent through the [EventDispatcher](event-dispatcher.md). The last found interact is saved for each hand as the hovered interact. If a hovered interact is a Pickupable, that Pickupable is set as the hovered Pickupable for the given PlayerHand. If the Use Input action occurs for a given hand while hovering over an interact, then the hovered object will be interacted with.

## PlayerHand

The PlayerHand system is responsible for managing Pickupable objects. The [PlayerRaycaster](#playerraycaster) will set the current hovered pickup. Then the PlayerHand will listen for the Grab Input Events on when to pickup the hovered Pickupable. PlayerHand will also listen to Use and Drop events to perform actions on the currently held pickup. If the pickup is kinematic, then the position of the pickup will be directly set every frame to match the PlayerHand’s rigidbody transform. If the pickup is non kinematic, it will be attached to the PlayerHand’s rigidbody using a fixed joint. When holding a pickup in the right hand, the pickup can be manipulated using the different Manipulate bindings. 

## PlayerAvatarManager

The PlayerAvatarManager manages items related to the player’s avatar. Both local and remote players have an Avatar Manager. The avatar for all players is the VRChat Default Robot. The manager is responsible for providing avatar information to the VRCPlayerApi. GetBonePosition and GetBoneRotation are implemented here as wrappers over Animator.GetBoneTransform. The local player’s avatar manager is the only one that is properly initialized, which allows it to listen to [TrackingScale](#trackingprovider) change [Events](event-dispatcher.md), which then update the scale of the avatar to match the new tracking scale.

## Reticle

The ClientSimReticle system is responsible for displaying a reticle icon in the center of Unity Game Window. This system should only be available for [DesktopTrackingProvider](#desktoptrackingprovider). The reticle can be disabled through the settings menu. In addition to the center reticle, whenever the [PlayerRaycaster](#playerraycaster) hovers over an object with a UIShape, it will display a pointer over the mouse position. This pointer is not limited to the center of the screen and will still be displayed when the mouse is released. The location of the mouse is provided by [ClientSimBaseInput](input.md).


---

## Document: runtime-loader.md

Path: /worlds/clientsim/systems/runtime/runtime-loader.md
# RuntimeLoader
The RuntimeLoader is a static class responsible for starting ClientSim on entering playmode. It uses the InitializeOnLoad Unity hook to check the settings instance to see if ClientSim should start, and creates an instance of ClientSimMain. This class also handles deleting editor-only objects in the scene. In order to allow for testability of ClientSim, a few methods are provided to set test settings and event dispatcher overrides.

---

## Document: scene-manager.md

Path: /worlds/clientsim/systems/runtime/scene-manager.md
# Scene Manager
The SceneManager system is mainly a wrapper for the VRC_SceneDescriptor. It provides an interface into VRC scene details such as getting a spawn point and respawn height. This system also handles copying over reference camera settings to the player camera.

---

## Document: settings.md

Path: /worlds/clientsim/systems/runtime/settings.md
# Settings

The ClientSim Settings are not a system, but data on how to run ClientSim.
### Enable ClientSim
Should ClientSim be enabled when entering playmode? ClientSim is forced disabled when uploading worlds.

### Enable Console Logging
Should Debug information be logged to the console?

### Remove “EditorOnly”
On enter playmode, should all objects tagged with “EditorOnly” be deleted?

### Set Target FrameRate
Should ClientSim set the Application target framerate?

### Target FrameRate
The expected framerate for Unity while in playmode. This will set both Application.TargetFramerate and the FixedTimeDelta.

### Startup Delay
How long should ClientSim wait before starting and initializing Udon? Use this as a way to simulate long world loading times and verify Unity component behavior.

### Spawn Player Controller
Spawn a controllable player when starting ClientSim. If disabled, a local player is still created to prevent Udon Programs crashing.

### Show Desktop Reticle
Should the desktop reticle be displayed or not?

### Show Tooltips
Show tooltips above interactable objects

### Invert Mouse Look
Should the mouse Y be inverted

### Player Height
The height of the player in unity units. This is clamped between 0.2 and 80.

### Local Player Name
What is the name of the local player, used for VRCPlayerApi.displayName

### Local Player Is Master
When set to false, a remote player is spawned and set as master.

### Is Instance Owner
Is the local player the instance owner?


---

## Document: synced-object-manager.md

Path: /worlds/clientsim/systems/runtime/synced-object-manager.md
# SyncedObjectManager

The SyncedObjectManager keeps track of all initialized synced objects (IClientSimSyncable) in the scene. These synced objects are put into two lists: one list for all synced objects, and another for all position-synced objects. The SyncedObjectManager currently has only two main functions. The first is to check all position-synced objects to verify they are above the respawn height. If they fall below the respawn height, they are respawned to their start position or destroyed, depending on the settings in the [SceneManager](scene-manager.md). The second function is to ensure objects have the correct owners when a player leaves. The manager listens for the OnPlayerLeft [Event](event-dispatcher.md), goes through all objects to check if that player was the  owner, and then sets those objects to be owned by the master player instead. This ownership transfer happens before Udon Programs are notified of the player leaving.


VRC.SDK3.ClientSim.ClientSimSyncedObjectManager

---

## Document: tooltip-manager.md

Path: /worlds/clientsim/systems/runtime/tooltip-manager.md
# TooltipManager

The TooltipManager will display text in the world above a given interactable object. Tooltips in ClientSim only display text, unlike VRChat which also displays an icon of the respective button needed to use the interact. In SDK3, it appears that the option to set a tooltip location for an interactable is ignored. Tooltips always display at the top center of the first collider on the interactable object. There is no set limit to the number of tooltips that can be displayed, but only 2 tooltips are expected through ClientSim, one per player hand. Displaying tooltips can be disabled in the [ClientSimSettings](settings.md).

---

## Document: udon-manager.md

Path: /worlds/clientsim/systems/runtime/udon-manager.md
# UdonManager

The UdonManager keeps track of all initialized UdonBehaviours in the scene. Note that with the VRCSDK, an UdonBehaviour will not initialize if it does not have a program. This means that legacy position-synced UdonBehaviours without programs are not tracked, even with the SyncedObjectManager. The UdonManager has two main roles. The first is to notify all Udon Helpers when ClientSim has finished initializing, which allows UdonBehaviours to start. The second is to listen for certain ClientSim [Events](event-dispatcher.md) to forward to all UdonBehaviours. Currently the UdonManager only forwards the following events:
* OnPlayerJoined
* OnPlayerLeft
* OnPlayerRespawn


---

## Document: unity-event-system.md

Path: /worlds/clientsim/systems/runtime/unity-event-system.md
# Unity Event System

ClientSim uses two classes to translate actions into Unity’s EventSystem. These classes decouple Unity’s old input system into values based on ClientSim’s current bindings and match VRChat’s interactive UI object filtering. 

## BaseInput

The ClientSimBaseInput system extends Unity’s BaseInput class. Unity’s BaseInput is responsible for passing mouse position and button input into the EventSystem. The ClientSim BaseInput system overrides these methods to instead pass values based on the current ClientSim input bindings and last [PlayerRaycaster](player.md#raycaster) results. Mouse input is replaced with the current binding’s [Use Input](input.md). Since Use input is a handed action, only the value of the last activated hand is passed as mouse input. The mouse position sent to the Event System ignores the actual mouse position, and instead calculates the screen position of the last interact raycast. Using the raycast position abstracts out the real mouse’s position, allowing Desktop and VR to use Unity UI through the same system.
The BaseInput system is also responsible for providing the current mouse position to the rest of ClientSim. It controls if the mouse pointer is hidden and locked to the center of the screen, or visible and free to move. This mouse position is used for displaying the [Desktop Reticle](player.md#reticle) as well as using the mouse to create the ray direction for [DesktopRayProvider](player.md#rayprovider).

## InputModule

The ClientSimInputModule extends Unity’s StandaloneInputModule. This system processes Unity mouse events and filters out any UI objects that are not currently interactable. UI objects are interactable when all of the following conditions have been met:

1. The [PlayerRaycaster](player.md#playerraycaster) last hit an object with a VRC_UIShape component. This data is provided through ClientSimBaseInput.
2. The UI object has a UIShape component in its parent
3. The layer of the parent UIShape object is on a currently interactive layer. Interactive layers are determined by the [InteractiveLayerProvider](interactive-layer-provider.md).
4. The hit point of the UI Object raycast is contained within the collider of the UIShape. If any of those conditions fail, then the UI cannot be interacted with.

---

## Document: script-execution-order.md

Path: /worlds/clientsim/systems/script-execution-order.md
# Script Execution Order

| Execution Order | System Name          | Description                                                                                                                                                    |
|-----------------|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| -Infinity       | UnityInputSystem     | Unity InputSystem updates before all MonoBehaviours. Input from user buttons are sent to ClientSimInput and events are dispatched.                             |
| -3000           | TrackingProvider     | Input is checked to update the TrackignProvider. For example: Desktop head X rotation.                                                                         |
| -3000           | PlayerController     | Update Player position before raycasting.                                                                                                                      |
| -2000           | PlayerRaycaster      | Update the position of the PlayerHands to TrackingProvider hand data. Raycast to find interactables in the world. This must happen before EventSystems update. |
| -1000           | Unity Event System   | Send mouse events to interact with UI. Order cannot be changed.                                                                                                |
| 0               | ClientSimBehaviours  |                                                                                                                                                                |
| 0               | UdonBehaviour        | Send Update Events to Udon Programs.                                                                                                                           |
| 1               | UdonInput            | This must happen after UdonBehaviour.Update to ensure proper event order.                                                                                      |
| 10000           | ClientSimBaseInput   | Update current frame tick for Input Events. Only needed to ensure tests and playmode act the same relating to when Input is processed.                         |
| 30000           | PlayerStationManager | Update the position of players on a station as late as possible so all other scripts have had time to evaluate first.                                          |
| 30001           | TooltipManager       | Update the position of Tooltip visuals after finalizing the player's position.                                                                                 |
| 31000           | PostLateUpdater      | VRChat's PostLateUpdate event sent to UdonBehaviours.                                                                                                          |

---

## Document: index.md

Path: /worlds/components/index.md
---
title: "Scene Components"
hidden: false
createdAt: "2017-07-11T20:33:31.318Z"
updatedAt: "2021-10-20T20:03:08.484Z"
---

Every Unity scene you'd like to bring into VRChat requires a [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor) component. The VRChat Worlds SDK contains various other components to allow your users to interact with your world, pick up objects, see themselves in a mirror, and more.

Please consult [Allowlisted World Components](/worlds/whitelisted-world-components) for a full list of components available in the VRChat SDK.

| Parameter | Description |
| --- | --- |
| [TextMesh Pro](/worlds/components/textmeshpro) | Used to display high-quality text. |
| [VRC_AvatarPedestal](/worlds/components/vrc_avatarpedestal) | Used to display and / or switch to an avatar. |
| [VRC_MirrorReflection](/worlds/components/vrc_mirrorreflection) | Used to create a mirror in VRChat. |
| [VRC_ObjectSync](/worlds/components/vrc_objectsync) | Syncs the transform of a GameObject with all players in the instance. |
| [VRC_Pickup](/worlds/components/vrc_pickup) | Allows objects to be picked up, held and used by players. |
| [VRC_PortalMarker](/worlds/components/vrc_portalmarker) | Creates portals to other VRChat worlds. |
| [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor) | Describes your VRChat world. Required for every Unity scene you'd like to use as a VRChat world. |
| [VRC_SpatialAudioSource](/worlds/components/vrc_spatialaudiosource) | Adds 3D spatialization to a Unity AudioSource. Usually automatically added with AudioSource components in editor. |
| [VRC_Station](/worlds/components/vrc_station) | Allow users to sit down. |
| [VRC_UIShape](/worlds/components/vrc_uishape) | Allow users to interact with Unity's UI system. |


---

## Document: index.md

Path: /worlds/components/textmeshpro/index.md
# TextMesh Pro

[TextMesh Pro](https://docs.unity3d.com/Packages/com.unity.textmeshpro@4.0/manual/index.html) is a tool for displaying high-quality 2D and 3D text in Unity and VRChat worlds. Currently, the following components are exposed to Udon:

- [TMP Text](./tmp_text) (TextMeshProUGUI and TextMeshPro)
- [TMP Dropdown](./tmp_dropdown)
- [TMP InputField](./tmp_inputfield)

You can also user other TextMeshPro components from VRChat's [allowlisted world components](/worlds/whitelisted-world-components#text-mesh-pro), but they aren't available in Udon. 

:::caution

Avoid using Unity's built-in [text components](https://docs.unity3d.com/2018.1/Documentation/ScriptReference/UI.Text.html).

- Unity's built-in text causes aliasing and is limited to 16250 characters.
- TextMesh Pro has better text rendering, [rich text](http://digitalnativestudios.com/textmeshpro/docs/rich-text/), and doesn't have a character limit.

:::

## Installation

The TextMesh Pro package is included in the Unity editor. When you use it for the first time in a project, Unity will prompt you to add essential files to your "Assets" folder. 
For example, creating any TMP component will show the following prompt:

[IMAGE: TextMesh Pro prompt for importing essential assets.]

TextMesh Pro's assets can also be imported by selecting "Window" > "TextMeshPro" > "Import TMP Essential Resources".

## Importing fonts

TextMesh Pro includes a default font called "LiberationSans SDF." This allows you to get started with TextMesh Pro right away.

You can import your own font into TextMesh Pro with the [font asset creator](https://docs.unity3d.com/Packages/com.unity.textmeshpro@4.0/manual/FontAssetsCreator.html). This generated a font asset that you can use in your TextMesh Pro components.

<div class="video-container">
    <iframe src="https://www.youtube.com/embed/qzJNIGCFFtY?si=JsAJMtzdp3KC-8tJ" title="TextMesh Pro - Font Asset Creation" frameborder="0" allow="encrypted-media; gyroscope; web-share" allowfullscreen></iframe>
</div>

:::tip Optimize your font assets!

Font assets increase the download size and RAM requirements of your world. When importing fonts, reduce your atlas resolution and don't import unused characters.

:::

## Using VRChat's built-in fallback font

When you [import a font](https://docs.unity3d.com/Packages/com.unity.textmeshpro@4.0/manual/FontAssetsCreator.html) into TextMeshPro, it usually won't include every Unicode character. If your world contains strings or user names that aren't in your font asset, TextMeshPro won't be able to render them. For example, instead of "何？！", you may see "□□□".

To use VRChat's TextMeshPro Fallback fonts, go to "Project Settings" > "TextMeshPro settings" remove all "Fallback Font Assets."

This allows your TextMeshPro components to use VRChat's fallback fonts. When you visit your world in VRChat, almost all Unicode characters are rendered correctly.

[IMAGE: When configured correctly, missing Unicode characters will appear as boxes in the Unity editor, but appear correctly after uploading your world to VRChat.]

## See also

- [TextMeshPro documentation](https://docs.unity3d.com/Packages/com.unity.textmeshpro@4.0/api/TMPro.html) (Unity scripting API)
- [Text in Unity - Working with TextMesh Pro](https://learn.microsoft.com/en-us/windows/mixed-reality/develop/unity/text-in-unity) (Microsoft Learn)

---

## Document: tmp_dropdown.md

Path: /worlds/components/textmeshpro/tmp_dropdown.md
# TMP Dropdown

[`TMP_Dropdown`](https://docs.unity3d.com/Packages/com.unity.textmeshpro@4.0/api/TMPro.TMP_Dropdown.html) is a standard dropdown that presents a list of options when clicked, of which one can be chosen. It should always be used instead of Unity's legacy `UI.Dropdown` component.

## Properties 

| Property | Type | Description |
|----------|------|-------------|
| value    | int  | Gets or sets the index of the selected element in the dropdown. |
| IsExpanded| bool | Gets a value indicating whether the dropdown is expanded. |
| enable| bool | Enables/disables the attached component |

## Methods

| Function              | Input        | Output | Description                                                                                                                                                                                                                                                           |
| --------------------- | ------------ | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| SetValueWithoutNotify | int          | void   | Sets the value of the input field without invoking `onValueChanged`.                                                                                                                                                                                                  |
| RefreshShownValue     |              |        | Refreshes the text and image (if available) of the currently selected option.                                                                                                                                                                                         |
| ClearOptions          |              |        | Removes all options from the dropdown.                                                                                                                                                                                                                                |
| Show                  |              |        | Shows the dropdown. Plan for dropdown scrolling to ensure dropdown is contained within screen. [TMP assumes the Canvas is the screen that the dropdown must be kept inside.](https://docs.unity3d.com/Packages/com.unity.textmeshpro@2.0/api/TMPro.TMP_Dropdown.html) |
| Hide                  |              |        | Hides the dropdown list.                                                                                                                                                                                                                                              |

## Related classes

Udon has access to two additional classes related to TMP_Dropdown. 

### VRCTMPDropdownExtension
This class is part of the VRChat SDK. It allows you to add options to your dropdown.

| Function   | Input                           | Output | Description                                                                              |
| ---------- | ------------------------------- | ------ | ---------------------------------------------------------------------------------------- |
| AddOptions | TMP_Dropdown,<br/> string[]     |        | Adds the array of strings to the dropdown.                                               |
| AddOptions | TMP_Dropdown,<br/> sprite[]     |        | Adds the array of sprites to the dropdown.                                               |
| AddOptions | TMP_Dropdown,<br/> OptionData[] |        | Adds the array of [TMP_Dropdown.OptionData](#tmp_dropdownoptiondata) to the dropdown. |

:::note Extension method
In UdonSharp, AddOptions is an [extension method](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods).

Instead of `AddOptions(dropdown, options)`, you can type `dropdown.AddOptions(options)`. Make sure you have the namespace `VRC.SDK3.Components` included in the file.
:::
### TMP_Dropdown.OptionData
This is built into TextMesh Pro. It allows you to add a combination of strings and sprites to a dropdown. 

| Functions  | Input | Output | Description|
|------------|-------|--------|------------|
| Constructor| string |OptionData| Creates an OptionData object with text as the option. |
| Constructor| sprite|OptionData| Creates an OptionData object with a sprite as the option |
| Constructor| string, sprite |OptionData| Creates an OptionData object with text and a sprite as the option |

## How to add sprites to a dropdown

Dropdowns can display a different sprite for each option. You need to set up your dropdown correctly:

1. Add an image to the dropdown.

[IMAGE: Add an image to the dropdown hierarchy, moving the label out of the way - part 1]
[IMAGE: part 2]

2. Add an image to the template.

[IMAGE: Add an image to the template hierarchy, moving the label out of the way - part 1]
[IMAGE: part 2]

3. Add the correct references to `Caption Image` and `Item Image` fields in the dropdown.

[IMAGE: part 2]

4. Success! The dropdown can now display sprites.


---

## Document: tmp_inputfield.md

Path: /worlds/components/textmeshpro/tmp_inputfield.md
# TMP InputField
[`TMP_InputField`](https://docs.unity3d.com/Packages/com.unity.textmeshpro@4.0/api/TMPro.TMP_InputField.html) is an editable text input field. It should always be used instead of Unity's legacy `UI.InputField` component.
## Properties

| Property | Type | Description |
|----------|------|-------------|
| text | string | Gets or sets the value of the input field. |
| isFocused | bool | Gets a value indicating whether the input field currently has focus and is able to process UI events. This field is read-only. |
| readOnly | bool | Gets or sets a value indicating whether the value of the input field is read-only. |
| richText | bool | Gets or sets a value indicating whether rich text editing is allowed. |
| enable| bool | Enables/disables the attached component. |

## Methods

| Function | Input | Output | Description|
|----------|-------|--------|------------|
| SetTextWithoutNotify | string | void | Sets the value of the input field without invoking `onValueChanged`. |


---

## Document: tmp_text.md

Path: /worlds/components/textmeshpro/tmp_text.md
# TMP Text
`TMP_Text` is the base class of two TextMesh Pro components:

- [`TextMeshProUGUI`](https://docs.unity3d.com/Packages/com.unity.textmeshpro@1.1/api/TMPro.TextMeshProUGUI.html) allows you to display text with a [canvas renderer](https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/UICanvas.html).
	- This component is an ideal replacement for the UI.Text component.
	- Change the "Render Mode" of your canvas depending on how you want to display your text.
		- "World Space" allows you to place text anywhere in your world.
		- "Screen Space" allows you to display text directly on the user's screen.
- [`TextMeshPro`](https://docs.unity3d.com/Packages/com.unity.textmeshpro@1.1/api/TMPro.TextMeshPro.html) allows you to display text with a [mesh renderer](https://docs.unity3d.com/Manual/class-MeshRenderer.html).
	- This component does not require a canvas. It's an ideal replacement for the legacy TextMesh components.

# Properties
Use the `TMP_Text` base class to access these properties. Both `TextMeshProUGUI` and `TextMeshPro` inherit from `TMP_Text`.

| Property           | Type | Result |
|--------------------|------|--------|
| text               | String | Accesses the text.|
| isRightToLeftText  | Bool | Gets/sets if the text needs to be displayed right to left. Useful when implementing a variety of languages.|
| fontMaterial       | Material | Gets/sets the font material. Take note that accessing this field will clone the material.|
| fontSharedMaterial | Material | Gets/sets the shared font material. This returns null if this component's FontAsset is null.|
| color              | Color | Gets/sets the color of the text.|
| alpha              | Float | Gets/sets the opacity of the text.|
| fontSize           | Float | Gets/sets the size of the text.|
| enableAutoSizing   | Bool | Gets/sets if the text should try to size itself as big as possible and still be visible within the range of FontSizeMin and FontSizeMax.| 
| fontSizeMin        | Float | The minimum font size if AutoSizing is enabled.|
| fontSizeMax        | Float | The maximum font size if AutoSizing is enabled.|
| horizontalAlignment| HorizontalAlignmentOptions | How the text will be aligned horizontally.|
| verticalAlignment  | VerticalAlignmentOptions | How the text will be aligned vertically.|
| alignment          | TextAlignmentOptions | How the text will be aligned overall.|
| characterSpacing   | Float | The amount of space between characters.|
| wordSpacing        | Float | The amount of space between words.|
| lineSpacing        | Float | The amount of vertical space between text lines.|
| paragraphSpacing   | Float | The amount of vertical space between paragraphs.|
| characterWidthAdjustment| Float | The amount of overlap characters have.|
| enableWordWrapping | Bool | Controls whether words that exceed the available space will be put on a new line.|
| overflowMode       | TextOverflowModes | Controls how the text will be treated if it overflows its available space.|
| richText           | Bool | Gets/sets if [Rich Text](https://docs.unity3d.com/Packages/com.unity.textmeshpro@3.2/manual/RichText.html) is enabled.|
| parseCtrlCharacters| Bool | Enables or Disables parsing of escape characters typed into input text fields, such as `\n`, `\r`, `\t`, or `\\`. |
| firstVisibleCharacter | Int | The first character that should be made visible in conjunction with the Text Overflow Linked mode.|
| maxVisibleCharacters | Int | Controls how many characters are visible from the input.|
| maxVisibleWords    | Int | Controls how many words are visible from the input.|
| maxVisibleLines    | Int | Controls how many lines of text are displayed.|
| enable             | bool | Enables/disables the attached component. |



---

## Document: vrcenablepersistence.md

Path: /worlds/components/vrcenablepersistence.md
---
title: "VRC Enable Persistence"
slug: "vrc_enablepersistence"
---
Add this component to a [PlayerObject](/worlds/udon/persistence/player-object) to persist all of its synced variables, as well as the synced variables of any UdonBehaviours on children of the PlayerObject.

It requires a PlayerObject component on the same game object.

---

## Document: vrc_avatarpedestal.md

Path: /worlds/components/vrc_avatarpedestal.md
# VRC Avatar Pedestal

Displays an avatar and allows users interact with the pedestal to switch into the avatar.

You can find an example in the SDK named [AvatarPedestal](/worlds/examples/udon-example-scene#avatarpedestal).

| Parameter            | Description                                                                   |
|----------------------|-------------------------------------------------------------------------------|
| Blueprint Id         | Blueprint Id of the avatar to be shown                                        |
| Placement(optional)  | Transform to display the avatar on                                            |
| Change Avatar On Use | If set to true,switches the user to the avatar set on the pedestal when used. |
| Scale                | How big or small the avatar should be,only affects the pedestal avatar        |

---

## Document: vrc_mirrorreflection.md

Path: /worlds/components/vrc_mirrorreflection.md
---
title: "VRC Mirror Reflection"
slug: "vrc_mirrorreflection"
hidden: false
createdAt: "2017-07-06T06:10:45.478Z"
updatedAt: "2022-08-17T20:23:01.162Z"
---
This component can be used to create a mirror in your VRChat world.

It requires a [mesh renderer component](https://docs.unity3d.com/Manual/class-MeshRenderer.html) on the same game object. It writes to the `_MainTex` value of the mesh renderer's first material. You can find an example in the [SDK prefabs](/worlds/sdk-prefabs#vrcmirror) called `VRCMirror.prefab`.

| Parameter | Description |
| --- | --- |
| Disable Pixel Lights | Disables real-time pixel shaded point and spot lighting. Pixel shaded lights will fall-back to vertex lighting when this is enabled. |
| Turn Off Mirror Occlusion | Disables occlusion culling on the mirror. Enable this if you see objects flickering in the mirror. |
| Reflect Layers | Only objects on the selected layers will be rendered in the mirror. Objects on the Water layer are never rendered in mirrors. |
| Mirror Resolution | Rendering resolution of the mirror (per eye in VR). Auto renders at the same resolution as the user's HMD or monitor up to the maximum of 2048x2048[^1]. |
| Maximum Antialiasing | The maximum level of MSAA applied to the image rendered in the mirror. Can be overruled by client graphics settings. |
| Custom Shader | The mirror will use this shader instead of the default shader if one is provided. |
| Camera Clear Flags | Specifies the CameraClearFlags that the mirror will use to clear the background before rendering. The default "From Reference Camera" will use the same flags as the camera rendering the mirror plane. |
| Custom Skybox | If "Camera Clear Flags" is set to "Custom Skybox," this skybox will be shown in the mirror. If "Custom Skybox" mode is selected but nothing is provided, the background will be black. |
| Custom Clear Color | If "Camera Clear Flags" is set to "Solid Color," this color will be used as the background. Note that the alpha channel will be respected, so you can use this to clear alpha and use it in a custom shader (e.g., for cutout-style mirrors). |

Mirrors can drastically reduce the framerate of your VRChat world. To avoid this, try the following:
- Keep mirrors off by default. Enable them automatically when users get near, or allow users to enable them manually.
- Don't reflect every layer, or allow users to choose which layers to reflect. ("High quality" and "low quality" mirrors.)
- If your users still experience performance issue, reduce the mirror resolution.

[^1]: Displays with a resolution higher than 2048px suffer from reduced mirror quality. Users can switch their mirror resolution to 'Unlimited' in VRChat's settings. This improves quality, but reduces VRChat's performance.

---

## Document: vrc_objectsync.md

Path: /worlds/components/vrc_objectsync.md
---
title: "VRC Object Sync"
slug: "vrc_objectsync"
hidden: false
createdAt: "2017-07-07T19:28:16.383Z"
updatedAt: "2021-10-20T20:08:39.807Z"
---
The VRC Object Sync component synchronizes the transform of a GameObject with all players in the instance. It synchronizes the object's:

- position
- rotation
- kinematic state (see `SetKinematic`)
- and gravity state (see `SetGravity`).

## Properties

| Parameter | Description |
| --- | --- |
| Allow Collision Ownership Transfer | If checked, ownership of the object will transfer if it collides with another object owned by another player. |
| Force Kinematic On Remote | If checked, the attached rigidbody will be forced into kinematic mode for all non-owning players. |

## Methods

| Name | Summary |
| --- | --- |
| SetKinematic(bool value) | Changes the kinematic state, usually handled by the Rigidbody of the object but controlled here for sync purposes. When the kinematic state is on, this Rigidbody ignores forces, collisions and joints. |
| SetGravity(bool value) | Changes the gravity state, usually handled by the Rigidbody of the object but controlled here for sync purposes. |
| FlagDiscontinuity() | Trigger this when you want to teleport the object - the changes you make this frame will be applied without smoothing. |
| TeleportTo([Transform](https://docs.unity3d.com/ScriptReference/Transform.html) targetLocation) | Moves the object to the specified location. |
| Respawn() | Moves the object back to its original spawn location. |

---

## Document: vrc_pickup.md

Path: /worlds/components/vrc_pickup.md
---
title: "VRC Pickup"
slug: "vrc_pickup"
hidden: false
createdAt: "2017-07-06T00:55:36.747Z"
updatedAt: "2023-05-04T21:43:45.162Z"
---
Allows objects to be picked up, held and used by players.

## Proximity Rules

:::note

All of the rules described in this section also apply to "Interactables", i.e. UdonBehaviours that have an `Interact` event (they will also show a "Proximity" slider in the Inspector).
:::

The "Proximity" value defines from how far away your pickup will be grabbable. It is given in meters, aka. "Unity units", where the side-length of one default Cube equals 1 unit.

There are 2 mechanisms of grabbing where the Proximity value will be in play:

- **Raycast:** If you are far away from a pickup, or you are running in desktop mode, pickups will be highlighted if the "laser" coming out of your hands (in VR) or your head (desktop) intersects the collider on a pickup object. The distance calculation to compare against Proximity is different in VR and Desktop mode:
    - VR: The distance between the origin of the laser (i.e. your hand controllers) and the impact point on the collider, in meters
    - Desktop: The distance between the origin of the laser (i.e. your head or main camera position) minus an "extra reach" value to compensate for being unable to move your hands forward. This is an approximate value that also takes your avatar scale into account ("longer arms"). Since it is subtracted from the distance, it will allow you to grab objects that are technically outside of the "Proximity" range, but could be grabbed by moving your arms while standing in this position in VR.
- **Hover (VR only):** If your hands are close enough to an object, pickups will be highlighted even if a ray in the direction of the UI laser would not intersect the object. This allows more natural "grabbing" of objects. The distance of reach is a sphere centered on your hands with a radius of 0.4 meters times your avatar scale (note that this value is not directly comparable to the "avatar scaling" system available to users, although changing the avatar scale that way can affect the reach). 
    - The "Proximity" value is still compared against the raw distance between your hand and the collider on the pickup, meaning the "reach distance" described is only an upper bound for the closeness at which "Hover" mode will engage.
    - For example, setting the Proximity to 0 will require the hand to be _inside_ the collider for the pickup to be highlighted (it will still be grabbable in Desktop mode however, because of the "extra reach" desktop users get to compensate).
    - As an advanced technique, you may want to adjust the Proximity value based on the data provided via the [avatar scaling system](/worlds/udon/players/player-avatar-scaling).

## Requires:

- Rigidbody
- Collider

| Parameter | Description |
| - | - |
| Momentum Transfer Method         | This defines how the collision force will be added to the other object which was hit, using Rigidbody.AddForceAtPosition.<br />Note: the force will only be added if 'AllowCollisionTransfer' is on. |
| Disallow Theft                   | If other users are allowed to take the pickup out of someone else's grip |
| Exact Gun                        | The position object will be held if set to Exact Gun |
| Exact Grip                       | The position object will be held if set to Exact Grip. |
| Allow Manipulation When Equipped | Should the user be able to manipulate the pickup while the pickup is held if using a controller? |
| Orientation                      | What way the object will be held. |
| Auto Hold                        | Should the pickup remain in the user's hand after they let go of the grab button.<br />- Auto Detect: Automatically detects what to do<br />- Yes: After the grab button is released the pickup remains in the hand until the drop button is pressed and released<br />- No: After the grab button is released the pickup is let go<br />Note: This only applies to control schemes which lack an independent "Use" input from "Grab", such as Desktop, Vive, and Vive-like input systems. This does not apply to Quest, Quest-like, and other input systems with a defined trigger. |
| Use Text                         | Text that appears when the user has an object equipped, prompting them to "fire" the object.<br />Requires "Auto Hold" to be set to "Yes". |
| Throw Velocity Boost Min Speed   | How fast the object needs to move to be thrown. |
| Throw Velocity Boost Scale       | How much throwing should scale. Higher = faster thrown while lower means slower throw speed. |
| Pickupable                       | Can you pick up the pickup? |
| Proximity                        | The maximum distance this pickup is reachable from. See section above for more details. |

---

## Document: vrc_portalmarker.md

Path: /worlds/components/vrc_portalmarker.md
# VRC Portal Marker

Creates a portal to another VRChat world. Users can walk into the portal to travel to other worlds. While the user's VRChat menu is open, they can also select the portal to learn more about the portal's world. 

## Usage

Set the World ID property to a specific world, and the portal will lead to an existing public instance of that world. If no public instance exists, the portal leads to a new instance.

To create a portal to the user's home world or the VRChat Hub world, use the "World" option instead of specifying a world ID.

## Properties

VRC Portal Marker offers the following properties:

| Parameter | Description |
|-----|-----|
| World ID | The world ID to create a portal to, like `wrld_f995a2eb-7ddc-4558-aef1-815c3b23df6c`. |
| Custom Portal Name | Overrides the world name users see above the portal. |
| World | <ul><li>**None** - Creates a portal for the world ID you specified above.</li><li>**Home** - Creates a portal to the user's current home world.</li><li>**Hub** - Creates a portal to the VRChat Hub world.</li></ul> |


---

## Document: vrc_scenedescriptor.md

Path: /worlds/components/vrc_scenedescriptor.md
---
title: "VRC Scene Descriptor"
slug: "vrc_scenedescriptor"
hidden: false
createdAt: "2017-07-06T00:43:48.565Z"
updatedAt: "2019-11-23T01:41:31.381Z"
---
Describes your VRChat world. Required for every Unity scene you'd like to use as a VRChat world.

| Parameter                    | Description                                                                                                     |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------- |
| Spawns                       | An array of transforms used as reference for spawn points of the world.                                        |
| Spawn Order                  | Order in which spawn locations should be used, options include:                                                |
|                              | - First: Always use the first spawn                                                                             |
|                              | - Sequential: In the order that spawns are listed                                                               |
|                              | - Random: Spawns users randomly                                                                                  |
|                              | - Demo: The spawn point represents the center of your room scale meaning, for example, if you're a meter away from the center of your room scale, you spawn a meter away from the spawn. |
| Spawn Orientation            | Orientation the user will be spawned in at, options include:                                                   |
|                              | - Default: The VRChat Default spawn setting (Currently Align Player With Spawn Point)                         |
|                              | - Align Player With Spawn Point: Aligns player with the rotation of the spawn transform                         |
|                              | - Align Room With Spawn Point: Aligns players' room scale to be centered on the spawn point                    |
| Reference Camera             | Settings from this camera are applied to users in the room. Can be an object in the scene or prefab.            |
| Respawn Height -Y            | Height at which players respawn and pickups are respawned or destroyed.                                        |
| Object Behaviour At Respawn  | What should pickups do when they fall out of the world, options include:                                        |
|                              | - Destroy: Delete the pickup                                                                                    |
|                              | - Respawn: Respawn the pickup to the location it started at                                                     |
| Forbid Free Modification     | If true, non-sync'd objects can't be manipulated by non-master.                                                 |
| Forbid User Portals          | Prevent users from opening portals from the world menu.                                                         |
| User Custom Voice Falloff Range | Enable the next couple options which control the voice falloff range.                                           |
| Voice Falloff Near           | The distance where users' voices start reducing in volume.                                                      |
| Voice Falloff Far            | The distance where users' voices become inaudible.                                                              |
| Unity Version                | Unity version being used; you should never need to touch this.                                                  |
| Dynamic Prefabs              | *Deprecated, unused in the VRChat SDK3.* |
| Dynamic Materials            | *Deprecated, unused in the VRChat SDK3.* |
| Interact Passthrough         | A mask defining which User Layers should allow interactions to pass through. See the [Layers](/worlds/layers) page for more info. |


---

## Document: vrc_spatialaudiosource.md

Path: /worlds/components/vrc_spatialaudiosource.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# VRC Spatial Audio Source

Use the `VRC_SpatialAudioSource` to add 3D spatialization to a Unity `Audio Source` component.

When added, `VRC_SpatialAudioSource` will automatically add a Unity `Audio Source` component.

This component can be used on both avatars and worlds.

[IMAGE: image]
## Unity Editor Interface

The component generates two <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Gizmos.html">Unity Gizmos</UnityVersionedLink> that show:

- Far
- Near

In addition, the `Audio Source` component generates a "Volumetric Radius" gizmo.

Here's what the gizmos look like:
[IMAGE: Component in this image is a bit out of date, but the gizmos are the same.]
The component contains tooltips for all properties. Hover over the name of the property to see a short description.

## Falloff Mechanics

All units are in *meters*. Falloff of audio intensity is roughly inverse-square by default, as illustrated below:
[IMAGE: Image]

You can override the curve using the graph on the `Audio Source`. This curve determines the intensity of the audio at a given distance.

At ranges approaching the `Far` value, audio may fade out more quickly depending on your settings.

### Using 2D Audio

2D audio is where the audio's volume is constant no matter where you are in a world. This might be used for background noise that is already recorded as a spacialized source (a field recording) or background music.

**You can use 2D avatar audio if you like** by disabling the `Use Spatialized Audio` option in the component. Unless you choose to use a different audio falloff curve, the intensity will still drop off over distance as before, it just won't be spatialized.

All that being said, **we do not recommend using 2D audio.** All real-world sources of sound have distinct point or volumetric sources. If you wish to use 2D audio regardless, ensure that you:
- Uncheck `Use Spatialized Audio` on the `VRC_SpatialAudioSource`
- Adjust Spatial Blend on the `Audio Source` to be 100% 2D

## Spatial Audio on Avatars

VRChat supports using `VRC_SpatialAudioSource` on avatars, albeit with some [limitations](/worlds/components/vrc_spatialaudiosource#avatar-limitations). These limitations are in place to prevent abuse and malicious sounds.

Other than these limitations, `VRC_SpatialAudioSource` works precisely the same on avatars as it does in worlds.

:::warning 

Don't forget to add a `VRC_SpatialAudioSource` to your avatar's audio sources! Otherwise, the VRChat SDK will create the component and choose the default settings, and you may experience unexpected, undocumented, and undesired behavior.

If you use a pre-existing avatar's `Audio Source`, ensure that it has a `VRC_SpatialAudioSource` component!

:::

## Component Properties

The `VRC_SpatialAudioSource` component has the following properties:

:::info

Adjusting these properties via animations during runtime is not supported. These values are set at initialization.

Animating properties of the `Audio Source` should still work for properties that are not related to spatialization settings, like pitch.

:::

| Property                         | Description     |
| :-- | :-- |
| Gain                             | An additional boost to volume (0-24 dB). By default, world audio sources get a 10dB boost. Avatar audio sources are limited to a maximum gain of 10dB. |
| Far                              | The far radius, in meters, where volume falls off to silence. By default, it is set to 40m. Avatar audio is limited to a maximum of 40m. <br /> Far only overrides an Audio Source curve if you turn on the "Use Spatializer Falloff" checkbox on VRC_SpatialAudioSource. |
| Advanced: Near                   | The near radius, in meters, where volume begins to fall off. We recommend keeping this at zero for realism and effective spatialization. Defaults to 0m. <br /> Near only overrides an Audio Source curve if you turn on the "Use Spatializer Falloff" checkbox on VRC_SpatialAudioSource.  |                                                                                                                                                 |
| Advanced: Volumetric Radius      | An audio source is normally simulated to be a point source, however changing this value allows the source to appear to come from a larger area. This should be used carefully and is mainly for distant audio sources that need to sound "large" as you move past them. <br /> The listener should not ever get close to the radius for best results. Keep this at zero unless you know what you're doing. Defaults to 0m. <br />  The value for Volumetric Radius should always be lower than Far. |
| Advanced: Use AudioSource Volume Curve | Use the AudioSource's '3D Sound Settings' volume curve. If unchecked, use Inverse Square falloff. It is recommended to keep this disabled to ensure realistic and authentic spatialization. <br /> <br /> Defaults to False. |
| Advanced: Enable Spatialization  | Uncheck this to disable the default inverse-square falloff curve and instead use the Audio Source's spatialization settings. <br /><br /> Defaults to True.|

## Avatar Limitations
You are permitted to adjust the fall-off curve on avatar-based `Audio Sources`. Simply set `Use AudioSource Volume Curve` to True, adjust the curve in the `Audio Source`, and VRChat will use that fall-off curve instead of the default inverse-square.

However, as noted above, there are some limitations on `VRC_SpatialAudioSource` components on avatars. These limits are enforced at run-time.

- `Gain` cannot exceed 10db
- `Far` cannot exceed 40m

[Player Audio](/worlds/udon/players/player-audio) can override these settings.

:::note

On avatars, it is best to disable and enable the Audio Source components rather than the entire GameObject.
:::

### Curve Squashing

If you attempt to play avatar audio with a custom rolloff curve in a world with a shorter `Far` distance than normal, VRChat will "squash" the curve by changing the "Max Distance" setting of your avatar's audio source. You can see what happens by adjusting the "Max Distance" range on the Audio Source in Unity.

### Avatar Audio Compressor
VRChat uses a compressor on the Avatar audio channel that prevents sounds from being maliciously loud. This should not affect normal use of avatar audio sources that have reasonable volume levels.

### Tips for Avoiding the Compressor

If you've got audio on your avatar, there's a few things you can do with your audio beforehand to ensure you're not going to hit the compressor.

1. Try to get "dry" audio files-- that is, audio files with no effects. Reverb and delay are the most egregious in causing compressor "pumping".
2. Leave a bit of headroom in the audio file. In other words, don't fit the waveform to the very top and bottom of the range. In Audacity (or other wave editor), normalize your audio between -6 and -12db.
3. Try to avoid extremely high peaks in the waveform with very short attack-- in other words, don't suddenly "pump" the audio to very high levels. If you normalize, this should drop out of the file regardless.

## Replacing ONSP in Old Scenes

Using the "Enable 3D Spatialization on all AudioSources" button in the Build Control Panel now converts any `ONSPAudioSource` to `VRC_SpatialAudioSource` components. Some of these sources may require tweaking after the conversion.

---

## Document: vrc_station.md

Path: /worlds/components/vrc_station.md
# VRC Station

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Allow users to sit down by interacting with an object. An example can be found in the SDK as [VRCChair3](/worlds/examples/udon-example-scene#vrcchair3).

This component can also be used on avatars to create seats on avatars!

## Parameters and Options

| Parameter                    | Description                                                                                             |
| ---------------------------- | ------------------------------------------------------------------------------------------------------- |
| Player Mobility              | Should the player be able to move, options include:                                                     |
|                              | - Mobile: Allow users to move when seated in the station.                                               |
|                              | - Immobilize: Prevents the user from moving.                                                            |
|                              | - Immobilize For Vehicle: Same as Immobilized but optimized for moving stations.                        |
| Can Use Station From Station | If the user can switch stations when sitting in a station.                                              |
| Animation Controller (optional) | Used to override normal seating animations with a custom one.                                        |
| Disable Station Exit         | If the user cannot exit the station by usual means, use triggers to unseat the user.                    |
| Seated                       | Is this a station that the user should be sitting in? See the details above to see what this indicates. |
| Station Enter Player Location | Transform that defines where the user should be transported to when seated.                            |
| Station Exit Player Location  | Transform that defines where the user should be transported to when they are unseated.                  |
| Controls Object              | This is used for stations where you can control an object, such as a vehicle.                           |
## Creating a station with Udon

You can use stations in your own custom Udon scripts. Making a chair to sit in is fairly straightforward. The [VRCChair3](/worlds/examples/udon-example-scene#vrcchair3) prefab included with the VRCSDK shows how to setup one. 

All you need for a chair is a GameObject with the following components:
1. `VRC_Station` with an entry and exit point set to itself or another transform that designates where the player is rooted to the station.
2. A collider, usually with "Is Trigger" enabled.
3. An UdonBehaviour with an Udon program that handles sitting in the station.
4. (Optional) A mesh that looks like a chair.

The VRChat SDK comes with a program that handles step 3, which is called **StationGraph**.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: The station graph, part of the VRCChair3 prefab.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
using UdonSharp;  
using UnityEngine;  
using VRC.SDKBase;  
  
public class StationGraph : UdonSharpBehaviour  
{  
    public override void Interact()  
    {  
        Networking.LocalPlayer.UseAttachedStation();  
    }  
  
    public override void OnStationEntered(VRCPlayerApi player)  
    {  
        Debug.Log($"{player.displayName} Entered");  
    }  
  
    public override void OnStationExited(VRCPlayerApi player)  
    {  
        Debug.Log($"{player.displayName} Exited");  
    }  
}
```

</TabItem>
</Tabs>

Udon's "OnStationEntered" and "OnStationExited" events can be very useful for advanced use cases, such as detecting which player has entered or exited a moving vehicle.

## Stations used in Worlds

Your Animator can access avatar parameters to react to avatars entering the station. 

- Use the `InStation` parameter to detect whether an avatar has entered a station. but might not have Seated-IK enabled.
- Use the `Seated` parameter to detect whether Seated-IK is enabled for the avatar in the station.
	- The `Seated` parameter only used if the `Seated` property on the station is enabled.

### Detecting SDK2 Avatars

Station behave slightly differently for avatars that were uploaded with very old versions of the VRChat SDK (SDK2).

Check the `AvatarVersion` parameter to detect SDK2 avatars. For example:
- If `AvatarVersion` is `3`, then the avatar uses the modern SDK3.
- If `AvatarVersion` is less than `3`, then the avatar uses the outdated SDK2.

Use `AvatarVersion` and `InStation` to transition to different custom seated animations. The differences are described below.

### SDK2 avatars

If an SDK2 avatar uses your station, your Animator should apply a fixed seated pose (if `Seated` is enabled), or a full-body animation if `Seated` is not enabled.

### SDK3 avatars

If an SDK3 avatar uses your station, your Animator can choose to do any combination of animations, Tracking Control changes, and Pose Space changes that are available for SDK3 avatar. However, there will be no behind-the-scenes State Behaviors applied (which does occur in SDK2 stations).

Note that since the creator decides what type of Tracking Control to apply, the Seated property on a station does not necessarily indicate the tracking type on SDK3 avatars. 

Our example Seated controllers show this branching behavior and the proper transitions and State Behavior setup for applying a seated animation.

:::caution

Stations can only affect parameters that already existed on an avatar. You can't use [State Behaviors](/avatars/state-behaviors) to create new parameters.

:::
## Stations used on Avatars
The default `VRCChair` prefab included in the SDK can be used on avatars to let other players "sit" on you. You can use this to make your avatar into a car, a dinner table that moves around, and more! An avatar can have up to 6 stations.

When using stations on an avatar that you want to animate on or off, you need to toggle specific objects and components.

[IMAGE: image]

**The red box (in the screenshot above) needs to be enabled upon upload. If it is disabled upon upload, the station will not work!**

Toggling the red box will remove any player currently sitting in the station. Toggling the green boxes will only stop new players from sitting in the station. Since this involves disabling/enabling components and objects, this **must** be done in the FX layer.

Keep in mind that users can disable animations with the [Safety system](https://docs.vrchat.com/docs/vrchat-safety-and-trust-system). If an avatar station is on by default (as in, having the toggles on by default), the stations remain active, even if the wearer has used an animation to turn them off.

There are two other restrictions upon upload:
- The Entry and Exit points must not be more than 2 meters apart.
- There can be up to 6 stations on the avatar. Any more will be disabled.

## Parameters and Options

| Parameter | Description |  
| - | - |  
| Player Mobility                 | Whether players are allowed to walk around while using the station. |  
|                                 | - Mobile: Allows players to move when seated in the station. |  
|                                 | - Immobilize: Prevents user from moving and moves them to "Station Enter Location." |  
|                                 | - Immobilize For Vehicle: Same as "Immobilize" but optimized for moving stations.  |  
| Can Use Station From Station    | Whether the players can switch stations when sitting in a station.  |  
| Animation Controller (optional) | Overrides the "Sitting" playable layer in the avatar controller. |  
| Disable Station Exit            | Prevents the player from exiting the station by moving or jumping.<br />Use the `ExitStation` node to remove the player from the station. |  
| Seated                          | Whether the player's avatar will sit or stand when using the station.<br />This affects the "Seated" parameter of the avatar’s playable layers. |  
| Station Enter Player Location   | The player is moved to the position of this Transform when they enter the station. |  
| Station Exit Player Location    | The player is moved to the position of this Transform when they exit the station. |

## Limitations

Avatars must meet the following requirements to sit in stations:

- The avatar must have an has an [Animator component](https://docs.unity3d.com/Manual/class-AnimatorController.html) with an assigned [Unity Avatar](https://docs.unity3d.com/Manual/AvatarCreationandSetup.html). This is usually assigned automatically for humanoid avatars.
- The Animator component must be on the same game object as the avatar descriptor component.

---

## Document: vrc_uishape.md

Path: /worlds/components/vrc_uishape.md
# VRC Ui Shape

The VRC Ui Shape component allows you to create [Canvas](https://docs.unity3d.com/Manual/UICanvas.html) components that players can interact with.

- Players can point, click, or scroll your UIs to interact with them, similar to the VRChat menu.
- Players can interface from a distance. This often makes them easier to use than [Interact](/worlds/examples/udon/#interact) events.

[IMAGE: Two examples UIs: A "Toggle Mirror" setting with a checkbox, and a page indicator with a "Previous" and "Next" button.]

VRC Ui Shape only has one configurable parameter:

| Parameter        | Description                                                                                         |
| ---------------- | --------------------------------------------------------------------------------------------------- |
| Allow Focus View | Whether this canvas should allow users to enter [Focus View](#focus-view) if they're playing on a phone or tablet. |

## How to set up your Canvas

When you right-click your hierarchy window and click "UI" -> "TextMeshPro (VRC)", the SDK automatically sets up your Canvas. The SDK automatically configures your Canvas and adds other required components.

[IMAGE: Two examples UIs: A "Toggle Mirror" setting with a checkbox, and a page indicator with a "Previous" and "Next" button.]

If you want to configure a Canvas manually, follow the steps below. Otherwise, your Canvas may not work in VRChat.

1. Add a [Canvas](https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/class-Canvas.html) component to your GameObject, or create a new GameObject.
    - Unity automatically adds other helpful components to your Canvas.
2. Add a "VRC_UIShape" component to the same GameObject as your Canvas.
3. Change the GameObject's layer from "UI" to "Default" or another layer.
	- The UI layer would prevent users from interacting with your UI unless the VRChat menu is open.
4. Reduce the GameObject's `x`, `y`, and `z` scale.
	- By default, the scale is 1, which is too large. (1 pixel = 1 meter)
	- Reduce the scale to something like `0.01`. (1 pixel = 0.01 meters) 
5. Change the Canvas's "Render Mode" property from "Screen Space" to "World Space".
	- World Space Canvases are shown inside your world instead of directly on your screen. 
6. Add UI elements to the Canvas.
	- For example, you can add text, buttons, toggles, scroll views, input fields, and more.
	- Set the "Navigation" property to of your UI elements to "None". This prevents players from accidently using the UI while moving in your world.
	- Use TextMeshPro instead of Unity's built-in components for higher text quality.

If you follow these steps, players can interact with your UI by clicking on it.

## Common problems

If your Canvas is not configured correctly, players may be unable to interact with it. Here's how you can fix common issues:

### If you have a canvas that does not make the VRChat pointer show up:

* **The canvas must have a** `VRC_UIShape` **component on it.** Make sure that you didn't place it on some other child object.
* **The layer of the Canvas cannot be UI.** Setting the canvas and all it's children to default will work.
* **The object with the** `VRC_UIShape` **must have a box collider.** If there is none, one will be added automatically after the world is uploaded. However if you have added a collider yourself, you must make sure that it is the correct size.
* **Make sure you do not have some other collider blocking the canvas.** 

### If the pointer shows up but the UI is not responsive:
* **The scene must have an EventSystem.** This is added automatically when you make the canvas, so don't delete it.
* **Make sure that interact-able elements are not covered by invisible elements.** This often happens when a text box overlaps and covers a button. There's a few solutions: You can rearrange the button so it is on top (lower in the hierarchy), you can resize the text so that it does not cover the button, or you can set the text's `raycast target` to `false`.
* **Make sure that the UI you are trying to interact with has an image with `Raycast Target` enabled.** This is auto-generated if you create UI elements with the right-click menu in the hierarchy.
* **Make sure that the canvas has the `Graphic Raycaster` component.** This component is automatically added to your GameObject when you add a Canvas component.
* **Make sure that you are looking at the canvas from the correct side. The Z-forward axis of the canvas should be facing _away_ from you.

### If the UI is responsive but does not do what you expect it to do:

* Some UI events get removed in VRChat for security reasons. Make sure that the events you are trying to use are on [this list](/worlds/udon/ui-events)
* If you are using `SendCustomEvent`, make sure to type the event exactly the same both in the UI button and in the UdonBehaviour's `event custom` node
* If you are using `SendCustomEvent` to an UdonSharp behaviour, the event must be set to public. If it is set to private, it will not work.
* If something is wrong with an UdonBehaviour, it might halt which will stop it from doing anything. Learn how to [debug your Udon projects](/worlds/udon/debugging-udon-projects) for more details.

### If the UI is moving when you move, press a key, or move a joystick:

* Set `Navigation` to `None` on all UI elements.
- Set `Scroll Sensitivity` to `0` if your UI has a scroll bar.
### If you'd like a TextField not to show VRChat's keyboard:

* Add the `VRCInputFieldKeyboardOverride` component to prevent VRChat's keyboard from appearing.

## Focus view

VRChat's "Focus View" feature allows users to expand, pan, and zoom your world's UI on their phone or tablet. This makes it easier for them to read and interact with small text on their screen.

<div class="video-container">
    <video src="https://assets.vrchat.com/videos/docs/focusViewDemo.mp4" title="Focus View demo" muted controls></video>
</div>

Your canvas must meet the following conditions for Focus View to be available: 

- The canvas is configured correctly and has a [`VRC_UIShape`](https://creators.vrchat.com/worlds/components/vrc_uishape) component. 
- The `VRC_UIShape` component's "Allow Focus View" parameter is enabled.
- You have not disabled Focus View in your world's settings on VRChat.com.

In addition, users in your world must meet the following conditions:

- The user is playing VRChat on a phone or tablet.
- The user is using the touchscreen as their only input device.
- The user has not disabled Focus View in their VRChat settings.
- The user is less than 3-6 meters away from the canvas (depending on the canvas's size)
- The user is more than 0.6-2 meters away from the canvas (depending on the canvas's size)

While a user is in focus view:
- The user's nameplate displays a focus view icon that's visible to other players.
- Users stay in focus view until they manually close it.


---

## Document: creating-your-first-world.md

Path: /worlds/creating-your-first-world.md
---
sidebar_position: -2
---
# Creating Your First World

This guide explains how to create and upload a very simple VRChat world. You'll learn the basics of setting up a Unity scene, using VRChat's Control Panel, and publishing your world.

## Requirements

Before you get started, ensure that you meet the following requirements:

- A VRChat account
- Trust rank of "New User" or higher
- A [Unity project with the VRChat SDK](/sdk) set up

:::info

Need help? Visit our Discord at [discord.gg/vrchat](https://discord.gg/vrchat) or our official forum at [ask.vrchat.com](https://ask.vrchat.com).

:::

## Step 1 - Setting up a scene

The first thing you need is a Unity scene. You can either create a new scene, or open an existing Unity scene with pre-existing content. If you created a new project from the Creator Companion, skip to [step 2](/worlds/creating-your-first-world/#step-2---creating-spawn-points).

With the scene open, you need to add a **VRC Scene Descriptor** to your scene. You can easily add it with the VRChat SDK:

[IMAGE: Adding a scene descriptor automatically via the VRChat SDK build panel.]

1. Click **VRChat SDK** > **Show Control Panel**.
	- If you do not see this menu at the top of your Unity window, your SDK may not be installed correctly. Try clicking **Assets** > **Reimport All**, and check our [SDK troubleshooting guide](/sdk/sdk-troubleshooting).
2. In the **Authentication**, log into your VRChat account.
3. Switch to the **Builder** tab and click **Add a VRCSceneDescriptor**.

[IMAGE: Adding a scene descriptor automatically via the VRChat SDK build panel.]

A Game Object called **VRCWorld** will automatically be added to your scene. It contains a **VRC Scene Descriptor** and other helpful components. Click on VRCWorld in your hierarchy to inspect its settings.

## Step 2 - Creating spawn points

Your world needs at least one spawn point. When players join your world, that's where they'll appear. By default, players will spawn at the location of your VRCWorld prefab. Simply move the VRCWorld prefab to wherever you'd like users to spawn.

[IMAGE: Move your scene descriptor to change your spawn.]

If you'd like to create additional spawn points, create an empty Game Object and place it where you want users to appear. Add the Game Object to the **Spawns** list in the [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor) component. Do this for as many spawn points as you want.

If you have more than one spawn point, you can choose the order in which people will spawn into them by changing the **Spawn Order** property.

## Step 3 - Descriptor Settings

There are various settings in the [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor) that change the behavior of your world. Here are some of the more important ones.

_Spawns_ - An array of transforms where players will spawn when they join your world. By default, players spawn at your Scene Descriptor.

_Respawn Height_ - The vertical height (on the y axis) at which players respawn and pickups are respawned (or destroyed, depending on the "Object Behaviour At Respawn" setting).

_Reference Camera_ - Settings you apply to this camera will be applied to the player when they join the room. It is most often used for adjusting the clipping planes and adding post-processing effects.

More settings can be found on the [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor) page.


## Step 4 - Configure your World in the SDK build panel

Click  `VRChat SDK > Show Control Panel`. Before you can upload your world, you need to give VRChat some basic information about it, such as the world's name, capacity, or content warnings.

[IMAGE: VRChat's SDK World build panel.]

- World name - The name of your world, as shown to everyone.
- Description - This will be displayed on the 'World Details' page in VRChat and on the website.
- Content warnings - Warnings that work in conjunction with VRChat's [Content Gating system](https://hello.vrchat.com/blog/content-gating).
- Maximum capacity - The maximum amount of players allowed in your world.
  - If an instance has reached its player capacity, new players cannot join.
  - The instance creator, world creator, or group owner can always join, even if it would exceed the player capacity. (Unless they do not have permission to enter/see that instance)
- Recommended capacity - The recommended maximum amount of players for your world.
  - If a public instance has reached its recommended capacity, VRChat will discourage more players from joining. The instance will stop appearing in VRChat's list of public instances.
  - Players can still try to join the instance under some circumstances if they have a direct invite URL on vrchat.com.
- Tags - Keywords that help users find your world in VRChat.
- World debugging - Allows other users to debug your Udon code.
- Thumbnail - A preview image of your world.

:::note What if my world doesn't have a recommended capacity?

If you uploaded your VRChat world with an old VRChast SDK, without 'recommended capacity', player capacity works differently:

 - 'Recommended capacity' will be the same as your player capacity value
 - 'Player capacity' will be **twice** your player capacity value
 
 For example: If you set 'Player capacity' to 10 and did not set 'Recommended capacity', your _actual_ 'Player capacity' will be 20. 'Player capacity' was sometimes referred to as the 'soft cap' for this reason.

:::

## Step 5 - Check for warnings or validation messages

[IMAGE: Validations in the SDK build panel.]

At the bottom of the VRChat SDK build panel, you'll find a section called **Validations**. It contains suggestions on how to set up your scene and build your world. For example:

- Is your scene missing a VRC Scene Descriptor?
- Is your scene missing VRChat's layers and collision layer matrix?
- Are there any issues with Audio Sources, textures, or Udon scripts?

The SDK will often give you the option to fix these issues automatically. If not, please read the validation messages carefully to learn how to improve your world. Some of the messages are optional and are not required for uploading your world.

## Step 6 - Building and publishing your World

Next, you need to build the world! You'll need to choose what you will be doing first: You can either make a **test build** to test your world without uploading it or **publish** your world directly to VRChat. Under both "Offline Testing" and "Online Publishing" headings, you will find buttons to publish a new build or your last build. Last Build takes the last successful build of the world to either test or upload. New Build puts a new world together to either test or upload.

[IMAGE: Validations in the SDK build panel.]

_(Optional)_  
If you wish to test your world, go to **Offline Testing** and click **Build & Test New Build**. This will build a new version of your world and launch into the world in VRChat. The **Number of Clients** option is used when you want to open multiple VRChat windows for testing your world with multiple players.

Once you're ready to publish your world, go to **Online Publishing** and click **Build and Upload**! This will build you world and get it ready for upload. Keep in mind that you're not permitted to upload content to VRChat that violates our [Community Guidelines](https://vrchat.com/community-guidelines) or [Terms of Service](https://vrchat.com/legal). Doing so will result in moderation action.

After uploading your world, it will become available in VRChat! You should able to see it in-game or via the content manager in the SDK via `VRChat SDK > Show Control Panel > Content Manager`.

:::caution World Upload Failures

If your world fails to upload, [check Unity's console](https://docs.unity3d.com/Manual/Console.html) to see if there are any errors. If so, then solve them before trying to build your world again. Make sure to read the entirety of Unity's log, and click on errors to see additional information.

Check our other documentation, the [Ask Forum](https://ask.vrchat.com/),  or ask on [Discord](https://discord.com/invite/vrchat) if you need help. Make sure to provide as much information as possible, such as Unity console errors.

:::


---

## Document: ai-navigation.md

Path: /worlds/examples/ai-navigation.md
---
description: "NPCs that follow you."
sidebar_custom_props:
    customIcon: 🗺️
---
# AI Navigation Example

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';

## Example World

[IMAGE: example world]

Udon can use [AI Navigation](/worlds/udon/ai-navigation). This example shows you how it can be used for pathfinding and creating NPC characters that walk around in your world.

Visit the [AI Navigation Example World](https://vrchat.com/home/world/wrld_b7b99484-d92f-403d-ac10-4da7e5a9ce14) to try it for yourself!

## Using the Example

This scene has a collection of NPCs which are trying to get from the red block to the green one. You can move the blue blocks to form a pathway for them. Unity's AI Navigation automatically recalculates the pathing of the NPCs whenever you drop the blocks.

Open the scene in the Unity Editor to test the basic functionality. It should work roughly the same as in VRChat. When you enter play mode, the NPCs will attempt to reach the green block. You can move the blue blocks to help the AI to reach their goal. You can press the "Reset" button to try again.

<HowToImportExample/>

## Technical Breakdown

Let's explore the Udon logic, scene structure and networking that makes this scene work.

### Logic

When the scene initializes, each NPC has the "NPC Finish" block set as their `destination`. They will try to reach it, but fail because there is no direct connection to get there. When each NPCStep is dropped, it will call `NavMeshSurface.BuildNavMesh` to rebuild the main surface. If this results in a better path to the target, each Agent will hop aboard to continue their journey. Every 0.5 seconds, the progress is recalculated by comparing the distance between the first NPC and the target block with the initial distance, which was saved at the start of the scene. If the distance is less than 0.15 units during a check, then particles are set off, and the progress checks are stopped. You can then press the "Reset" button to start it all over.

### Scene Overview

The scene's hierarchy consists of the following:

- "World" contains the scene descriptor, floor, lighting, etc.
- "Course" defines where NPCs can move.
  - The [NavMeshSurface](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/NavMeshSurface.html) component allows Unity to rebuild the navigation logic at runtime.
  - The CourseManager UdonBehaviour component handles the progress bar and resetting it.
  - The "NPC Start" and "NPC Finish" child GameObjects define the NPC's starting and target positions.
  - The three "NPC Step" child GameObjects act as surfaces for the NPCs.
    - Each NPC Step has a NavMeshModifier component, which attempts to add its surface to the main NavMeshSurface.
    - It also has a VRCPickup component and an UdonBehaviour, which locks its rotation to stay flat when carried and applies the logic to rebuild the main navigation surface.
- "NPCs" has four child "NPC" GameObjects, which are Capsules with a [NavMeshAgent](https://docs.unity3d.com/ScriptReference/AI.NavMeshAgent.html) and UdonBehaviour.
  - The NavMeshAgent provides the basic navigation and movement logic, while the UdonBehaviour has the logic we want for the scene.
- "Canvas" contains the process indicator and reset button.

### Networking
Everything that happens should be synced for all users in the instance, through careful choices between which variables and logic to sync and which to run locally.

The Course has a single synced variable - a `progress` float which is checked on the owner of the Course, and synced to all other users whenever it is updated. The other users listen for changes of this variable and update their progress bar when it changes. The Course also uses a Networked Event to call the `Win` event for everyone when `progress` is greater than `successThreshold`, which is set to `0.8` to account for other NPCs getting in the way of the one whose progress we measure.

Each NPC is moved by the `NavMeshAgent` on its Owner's device, and the `VRCObjectSync` component updates its position automatically for everyone else. Only the Owner of the NavMesh continuously rebuilds the actual NavMesh, since the synced NPCs don't need it.

---

## Making Your Own Changes

After making a copy of the scene, try some of these ideas to evolve the scene further, and explore the power of the AI Navigation package:

* Change the course, moving the start and end points further apart.
* Reduce the number of available blocks from 3 to 2.
* Make the target point move over time.
* Give each person in the world their own NPC and NavMesh to turn it into a race!

---

## Document: detect-controller-collide.md

Path: /worlds/examples/detect-controller-collide.md
---
title: Detect Controller Collide
description: "Detect a Character Controller colliding with something."
sidebar_custom_props:
    customIcon: 🧱
---
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

[IMAGE: Detect Controller Collide]

The Unity event <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/MonoBehaviour.OnControllerColliderHit.html">OnControllerColliderHit</UnityVersionedLink> is useful for knowing when a <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/CharacterController.html">CharacterController</UnityVersionedLink> has collided with another object. VRChat adds the event [OnControllerColliderHitPlayer](/worlds/udon/players/player-collisions#physics) to detect when a CharacterController collides with another Player. This event includes a `ControllerColliderPlayerHit` struct with a reference to the [VRCPlayerApi](https://udonsharp.docs.vrchat.com/vrchat-api/#vrcplayerapi) object for the player that was collided with.

Visit the [Detect Controller Collide Example World](https://vrchat.com/home/world/wrld_7da557ad-3584-4b0a-bf61-6cbba33701d4) to try it for yourself!

## Using the Example

Start the scene in the Unity Editor or visit the world in VRChat. Look at the canvas in the world, and observe that the empty space below the "Last hit:" label changes to "Wall" when the capsule "character" collides with it. 

Stand in-between the spawn point for the capsule and the wall so that it runs into you on the way to the wall, and you should see the label change to your display name when it collides with you! It will reset to its spawn point and continue running into you until you move aside. At that point, it will collide with the wall again and change the label back to "Wall".

<HowToImportExample/>

## Technical Breakdown

The scene has a `DetectControllerCollide` GameObject which contains the main prefabs and logic for the example.

The first child object, `CharacterController`, has a CharacterController component on it as well as an UdonBehaviour with a Graph Program with the logic for detecting collisions.

### OnCharacterControllerHitExampleGraph

#### Variables

This graph has the following public variables:

| **Name**                           | **Description**                                                                                   |
|------------------------------------|---------------------------------------------------------------------------------------------------|
| `CharacterController`              | Reference to the CharacterController, included to run the `Move()` method during `Update()`.      |
| `float` moveSpeed                  | The speed at which the characterController will move, multiplied internally by `Time.deltaTime`.  |
| `TextMeshProUGUI` hitNameText      | A reference to the target textField to update when a collision is detected.                       |
| `Transform` characterControllerStartPos | The position from which the characterController will start its journey each time.            |

#### Events

The graph has four events:

* `Update()` runs continuously, calling `Move()` on the characterController to move it forward.
* `OnControllerColliderHit()` runs whenever the characterController collides with a non-player object. The name of the object is extracted from the `ControllerColliderHit` struct passed through by the event, and set on the `hitNameText` field.
* `OnControllerColliderHitPlayer()` runs whenever the characterController collides with a Player. The name of the Player is extracted from the `ControllerColliderPlayerHit` struct passed through by the event, and set on the `hitNameText` field.
* `__ResetCharacterController()` is a custom event which is called from the two collision events to reset the characterController back to its starting position.

---

## Document: image-loading.md

Path: /worlds/examples/image-loading.md
---
description: "Loading a remote image."
sidebar_custom_props:
    customIcon: 🖼️
---

# Image Loading Example

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<video loop="loop" autoplay="autoplay" muted>
  <source src="/img/worlds/image-loader.mp4" type="video/mp4" />
    Your browser does not support the video tag.
</video>

Udon can load images from the internet and display them as UI elements or as textures on world objects. Our example world below demonstrates how the system works and how to use GitHub to host the images and captions.

## Example World

[Download the example project](https://github.com/vrchat-community/examples-image-loading/archive/refs/heads/main.zip) or [visit the GitHub repo](https://github.com/vrchat-community/examples-image-loading) to clone it for yourself.

This scene has a picture frame that automatically changes to show different images with matching captions. The images and captions are both hosted for free on GitHub Pages and are included in the GitHub repository above.

Scene File: `Assets/_Project/Gallery`

## Using the Prefab in Your World

To use the prefab, you'll need to add it to your project and set up the image caption URLs.

This repo publishes to [GitHub Pages](https://pages.github.com/) for free hosting. You can host the images and captions anywhere you want, but we recommend using GitHub Pages because it's free, easy to set up, and you can keep the images and captions in the same repository as your world. If you're hosting them elsewhere, skip to step 4.

1. [Fork the example repo](https://github.com/vrchat-community/examples-image-loading/fork) to your own GitHub account.

2. Edit the images and captions in the "Web" directory. You can ignore or delete the `index.html` page, it's just there as an example to test the images and captions in a browser. You can keep the images named 1.jpg, etc to make it easier to use the prefab, or rename them and update the prefab URLs. 

:::tip
When the files in the "Web" directory are edited, the website is re-published. As long as the filenames stay the same (images are 1.jpg, 2.jpg, etc.), the URLs in the world will point to the newly published files. Republishing happens automatically through [an included GitHub Action](https://github.com/vrchat-community/examples-image-loading/actions/workflows/static.yml).
:::
3. Clone the repo to your computer.

4. Make sure your project has SDK 3.2.3 or newer as well as ClientSim and UdonSharp, which you can easily add through the [Creator Companion](https://vcc.docs.vrchat.com/).

5. Import the [Prefab Unitypackage](https://github.com/vrchat-community/examples-image-loading/releases/download/0.2.0/SlideshowFrame.unitypackage) into your project.

6. Drag the **SlideshowFrame** prefab into your scene.

7. Select the **SlideshowFrame** in your scene's Inspector.

8. In the **SlideshowFrame** component, set the **Image Urls** array size to match the number of images you want to load, then update the URLs to match your image URLs. If you're using GitHub Pages, the URLs will be in the format `[IMAGE_URL]`.

9. Update the **String Url** to match your caption URL. If you're using GitHub Pages, the URL will be in the format `https://<your-github-username>.github.io/<your-repo-name>/captions.csv`.

#### Testing it Out

If you're using GitHub to host the images and captions, make sure you've committed and pushed your changes to GitHub, which will trigger the GitHub Action to publish the files to GitHub Pages.

1. Enter Play Mode in Unity.
2. The images and captions should load automatically. If they don't, check the Console for errors.
3. Run a Build and Test to make sure it works in VRChat as well. You may need to turn on "Untrusted URLs" in your settings.

## Important GameObjects

The most important objects to inspect in the scene are [TheFrame](#theframe) and [SlideshowFrame](#slideshowframe). 


[IMAGE: image]

### TheFrame

TheFrame is a GameObject with a couple of important pieces:
* **SlideshowFrame**: an `UdonBehaviour` which loads the images and captions from the web server.
* **Mesh**: Is the black frame around the picture.
* **Picture**: Is a `Mesh` which renders the downloaded textures.
* **UI**: Is a World-Space `Canvas` which renders the captions.

### SlideshowFrame

The **SlideshowFrame** `UdonBehaviour` has all of the logic to download the images and captions from the web server.

[IMAGE: image]

It has these public variables:
* **Image Urls**: An `Array` of all the `VRCUrls` for the images to download.
* **String Url**: Is a single `VRCUrl` where the caption text can be downloaded.
* **Renderer**: This target `Renderer's` **sharedMaterial** will have its texture set from the downloaded textures.
* **Field**: This `UI Element's` **text** property will be set from the downloaded caption for the matching texture.
* **Slide Duration Seconds**: How long to show each image.

The basic logic flow of the script is this:

## Creating an Image Downloader

### Using the `ImageDownload` script to download an image

The SDK includes a script to easily download images:

1. Create a new GameObject in your scene.
2. Add an UdonBehaviour component.
3. Select `ImageDownload` as the program source.
4. Select a Material to apply the downloaded texture to
5. (Optional) Customize `TextureInfo` to change the downloaded texture's settings. 

### Create your own script for `VRCImageDownloader`

You can use `VRCImageDownloader` in your own Udon Graph scripts.

1. Create a new `VRCImageDownloader` object with its Constructor node.
2. Save the newly created `VRCImageDownloader` as a variable. (This **required**.)
3. Execute the `DownloadImage` function on the `VRCImageDownloader` instance.
4. (Optional) Wait for the `OnImageLoadSuccess` or `OnImageLoadError` event to execute.

#### The basic logic flow of the script is:

1. On Start, construct a `VRCImageDownloader` to reuse for downloading all the images. It's important to keep this around so the textures will persist.

```csharp
// It's important to store the VRCImageDownloader as a variable, to stop it from being garbage collected!
_imageDownloader = new VRCImageDownloader();
```

2. Download the captions/strings from the `String Url`.

If the String downloads successfully, split it up line-by-line into separate strings, and save those to a `_captions` array. If it doesn't download, log the error message.


<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An example of how to use image loading in the Udon Graph. The Udon Graph can't use newline characters directly, so an integer conversion to a character is used instead.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
private void Start()
{
    // To receive Image and String loading events, 'this' is casted to the type needed
    _udonEventReceiver = (IUdonEventReceiver)this;
        
    // Captions are downloaded once. On success, OnImageLoadSuccess() will be called.
    VRCStringDownloader.LoadUrl(stringUrl, _udonEventReceiver);
}

public override void OnStringLoadSuccess(IVRCStringDownload result)
{
    _captions = result.Result.Split('\n');
    UpdateCaptionText();
}

public override void OnStringLoadError(IVRCStringDownload result)
{
    Debug.LogError($"Could not load string {result.Error}");
}
```

</TabItem>
</Tabs>

3. Try to Load the next Image. Increment the `_loadedIndex` to keep track of our place, then call `DownloadImage()` on the downloader we saved earlier.

If the Image downloads successfully, save a reference to it and then load it up on the `Renderer`. If it fails, log the error message.

4. Call the function to Load the next Image again, delayed by `SlideDurationSeconds`. The `_loadedIndex` is incremented during each Load call, and starts over after reaching the last url in the array.

When each image is visited for the second+ time, it will be displayed from its saved Texture2D reference instead of loaded fresh, unless it failed to download the first time.

:::tip Source Code
View the full source code for [SlideshowFrame.cs on GitHub](https://github.com/vrchat-community/examples-image-loading/blob/main/Assets/_Project/Frame/SlideshowFrame.cs).
:::

## Known Issues

* The first image doesn't have its caption loaded quickly enough, so it doesn't show until the first loop around.

:::tip Udon

View the [main Image Loading docs page](/worlds/udon/image-loading) for full details on the Image Loading system, including domain and file limits.

:::


---

## Document: index.md

Path: /worlds/examples/index.md
---
title: "Examples"
sidebar_position: 1
hidden: false
createdAt: "2017-07-06T00:13:32.007Z"
updatedAt: "2021-08-10T19:15:56.090Z"
---
# Udon / SDK3

import DocCardList from '@theme/DocCardList';

<DocCardList />

---

## Document: midi-playback.md

Path: /worlds/examples/midi-playback.md
---
title: MIDI Playback
description: "Play synchronized MIDI and audio files."
sidebar_custom_props:
    customIcon: 🎵
---
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<video controls>
  <source src="[IMAGE_URL]
</video>

This example plays back a [MIDI file](https://midi.org/standard-midi-files) synchronized to an audio file made from the MIDI. You can use this to synchronize events in your world from a MIDI track, to tie music and visuals together for an immersive experience.

Visit the [Midi Playback Example World](https://vrchat.com/home/world/wrld_57799f09-406a-4c8c-9c42-e593cae6305a) to try it for yourself!

## Using the Example

Play the scene in the Unity Editor or visit the world in VRChat to see and hear the MIDI playback. As the short loop plays, differently colored images will flash in time with the music - these are visualizations of the MIDI Note events happening on four different channels in the MIDI file.

<HowToImportExample/>

## Technical Breakdown

The [VRCMidiPlayer](/worlds/udon/midi/midi-playback/#component-vrcmidiplayer) is similar to an <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/AudioSource.html">AudioSource</UnityVersionedLink> but it uses a Midi Asset instead, and sends [Note On](/worlds/udon/midi#midinoteon) and [Note Off](/worlds/udon/midi#midinoteoff) events to the [MidiGrid UdonBehaviour](#midigrid).

### MidiGrid

This program visualizes Midi Note On and Off events using colored blocks. 

Whenever a Note On event is sent from the VRCMidiPlayer, the program will check if its channel matches one of the grids (see the `channels` field below). If there is a match, then the program chooses the corresponding block to enable by calculating the [remainder](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/expressions#12104-remainder-operator) of the note number with 12 to find the corresponding image. For example, note numbers 11 and 12 will trigger the 11th and 12th images in the grid, while numbers 13 and 14 will trigger images 0 and 1, rolling over to fit the note numbers to the grid. Once the target image is calculated, it is enabled.

When a Note Off event is sent from the VRCMidiPlayer, the program makes the same calculations to find the target grid and image, but disables it to make it invisible.

### Inspector Fields

| Name | Description |
|---|---|
| grids | References to <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/RectTransform.html">RectTransform</UnityVersionedLink> which have a [GridLayoutGroup](https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/script-GridLayoutGroup.html) on them, with 12 child [Images](https://docs.unity3d.com/Packages/com.unity.ugui@2.0/manual/script-Image.html) corresponding to the notes in a full octave. |
| channels | Array of integers used to remap MIDI channels to the four image grids in the scene. The default value of `[3, 4, 1, 2]` will show note events from channel 3 on grid 0, events from channel 4 on grid 1, etc. |
| player | Reference to the VRCMidiPlayer sending events to the MidiGrid. |

#### Swapping the Data

If you have MIDI and Audio files, you can import them and replace the existing assets with your own to see how they look in the scene.

#### Changing the Channels

The MidiGrid program has a variable called `channels`. This array matches channels from the MIDI data to grids on-screen. By default, the order is "3 4 1 2". This means that the first grid will show data from channel 3, the second grid will show channel 4, etc. You can switch the order here to change the visuals a little.

If you load your own MIDI data file, you can check Unity's console to see the channels and notes being played. Each Note On event will log a message like "3:75". This shows you that channel 3 played note 75.

#### Adding Grids

If you want to use a song with more than 4 channels, you can duplicate the grids and add them to the `grids` variable on the program. Make sure to add more `channels` as well!

#### The Whole Program, Explained

Here's a breakdown of what happens in the MidiGrid Program.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

**Start Event:**

[IMAGE: Start event for the midi playback example in the Udon Graph]

On Start, it goes through each object in the `grids` array, finds the 'Image' component on its child, and sets its `enabled` value to `false`, effectively hiding all the Images to start.

It also waits 1 second after loading and then calls `Play()` on the VRCMidiPlayer to start the music and data flow.

**Note Events:**

[IMAGE: Midi note on event for the midi playback example in the Udon Graph]


When it receives a `Midi Note On` event, it will loop through each entry in the `channels` array and check if the incoming note's channel matches one of the entries. If a match is found, that number is used as the `index` for the `grids` array to find the matching grid. The incoming note is run through `int.Remainder()` to find its index in the octave - a C will be 0, a C# will be 1, etc. This index is used to find the right child of the grid, and then set `enabled` on the 'Image' to `true`. Finally, the note's channel and note number are logged to the console. 

[IMAGE: Midi note off event for the midi playback example in the Udon Graph]

When the script receives a `Midi Note Off` event, it goes through a similar process as above. To hide the 'Image' component again, it sets `enabled` to `false`.

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
using UdonSharp;  
using UnityEngine;  
using UnityEngine.UI;  
using VRC.SDK3.Midi;  
  
[UdonBehaviourSyncMode(BehaviourSyncMode.None)]  
public class LogoButton : UdonSharpBehaviour  
{  
    [SerializeField] private Transform[] grids;  
    [SerializeField] private VRCMidiPlayer player;  
    [SerializeField] private int[] channels;  
      
    private void Start()  
    {  
        // Disable Image components of all grid children  
        foreach (var grid in grids)  
        {  
            for (var i = 0; i < grid.childCount; i++)  
            {  
                var child = grid.GetChild(i);  
                var image = child.GetComponent<Image>();  
                image.enabled = false;  
            }  
        }  
  
        SendCustomEventDelayedSeconds(nameof(_PlayAudio), 1);  
    }  
  
    public void _PlayAudio()  
    {  
        player.Play();  
    }  
  
    public override void MidiNoteOn(int channel, int number, int velocity)  
    {  
        UpdateGridState(channel, number, true);  
        Debug.Log($"{channel} : {number}");  
    }  
  
    public override void MidiNoteOff(int channel, int number, int velocity)  
    {  
        UpdateGridState(channel, number, false);  
    }  
  
    private void UpdateGridState(int midiEventChannel, int midiEventNoteNumber, bool isEnabled)  
    {  
        // Find all grids that are mapped to the midi event's channel.  
        for (var gridIndex = 0; gridIndex < grids.Length; gridIndex++)  
        {  
            var gridChannel = channels[gridIndex];  
            if (midiEventChannel != gridChannel) continue;  
              
            // Enable/Disable image, quantized by chromatic 12 note scale.  
            var child = grids[gridIndex].GetChild(midiEventNoteNumber % 12);  
            var image = child.GetComponent<Image>();  
            image.enabled = isEnabled;  
        }  
    }  
}
```

</TabItem>
</Tabs>

---

## Document: minimap.md

Path: /worlds/examples/minimap.md
---
title: Minimap
description: "Displays a live minimap using Graphics.Blit"
sidebar_custom_props:
    customIcon: 📌
---
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';

[IMAGE: Minimap Example World]

This example includes a minimap that you can pickup and take around the world with you. Your position is shown as a blue dot on the map, and other players are shown as green dots.

Visit the [Minimap Example World](https://vrchat.com/home/world/wrld_12492ad5-ff17-445d-9f90-7b14376b1f32) to try it for yourself!

## Using the Example

Grab the minimap from the instruction area and walk around the world. Observe how the blue dot (you) stays centered as the map updates around you. 

Return to the instructions near spawn and press the button labeled "Toggle Visibility of Other Players", to turn it on. If you're testing in ClientSim, use the pause menu to Spawn a Remote Player. If you're testing in VRChat, join the world with an alt account or invite a friend. The remote player should show up on your map in green. You can press the button again to hide the green dot(s).

<HowToImportExample/>

## Technical Breakdown

### Udon Program

The Udon program works in the following way:
  - On Start: A camera, which is a part of a prefab, captures your scene from above. As a world creator - you can place it anywhere in your world.
  - On Update: The position of the local player is taken and passed through to a special shader (`MiniMap Blit`).
  - The shader then overlays a dot at the player's position onto the map capture.
  - If you allow showing other players - you can then use the `_ShowOthersToggle` to toggle dots of other players on and off. Try it out with friends!

### Pickup

The pickup, in turn, is incredibly simple. It simply uses a material with the final output texture `MiniMap RT` assigned as its Main Texture and Emission.

### Other Notes

One of the benefits of `Graphics.Blit` is that you get a regular texture out of it, which you can in turn use for anything you want!

You can also control the update rate by simply calling `Graphics.Blit` more or less often.

Almost all of the parameters you can think of are adjustable via `MiniMap` program, so feel free to experiment!

If you're going to use this Example Prefab in your world, don't forget to adjust `MaxPlayers` variable to match your `World Capacity`.

---

## Document: mute-others.md

Path: /worlds/examples/mute-others.md
---
description: "Mute and unmute other players."
sidebar_custom_props:
    customIcon: 🔇
---
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';

# Mute Others

[IMAGE: Mute Others World Preview]

This example shows how to mute and unmute other players.

Visit the [Mute Others Example World](https://vrchat.com/home/world/wrld_6b2ed4f1-09be-4dee-91b2-fc49e12ecb88) to try it for yourself!

## Using the Example

Open the `mute-others` scene to first test it out in the Unity Editor, or visit [this world](https://vrchat.com/home/world/wrld_6b2ed4f1-09be-4dee-91b2-fc49e12ecb88) in the VRChat Client.
This example requires TextMeshPro, a window will show offering to "Import TMP Essentials" if you don't already have TextMeshPro in your project. Accept this offer and re-open the scene after it's done importing.

Press the button labeled "Mute Players" to mute all the other players who are in the instance with you, and change the button label to "Unmute Players". Press the button again to restore the other players' voices and the original "Mute Players" label.

<HowToImportExample/>

## Technical Breakdown

[IMAGE: Mute Others Inspector]

There is a single U# program on the "PlayerMuteLogic" GameObject which contains all the logic for the demo.

### MuteOthers.cs

This program has a boolean `_areOtherPlayersMuted` variable which is toggled whenever the `_Trigger()` function is called from the MuteButton in the scene.

After flipping the value of this variable, `OnMuteUpdated()` is called, which fetches a list of all the Players in the instance, and then changes their [VoiceDistanceFar](/worlds/udon/players/player-audio#set-voice-distance-far) to effectively mute and unmute them. When this value is set to 0, it means that other player voices will travel 0 meters before they are silent. 

When unmuted, the value is restored to `_defaultVoiceDistance` which is 25 unless you change it in the inspector, so their voices can be heard for the default distance of 25 meters.
This function also changes the text on the button, which is referenced as `_buttonLabel`.

[IMAGE: Inspectors for changing button text]

The messages to display for each state are easily changeable in the inspector, as `Message Muted` and `Message Unmuted`.

#### Variables
* Button Label - a reference to the label of the button to change its message, should be already set properly.
* Message Muted - the text shown on the button while other players are muted, default is "Unmute Players"
* Message Unmuted - the text shown on the button while other players are unmuted, default is "Mute Players"
* Default Voice Distance - the value that will be set for all player voice distances when they are unmuted, default is 25, which is the platform-wide default.

---

## Challenge

Can you update this prefab to only mute some players? One approach would be to do this based on where players are, for a jump-start on that you can check out the [PlayerJoinZones](/worlds/examples/player-join-zones) example, which creates a collection of players based on whether they are in a Trigger area.

---

## Document: build-from-custom-parts.md

Path: /worlds/examples/obstacle-course/build-from-custom-parts.md
---
title: "Obstacle Course: Build From Custom Parts"
slug: "build-from-custom-parts"
hidden: false
createdAt: "2021-08-10T19:34:59.759Z"
updatedAt: "2021-08-18T20:57:33.538Z"
---
:::note Make a Simple Course First

It's highly recommended to work with the Demo prefabs and Starter Scene first. Read through the instructions to [Build From Demo Parts](/worlds/examples/obstacle-course/build-from-demo-parts).
:::
# Customizations
Ok, you've made a simple remix of our demo parts, and you're now ready to add your own custom PowerUps, Hazards and more. Read on to learn how to make new prefabs that interact with the existing systems.

# Making Custom Checkpoints

Here is the hierarchy of the Checkpoint prefab we include:

[IMAGE: build-from-custom-parts-692d375-checkpoint-hierarchy.png]

## Trigger Requirements
[IMAGE: build-from-custom-parts-f72c567-checkpoint-inspector.png]

:::note It's a Pattern!

The "Trigger" object on this prefab uses a pattern that you'll see repeated on nearly every object that detects the player - Checkpoints, PowerUps, Hazards, Respawners, etc. We'll go into detail on this first prefab, and we can skip past it for the rest.
:::
Your checkpoint needs a **Collider** on the **CourseTrigger** layer with _isTrigger_ turned on and an UdonBehaviour with the **OnPlayerDataEnter** program.

[IMAGE: build-from-custom-parts-f896bef-checkpoint-inspector.png]

This UdonBehaviour needs the following variables set:
1. _fxPrefab_ should reference a Prefab which has some fun effects on it, and either the Udon Program **DestroyAfterXSeconds** or some other way that it destroys itself after some time.
2. _program_ should reference an UdonBehaviour on another object under this prefab, which has a **Checkpoint** program on it.
3. _eventName_ should be set to an Event that exists on the UdonBehaviour referenced above.
4. _deactivateOnTrigger_ should be checked for Checkpoints so that it can only be activated once per run until a player finishes the course.
5. _sendPlayerData_ is only required for a Checkpoint being used as a StartGate.

:::note OnPlayerDataEnter details

If you want to learn more about what's going on in this program, you can find the full documentation here: [OnPlayerDataEnter](/worlds/examples/obstacle-course/uoc-how-stuff-works#onplayerdataenter)
:::
## Checkpoint Program Requirements
All the above setup just detects the player, creates an FX object, and then triggers an event on the _real_ program. In this case, that's a program called **Checkpoint** on an object called "UdonProgram". The program on the collider will try to run a program called "Trigger" on this UdonBehaviour. 

All you need to do is have an object with an UdonBehaviour, with the **Checkpoint** program on it. all the variables of this program will be set automatically when you place it, or realtime when someone Triggers it in your world.

## Start / Finish Program Requirements
If you're making a Checkpoint to be used as a Start or Finish Gate, you'll set up your program slightly differently. The Trigger Collider will be the same, and you'll use the same **Checkpoint** program, but you'll need to make the following changes:

### For a **StartGate**:
* Set the _eventName_ to "StartRace"
* Make sure _sendPlayerData_ is on.

### For a **FinishGate**:
* Set the _eventName_ to "FinishRace"

## Customize It!
As long as you have the **Trigger Collider** and **Checkpoint Program** set up as described above, you have a working checkpoint prefab you can use in your world. Note that when someone Triggers your checkpoint, the GameObject on which the Trigger Collider sits will be set to **inactive**. So if you want to hide the whole checkpoint, put the collider on the topmost object. If you want to just hide some parts like we do in the demo prefabs, make those parts children of the Trigger Collider object.

When the someone finishes running the course or Respawns themselves through their menu, the Course is **Reset**. When this method is called, the Course program will search every checkpoint for Trigger Colliders. It will set all the GameObjects with Trigger Colliders to inactive, except for the first one, which it will set to active (your **Start Gate**). Keep this in mind if you have additional colliders on your prefabs - their GameObjects will be set to inactive if the colliders have _isTrigger_ turned on.

## Add it to your Checkpoint Prefabs list

The Utility Window lists your "Checkpoint Prefabs" for easily adding them to your scene. You can drag and drop your new custom prefabs into this list to swap them out, or change the "Size" of the list first to add new empty slots to which you can add your new prefabs.

# Making Custom PowerUps
Read through "Making Custom Checkpoints" above first to understand how the Trigger Collider system works, since it's the same for PowerUps. Once you've got a your Trigger Collider set up, you can work on the **PowerUp** program.

## PowerUp Program Requirements
[IMAGE: build-from-custom-parts-c3ecfa0-speed-up-program.png]

* First, make sure you have a Trigger Collider set up which calls "Trigger" on this UdonBehaviour.
* _playerModsManager_ can be left alone, this will be injected when you create the PowerUp through the Utility window, or when you press "Refresh".
* Either _speedChange_ or _jumpChange_ should be set to something other than 0. Positive values will be added to the default **MoveSpeed* or **Jump Impulse** you set as defaults in the **Power Ups** section of your Utility Window. Negative values will be subtracted. You can combine them - a PowerUp that makes you jump high but move really slow is totally valid.
* The _effectDuration_ should be something higher than 0 (no negative numbers). This is how long the  PowerUp will last. The player will get a message on their HUD that shows the change, this will fade away at the speed you've set here.

## Add it to your PowerUps Prefabs list

The Utility Window lists your "PowerUp Prefabs" for easily adding them to your scene. You can drag and drop your new custom prefabs into this list to swap them out, or change the "Size" of the list first to add new empty slots to which you can add your new prefabs.

# Making Custom Hazards

Hazards use the Trigger Collider setup that we documented under **Checkpoints** above, so make sure you've read through that first.

We've created two types of Hazard that you can work from - **Respawn** hazards and **Spawned** Hazards.

## Respawn Hazards
This is the most common Hazard in our demo course. It uses a Trigger Collider to Respawn the player to the last Checkpoint. You need a trigger collider set up to run the "Trigger" event on another object which has the **RespawnOnCourse** program on it.
[IMAGE: build-from-custom-parts-752dc13-moving-wall-hazard.png]

The RespawnOnCourse program will automatically have the _course_ variable set when you Refresh your UtilityWindow.

## Spawned Hazards
This hazard is made up of two parts, it's the most customized single-purpose Hazard we provide, as an example of extending our basic system to add functionality.

### HazardSpawner Program
[IMAGE: build-from-custom-parts-3ab9259-hazardspawner.png]

This program will spawn its _prefab_ every _delay_ seconds. It has a reference to _playerModsManager_ which will be injected when the Utility Window is Refreshed.
When it spawns a Hazard, it will look for an UdonBehaviour on the new object, and set its _playerModsManager_ variable to the reference it has. This is needed so the spawned Hazard can reduce the player's speed.

### SpawnedHazard Program
[IMAGE: build-from-custom-parts-a85b1af-barrel-hazard.png]

This prefab has a TriggerCollider on the "Trigger" child object which runs the event "HitPlayer" on the SpawnedHazard program. 

* _lifeDuration_ controls how long this prefab will exist after spawning, to ensure it doesn't stick around forever if there are no players around.
* _playerModsManager_ is set by the **HazardSpawner** program
* _speedChange_ works like a typical **PowerUp**. The 'x' value is the change to apply to the player's default speed, and the 'y' value is the duration of the effect. The default setting of (-3,3) on this prefab will subtract 3 from the player's speed for 3 seconds when they touch it.

:::danger UNPACK YOUR HAZARD PREFABS

Since these prefabs are not created and managed through the Utility Window, it's important to unpack them after you place them in your scene. Otherwise the auto-injection might not stick.
:::
# Other Customizations
Here are some other things you can play with:

## Score Fields
[IMAGE: build-from-custom-parts-60cfc05-ScoreManager.png]

If you want to change the look of the Score Fields or the number of scores that are shown, you can duplicated the "ScoreField" prefab, drop your new version into the "Score Object Prefab" slot in the "Score Manager" section of the Utility Window, and set the "Number of Scores to Show" to regenerate the UI that displays the scores.

## HUD
You can change the look and layout of HUD items - just look through the hierarchy of the "HUD" object.

## Minimap
If you want to change the camera angle, smoothing amount, etc of the Minimap, you can find the **CinemachineVirtualCamera** which it uses under "MinimapCameraSystem/VCam-Follow". Its _Follow_ and _LookAt_ variables are set at runtime, so if you want to test it in the Editor, you can drop in a Capsule, set that as the target for those two variables, and drag it around your course to see how it looks in the Minimap.

## Advanced Stuff
You can click on the new Course Asset you made in your Project pane to see its raw data, and access all kinds of stuff that you can change **_at your own risk_**, like the default Udon Programs. You can also modify the "Variable to Scene Object Lookup" section:

[IMAGE: build-from-custom-parts-489afea-lookup.png]

This is where the UtilityWindow looks when it runs Refresh() to inject the right objects into UdonBehaviours. On the left are variable names, and on the right are the names of objects in the scene on which the correct Component can be found. Right now, the system supports finding and injecting these Component Types:
* GameObject
* UdonBehaviour
* CinemachineVirtualCamera

So you can make a new Udon Program with a public variable called "course", and it will automatically be injected with the CourseManager UdonBehaviour. You can add your own items here, and even add additional types if you like - just modify the **InjectVariableReferences** method on the **ObstacleCourseEditorWindow** class, adding extra types in the if-chain. If you write a good generic Component handler, make a Pull Request to the git repo!

---

## Document: build-from-demo-parts.md

Path: /worlds/examples/obstacle-course/build-from-demo-parts.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Obstacle Course: Build From Demo Parts

## Open Starter Scene
The easiest way to make a new course is to use the models and prefabs we provide.
Start by opening the scene "_WorldJam2/Scenes/Starter.unity"

## Make your own Folder
It's important to save anything specific to your project in a folder outside of the "_WorldJam2" folder so you can import updates without overwriting your work. We recommend you create a new folder under Assets, we'll call it "_MyProject" for this demo. We use underscores at the beginning of important folders so they show up at the top of the alphabetically-sorted file listing.

## Make New Course Asset
The **ObstacleCourseAsset** holds all the special information about your Checkpoints, Player Prefabs,  Score Display, PowerUps and more. 
1. In the **Project** window, find the "StarterCourse.asset" under "_WorldJam2/Courses" and Duplicate it.
2. Rename the new course to something custom like "MyCourse.asset" and move it to your "_MyProject" folder.
3. In your hierarchy, select the **CourseManager** under "Udon/CourseManager".
4. Drag and drop the new Course Asset your just created to the "Asset" field on the **Obstacle Course Data** script on the CourseManager object.

[IMAGE: build-from-demo-parts-8a69d28-drop-course-asset.png]

Now all your changes will be saved to your custom course instead of the Starter course.


## Add Course Pieces
You can find all the available Course Pieces in the project under "Assets/_WorldJam2/Prefabs/Course Pieces".
[IMAGE: build-from-demo-parts-ebf489c-all-course-pieces.png]

1. To add new pieces to your course, just drag and drop them into the scene view. You can hold CTRL while dragging to snap the items to a grid.
2. If you're using Udon on any of your pieces, make sure to Unpack them from being prefabs to just regular GameObjects. It's also a good idea in case you want to load in an updated package for this project with overwriting your existing pieces.

:::note Grid Snapping

Unity has many settings for aligning items to a grid - check out <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/GridSnapping.html">Unity's Manual</UnityVersionedLink>
:::

## Add Checkpoints
Your Start Gate, Checkpoints and Finish Gate are best added through the special Utilities window we made for this jam.

1. Open the **Obstacle Jam Utilities Window** from your menu bar under "⏵Obstacle Jam Utilities / Open Window"
[IMAGE: build-from-demo-parts-df0b76f-open-utilities-window.png]

2. Check out the prefabs:

[IMAGE: build-from-demo-parts-22a6f4e-checkpoint-prefabs.png]

These are the only three prefabs we need to make a working course - a start Gate, a Checkpoint and a FinishGate.

3. The utilities window makes it very easy to add new Checkpoints.Select a prefab from the "Checkpoint Prefabs" list and move your cursor over to your Scene View. You'll see a preview of the selected prefab, it will try to place itself intelligently on the surface you're pointing at - notice how the gate snaps to the side of the block in the GIF below until I point at the top. 
4. Once you're happy with the placement, press the Spacebar to actually add the prefab and wire it up to your scene. 
[IMAGE: build-from-demo-parts-4200ff4-place-gates.gif]

5. When you add a Checkpoint prefab this way, it is automatically added to your "Checkpoints In Scene" list. Open that list to see the new checkpoint included:

[IMAGE: build-from-demo-parts-84c73fe-checkpoints-in-scene.png]

Select one of these checkpoints and the Scene View will move to focus on it. You can also see it selected in the hierarchy. If you press the triangle next to this new "Checkpoint 1" object in your hierarchy, you can see an UdonProgram on it. Select that UdonProgram and you can see that its 'index' has been automatically set to 1.

[IMAGE: build-from-demo-parts-feaf465-checkpoint-program.png]

6. Continue to add checkpoints around your course until you've got enough to get started. If you need to rearrange the order, you can use the up and down arrows in the "Checkpoints in Scene" list to change the order in which players should go through your gates. When you change the order this way, the Checkpoint's index is changed to match its actual order, and its name is changed to match its index.

## Test Checkpoints
At this point, you've extended or changed the course, and added some checkpoints - time for a test! Open the VRChat SDK Control Panel, sign into your account, and choose "Build & Test" to test out your course!
:::note Build and Test

If you have any problems launching your world or just want to learn more about local testing, check out the [Build and Test](/worlds/udon/using-build-test) docs.
:::
## Add PowerUps
Let's add some PowerUps to make things more interesting.

1. In the Utility Window, open the "Power Ups" section. It's very similar to the Checkpoints section, with different parameters for the ones you've already placed.

[IMAGE: build-from-demo-parts-9c8911e-power-ups-section.png]

2. Select one of the PowerUp Prefabs, then place it in your scene by pointing your mouse at a surface and pressing the spacebar, just like you did for Checkpoints.
3. After placing a PowerUp, the **Transform** tool is selected so you can fine-tune the placement of your item.
4. Your new PowerUp appears in the "PowerUps In Scene" section. You can use the fields to the right of the PowerUp's name to change the effect it has on your players. You can use negative numbers to _reduce_ a player's Speed and Jump, but a negative duration will have no effect.
5. Select a PowerUp to automatically focus on it in the Scene View and select it in the hierarchy. If you want to remove one, you can delete it from your scene and press 'Refresh' at the bottom of the Utility Window to update the listing.

You can also change the default **Move Speed** and **Jump Impulse** in this section. Make sure you **DON'T** put a **VRCWorldSettings** program in your world or else it will fight with these settings.

Move Speed sets **Walk**, **Run** and **Strafe** speeds to be all the same.

## Test PowerUps

**Build & Test** your scene again to try out your new PowerUps!

## Add Hazards

1. Find the Hazard prefabs in "Assets/_WorldJam2/Prefabs/Hazards"
[IMAGE: build-from-demo-parts-5c1a72c-hazards.png]

2. These don't use our special tools since they don't need any fancy setup. Just drag and drop them into your scene and fine-tune their placement.

3. After you've placed a hazard, right-click the GameObject in your hierarchy and choose "Unpack Prefab Completely". This will ensure that any updates to your project won't overwrite Hazards you've already created, and avoid some known issues with Udon and Prefabs.
[IMAGE: build-from-demo-parts-9d80caf-unpack-prefab.png]

4. Once you've placed your Hazards, press the "Refresh" button at bottom of the Utility window. This will inject some references into your Hazards so they can properly Respawn your users when they touch the Hazard.

:::danger NO SERIOUSLY - UNPACK THAT PREFAB!


:::
### Modular Hazards
The hazards we've included are modular so you can easily modify their look and difficulty. Each moving hazard consists of a collider set to "Trigger" attached to an animated game object. You can add different meshes and trigger placement for a whole new hazard concept using different course pieces we've included or kit-bashing other asset packs.
[IMAGE: build-from-demo-parts-26e93e5-uoc_hazard_pic1.png]

The four types of moving hazards included give you a starting point for horizontal, vertical, spinning and swinging hazards. You can change the speed of each type by using the Animator window.
[IMAGE: build-from-demo-parts-9b460a2-uoc_hazard_pic2.png]

## Check Hazards

Time for another **Build & Test!**

## Set Number of Players
It's a good idea to set the **Number of Players** in your Obstacle Course world to twice as high as the **Player Capacity** in your world. Just change the number in this field in your Utility Window, and the **Object Pool** which manages **Player Objects** will automatically fill with that number of players, and it will set all those players up with the variables they need.
[IMAGE: build-from-demo-parts-574bf2e-number-of-players.png]

## Build & Publish

Once you're ready to invite your friends to help test your world, you can **Build & Publish** it to make it available in VRChat. You'll set your world name, take a picture to share, and you can Submit to Community Labs once you're ready for more people to see it!
:::note Publishing & Trust Levels

You need to be spend some time in VRChat before you can publish worlds. Learn more here: [FAQ](https://docs.vrchat.com/docs/frequently-asked-questions#why-cant-i-upload-content-yet)
:::
If you want to explore more options for Customizing your Obstacle Course, you can read on to [Build From Custom Parts](/worlds/examples/obstacle-course/build-from-custom-parts)

---

## Document: index.md

Path: /worlds/examples/obstacle-course/index.md
---
title: "Obstacle Course"
hidden: false
createdAt: "2021-08-10T18:17:12.204Z"
updatedAt: "2021-09-21T22:51:28.690Z"
sidebar_custom_props:
    customIcon: 🏃‍➡️
---
# Overview
<iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2Fid3VqPUy_rY%3Ffeature%3Doembed&display_name=YouTube&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Did3VqPUy_rY&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2Fid3VqPUy_rY%2Fhqdefault.jpg&key=f2aa6fc3595946d0afc3d76cbbd25dc3&type=text%2Fhtml&schema=youtube" width="854" height="480" scrolling="no" title="YouTube embed" frameborder="0" allow="autoplay; fullscreen" allowfullscreen="true"></iframe>

This project was created for our second World Jam, and serves as a fun starter kit for a Time Trial game world!

Visit the example world here: [VRChat Obstacle Course Jam World](https://vrchat.com/home/world/wrld_39c422c4-ab87-4cc1-a4d1-390af2e45c74).
Download a ready-to-use project here: [VRChat Obstacle Course Project](https://github.com/vrchat/VRChat-Obstacle-Jam/releases/download/1.0.3/obstacle-jam-public_v1.0.3.zip).
For advanced users, you can [fork the GitHub project](https://github.com/vrchat/VRChat-Obstacle-Jam) to easily stay up-to-date with any updates or fixes.

It's built to be usable by creators with little-to-no Udon experience, you can just snap together a new course using the existing models, or creating / importing your own.

To explore the scene, simply download the latest version, and Build & Test the 'Assets/_WorldJam2/Scenes/DemoScene' scene.

# Quick Start
Here are some easy things you can modify to get started:

## Move & Jump
Open the Toolkit window from your menu bar by finding the "▶ Obstacle Course Toolkit" item and selecting "Open Window" from its dropdown. Open the "Power Ups" section and you can change the default Move and Jump powers for the world.
[IMAGE: index-40a0a08-utility-change-defaults.png]

## Number of Players
If you want to increase the number of players that can run through the course, just open the "Player Manager" section of the Utility Window and increase the number here. Make sure you change the number of players your world can handle when you publish your world to be half of this number!
[IMAGE: index-985e270-number-of-players.png]

## PowerUp Properties
Back in the "Power Ups" section of the Utility Window, open the "PowerUps in Scene" section. Click on the name of a PowerUp and the Scene View will focus on it so you can see which one it is. Then you can change the _speed_, _jump_ and/or _duration_ fields to update the variables on that PowerUp.
[IMAGE: index-f5481d9-powerups-in-scene.png]


---

## Document: uoc-flythrough.md

Path: /worlds/examples/obstacle-course/uoc-flythrough.md
---
title: "Obstacle Course: Flythrough"
slug: "uoc-flythrough"
hidden: false
createdAt: "2021-08-12T22:56:42.710Z"
updatedAt: "2021-08-18T20:58:14.295Z"
---
We included a Cinemachine system to easily generate a fly-through video of your course!

# Basic Setup
* Drag and Drop the **Flythrough** prefab from **Assets/_WorldJam2/_SubSystems/Flythrough** into your scene.
* Press "Refresh" in the Obstacle Utility Window. This will generate a path based on all the Checkpoints in your scene!
* Select the **FlythroughPrefab/RecordCamPath** object in your hierarchy to see the path that was created.
[IMAGE: uoc-flythrough-2114971-flythrough-path.png]

* Press 'Play' in the Game View to see your flythrough! Exit Play Mode once you have an idea of how it looks.

# Modifying the Path

By default, the path will be generated 0.5 units above each checkpoint's origin. If this is too high or low for your particular scene, you can modify the "Record Path Y Offset" in the **Recording** section of the VRC Obstacle Window to change the height of every checkpoint at the same time. You can click and drag left and right on the label to easily dial in the right spot.

If you want to add / remove / reposition the waypoints in the path, turn off 'Auto Update Checkpoints' in the Recording section, then select the **RecordCamPath** in the hierarchy. Here, you can change the numbers directly, or press the number of the waypoint on the left side of the inspector to select the waypoint in the scene view and move it using the standard transform tool.

You can change the speed of the flythrough by selecting the *RecordCamTarget* object in the hierarchy and changing the _Speed_ parameter on the **Cinemachine Dolly Cart* component. The default setting uses Normalized Position Units with a Speed of .03 to make it through the course in about 30 seconds.
[IMAGE: uoc-flythrough-5f34a79-waypoints.png]

# Recording the Output
You can use a screen recorder to directly record your Game View in the Editor, or use the Unity Recorder Package to generate a higher-quality output. You can add this from the Package Manager. It has been tested and works with this setup. If you want full instructions on using the Recorder, you can find the official Unity Manual here: [Unity Recorder 1.0 User Manual.](https://unitytech.github.io/unity-recorder/manual/index.html) and a tutorial here: [Working with Unity Recorder](https://learn.unity.com/tutorial/working-with-unity-recorder).

# Cleaning Up
Make sure to remove the recorder from your scene before you publish! If you customized a path, you can make a copy of the prefab with your new path to use it again later.

# Extra Credit
You could integrate this flythrough camera with the existing Cinemachine system in the scene (which renders to the Minimap and in-game jumbotrons), or create a separate system for high-quality in-game recording!

---

## Document: uoc-how-stuff-works.md

Path: /worlds/examples/obstacle-course/uoc-how-stuff-works.md
---
title: "Obstacle Course: How Stuff Works"
slug: "uoc-how-stuff-works"
excerpt: "How all the different programs and custom editor scripts work together in the Udon Obstacle Course"
hidden: false
createdAt: "2021-08-10T19:42:13.400Z"
updatedAt: "2021-08-18T20:57:54.974Z"
---
Each system was designed to have a specific set of responsibilities, and to know about other systems as little as necessary. 

# Overview
* The **PlayerDataManager** assigns **PlayerData** objects to each player who enters the world.
* When a **PlayerData** object enters the Start Gate **Checkpoint**, the **Course** they just entered starts tracking their time, and activates the next **Checkpoint**.
* When the **PlayerData** object passes through the last **Checkpoint**, their time is added to the Scoreboard.
* If the **PlayerData** object enters a **PowerUp** trigger, the **PlayerModsManager** temporarily changes their speed and/or jump abilities, resetting them to default after a set duration
* If the **PlayerData** object enters a **Respawn** trigger, the **Course** will respawn them at the last **Checkpoint** through which they passed.

The following sections describe the programs and scripts that combine to make the whole experience.

# Players
Each player who joins the world gets a 'PlayerData' object to manage their state and progress through a course. The **PlayerDataManager** assigns **PlayerData** objects, which can trigger **OnPlayerDataEnter** programs.

## PlayerDataManager
You can find this program on the "PlayerDataManager" GameObject under the "Udon" object in the scene. It has two important public variables:
**dataPool**: Reference to the VRC Object Pool component on the same object as this Manager. When a Player Joins the world, this manager will TryToSpawn a PlayerData object for them, and give them ownership.
**followCam**: Reference to the camera that will follow above a Player as they run through the course. Set here so the PlayerDataManager can assign the reference to each PlayerData object when they are refreshed.

When you change the 'Number of Players' option in the Toolkit Window, all the existing PlayerData objects will be removed from the scene, then new copies of them will be added as children of the PlayerDataManager. Each one will have its public variables set up properly, and the Object Pool will be updated to hold all the new PlayerData objects.

## PlayerObject
The PlayerObject prefab has a Rigidbody and Capsule Collider component, which are needed to trigger PowerUps, Hazards, etc. It's on a custom layer **CoursePlayer** which only collides with **CourseTrigger** to interact with Hazards and PowerUps. It also has an UdonBehaviour with an important program on it:

## PlayerData
This program is the main connector between the player running the course and all the other systems. Its variables are:
**timeElapsed**: Synced Float which is updated by the **Course** program when they cross the Finish Gate. When it changes, the owner of the PlayerData object will show this time on the scoreboard so they can see their latest time locally. The owner of the ScoreManager object will see this change and add the new time and displayName of the Player to the scoreboard.

**isRacing**: Boolean which is set true by the **Course** when the player has entered a start gate. It's set to false when the player enters a finish gate, manually respawns using their menu, or **Reset** is called on the **Course**. Used by the **Course**, see that program for more info.

**rigidbody**: Cached on Start by the program, it doesn't need to be set in the inspector. It's moved to the position and rotation of the player during every Update.

**player**: Reference to the actual VRCPlayerApi object of the local player. Cached when the synced _playerId_ on this program is changed. Used to retrieve the _displayName_ of the player.

**timeDisplay**: Reference to the UdonBehaviour which displays the latest time for the local player.

**scoreManager**: Reference to the **ScoreManager** UdonBehaviour. When the owner of that object receives a _timeElapsed_ change from a **PlayerData** object which just finished the course, it sets the public variable _scoreToProcess_ on the **ScoreManager** object to a string which combines the _displayName_ and _elapsedTime_ into a single string to be processed.

**scoreManagerObject**: Reference to the GameObject which holds the UdonBehaviour with the **ScoreManager** program. Needed to ensure we only run the Score Processing logic on the owner of the **ScoreManager** object. We can't get this GameObject from an UdonBehaviour reference, so we include it here.

**followCam**: Reference to the CinemachineVirtualCamera which follows the player around the course. The program sets its own Transform as both the _follow_ and _lookAt_ targets for the camera, and changes the priority on this camera when _isRacing_ changes.

## OnPlayerDataEnter
This program is used on objects which should detect the **PlayerData** object entering its Trigger Collider. We use the custom layers **CoursePlayer** and **CourseTrigger** ensure that only certain objects will trigger this collider. When they do, it fires the internal event **OnPlayerDataEnter** to do a multitude of things. This program has the following variables:

**fxPrefab**: A GameObject to spawn when on **Trigger**, meant to play a sound, show some particles, etc so the Player knows that something has happened.

**program**: A target UdonBehaviour with an event we want to run on **Trigger**. This _program_ contains the specific logic for a **Checkpoint**, **PowerUp**, **Hazard**, etc.

**eventName**: The event name to run on the target _program_.

**deactivateOnTrigger**: Whether this object should deactivate itself after a single **Trigger**. This is useful for **Checkpoints** and other items that should only activate once per run.

**lastCollider**: Collider which started the Trigger logic, which is temporarily cached before **Trigger** is called and used to find the **PlayerData** UdonBehaviour if needed.

**fxSpawn**: A Transform we use to set the position of the FX we will spawn. Defaults to the Transform of the object with the collider if not set, useful if you want to trigger Fireworks in another location when running through a collider, like we do for the Finish Gate.

**sendPlayerData**: A Boolean that decides whether or not to try to pass along the **PlayerData** program that Triggered the logic. Used when entering a Start Gate, could be useful for other things as well.

When a **PlayerData** collider trigger entry is detected, this program does the following:
* If we have set an _eventName_ variable, then we will check whether _sendPlayerData_ is true. If it is, we will try to set the _playerData_ variable on the target UdonBehaviour program to the UdonBehaviour with which we just collided.
* We will then run the event _eventName_ on the target program.
* If the _fxPrefab_ GameObject on this program was set (not left at default of 'self'), then we will **Instantiate** a copy of the prefab and set its position and rotation from the _fxSpawn_ variable.
* If _deactivateOnTrigger_ is true, then we will set **this** GameObject to inactive.

# Course & Checkpoints
This is the heart of the project, the gates and checkpoints that you need to move through to complete the time trial.

# Course
This program lives on the CourseManager object and manages the state of the time trial for the local player. It doesn't have any synced variables - it only knows about the Local Player who is running through it.

On **Start**, it calls **Reset** to set itself up properly.
If the player Respawns themselves, the Course will **Reset**.

On **Reset**, we turn off all of the **Checkpoint** triggers except for the Start Gate, which we turn on. We do this by looping through each GameObject in the _checkpoints_ array, finding every Trigger Collider, and calling **SetActive** on that collider's GameObject to true for index 0 and false for all the others.
We also set _nextIndex_ to -1 and set _isRacing_ to false.

On **StartRace**, we:
* set _startTime_ from the current time
* set _isRacing_ to true
* set _nextIndex_ to 1 (since the race is started by passing through Checkpoint 0)

When a **Checkpoint** is triggered, it sets the _nextIndex_ on the Course to its own index + 1. This triggers the **nextIndexChange** event on the Course program, which will then activate the GameObject for the next Checkpoint.

During **Update**, we check whether a player _isRacing_, and if so we get the elapsed time of the run and set it on the _timeDisplay_ Text object.

On **FinishRace**, we:
* set _isRacing_ to false
* set _timeElapsed_ on the target **PlayerData** program to the current time minus _startTime_.
* set _playerData_ to null since we no longer have a player running the course.
* wait for _resetDelay_ seconds and then **Reset** the course.

On **Respawn**, we check whether the player _isRacing_. If so, we send them back to the transform position of the last checkpoint. If not, we teleport them down low enough that they will be respawned by the world, back at one of the original spawn points.

## ObstacleCourseData
This custom script just holds a reference to the **ObstacleCourseAsset** with all the info about your course like which prefabs to use, the number of players, the default speeds, etc. It's loaded by the Utility Window so you should have one in your scene. You should create your own so it's not overwritten if you update your project with a newer version of this package. Do this by duplicating an existing asset, which will ensure the default values are correct.

## Checkpoint
The Checkpoint objects each have an index which represents their order in the time trial, this is automatically set when placing Checkpoints through the Utility Window or modifying their order. 
They have a Trigger Collider with an **OnPlayerDataEnter** program which call into a **Checkpoint** program that we have on an object called "UdonProgram" in our example prefabs. The program is simple, with three possible events that can be triggered on it:

**StartRace** will set the _playerData_ variable on the **Course** program to the UdonBehaviour that just entered this checkpoint. The Course will start the race when that happens.

**Trigger** will set the _nextIndex_ variable on the **Course** program to the _index_ + 1.

**FinishRace** will simply call **FinishRace** on the **Course** program.

# Score
What's a time trial without some friendly competition? The Score system syncs the names and times of the latest runs, as well as the best run so far in the instance.

## ScoreManager
This program sits on an Object called "ScoreManager" under the "Udon" GameObject. It uses a queue system to process incoming scores and sync them. It doesn't actually have _any synced variables_ itself, relying on the *ScoreFields* to sync the values instead. These fields are automatically populated by the Utility Window when you change the Number of Scores to Show.

On **Start**, this program calls its own **Render** event once.

On **Render**, the program calls **Render** on the _scoreCam_, which will render its current view to a RenderTexture used all over the course to show the current score.

When _scoretoProcess_ is changed on the Owner of this Object, we call **MakeRoom** and then **ProcessNextScore**. This works because every player in your instance will receive an update to _timeElapsed_ when someone finishes a run, and that program will update _scoreToProcess_ on this object if they are the owner.

On **MakeRoom**, we check if our scoreFields are all full already, and if so we'll copy the values down iteratively to make room at the top.

On **ProcessNextScore**:
* Pull apart the score into displayName and time again in order to format them nicely, and then set the _targetVarName_ value on the corresponding **ScoreField** to this. This target variable is synced, so we set it this way to update it for everyone. 
* Compare the time of this score against the time of our High Score and update the **HighScoreField** if necessary. 
* Set the value of _scoreToProcess_ to an empty string so its ready to process the next score that comes in. 
* Send the **Render** event to everyone to update their score texture.

## ScoreField
This program uses a simple and effective pattern - it has a public synced variable called _log_. When log changes, it updates the text in the field to the new value. In this way, the values are synced and updated for everyone when the owner of the object updates it, which can be done easily from another program. In our case, we update this value from the **ScoreManager**.

## HighScoreField
This program uses the same pattern as the score field above, but also has a synced _score_ float that can be used to compare scores and update only if the new score is better. It also has a "prefix" which is a string injected before any changes. In this case, the string "High Score:" is prepended to the incoming string.

# PowerUps
It's fun to offer speed and jump boosts for players looking to maximize their scores, You can also use speed and jump penalties as part of obstacles and hazards to give your players some choice in strategy. PowerUps are all placed as children of the "PlayerModsManager" object when you create them with the Utility Window. They also have the *PlayerModsManager* UdonBehaviour set on them automatically so they can apply their effects.

They have a very simple program. It's called from an **OnPlayerDataEnter** program of course, and has a single **Trigger** event. Its variables are:

**playerModsManager**: Automatically set when creating PowerUps through the Utility window. Used to actually apply the effects.

**speedChange**: Effect to apply to the Player's speed when triggered. 0 will skip, positive will increase speed, negative will decrease it.

**jumpChange**: Same as speedChange, but for Jump Impulse.

**effectDuration**: How long until the effect wears off.

On **Trigger**, the program will set _speedToProcess_ on the **PlayerModsManager** if it's not 0, and it will set _jumpToProcess_ if it's not 0. In order to simplify the logic, we bundle the _amount_ and _duration_ values into a single Vector2, where the _x_ is amount and _y_ is duration.

## PlayerModsManager
It's useful to have a central place to manage changes to a Player's abilities, especially when you consider that someone could run through a "Speed + 3" with a 2 second duration, and then a "Speed - 1" with a 3 second duration. In our program, speed mods cancel each other out, and jump mods cancel each other out. So in the example above, as soon as the Player triggered the "Speed- 1" PowerUp, they would reset to their default speed - 1, with a new 3 second timer running.

The program works with a queue, like the **ScoreManager**. When _speedToProcess_ is changed, it will figure out the new speed to use, apply that to the VRCPlayerApi of the Local Player, and start a countdown based on the _effectDuration_ of the PowerUp. The program displays the mod on the user's HUD and fades it out along with the timing so they Player can intuitively understand how much time is left. When the timer runs out, it resets the target property on the VRCPlayerApi to the default value, which is why we store and set those here instead of in the "VRCWorldSettings" program.

## DestroyAfterXSeconds
This simple program is useful for locally-instantiated objects, like the FX Prefabs created by **OnPlayerDataEnter** programs. It will ensure that the object destroys itself so you don't wind up with hundreds of old sound effects and particle systems sitting around.

## PlayClipFromArray
This program is useful for introducing some variety in your sounds, for use on FX Prefabs for example. Instead of a single AudioClip, you can set a group of them on this program and it will randomly choose one when it is created and play that one. Could also be useful for a Footsteps program.

# Hazards
If you want to challenge your players, you can add a variety of hazards. We included a couple example programs, feel free to make your own!

## Autorotate
This program simply rotates the Transform on which it lives. You can adjust the _amount_ for each axis, which will be multiplied by Time.deltaTime to ensure it rotates smoothly. An animator would have better performance, but this works when you're experimenting.

## SpawnedHazard
This hazard will reduce the speed of the Player who comes into contact with it. You can set _speedChange_ like you would on a PowerUp - the x is the amount to add to the Players' speed, and the y is the duration of the effect. To reduce a player's speed by 3 for 1 second, you would set _speedChange_ to (-3,1). They find the "PlayerModsManager" GameObject and UdonBehaviour by name when they are created - not very performant but it works.

## HazardSpawner
This program uses **SendCustomEventDelayedSeconds** to spawn hazards every _delay_ seconds. In our example project, we use slightly different delays to make a tricky hill of barrels for our players to dodge.

## FallingBlock
This program is the only one we include that interacts with a player and doesn't use **OnPlayerDataEnter**. This is because we want to know when a Player Enters _and_ when they Exit, which isn't accounted for in that program. When a player enters, we use **SendCustomEventDelayedSeconds** to run **CheckForDrop** after _triggerTime_ seconds.

On **CheckForDrop**, if the player has not yet exited the collider, it will set its Rigidbody to non-kinematic, causing it to fall (and the player along with it). It will then call **Reset** after _resetTime_ seconds.

# Misc

## Injection
This project has a system to inject references to certain components. It is described [here](/worlds/examples/obstacle-course/build-from-custom-parts#advanced-stuff).

---

## Document: uoc-window.md

Path: /worlds/examples/obstacle-course/uoc-window.md
---
title: "Obstacle Course Toolkit"
slug: "uoc-window"
hidden: false
createdAt: "2021-08-10T19:19:18.669Z"
updatedAt: "2021-08-18T20:56:44.155Z"
---
[IMAGE: Obstacle Course Toolkit]

We created a special window to help manage all the special prefabs and programs in the project. Here's what you can do in each section:

## Checkpoints

### Checkpoint Prefabs
[IMAGE: image]
You can set all the prefabs you would like to use for your start gate, checkpoints and finish gate here. They can then be easily placed into your scene: [Add Checkpoints](/worlds/examples/obstacle-course/build-from-demo-parts#add-checkpoints).

### Checkpoints In Scene
[IMAGE: uoc-window-f588547-checkpoints-in-scene.png]

Select one of these to zoom to the selected checkpoint in Scene View. You can re-order the checkpoints (which will rename them as well) and delete them. Changes made here will properly update the variables on the CourseManager.

## Player Manager

### Player Object Prefab
[IMAGE: uoc-window-b781ee6-playerobjectprefab.png]

Change this object if you make your own Player Object, which holds the PlayerData program and follows each local player around. Most creators won't need to do this.

### Number of Players
[IMAGE: uoc-window-0aa8cd9-number-of-players.png]

Change this number to generate the right number of Player Objects and automatically populate the ObjectPool.

## Score Manager

### Score Object Prefab
[IMAGE: uoc-window-c808c71-score-object-prefab.png]

Change this object if you make your own ScoreField, which will display the player scores as they finish a run.

### Number of Scores to Show
[IMAGE: uoc-window-778d7ed-number-of-scores.png]

Change this number to generate the right number of Score Fields and populate the ScoreManager references to them.

## Power Ups

### Power Up Prefabs
[IMAGE: uoc-window-d656caf-power-up-prefabs.png]

You can set all the prefabs you would like to use for your Power Ups here. They can then be easily placed into your scene (link to powerUp placement) and automatically wired up.

## Power Ups In Scene
[IMAGE: uoc-window-4bf4a4c-power-ups-in-scene.png]

Select one of these to zoom to the selected Power Up in Scene View. You can change the effects they will have on Speed and Jump for the player, as well as how long those effects will last after they touch the pickup.

## Defaults
[IMAGE: uoc-window-f1374e0-defaults.png]

Here is where you set the Move and Jump speeds instead of on the VRCWorld object. Walk, Run and Strafe are all set to the same speed by default, and they're modified together when the player touches  Power Ups.

---

## Document: health-bar.md

Path: /worlds/examples/persistence/health-bar.md
---
description: "Save player health amounts in a PlayerObject."
sidebar_custom_props:
    customIcon: 💗
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Health Bar

[IMAGE: Health Bar World Preview]

A simple health bar which uses a PlayerObject to sync and persist players' health amounts.

Visit the [HealthBar Persistence Example World](https://vrchat.com/home/world/wrld_012ab69b-74d8-439a-ae13-db42478d8680) to try it for yourself!

## Using the Example

1. Open the HealthBar_ExampleScene.
2. Run it in the editor or Build & Test.
3. Walk over to the red 'lava' and stand in it.
4. Look directly up to see your health bar, which will be shrinking as you continue to stand in the lava.
5. Exit the lava, take note of your health bar, and rejoin the world.
6. Your health will be restored to its previous level. Note that if you let your health bar run out entirely, you will respawn and your health will be restored to its full amount.

<HowToImportExample/>

## Technical Breakdown
The lava stores a reference to the local player's health bar. Upon entering the trigger, it will start damaging the player through the health bar's `TakeDamage` function (which should only be called on the local client).

### Inspector Parameters

You can customize the prefabs by changing their parameters:

#### HealthBar

* `float` **MaxHealth** - The player's maximum health.
* `Vector3` **Offset Above Head** - The distance of the health bar above the player's head.
* `Slider` **Health Bar Slider** - The UI slider that shows the player's health.

#### Lava

* `float` **Damage per second** - The damage per second that the lava deals to players touching it.

---
## Changelog
- 0.0.1 - Initial Version
- 0.0.2 - Added in-world UI, thumbnail, published world

---

## Document: index.md

Path: /worlds/examples/persistence/index.md
---
sidebar_custom_props:
    description: Learn about Persistence by adding prefabs to your world.
    customIcon: 📚
---

# Persistence Examples

Learn about the possibilities of Persistence and User Data by exploring these example prefabs.

import DocCardList from '@theme/DocCardList';

<DocCardList />

---

## Document: leaderboard.md

Path: /worlds/examples/persistence/leaderboard.md
---
description: "Save and display high scores with PlayerData."
sidebar_custom_props:
    customIcon: 🏅
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Leaderboard

[IMAGE: Leaderboard World Preview]

A leaderboard which uses PlayerData to persist and display high scores.

Visit the [Persistent Leaderboard Example World](https://vrchat.com/home/world/wrld_107de08b-0dfa-4ed1-a3d4-398c29616b4c) to try it for yourself!

## Using the Example

1. Open the Leaderboard scene.
2. Then enter Play Mode
3. Your name is on the leaderboard with a score of 0 score.
4. Jump and your score increases.
5. Exit and re-enter Play Mode. 
6. You are once again on the leaderboard, and your score was remembered from the previous session.

<HowToImportExample/>

## Technical Breakdown
There's a `Leaderboard` script where you can add any key you want players to be ordered by. Works with Float and Int. 

Then there's also a `LeaderboardSlot` script which is a RectTransform. This is a PlayerObject which means one will be created for each player joining. When the object is created it's automatically added to Scroll View defined by the Leaderboard. 

The Scroll View's content transform has a Vertical Layout Group which makes all children of it automatically sort by the order they are in the hierarchy. The Leaderboard script updates the position of the `LeaderboardSlot` in the hierarchy each time their persistent score changes.

---
## Changelog
- 0.0.2: Script tweaks: Use VRCEnablePersistence components on player objects

---

## Document: persistent-idle-game.md

Path: /worlds/examples/persistence/persistent-idle-game.md
---
description: "Save points & upgrades in a simple Idle Game."
sidebar_custom_props:
    customIcon: 👆
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Persistent Idle Game

[IMAGE: Persistent Idle Game World Preview]

This scene implements a simple [idle game](https://en.wikipedia.org/wiki/Incremental_game) that uses PlayerData to save the points and auto-clicker count for each player.

Visit the [Persistent Idle Game Example World](https://vrchat.com/home/world/wrld_42ba5f54-7fab-4f3a-8fc3-8d2f2ccbb33e) to try it for yourself!

## Using the Example
Load the scene and tweak the Udon values on the "IdleGame" object to your liking.
Play the scene, click the button to collect cheese, buy auto-clickers, leave play mode, and observe that the values are saved under their respective keys in the ClientSim PlayerData window.

<HowToImportExample/>

## Technical Breakdown
The main script is `IdleGame.cs`. It handles the gameplay, saving, and loading.
The only other script, `IdleGameButton.cs` communicates the player's button click to the main script.

Whenever the player clicks the button, they gain one point. The script saves the points in PlayerData using the `POINTS_KEY` string value.

Similarly, when the player buys an auto-clicker, they gain one auto-clicker and lose points. The script saves the amount of autoclickers using the `AUTOCLICKERS_KEY` string value.

The script gives the player one point per second for every auto-clicker. The price of the auto-clickers is multiplied by a fixed amount for every purchased auto-clicker.

Reloading the scene loads the points and auto-clicker value using `POINTS_KEY` and `AUTOCLICKERS_KEY` and calculates the auto-clicker price.

---
## Changelog
- 0.0.2: Script tweaks: The code uses OnPlayerRestored to load player data

---

## Document: persistent-pen.md

Path: /worlds/examples/persistence/persistent-pen.md
---
description: "Save Pen Lines with PlayerObjects."
sidebar_custom_props:
    customIcon: 🖊️
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Persistent Pen

[IMAGE: Persistent Idle Game World Preview]

This example allows players to use a pen to draw up to 20 colored lines. Lines are synchronized for all players. The eraser can highlight and delete lines drawn by the local player.

Visit the [Persistent Pen Example World](https://vrchat.com/home/world/wrld_e24ce788-1fda-42dc-912b-69cd9e51140c) to try it for yourself!

## Using the Example

Play the scene, pick up the pen, and tap "Use" without moving the pen much to cycle through the available colors. Hold "Use" and move the pen to make lines in 3D space, release "Use" to finish the line.

Drop the pen and pick up the eraser, then stick the eraser directly into any of your lines. Known Issue: In ClientSim, this does not highlight the line - it works in the VRChat Client. 

Press "Use" to delete the selected line - this adds it back to your collection of 20 lines.

Stop the scene and then restart it to see your lines restored!

<HowToImportExample/>

## Technical Breakdown
The `SimplePenSystem` has a `VRCPlayerObject` component on it, which instructs VRChat to automatically spawn it for each player in the world, and remove it when they leave. [VRCEnablePersistence](/worlds/components/vrc_enablepersistence) ensures that all synced properties of the pen system, such as the positions, points, and colors of each line, are automatically saved and loaded.

### Udon Program Details

This experience is powered by two programs - one for the [Pen](#udon-pen), and another for each [Line](#lines).

#### Udon Pen

Check out the `Udon Pen` script in the scene under `SimplePenSystem/Pen`. 
- Change the gradient used as the `Palette Color` to swap the available colors.

#### Lines
You can find the Lines the pen uses under `SimplePenSystem/Lines`.
- If you want more lines available per pen, just duplicate some of the existing lines! No other changes are needed.
- You can make changes per line, like setting different widths or materials.

---

## Roadmap
We plan to make the following improvements to this example in the future:
- Respawn the pen whenever it's more than X units away from you.
- Add a color picker where you hold a button to show a palette, then move to the color you want to use.
- Refactor the prefab to allow infinite lines.

---

## Document: playerdata-types.md

Path: /worlds/examples/persistence/playerdata-types.md
---
description: "Demonstrates data types supported by the PlayerData interface."
sidebar_custom_props:
    customIcon: 📃
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Player Data Types

[IMAGE: Player Data Types World Preview]

A barebones examples that demonstrates data types supported by the PlayerData interface. 

Visit the [Player Data Types Example World](https://vrchat.com/home/world/wrld_f9a960d5-c282-431a-bfd0-f9bd6f1158d6) to try it for yourself!

Supported data types include:

- bool
- byte
- byte[]
- int
- float
- double
- long
- short
- string
- sbyte
- uint
- ulong
- ushort
- Vector2
- Vector3
- Vector4
- Quaternion
- Color
- Color32

## Using the Example

In Client:

1. Enter the world
2. Click button “Set Test Data”
3. Observe the display updating with the test data

In Editor:

1. Open the `VRChat SDK > ClientSim Player Data` editor window
2. Observe the test data update here, as well, as you press the button in Play Mode
3. You can clear and re-set the test data
4. You can open the JSON file containing containing the test data, update it manually, and hit Refresh in the editor window to display the updated test data

<HowToImportExample/>

## Technical Breakdown

The `PlayerDataController` has a `SetTestData` method that sets some example player data, which is triggered from the button in the scene. 

It listens for updates to player data using the `OnPlayerDataUpdated` method. It checks if the local player’s data has changed, and if so, it grabs the new data and formats it as a readable string. This string includes details like the type of data (bool, int, string) and the value associated with the player’s unique ID.

The formatted data is then displayed on screen using a `TextMeshProUGUI component`.

The script includes a helper function, `PlayerDataToString`, that checks the type of the data stored under a specific key and converts it to a string so it can be displayed. This function supports all the Persistable data types.

If the player data type is not recognized, it outputs an error message indicating that the type is unknown.

---

## Document: position-sync.md

Path: /worlds/examples/persistence/position-sync.md
---
description: "Save and restore player positions using PlayerObjects."
sidebar_custom_props:
    customIcon: 📌
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Position Sync

[IMAGE: Position Sync World Preview]

A simple PlayerObject prefab which saves each player's position and rotation, then restores them when they rejoin the world.

Visit the [PositionSync Example World](https://vrchat.com/home/world/wrld_7be7b189-7ac8-4cf1-8d0a-1b7743edcacc) to try it for yourself!

## Using the Example

In the VRChat Client:
1. Join the world, move to a spot away from the Spawn point.
2. Rejoin  the world, you should be around the same position and rotation.

In the Unity Editor:
Add the prefab: `PositionSync` to the scene, and done.

<HowToImportExample/>

## Technical Breakdown

If you are standing on the ground, the script will save your position and rotation every 0.5 seconds. Upon receiving the persistent data from the server, it will return you to the position you originally found yourself in.


### Inspector Parameters

* `string` **Synced Position key** - The key name for the position you want to use from PlayerData.
* `string` **Synced Rotation key** - The key name for the rotation you want to use from PlayerData.

---
## Changelog

- 0.0.1: Initial Publish
- 0.0.2: Added in-world instructions, swapped to OnPlayerRestored.

---

## Document: post-processing-settings.md

Path: /worlds/examples/persistence/post-processing-settings.md
---
description: "Save and load bloom settings with PlayerData."
sidebar_custom_props:
    customIcon: 🎚️
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Post-Processing Settings

[IMAGE: Persistent Post-Processing Settings World Preview]

This scene saves and loads its bloom settings by saving the weight of a PostProcessing Volume into PlayerData.

Visit the [Persistence Post-Processing Settings Example World](https://vrchat.com/home/world/wrld_ccc0b71a-63ea-4476-bcc2-25dd1b24745d) to try it for yourself!

## Using the Example

Play the scene, and use the "Post-Processing Weight" slider to set the Bloom level. It should appear in your ClientSim PlayerData window as a float named "settings_pp_weight".

<HowToImportExample/>

## Technical Breakdown

There is an UdonSharp script called "UdonPostProcessing" on a GameObject with the same name.

When the Slider found at "UI for Post-Processing > Content > Slider" is moved, it calls `UdonPostProcessing.SliderUpdated` via a Unity UI Event. This method sets the target PlayerData value whenever the slider is updated.

Whenever PlayerData is updated, the `OnPlayerDataUpdated` event will trigger on this script, and do two things:

- Set the weight on the target PostProcessingVolume, which will change the local bloom strength.

- Update the slider's value and position to match the stored weight. This is done so that the slider will match the value when a player first loads into the instance and the values are restored from the server.


---

## Document: simple-rpg.md

Path: /worlds/examples/persistence/simple-rpg.md
---
description: "Save RPG-like player classes and levels."
sidebar_custom_props:
    customIcon: ⚔️
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Simple RPG

[IMAGE: RPG World Preview]

This scene contains an example of a simple RPG experience where you can level up, change class, and defeat enemies.

## Using the Example

Open the scene or [visit the example world in VRChat](https://vrchat.com/home/world/wrld_32b82323-1d05-4ed4-9ac1-89b437223359) using the `persistence-beta` branch.

1. Open the scene RPGExample in the Assets/Examples/RPG folder.
2. Play the scene.
3. Choose a class by walking over the corresponding pedestal.
4. Once you've gained enough experience by killing enemies, you will level up. You can tell your level by the amount of diamonds above your head.
5. Rejoin the world.
6. When you load into the world, you should be teleported to your previous position and have your last selected class with the same level and experience.

<HowToImportExample/>

## Technical Breakdown

RPGPlayer is a script attached to a GameObject, which has the PlayerObject script on it, this means that the RPGPlayer script is instantiated once for each player.
RPGPlayer is what controls so you can see the diamonds above a players head indicating their class and level, this also is what makes it so you can see others weapon.

Then there are 3 different pedestals you can walk over, which, when triggered, will tell your own RPGPlayer instance to change its class.

The class, last position, experience, and level are all persistent by being UdonSynced and being on a VRCPlayerObject. Any UdonSynced variables that are on a script that is on a GameObject that is part of a PlayerObject are automatically persistent.

Combat is done using particle collisions, so each class has a different type of particle effect as an attack, which has a collider on it.
The enemies give 1 exp when killed, and you need 4 exp for leveling up.
Enemies respawn 10–15 seconds after being killed.

---
## Changelog
- 0.0.3: Added Instructions Canvas
- 0.0.2: Script tweaks: RPG Example uses `VRCEnablePersistence` components on player objects so that they persist again

---

## Document: unlock-items.md

Path: /worlds/examples/persistence/unlock-items.md
---
description: "Unlock items forever, using PlayerData."
sidebar_custom_props:
    customIcon: 🔒
---
import HowToImportExample from '/docs/worlds/examples/persistence/_how-to-import.mdx';

# Unlock Items

[IMAGE: Unlock Items World Preview]

How to persistently unlock items using PlayerData, using simple in-world achievements as a demo.

Visit the [Unlock Items Example World](https://vrchat.com/home/world/wrld_abe04fe4-583e-44d3-ae89-29bc9f60d166) to try it for yourself!

## Using the Example

1. Enter the world
2. Perform actions to unlock achievements
   - Spend time in the world (10sec,2min, 5min)
   - Move around (10 units, 100 units, 300 units)
   - Respawn
   - Find the secret
   - All of the above
3. Observe the UI showing your unlocked achievements
4. Leave and return - your achievements and stats (time spent in world, distance travelled) should persist

<HowToImportExample/>

## Technical Breakdown

The main `UnlockItems` script checks for the local player's achievements when their data first loads in during the `OnPlayerRestored` method, and restores all the unlocked items that are found.

It then triggers the `UpdateStats` method to run, which runs the following methods:

* CheckTimeInWorld();
* CheckDistanceMoved();
* CheckHasPlayerRespawned();
* CheckHasFoundSecret();
* CheckAllAchievementsUnlocked();

After all methods are run and achievements updated, this method calls itself to run again after a delay of `UPDATE_STATS_TIME`.

For each achievement that is unlocked during the `UpdateStats` check, the `UnlockAchievement` method is called, which updates the sprite, color and text of the target achievement.

---

## Document: _how-to-import.mdx

Path: /worlds/examples/persistence/_how-to-import.mdx
## Importing the Example
Follow the steps below to add this example to your Unity project:
1. Open [the Example Central Window](https://creators.vrchat.com/sdk/example-central) from the window from the Unity Editor Menu under "VRChat SDK > 🏠 Example Central"
3. Find this prefab in the list or search for it by title (same as the title of this page).
4. Press the "Import" button to import the Unitypackage into your project.

---

## Document: player-join-zones.md

Path: /worlds/examples/player-join-zones.md
---
description: "Basic lobby functionality."
sidebar_custom_props:
    customIcon: 🚪
---
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';

# Player Join Zones

[IMAGE: Player Join Zones World Preview]

This example shows how to collect players based on their position, and handle basic lobby functionality, enabling users to join a game, play it, see results, then start a new game. It can be used to build opt-in experiences, like a game played by only some of the players in the instance. It also shows how to randomly choose a player to make larger, and extend the prefab’s logic with additional modes.

Visit the [Player Join Zones Example World](https://vrchat.com/home/world/wrld_12492ad5-ff17-445d-9f90-7b14376b1f32) to try it for yourself!

## Using the Example

These examples work with one player, but benefit from testing with two or more.
Open the `player-join-zones` scene to first test it out in the Unity Editor, or visit the example world linked above in the VRChat Client.
This example requires TextMeshPro, a window will offer to "Import TMP Essentials" if you don't already have TextMeshPro in your project. Accept this offer and re-open the scene after it's done importing.

### Player Join Zone:
1. First, notice that the button at the bottom of the canvas reads "Players Needed", and is not interactable. 
2. Walk into the highlighted area on the floor and see your displayName appear on the board in front of it. 
3. Your name should appear and disappear as you walk in and out of the zone. 
4. Press the "Start Game" button to lock-in the list of players, it will no longer change as players enter and exit.
5. Press the button that now reads "Reset", and the list of players clears to make a new one.

### Boss Picker:
1. Walk into the highlighted area on the floor and see your displayName appear on the board in front of it under the label "Possible Bosses:". 
2. Your name should appear and disappear as you walk in and out of the zone. 
3. Press the "Start Game" button to randomly choose one Player to make large, they are now the "Boss". Notice that the label reads "Boss:" instead of "Possible Bosses:".
4. Press the button that now reads "Reset", the Boss should shrink to their original size and the list of players clears to make a new one.

<HowToImportExample/>

## Technical Breakdown

This section explains the base program and its two extensions - `JoinZoneWithDisplay` and `BossPicker`.

The `PlayerJoinZone` program is a base class for managing Players within a specific zone. It handles the following:
* **Modes**: It defines three modes - `MODE_JOIN` accepts changes to the player list, `MODE_GAME` freezes the player list for gameplay, and `MODE_END` offers a place to show end-of-game information. This mode is synced to all players, and uses a [FieldChangeCallback](https://udonsharp.docs.vrchat.com/udonsharp/#fieldchangecallback) to call additional functionality when the mode is changed.
* **Player Tracking**: It uses three events to track players, adding them to a [DataList](/worlds/udon/data-containers/data-lists) called `Players`.
    * `OnPlayerTriggerStay` detects players entering the zone, as well as players who were in the zone when the mode was changed.
    * `OnPlayerTriggerExit` detects players leaving the zone.
    * `OnPlayerLeft` detects players leaving the instance, who may otherwise get 'stuck' in the list.
* **Interaction**: It has a method `_ToggleMode` designed to be triggered from a UI Button. This method will toggle between the three modes when anyone presses it.

Example Interaction:
1. The zone sets the mode to `MODE_JOIN`, which triggers the Owner of the GameObject with this program to run `ResetPlayers()`.
    1. `ResetPlayers()` creates a new `Players` Datalist on the Owner.
2. A player "Dingbat" enters the zone's collider, triggering the `OnPlayerTriggerStay` event for everyone in the instance.
    1. The Owner checks whether Dingbat is already in the list, everyone else ignores the trigger. Dingbat is not found in the list, so the Owner adds them.
    2. Dingbat will continue to trigger this event as they stay in the zone, but no further action will be taken since they are already in the Datalist.
3. A player "SquirrelFam" enters the zone's collider, triggering the above action again, so there are now two players in the `Players` Datalist.
4. Dingbat decides to play a different game and leaves the instance.
5. The zone receives the `OnPlayerLeft` event for Dingbat, and removes them from the `Players` Datalist, now only SquirrelFam remains.
6. SquirrelFam exits the zone, triggering the `OnPlayerTriggerExit` event, which the Owner will respond to by removing them from the Datalist. There are no more players in the Datalist.

### Extending the Class

In the interaction described above, the `Players` list was created and updated several times, but no information was shown to any users in the instance. This is because the base class contains logic which is useful for many scenarios, but is incomplete on its own. We include two extensions of this base class to demonstrate how you can add functionality.

#### JoinZoneWithDisplay

This extension connects some UI fields and a button to the core logic to make it all usable. The base class doesn't contain any references to UI items so that it can be more easily reused and extended in your own projects.

It includes these UI objects:
* _playerNamesField: A Textfield to display the names of all players currently in the Zone.
* _buttonLabelField: The Textfield within the Button is used to toggle the current `Mode`, which is updated whenever the Mode changes.
* _toggleButton: A UI Button to trigger the `_ToggleMode` method.
* _ownerField: A Textfield which shows the owner of this GameObject for debugging.

This class adds a new string `PlayerNamesString`, which is a line of text containing all the current player names with commas between them. This is constructed on the Owner and then Synced to all other players and uses a FieldChangeCallback to update the `_playerNamesField`. It also adds a new mode called `MODE_WAIT` which freezes the UI Button for 3 seconds to keep the 'game' from ending too quickly. The duration can be set in the Inspector field for `_waitDuration`.

Revisiting the Example Interaction for the `PlayerJoinZone` program above, here is what would happen differently when using the `JoinZoneWithDisplay` program:
1. After creating the `Players` Datalist, the method `OnPlayersChanged()` is called. This method is empty in the base class, but in our extension it will set the synced string `PlayerNamesString` by running the method `GetPlayersAsStringList()` from the base class. 
    1. All the players in the instance receive this updated string, and set the text in their `_playerNamesField` from the value.
    1. Each player will also call `SetupButtonFromPlayers()`, which will update the text of their `_toggleButton` to show "Players Needed" if no one is in the zone.
2. After the Owner adds Dingbat to the `Players` Datalist, the method `OnPlayersChanged()` is triggered again, which will propagate the same changes above, updating the synced `PlayerNamesString` value and triggering updates the text field and button label if needed.

Every change the Owner makes to the `Players` list is followed by a call to `OnPlayersChanged()` to update the data and display it for everyone else in the instance.

This example also has a Button to toggle the mode like this:
1. Any player presses the Button, which has been linked to `UdonBehavior.SendCustomEvent(_ToggleMode)`. If they are not the owner, then the event `ToggleModeRPC()` will be sent to the Owner. If they are the owner, then they will call `ToggleModeRPC()` themselves. Either way, that method runs and flips switches to the next `Mode`.
2. `Mode` is a synced variable with a FieldChangeCallback, so its value will be updated for everyone in the instance, and the function `OnModeChanged()` will be run locally for each player.
3. This method is mostly empty in the base class (it only contains logic to propagate its logic to external listeners), but in this example, it will set the label of the `_toggleButton` to "Reset" if the mode is now `MODE_CHOSEN`.

All the text set by this class is defined in a few strings near the top of the class for easy updating.

#### BossPicker

This extension has some of the same fields as [JoinZoneWithDisplay](#joinzonewithdisplay), adds logic to pick one player from the chosen group and apply some scaling to them, which is useful if you're making a game where one character should be bigger than the others. It also adds another Mode called `MODE_GAMEOVER` for reviewing scores.

It includes a synced `PlayerNamesString` field and uses the same logic to create the list, sync it to all players in the instance, and update the text field. 

When the `Mode` is changed to `MODE_CHOSEN`, the Owner chooses one Player from the Datalist at random, and saves their PlayerId as `_bossPlayerId`, which is a new synced field with a FieldChangeCallback that triggers `_OnBossChanged()`.
In `OnBossChanged()`, each player will check if they are the Boss. If they are, then they will set their AvatarEyeHeight to the maximum possible size (currently 5 units). All other players will only have their height changed if it is bigger than `_maxPlayerHeight`, which can be adjusted in the program's Inspector.
The `ToggleModeRPC()` method has been overridden in this class in order to handle the new Mode. Now, `MODE_CHOSEN` will start a timer to automatically transition to `MODE_END` after 5 seconds, or whatever value you've set for `gameDuration` in the Inspector. This method also disables the button while in the `MODE_CHOSEN` state so the game can't be ended early. Finally, it has logic to transition from `MODE_END` to `MODE_JOIN` when the UI button is pressed.
In `OnModeChanged()`, each player resets to their original height when the mode changes back to `MODE_JOIN`, which would typically happen after a game finishes and a new round is opened up.

### Integration with Udon Graph & Existing Programs

Each of these programs has a `targets` field, which is an array of UdonBehaviours. You can write / modify Udon Programs to include some special variables which will be kept up-to-date. They are:
* `int` Mode - updated during `OnModeChanged()` in all programs
* `Datalist` Players - updated during `OnPlayersChanged()` in all programs
* `int` BossPlayerId - updated during `OnBossChanged()` in the BossPicker program

The "Graph Listener" canvas demonstrates this, updating a display with the latest events and updates from both programs. Its Udon Graph program simply implements all three public variables, and used `OnVariableChanged` nodes to react to their changes, writing the results to a text field.

---

## Document: screen-canvas.md

Path: /worlds/examples/screen-canvas.md
---
description: "2D UI canvas for Mobile and Desktop users."
sidebar_custom_props:
    customIcon: 📲
---
import HowToImportExample from '/docs/worlds/examples/_how-to-import.mdx';

# Screen Canvas

[IMAGE: Screen Canvas World Preview]

This example shows how to create a Screen-Space UI Canvas for users on 2D screens like Mobile and non-VR Desktop. It also demonstrates how to teleport the user to a destination position and rotation.

Visit the [Screen Canvas Example World](https://vrchat.com/home/world/wrld_1448021c-b126-4cb9-ac92-1ab660884b02) to try it for yourself!

## Using the Example

Open the `screen-canvas` scene to first test it out in the Unity Editor, or visit [this world](https://vrchat.com/home/world/wrld_1448021c-b126-4cb9-ac92-1ab660884b02) in the VRChat Client.
This example requires TextMeshPro, a window will show offering to "Import TMP Essentials" if you don't already have TextMeshPro in your project. Accept this offer and re-open the scene after it's done importing.

When entering the world with a non-VR display like a Mobile Device or a Windows PC with a monitor, a thick white outline will be visible around the edges of the display, as well as a button that reads "Teleport". Press this button - on mobile, a simple screen-tap will activate it. On Desktop, hold the Tab key to free your cursor from the center of the screen and press it. Either way, you are teleported to a second spot in the world, in front of another canvas which reads "Second Location / Here you are!".

[IMAGE: Second Location Screenshot]

When you visit the world using a VR display, the canvas is hidden, rather than being stuck to your face with no way to use the button.

### Extras

[IMAGE: VRCButtonLayout in Game, Hierarchy and Inspector]

The `VRCButtonLayout` object is a helpful tool for showing where different buttons in the VRChat Mobile UI will appear so you can try to work around them. It is tagged `EditorOnly` and will not be uploaded with your world.

<HowToImportExample/>

## Technical Breakdown

This section explains the two Graph Programs which provide the above functionality. You can find both programs on the "ScreenCanvas" object in the scene.

### HideInVR

[IMAGE: Graph Program to Hide Object in VR]

This program runs on `Start`, and deactivates the ScreenCanvas and its UdonPrograms by checking the value of `IsUserInVR` for the local player, and calling `GameObject.SetActive(false)` if they are. If they are not in VR, no further action is needed.
This program is provided separately from the teleportation functionality below to make it easy to add to a variety of objects.

### TeleportToTarget

[IMAGE: Graph Program to Teleport Local Player]

This program is triggered by the Button, which targets its `_Trigger` custom event. It has a public `target` Transform variable. When triggered, it calls `Transform.GetPositionAndRotation()` on the `target`, then passes the position and rotation to `VRCPlayerApi.TeleportTo(position,rotation)` to move the player.
You can change the value of the target to update the location, or move the `TeleportTarget` transform. Note that the transform has a child Sprite to show the spot on the ground where the player will be teleported, as a convenience. This Sprite is a child of the main transform because it requires a rotation that we do not want to apply to the player when they teleport.

## Known Issue

[IMAGE: Scene view of large canvas]

In ClientSim, the collider generated for the ScreenCanvas is always placed at (0,0,0) and covers the whole size of the canvas. In the VRChat Client, the existing collider is used and appears in the proper position. In order to make the scene usable in ClientSim, the initial spawn location is offset to place the user in front of the generated Collider.

---

## Document: avatar-scaling-settings.md

Path: /worlds/examples/udon-example-scene/avatar-scaling-settings.md
---
title: "Avatar Scaling Settings"
slug: "avatar-scaling-settings"
excerpt: "Configure avatar scaling in your world"
hidden: true
createdAt: "2023-06-24T00:00:00.076Z"
updatedAt: "2023-06-24T00:00:00.070Z"
---

This UdonBehaviour example script allows you easily to override your world's avatar scaling settings.

To learn how to write your own Udon script for avatar scaling, read our [avatar scaling documentation](/worlds/udon/players/player-avatar-scaling).

[IMAGE: avatar-scaling-example-component.png]

## Variables

| Name | Type | Default | Description |
| - | - | - | - |
| **disableAvatarScaling** | bool | false | | If enabled, players in your world will not be able to choose their own avatar scale, even if you enabled it on VRChat.com. |
| **minimumHeight** | float | 0.2 | The minimum avatar eye height in meters which players can choose. |
| **maximumHeight** | float | 5 | The maximum avatar eye height in meters which players can choose. |
| **alwaysEnforceHeight** | bool | false | If enabled, players who switch to use a very tall or very short avatar will automatically be set to "minimumHeight" or "maximumHeight". 

## Examples

- I want players to use avatar scaling freely.
	- You don't need to change any settings.
- I don't want players to use avatar scaling.
	- Turn on "disableAvatarScaling."
- I want players to use a specific avatar height.
	- Set "minimumHeight" and "maximumHeight" how you prefer.
	- If you want to prevent very tall or very short avatars, enable "alwaysEnforceHeight".

Here's what the Udon Graph for the example script looks like:

[IMAGE: avatar-scaling-example-component.png]


---

## Document: index.md

Path: /worlds/examples/udon-example-scene/index.md
---
sidebar_custom_props:
    customIcon: 🛝
---

# Udon Example Scene

This scene contains examples on how worlds can use Udon. You can [build & test](/worlds/udon/using-build-test) or publish this world to try it in VRChat.

## Prefabs
The Prefabs in this scene demonstrate common interactions with the VRChat components for buttons, avatar pedestals, stations, mirrors, and more.

All of the following Prefabs are included in the VRChat Worlds SDK. You can add them to any of your own worlds. For example, the [VRCWorld](#vrcworld) is included in most VRChat scenes by default.

 [IMAGE: UdonExampleScene]

### VRCWorld
This prefab makes it easy to upload your Unity scene to VRChat. It has four components:
- The [VRC Scene Descriptor](/worlds/components/vrc_scenedescriptor/) script, which defines basic properties of your world. It is required for every VRChat world.
- The [VRC Pipeline Manager](/sdk/vrcpipelinemanager/) script, which contains the world ID. It is added automatically with the VRC Scene Descriptor.
- The [VRCWorldSettings](/worlds/examples/udon-example-scene/player-mod-setter) Udon Graph program, which allows you to change the movement speed of players in your world.
- The [Avatar Scaling Settings](/worlds/examples/udon-example-scene/avatar-scaling-settings) Udon Graph program, which allows you to limit the avatar scale of players in your world.

If you'd like to use the VRCWorld prefab in your own Unity scene, you can find it in `\Packages\com.vrchat.worlds\Samples\VRCPrefabs\VRCWorld.prefab`.

### AvatarPedestal
This is available as a prefab, and has a program to switch a user into an avatar when they Interact with the pedestal, which is the default behavior of the prefab.

To change the interaction distance of the prefab, unpack the prefab and change the "Proximity" setting of the Udon Behaviour component.

### VRCChair3
This is available as a prefab, and has a program called `StationGraph`. It seats a player in the station when they Interact with it, and logs their display name when they enter or exit.

### MirrorSystem
This object has a **ToggleGameObject** program on it which uses the Interact event to flip a target object between Active/Inactive. In this case, it controls a VRCMirror object which is a child of this one.

### Cubes
These objects demonstrate some simple things you can do with Cubes, mostly reusing a **ChangeMaterialOnEvent** program to show how you can trigger custom events from other objects.

[IMAGE: Cube Examples]

### InteractCube
This object has a **SendEventOnInteract** program on it - which listens for the Interact event, triggered when a player points at an object and presses their 'use' button. In this case, it sends a custom event called "changeMaterial" to a **ChangeMaterialOnEvent** program on a child object, which changes out materials from an array whenever it receives this event. Both of these programs are reusable - you can change the eventName sent from the **SendEventOnInteract** program in the inspector on the UdonBehaviour component.

### TimerCube
This object has a **SendEventOnTimer** program on it - which runs a timer for a given *duration* and then sends the specified event. In this case, it sends a custom event called "changeMaterial" to a **ChangeMaterialOnEvent** program on a child object, which changes out materials from an array whenever it receives this event. Both of these programs are reusable - you can change the eventName sent from the **SendEventOnTimer** program in the inspector on the UdonBehaviour component, and change its *duration* in seconds to change how often it triggers.

### UseCube
The `Model` child of this object has a **SendEventOnUse** program on it - which can send out an event when the object is picked up and "Used". In this case, it sends a custom event called "changeMaterial" to a **ChangeMaterialOnEvent** program on a the `MaterialChanger` object, which changes out materials from an array whenever it receives this event. Both of these programs are reusable - you can change the eventName sent from the **SendEventOnUse** program in the inspector on the UdonBehaviour component. The `Model` object also has a `VRCObjectSync` component, which syncs the movement of this object to other users as it is moved around.

## Udon Variable Sync
These objects demonstrate different ways to sync variable values from the owner of an object to everyone else in the instance. 
[IMAGE: Udon Variable Sync Examples]

The "Canvas" item has many UI items with synced variables:

### ButtonSyncOwner
This is the first program described here which uses the [Manual Sync](/worlds/udon/networking#2-manual-variable) method. In the image below, you can see it has an OnClick() handler which calls UdonBehaviour.SendCustomEvent with a value of "OnClick". It's targeting the UdonBehaviour just below it, where it will run the custom event "OnClick". This is how UI Elements can run events on UdonBehaviours.

[IMAGE: Triggering Custom Events from Unity UI controls]

In the Graph Program, the OnClick event checks whether the player who clicked is the Owner of the object. If they are, it increases the "clickCount" variable by 1 and then calls **RequestSerialization**, which signals Udon to update the data on this Manual-synced UdonBehaviour.

[IMAGE: OnClick ▸ If Owner ▸ Set clickCount to clickCount + 1 ▸ Serialize.]

Notice that the 'Set clickCount' node has the 'sendChange' toggle turned on. this will trigger an event for everyone when they receive the new clickCount value.

[IMAGE: Variable Change events are very powerful! You can use them to run the same logic on the owner and others whenever a synced variable is changed.]

When clickCount is updated, this Change event triggers, which will then set the text of the button to the new value no matter who is the 'owner' of this program.

### ButtonSyncAnyone
This object uses a program very similar to **ButtonSyncOwner** above, but adds logic for users who click the button and are *not* the Owner of the object. In that case, they send the Custom Event "OnClick" to the Owner of the object. That's it! The owner will receive this event and process it as if they'd just clicked the button themselves.

[IMAGE: Non-Owners will send an event to the Owner to easily update the number.]

### ButtonSyncBecomeOwner
This object builds on the now-familiar ButtonSync program to demonstrate how to easily change ownership of an Object. When a non-owner clicks on the button, it will assign them ownership, and then update the variable. This is useful when you want to change multiple variables, or do logic more complicated than simply incrementing a value.
[IMAGE: ButtonSyncBecomeOwner]

When changing ownership of an object, some logic is run to decide whether or not the transfer is allowed. You can learn more about that here: [Networking](/worlds/udon/networking#object-ownership). If you don't add any custom logic, all Requests for Ownership will be approved. The nodes below show a simple setup checks a boolean variable called 'someSpecialLogic' to decide whether the Transfer will be approved. You could build your own logic based on the 'requester', the 'newOwner', or both.

[IMAGE: Does someone want to be the new owner? Check 'someSpecialLogic' that you've updated elsewhere.]

### SliderSync
[IMAGE: SliderSync]

This object has a program called **SliderSync** that works similar to **ButtonSyncBecomeOwner**. When someone moves the slider, they become the owner, and send the new value to everyone else. One difference is that when the "OnValueChanged" event is triggered from the UI, it will check whether this new value is different from the current value of the slider. This is because updating the value of the slider from Udon will also trigger this event, which would cause an infinite loop. So instead, we have some logic that makes sure the 'sliderValue' variable is different than the Slider's value before we run the rest of our logic. 

It also uses the Variable Change event to update a text field with the value of the slider whenever anyone becomes the owner and updates it.

### Toggle

This object has a program called **ToggleSync** which works the same as the Slider above. When someone changes the value to something Inequal to the current value, they become the owner, and send the new value to everyone else, 
[IMAGE: Toggle]

### Dropdown
 
[IMAGE: Dropdown]

This object has a program called **DropdownSync** which works the same as the Toggle and Slider above. When someone changes the value, they make sure it's different than the current value, then become the owner and send the new value to everyone else.

### InputField
 
[IMAGE: InputField]

This object has a program called **InputFieldSync** which works similar to the Dropdown above. When someone changes the value, they check that it's different, become the owner, and send the new value to everyone else.

### PickupCube
 
[IMAGE: PickupCube]

This object has VRC Pickup and VRC Object Sync components which enable it to be picked up and moved around, automatically syncing it to other users. The UdonBehaviour is set to "Continuous" instead of "Manual" like the sync programs above, since it needs to update more often to keep its Transform up-to-date. This UdonBehaviour has a **SyncPickupColor** program on it which smoothly changes the color while it's being held. It does this by checking during the Update event to see if the local player is the Owner of the object AND VRCPickup.get isHeld is true. Notice that it doesn't use RequestSerialization since it's set to Continuous - it will simply update the values as often as it can.

[IMAGE: This is run every frame, and when it's true the program will use some fun math to slowly change between two colors specified in the inspector.]

### PickupSphere
This object doesn't actually have any Udon on it! It simply uses VRC Pickup and VRC Object Sync components to let users pick it up and move it around in a synced manner.

[IMAGE: PickupSphere]

## PlayerDetection
It can be very useful to respond to a player moving into a certain area, or colliding with a physics object. These example programs illustrate a few ways that can be done.

### PlayerTrigger

[IMAGE: PlayerTrigger]

This is the most commonly used way to detect a player entering or leaving an area. The "TriggerArea" object has a see-through blue material on it, a Box Collider with *IsTrigger* checked, and an UdonBehaviour with a **PlayerTrigger** program source. 

In this program, the **OnPlayerTriggerEnter** and **OnPlayerTriggerExit** events are triggered whenever any player enters or exists the collider. The program then gets the **displayName** of that player and updates the text on the target canvas.
[IMAGE: PlayerTrigger Program]

### PlayerCollision
This setup demonstrates how to trigger and respond to the **OnPlayerCollisionEnter/Exit** events, which are triggered when a Physics object moves into a player's collider.
[IMAGE: PlayerCollision]

The *TriggerArea* object has a **FireOnTrigger** Udon Program which detects a player entering its trigger area, just like in the **PlayerTrigger** program above. In this case, this event is used to send the custom event "Fire" to the *Projectile* object. This will cause the Projecticle cube to add a force to itself which will move it towards the player. When it collides with the player, it will write that player's displayName into a target Text field.

Note that the PlayerCollision events here will only fire locally for the player that experienced them. If you want to inform other players of these events, you will need to add that functionality yourself through Synced Variables or Custom Network Events.

### PlayerParticleCollision

[IMAGE: PlayerParticleCollision Scene]

 This demo has a setup similar to PlayerCollision above, where it uses a Trigger Area to start other events. In this case, when a player enters the Trigger Area, the **SetActiveFromPlayerTrigger** program will turn on the *CollisionParticles* object. This object has a ParticleSystem which fires at the player with World Collision and Send Collision Messages turned on. The Udon Program **PlayerCollisionParticles** attached to this object will fire the **OnPlayerParticleCollision* events in the graph, which write the displayName of the affected player into the target text field.

[IMAGE: PlayerParticleCollision Program]

## [Udon Sync Player](/worlds/examples/udon-example-scene/udon-video-sync-player)

[IMAGE: Udon Sync Player]

This setup demonstrates one way to use the Unity / AVPro video players to load and sync video playback. It's a big program, so we've separated it out to its own page.

## CubeArraySync

[IMAGE: CubeArraySync]

This simple program makes a grid of cubes that randomly flip on and off when anyone clicks on them while using very little data, demonstrating the power of syncing arrays. The **CubeArraySync** program has a variable called *data* which is a Boolean Array with 25 values. This means it has 25 simple yes/no values which are synced to every user. It also has a GameObject array called *cubes* with 25 cubes.

When anyone clicks on the object containing all the cubes, a Custom Network Event called "Randomize" is sent to the owner of the CubeArraySync object. The owner then uses a **For** loop to randomly set each value to on or off, by generating a number between 0 and 1 and checking if that value is greater than 0.5. Once it updates the array variable, it calls **RequestSerialization** and then calls the custom event **UpdateCubes**. 

[IMAGE: Each user will turn on/off each cube based on the random value from Boolean array.]

The **UpdateCubes** event uses another **For** loop to step through each yes/no variable in the array and set its corresponding Cube to on or off. This event is triggered by the owner after updating the array, or by **OnDeserialization** after VRChat has updated the array variable for all the other users. We use OnDeserialization here instead of OnVariableChange because Array Variables don't currently fire Variable Change events, so we wait until we have new data in OnDeserialization and update our scene then.

## ObjectPool

[IMAGE: These cubes will never be this neat again once they start dropping and bouncing around.]

The [Object Pool](/worlds/udon/networking/network-components#vrc-object-pool) is a component that helps you manage a collection of objects. It will automatically sync its objects' Active state. This example program will drop boxes from the sky one at a time into a stacked grid, and when you click on a box, it is removed and respawned from the sky.

To do this, the **ObjectPool** program runs a simple timer and tries to **Spawn** an object at a regular interval. Each *Pooled Box* in its Pool has a simple **Pooled Box** program which saves its initial position on Start, restores that position whenever it is Enabled (which happens when it is spawned by the pool), and returns each object when you click on it.

## [Simple Pen System](/worlds/examples/udon-example-scene/simple-pen-system)
Even a basic pen takes quite a bit of work, so this example gets its own page.

---

## Document: player-mod-setter.md

Path: /worlds/examples/udon-example-scene/player-mod-setter.md
---
excerpt: Sets the player's default movement speed.
---
# Player Mod Setter

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

This UdonBehaviour example script allows you configure the movement of players in your world.

## Variables

| Name                  | Type  | Default | Description                                                                                                                                                                                     |
| --------------------- | ----- | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Jump Height           | float | 3       | The jump strength of players. Affected by gravity.                                                                                                                                              |
| Run Speed             | float | 4       | - Keyboard input: The movement speed when moving forward or backward without holding the 'Shift' key.<br />- Analog stick input: The movement speed when tilting the stick forward or backward. |
| Walk Speed            | float | 2       | - Keyboard input: The movement speed when moving forward or backward without holding the 'Shift' key.<br />- Analog stick input: Always uses "Run Speed" instead of "Walk Speed."               |
| Strafe Speed          | float | 2       | The movement speed when moving left or right.                                                                                                                                                   |
| Gravity               | float | 1       | The amount that [gravity](https://docs.unity3d.com/ScriptReference/Physics-gravity.html) affects players.                                                                                       |
| Use Legacy Locomotion | bool  | false   | Enables VRChat's deprecated legacy locomotion system. Cannot be disabled by Udon later.                                                                                                         |

## Example

The UdonSharp program is called `PlayerModSetter.cs` and the Udon Graph program is called `VRCWorldSettings.asset`. They work very similarly, and either one can be used in your VRChat world.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

This Graph program can be found in `Packages/com.vrchat.worlds/Samples/UdonExampleScene/UdonProgramSources/VRCWorldSettings.asset/`.

[IMAGE: An Udon Graph program that sets various attributes for the player when they join the world. It contains several text comments explaining basic Graph syntax.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

This is a simplified example of the UdonSharp script `\Assets\UdonSharp\UtilityScripts\PlayerModSetter.cs`.

```cs showlinenumbers
using UnityEngine;
using VRC.SDKBase;

public class PlayerModSettings : UdonSharpBehaviour
{
    VRCPlayerApi playerApi;

    [Header("Player Settings")]
    [SerializeField] float jumpImpulse = 3;
    [SerializeField] float walkSpeed = 2;
    [SerializeField] float runSpeed = 4;
    [SerializeField] float gravityStrength = 1;

    void Start()
    {
        playerApi = Networking.LocalPlayer;
        playerApi.SetJumpImpulse(jumpImpulse);
        playerApi.SetWalkSpeed(walkSpeed);
        playerApi.SetRunSpeed(runSpeed);
        playerApi.SetGravityStrength(gravityStrengh);
    }
}
```

</TabItem>
</Tabs>

---

## Document: simple-pen-system.md

Path: /worlds/examples/udon-example-scene/simple-pen-system.md
---
title: "Simple Pen System"
slug: "simple-pen-system"
excerpt: "Simple is a relative term."
hidden: false
createdAt: "2021-05-14T00:44:52.076Z"
updatedAt: "2021-05-20T23:00:49.470Z"
---
The Simple Pen system consists of two programs - one for the Pen, and one for each Line that will be drawn

# How the Pen and Lines Work Together

### Pen
The pen has VRCPickup and VRCObjectSync components, which provide the basic pickup and sync functionality. The program itself is uses Continuous sync since that works well with these components.

### Lines
Each line object has its own LineRenderer and a program with Manual Sync, since it doesn't need to update as often as the pen. The line has a **points** variable which is Vector3 array. This variable is the main way that data for the lines are synced for everyone in the instance.

## Drawing Starts
When someone uses the Pen, this calls **OnPickupUseDown** on the pen. This will cause a few things to happen in the program:
* A new Line is retrieved from the pool and saved in a variable
*The player with the pen is made the Owner of the line
* *isDrawing* is set to true
* The line is reset to have two points with their positions at the tip of the pen
* a variable is incremented to track which line will be used next.

## Drawing Continues
Every frame, the **Update** event is called on the pen, and the following logic is run:
* If *isDrawing* is true, we continue:
* If the pen has moved more than *minMoveDistance*, we continue:
* We add a new point to the LineRenderer at the position of the *penTip*
* We check if we've queued up enough points to send by comparing currentIndex against pointsPerUpdate
* If we're ready to update the data, we call **OnUpdate** on the UdonBehaviour on the target line.

When this **OnUpdate** method is called on the line, the program retrieves the current positions of the points in the line, updates the synced *points* variable, and calls **RequestSerialization**, which is how Manual-synced UdonBehaviours tell VRChat to send out the queued data. This method is only called on the owner of the line. Everyone else receives the data, and then has their **OnDeserialization** method called. When this method triggers on a line, the line program reads the positions from the *points* array, and uses them to update the positions in their own line.

## Drawing Finishes
When the user lets go of the Use button, the **OnPickupUseUp** event is called on the pen. This event simply sets *isDrawing* to false, and calls **OnFinish** on the target line's UdonBehaviour. This will send the **OnUpdate** method one more time to make sure the **points** data is up-to-date for everyone.

---

## Document: udon-video-sync-player.md

Path: /worlds/examples/udon-example-scene/udon-video-sync-player.md
---
title: "Udon Video Sync Player"
slug: "udon-video-sync-player"
excerpt: "Basic example of synced video"
hidden: false
createdAt: "2021-05-14T00:58:34.059Z"
updatedAt: "2021-08-05T19:51:13.507Z"
---
[IMAGE: Image]

## Overview
There's two main things we need to sync for people to watch videos together - the URL of the video to watch, and the playback time so people are watching things simultaneously. In order to understand how we sync these two items for everyone, including late joiners - let's walk through a scenario that uses this program.

**The flow for someone entering a URL is: **
Become Owner of UdonSyncPlayer Object▸send new **_url_** ▸Try to Load & Play Url ▸When Video Starts, send Sync info out ▸Send new Sync info every **_syncFrequency_** seconds

**The flow for everyone else is:**
Receive new **_url_** value ▸Try to Load & Play Url ▸Receive Sync Info▸Jump to synced time

## Someone Loads a URL
When our hypothetical scene loads, let's say there is no video playing yet, and there are two people in the room. Someone pastes a new URL into the Input Field, which triggers the **OnURLChanged** event which is wired up in the UI.
[IMAGE: When someone enters a new URL, this logic runs to send the new URL to everyone else.]
There's a few 'IsValid' calls in here that we use just to make sure we're not trying to call methods on objects that have been destroyed or improperly set up. We'll skip describing these for the rest of this example these to keep the explanations simpler.

The Local Player has just put in a new URL, so we make them the Owner of the program so they can control its variables. We get the URL from the InputField, then call **SetProgramVariable** on the **_url_** symbol with this new value. This works the same as calling **set url** with "sendChange" enabled, it's just another way to do it, handy to know about if you want to change the variable on another UdonBehaviour. Once we've updated this variable, we call **RequestSerialization** to ask Udon to update the value of **_url_** for everyone else in the world.


## Users Get New URL
[IMAGE: Whenever the synced **_url_** variable changes, try to Play it!]
Since we have a **Variable Change** event for **_url_** in our graph, this event will be triggered whenever the URL is updated, and it will simply try to play the URL.


## The Video Starts
[IMAGE: Image]

This event is triggered locally when the video actually beings playing. We call the same event for the Owner and everyone else - the different logic is handled in **UpdateTimeAndOffset**.

## Update Time and Offset
[IMAGE: Image]

First, this logic checks whether it's running on the Owner of the object. If it's not, it runs the **Resync** event instead. If it is on the owner, the we want to sync both _where_ in the video we are, and _when_ we were there. We should be at the very beginning of the video since this is the first time the logic is running, but by saving both of these values, we can use this for future sync updates as well. 

We want to sync two numbers to everyone else, and these two numbers are closely related, so we combine them into a single Vector2 variable in order to keep them together and simplify some of the sync logic. We construct a Vector2 where 'x' is the current time of the video and 'y' is the Server Time observed by the owner when they were at that video time. With this info, everyone else can set themselves to a matching time - see [Resync](/worlds/examples/udon-example-scene/udon-video-sync-player#resync)  below.

After **Requesting Serialization** of this synced variable, the owner calls **SendCustomEventDelayedSeconds** to update this value again. They use the variable **_syncFrequency_** to determine how long until they update the value. For a _very_ simple approach, this variable can be left at 0 if the owner never pauses, rewinds or fast-forwards the video, and everyone can sync from the start time of the video instead of updating **_timeAndOffset_** every so often.

## Resync
[IMAGE: Image]

When non-owners start playing the video or receive an update to the **_timeAndOffset_** variable, they can use the data to figure out where to jump to in the video.

For a simple example, let's say the owner was at video-time **0** at server-time **1000**.
  * Owners sets **_timeAndOffset_** to (0,1000).
  * You join 45 seconds later and get this value. Your own server-time is **1045**, so you jump to **00:45** in the video by finding the difference in the server time (45 seconds) and adding the video-time (0 seconds).

## Improvements and Augmentations
[IMAGE: Image]

We kept this example pretty simple so it would be understandable and upgradeable. There's lots you could do to improve it and share your changes! Here are some ideas:

* Have non-owners wait to play the video until they receive info from the Owner
* Detect stream urls vs videos and turn off syncing
* Handle Video Error events with helpful notes for users
* Only allow certain players to change videos
* Create video playlists
* Create a video Queueing system

---

## Document: world-audio-settings.md

Path: /worlds/examples/udon-example-scene/world-audio-settings.md
---
title: World Audio Settings
createdAt: 2023-01-02
updatedAt: 2023-01-02
excerpt: Configure voice and avatar settings in your world.
---
:::note

This script is currently not present in the Udon example scene.

:::

This UdonBehaviour example script allows you configure player voices and avatar audio in your VRChat world.

This script sets these values once when a player joins your world. You may use other scripts to change these values later.

For more information, please read the [Player Audio](/worlds/udon/players/player-audio/) documentation.

---

## Document: udon.md

Path: /worlds/examples/udon.md
---
sidebar_position: -1
description: "Very simple Udon programs in Udon Graph and UdonSharp."
sidebar_custom_props:
    customIcon: 🐣
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Udon Basics

This page contains examples of how to use [Udon](/worlds/udon/). All examples can be viewed as an [Udon Graph](/worlds/udon/graph) or in UdonSharp.

## Rotating cube

This behaviour rotates a game object (such as a cube) by 90 degrees every second on its local Y-axis.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An Udon Graph for a spinning cube.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs showLineNumbers
using UnityEngine;
using VRC.SDKBase;

public class RotatingCubeBehaviour : UdonSharpBehaviour
{
    private void Update()
    {
        transform.Rotate(Vector3.up, 90f * Time.deltaTime);
    }
}
```

</TabItem>
</Tabs>

## Interact

This behaviour uses [Interact](/worlds/udon/graph/event-nodes/#interact) to allow players interact with a object to disable it. This can be used for a message or a door that disappears when players click on it, for example. The game object must have a collider component to allow players to interact with it.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An Udon Graph that disables an object when interacting with it. It has several comments. For example, it demonstrates that leaving "instance" empty in the "Get gameObject" node causes it to retrieve to game object that this script is attached to.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs showLineNumbers
using UnityEngine;
using VRC.SDKBase;

public class ClickMe: UdonSharpBehaviour
{
    public override void Interact()
    {
        gameObject.SetActive(false);
    }
}
```

</TabItem>
</Tabs>

## Teleport player

This behaviour uses [Interact](/worlds/udon/graph/event-nodes/#interact) and [TeleportTo](/worlds/udon/players/player-positions/#teleportto) to teleport the player. The `targetPositon` transform determines the player's destination position and rotation after teleporting. Don't forget to add a collider component to the targetPosition GameObject.


<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An Udon Graph program that teleports the player to a target position. Comment points out that "targetPosition" must be defined as "public" to allow setting it in the inspector for instances of this script.]

</TabItem>
<TabItem value="cs" label="UdonSharp">
```cs showLineNumbers
using UnityEngine;
using VRC.SDKBase;

public class TeleportPlayer : UdonSharpBehaviour
{
    public Transform targetPosition;
    
    public override void Interact()
    {
        Networking.LocalPlayer.TeleportTo(
            targetPosition.position,   
            targetPosition.rotation);
    }
}
```
</TabItem>
</Tabs>

## Sending events

This behaviour shows how to interact with other behaviours. UdonBehaviours can communicate with each other through variables and custom events.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An Udon Graph that communicates with other graph programs. Public variables and custom event names from other scripts are specified as constant strings and fed into the "symbolName" parameter of various nodes.]

</TabItem>
<TabItem value="cs" label="UdonSharp">
```cs showLineNumbers
using UdonSharp;  
using UnityEngine;  
using VRC.Udon.Common.Interfaces;  
  
public class SomeExample : UdonSharpBehaviour  
{  
    [SerializeField] private SomeOtherExample otherBehaviour;  
  
    void Start()  
    {  
        if(otherBehaviour.somePublicBoolean)  
        {  
            otherBehaviour.SomeCustomEvent();  
        }  
    }  
      
    public override void Interact()  
    {  
        DoStuff();  
    }  
  
    private void DoStuff()  
    {  
        SendCustomNetworkEvent(NetworkEventTarget.All, nameof(DoNetworkEventStuff));  
    }  
  
    public void DoNetworkEventStuff()  
    {  
        otherBehaviour.somePublicBoolean = false;  
        otherBehaviour.SomeCustomEvent();  
        otherBehaviour.SendCustomNetworkEvent(NetworkEventTarget.Owner, nameof(DoOwnerStuff));  
    }  
}
```
</TabItem>
</Tabs>


---

## Document: _how-to-import.mdx

Path: /worlds/examples/_how-to-import.mdx
## Importing the Example
Follow the steps below to add this example to your Unity project:
1. Open [the Example Central Window](https://creators.vrchat.com/sdk/example-central) from the window from the Unity Editor Menu under "VRChat SDK > 🏠 Example Central"
3. Find this prefab in the list or search for it by title (same as the title of this page).
4. Press the "Import" button to import the Unitypackage into your project.

---

## Document: index.md

Path: /worlds/index.md
---
sidebar_position: 1
---

# Worlds
In VRChat, you can create and visit custom worlds, powered by Unity!

- To get started, check out [Creating Your First World](/worlds/creating-your-first-world).
- Learn about [Udon](/worlds/udon), VRChat's programming language.
- Use [ClientSim](/worlds/clientsim/) to test your worlds in Unity.
- [Allowed World Components](/worlds/whitelisted-world-components) 
- [Supported Scripted Assets](/worlds/supported-assets) 
- [World Creation, Optimization, and Community Labs Tips](/worlds/submitting-a-world-to-be-made-public)

import DocCardList from '@theme/DocCardList';

<DocCardList />


---

## Document: layers.md

Path: /worlds/layers.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Unity Layers in VRChat 

<UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/Layers.html">Layers</UnityVersionedLink> are used in Unity to organize your Game Objects, determine <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/LayerBasedCollision.html">collisions</UnityVersionedLink> and <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Physics.Raycast.html">Raycasts</UnityVersionedLink> between Game Objects, selectively <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Camera-cullingMask.html">render</UnityVersionedLink> parts of the scene, and more.

**You can freely use most Layers in your VRChat world.** Some Layers are shared and used by Unity and VRChat.

When you create a Unity project with VRChat's Worlds SDK, your project will automatically be configured to use VRChat's built-in layers. If you change the collision matrix, rename, or remove built-in layers, your changes will be overridden when you upload your world to VRChat.

Layers 22-31 are unused 'User' Unity layers. You can edit them freely, and changes to these layers will not be discarded when you build & upload your world.

## Unity's built-in layers

The table below lists Unity's built-in layers, how they are used in VRChat, and whether users can place [stickers](#stickers) on them.

| Layer number | Layer Name          | Description                                                                                                                                                                                                                                            | Can have stickers |
| :----------- | :------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------- |
| 0            | Default             | Used for Unity's Game Objects by default. Used by VRChat's Avatar Pedestals.                                                                                                                                                                           | ✔                 |
| 1            | TransparentFX       | Used for Unity's Flare Assets.                                                                                                                                                                                                                         | ❌                 |
| 2            | IgnoreRaycast       | Ignored by Unity's Physics Raycasts if no layer mask is provided. Not ignored by VRChat's Physics Raycasts.                                                                                                                                            | ❌                 |
| 3            | reserved3           | ⚠ Avoid using this layer. Reserved by VRChat. When you upload your world, any Game Object on a reserved Layer will be moved to Layer 0 (Default).                                                                                                      | ❌                 |
| 4            | Water               | Used by Unity's Standard Assets. Used by VRChat's Portals. Used by VRChat's Mirrors. Often used for Unity's Post Processing.                                                                                                                           | ✔                 |
| 5            | UI                  | ⚠ You may not want to use this layer. Used by Unity's UI by default. Ignored by VRChat's UI pointer unless the player has the VRChat menu open. Ignored by the VRChat's camera unless 'UI' is enabled in the camera.                                   | ❌                 |
| 6            | reserved6           | ⚠ Avoid using this layer. Reserved by VRChat. When you upload your world, any Game Object on a reserved Layer will be moved to Layer 0 (Default).                                                                                                      | ❌                 |
| 7            | reserved7           | ⚠ Avoid using this layer. Reserved by VRChat. When you upload your world, any Game Object on a reserved Layer will be moved to Layer 0 (Default).                                                                                                      | ❌                 |
| 8            | Interactive         | Unused by Unity and VRChat.<br />Use this layer for colliders where you don't want users to place [stickers](#stickers).                                                                                                                               | ❌                 |
| 9            | Player              | Used for VRChat's players, except the local player.                                                                                                                                                                                                    | ❌                 |
| 10           | PlayerLocal         | Used by VRChat to render the local player. Humanoid avatars are rendered without their head bone.                                                                                                                                                      | ❌                 |
| 11           | Environment         | Unused by Unity and VRChat.                                                                                                                                                                                                                            | ✔                 |
| 12           | UiMenu              | ⚠ Avoid using this layer. Used by VRChat's nameplates. Ignored by VRChat's UI pointer unless the player has the VRChat menu open.                                                                                                                      | ❌                 |
| 13           | Pickup              | Used by VRChat's Pickups by default when you add a pickup component. Does not collide with players.                                                                                                                                                    | ❌                 |
| 14           | PickupNoEnvironment | Colliders on this Layer only collide with 'Pickup.'                                                                                                                                                                                                    | ❌                 |
| 15           | StereoLeft          | Unused by Unity and VRChat.                                                                                                                                                                                                                            | ❌                 |
| 16           | StereoRight         | Unused by Unity and VRChat.                                                                                                                                                                                                                            | ❌                 |
| 17           | Walkthrough         | Colliders on this layer do not collide with players.                                                                                                                                                                                                   | ✔                 |
| 18           | MirrorReflection    | Used by VRChat to render the local player in Mirrors. <br />Renderers on this Layer will only appear in Mirrors. <br />Renderers on this Layer are not rendered in VRChat's main camera.<br /> Colliders on this Layer do not block VRChat's Raycasts. | ❌                 |
| 19           | InternalUI          | ⚠ Avoid using this layer. Used by VRChat for internal UI elements such as debug consoles.                                                                                                                                                              | ❌                 |
| 20           | HardwareObjects     | ⚠ Avoid using this layer. Used by VRChat to render virtual representations of physical hardware in-game i.e. controllers and trackers                                                                                                                  | ❌                 |
| 21           | reserved4           | ⚠ Avoid using this layer. Reserved by VRChat. When you upload your world, any Game Object on a reserved Layer will be moved to Layer 0 (Default).                                                                                                      | ❌                 |
| 22-30        |                     | Unused by Unity and VRChat. VRChat will not override the name and collision matrix of these Layers in uploaded worlds.                                                                                                                                 | (✔)[^1]           |
| 31           |                     | ⚠ Avoid using this layer. Used by Unity's Editor’s Preview window mechanics.                                                                                                                                                                           | (✔)[^1]           |

[^1]: Layers 22-31 are enabled for Stickers by default. You can disable them by adding them to the [Interaction Passthrough](/worlds/layers#interaction-passthrough-for-user-layers) list.

## Stickers

Stickers allow [VRChat+](https://hello.vrchat.com/vrchatplus) users to place images on `Collider` components in your world.

Stickers can't be placed on [all layers](#unitys-built-in-layers). If you don't want users to place stickers on a `Collider` component, change its layer. We recommend using layer 8 ("Interactive") because it is unused by VRChat and Unity.

If you don't want to allow stickers anywhere, edit your world on the [VRChat Website](https://vrchat.com/home/content/worlds) and disable stickers.

## Interaction Block and Passthrough on VRChat Layers

Interaction (grabbing an item from a distance, toggling a UI element with the laser) is blocked by most VRChat layers. The following layers are transparent to interaction and allow you to interact through them:
 - UiMenu
 - UI
 - PlayerLocal
 - MirrorReflection

## Interaction Passthrough for User Layers

Interaction through User layers is blocked by default. Use the "Interact Passthrough" mask to define layers that will be transparent to interaction (allow interactions to pass through). Note that collision test rays originate differently from Desktop/Mobile players (inside the player capsule) versus VR players (from the user's tracked hand). This means that VR players can penetrate colliders with their hand even when the player collider is blocked. Those same colliders will therefore not block interaction from the VR player, since the hand has penetrated.


---

## Document: sdk-prefabs.md

Path: /worlds/sdk-prefabs.md
---
title: "SDK Prefabs"
slug: "sdk-prefabs"
hidden: false
createdAt: "2022-03-03T00:33:18.460Z"
updatedAt: "2022-03-03T00:38:28.712Z"
---
This is a list of prefabs available in our SDKs!

## VRCAvatarPedestal
An example of how to create an avatar pedestal that you click on to wear a new avatar using Udon.

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > AvatarPedestal`.

## VRCChair
An example of how to create a chair that you click on to sit in using Udon.

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > VRCChair > VRCChair3`.

## VRCMirror
An example of how to create the ever-popular Mirror using Udon.

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > VRCMirror`.

## VRCPortalMarker
An example of how to use [VRC_PortalMarker](/worlds/components/vrc_portalmarker).

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > VRCPortalMarker`.

This prefab **must** be at the root of your scene hierarchy for the portal's destination instance to be synced with other players.

## VRCWorld
An example of how to use [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor) to define a VRChat World.

Found in  `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > World`.

## VRCVideoSync
An example of how to create an Udon-powered [Video Player](/worlds/udon/video-players/). 

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > VideoPlayers`.

Two examples exist:
- `UdonSyncPlayer (AVPro).prefab` - Uses AVPro, which permits watching livestreams.
- `UdonSyncPlayer (Unity).prefab` - Uses Unity's built-in video player, which may be more stable in some situations.

## Simple Pen System
An example of how to create an Udon-powered pen for drawing in 3D space!

Documented here: [Simple Pen System](/worlds/examples/udon-example-scene/simple-pen-system)

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > SimplePenSystem`.

## Udon Variable Sync
A self-documenting example on how Udon Variable Sync works! Drop it into your world and test it out to see how it works.

Found in `Packages > VRChat SDK - Worlds > Samples > UdonExampleScene > Prefabs > Udon Variable Sync`.

---

## Document: submitting-a-world-to-be-made-public.md

Path: /worlds/submitting-a-world-to-be-made-public.md
---
title: "World Creation, Optimization, and Community Labs Tips"
slug: "submitting-a-world-to-be-made-public"
sidebar_position: -1
hidden: false
createdAt: "2018-12-29T00:05:06.003Z"
updatedAt: "2023-04-21T14:54:14.165Z"
---
Want to make your world public? You've come to the right place! You need to submit your world to **Community Labs**.

There are a few things you should take into consideration before submitting your world to Community Labs. **Make sure you read all of this!** Failure to do so may result in your world being taken down, or never leaving Community Labs.

You can submit your world to Community Labs on VRChat.com (Edit World Info -> Danger Zone -> World Visibility -> Publish) or whenever you upload a new version in Unity.

Publishing your world will make it immediately available to all users that opt-in for Community Labs. Eventually, your world will go public and become accessible to all users outside Community Labs! [Read more about Labs here.](https://docs.vrchat.com/docs/vrchat-community-labs)

## Important Info

- **You can only submit one world per user per seven days to Community Labs.** 
- **You can update your world as often as you like.** Just push an update! It won't change the status of your world.
- **If your world is already Public, you don't need to re-submit the world if you update it.** It should update automatically and you will not lose your Public status.
- If your world or any content in the world (videos, avatars, images) violates the VRChat Terms of Service or the Community Guidelines, your ability to submit worlds to Community Labs will be suspended for a period of time. Repeated suspensions may result in in-app moderation action.
- **Content Warnings are deprecated and not used at this time.** You cannot upload content to VRChat that violates our [Community Guidelines](https://vrchat.com/community-guidelines) or [Terms of Service](https://vrchat.com/legal). Doing so (even if you have checked off a content warning) will result in moderation action.
- We do not approve worlds via Discord DMs, emails to VRChat, or any other channel.
- If your world is _very large in filesize_, we may ask you to reduce the size of the world and remove it from Public in the meantime. **Try to keep your worlds under 200MB.**

## Avatar Worlds / All Avatar Pedestals in any World

- **Avatars on pedestals are expected to be "reasonably optimized."** Check out our [Avatar Optimization Docs](/avatars/avatar-optimizing-tips) for more details.  
  Avoid sharing very poor avatars. This applies to all worlds, not just avatar worlds. If avatars in your world have severe performance issues, your world may be removed from Public or Community Labs.
- **If you upload a world with placeholder avatars and replace them with TOS-violating avatars after being made public, you will be suspended from submitting worlds for a month. You may be moderated in-app, depending on the offense severity.**
- **If you have an avatar world, none of your avatars may violate TOS/Community Guidelines.**
- Look into using [Cat's Blender Plugin](https://github.com/absolute-quantum/cats-blender-plugin) and Shotariya's Texture Combiner addons for Blender to optimize your models. 

## Performance Tips

- **Aim for at least 45 FPS with a single VR user at the spawn.** If you do not have VR, have a friend test the world for you. Having a badly performing world will mean people don't spend time in your world, and you probably won't make it out of Labs very easily.
- **Don't use shaders that are not VR-compatible.** Shaders must support single-pass stereo rendering. If you are looking for a good water shader, [check out Silent's Water Shader](https://gitlab.com/s-ilent/clear-water).
- **Use mobile shaders on Android.** Most shaders will _work_ on Android but usually take more processing power to render. Stick to mobile shaders if you can.
- **Use a super-sampled shader for in-world UI.** This is a performance friendly way of achieving crisp-looking text in VR. The SDK will suggest switching over if it finds any UI materials using Unity's built-in UI shader.
- **Be very careful with post-processing effects.** Some screen-space post-processing effects cause major issues for VR users. In particular, be careful with chromatic aberration, screen-space reflection, and screen-space ambient occlusion. 
- **Bad things happen when you put more than 2 video players in a room.** It usually impacts performance negatively.
- **Bad things also happen when you put more than 1 mirror in your room.** Mirrors severely affect a world's performance. If you have 1 mirror in the room, make sure to set it to toggle.
- **We** **_STRONGLY SUGGEST_** **not enabling mirrors by default.** Add a toggle that can be activated by players or activated automatically when players enter a certain area.
- **Do NOT overuse real-time lights.** They are **very** expensive and can kill your world's performance if used incorrectly.
- **Baking your lighting is exceedingly important and can give you huge performance gains.** You can learn more about light baking in [Unity's documentation](https://docs.unity3d.com/Manual/progressive-lightmapper.html) or  [Android's development guide](https://developer.android.com/games/optimize/lighting-for-mobile-games-with-unity#lightmap-baking).

## General Tips

- Test your world! It isn't uncommon for us to see worlds where you immediately drop out of the portal forever.
- Test your world in VR, as well. Check to ensure your shaders are working properly and display properly in VR. If you don't have a VR headset, ask a friend to take a look around.
- **_TEST YOUR LIGHTING!_** Lighting a world is very important and doing it properly is wildly important. Don't just test using Toon shaders as they do not represent lighting properly, use Standard or a PBR shader to see how lighting affects it. If you look blown-out, you probably have too many lights, your intensity is too high, or you need to look into using Tonemapping.
- Want to make your world private again?  Edit your world on the website and you can set it to Private.
- Avoid directly using `.blend` files. Exporting FBX files from Blender for use in VRChat usually causes fewer issues.

If you have any questions about the process, [visit our forum](https://ask.vrchat.com/c/worlds/27) or email hello@vrchat.com with your question.  If you run an event or have a highly trafficked world in the app and need a world made public at a different time, please reach out to us via email at least 48 hours in advance.

## Submitting to Community Labs

Once you've read everything above, submit your new world to Community Labs! If you're curious about how Community Labs works, check out our [VRChat Community Labs](https://docs.vrchat.com/docs/vrchat-community-labs) documentation.

## Becoming a Game or Avatar World

If you want your world to be categorized as an Avatar World or Game World, just add the appropriate tag during upload.


:::caution Don't abuse the world rows

These rules are in place to give **all** worlds a chance to be discovered. Utilizing "SEO-like" techniques is not permitted and will result in actions such as tag removal, or in repeated/worse cases, moderation of the author.

VRChat reserves the right to action users who abuse our systems to unfairly or misleadingly promote their own content.

:::

### Avatar Worlds

An Avatar World is a world where sharing a variety of avatars is the primary focus. In an Avatar World, avatars are quick and easy to find. Avatars shouldn't be an afterthought or a late addition.

To categorize your world as an Avatar World, its title must include one of the terms "avatar", "avatars", "avi", or "avis". 

By including one of these terms in your world's title, it will show up in the "Avatar World" category in VRChat's menu, making it easier for users to discover.

:::caution Don't miscategorize your world

Does your world contain avatars, but it's not an Avatar World?

Add the tag "avatar" to your world instead. It won't be categorized as an Avatar World, but users can still find it by searching for "avatar".

If avatars are not the primary focus of your world, don't include terms like "avatar" in the world's title. Your world may be hidden from certain categories, making it more difficult for users to discover.

:::

### Game Worlds

**A Game World is a world where playing a game or set of games is the** **_primary focus._** Playing games in worlds tagged as Game Worlds should be quick and easy, and should not be an afterthought or "addition" to another clearly primary functionality of the world.

To categorize your world as a game world, add the tag `game`.


---

## Document: supported-assets.md

Path: /worlds/supported-assets.md
---
title: "Supported Scripted Assets"
slug: "supported-assets"
hidden: false
createdAt: "2017-08-06T01:53:56.686Z"
updatedAt: "2023-02-24T00:48:47.712Z"
---
You can use certain external assets that use scripts in VRChat worlds.

To see a list of precise components permitted in VRChat worlds, please see [Allowlisted World Components](/worlds/whitelisted-world-components). Most of these components (except TextMeshPro) are unavailable on Quest.

## TextMeshPro
"TextMesh Pro is the ultimate text solution for Unity. It's the perfect replacement for Unity's UI Text & Text Mesh."

As of Unity 2018, TextMesh Pro is a built-in component of Unity. We strongly recommend TextMeshPro over Unity's built-in text components, as it delivers high-quality text in any font size or screen size.

## Post Processing Stack v2
Import from Package Manager.

We strongly suggest checking out [Silent's Post Processing guide](https://gitlab.com/s-ilent/SCSS/wikis/Other/Post-Processing) for more info and best practices.
:::caution 

Do not import the `Test` folder when importing post-processing. It will cause script errors which will prevent you from uploading the world.
:::
"Post-processing is the process of applying full-screen filters and effects to a camera’s image buffer before it is displayed to screen. It can drastically improve the visuals of your product with little setup time."

## [Final IK](https://assetstore.unity.com/packages/tools/animation/final-ik-14290)
"The final Inverse Kinematics solution for the game developer."

## [Dynamic Bone](https://assetstore.unity.com/packages/tools/animation/dynamic-bone-16743)
"Dynamic Bone applies physics to objects. With simple setup, your object will move realistically."

*Works up to v1.3.0, currently supplied version on asset store may not work.


---

## Document: ai-navigation.md

Path: /worlds/udon/ai-navigation.md
# AI Navigation

AI Navigation allows you to create non-player characters (NPCs) that can intelligently move around the game world, using navigation meshes that are created automatically from your Scene geometry. Dynamic obstacles allow you to alter the navigation of the characters at runtime, while offmesh links let you build specific actions like opening doors or jumping over gaps or down from a ledge.

:::tip

AI Navigation is a built-in Unity feature. Read [Unity's official documentation](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/index.html) to understand important concepts on how to use it.

:::

## Differences from Unity 2019 Navigation Features

Compared to previous versions, Unity 2022 has changed how AI Navigation works in Unity:

* The system is now a separate package maintained by Unity rather than integrated into the core.
* Runtime generation! You can now create and update your navigation meshes at runtime in the VRChat client. This was only possible in the Unity Editor before.
* [NavMesh Links](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/NavMeshLink.html) and [Off-Mesh Links](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/CreateOffMeshLink.html) are simpler to use.
* NavMesh generation is generally improved and more robust.
* Obstacles can be dynamic now.
* You can use multiple [NavMesh Surfaces](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/NavMeshSurface.html) within your world.
* NavMesh Surfaces, [Modifiers](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/NavMeshModifier.html) and [Modifier Volumes](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/NavMeshModifierVolume.html) provide more granular control over the system.
* Area costs are now properly exported into the world data and restored when joining a world.

## Limitations in VRChat

Some of the features of AI Navigation cannot be used in the VRChat client or are not currently useful:

### Custom Agent Types

[Unity lets you declare different types of agents](https://docs.unity3d.com/Packages/com.unity.ai.navigation@1.1/manual/NavMeshAgent.html), which can have different values for Radius, Height, Step Height, Max Slope, and more. This info is bundled into the world data, but VRChat does not currently have a method for retrieving and applying custom agent types. This feature is being considered, but you need to use the default agent type for now.

### Various Methods and Properties

* `NavMeshLink.agentTypeID` - runtime baking does not work for custom agents, so this is not very useful.
* `NavMeshSurface.CollectObjects` - Enum arrays are not available in Udon.
* `NavMeshSurface.agentTypeID` - runtime baking will not work with custom agents, so this is not useful.
* `NavMeshSurface.UpdateNavMesh()` - returns an AsyncOperation, which is not usable. The method itself should still work.


---

## Document: animation-events.md

Path: /worlds/udon/animation-events.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Animation Events

You can <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/script-AnimationWindowEvent.html">call events from your Animations</UnityVersionedLink>. This page lists the events that are allowlisted for use in this way. If an event is not in this allow list, it will not be called when your world runs in VRChat.

[IMAGE: animation-events-af04d2a-AnimationEventInspector.png]

## Allowed Animation Events
* RunProgram
* SendCustomEvent
* Play
* Pause
* Stop
* PlayInFixedTime
* Rebind
* SetBool
* SetFloat
* SetInteger
* SetTrigger
* ResetTrigger
* SetActive

---

## Document: avatar-events.md

Path: /worlds/udon/avatar-events.md
# Avatar Events

These events allow Udon to react to changes regarding player avatars.

## OnAvatarChanged

Returns `VRCPlayerApi` object for the instigating player. Called when a player's avatar has finished loading.

### Persisted eye heights
Players will sync any variance from their prefab eye height after their avatar loads, triggering an `OnAvatarEyeHeightChanged` event.

If the `VRCPlayerApi` object is for the local player, retrieving its eye height will return the prefab height during this event.

If the `VRCPlayerApi` object is for a remote player, be aware that the remote player may not have synced their new eye height yet, and you should not rely on the returned value in this case.

## OnAvatarEyeHeightChanged

Returns a `VRCPlayerApi` object for the instigating player and a `float` describing their previous or previously synced eye height in meters. Called when a player has their eye height change via switching to another avatar or via the [avatar scaling system](/worlds/udon/players/player-avatar-scaling).

### First avatar load
When a local or remote user joins a world, the first previous eye height value received for that user may be `0`.

### Avatar changes, remote players, and event ordering
When a **local** user changes their avatar and applies a persisted eye height (if they have one saved that differs from their prefab height), this event should only execute for their persisted height.

When a **remote** user changes their avatar and applies a persisted eye height (if they have one saved that differs from their prefab eye height), this event may execute more than once. 

For remote players, you will receive this event every time a new eye height is synced to you by the remote player. This means that you could receive an `OnAvatarEyeHeightChanged` event prior to an `OnAvatarChanged` event, but you should not receive `OnAvatarEyeHeightChanged` events out of order.


:::note More Info

See [Player Avatar Scaling](/worlds/udon/players/player-avatar-scaling) for more info about this feature.

:::

---

## Document: byte-and-bit-operations.md

Path: /worlds/udon/data-containers/byte-and-bit-operations.md
---
title: "Byte and Bit Operations"
slug: "byte-and-bit-operations"
hidden: false
sidebar_position: 10
createdAt: "2024-02-26T18:00:00.000Z"
updatedAt: "2024-02-26T18:00:00.000Z"
---
# Byte and Bit Operations

:::info

This page describes lower level concepts of working with binary data and is intended for advanced creators.
:::

You can use the `Bitcast` method on DataTokens to do value-preserving type changes ("unsafe casts") on primitive data types in Udon.

Some standard C# classes for operating on raw binary data are also available, including `BitConverter` and `Buffer`.

## Example Code

```csharp title="Byte and Bit Operations Example, Basic Serializer"
using System;
using System.Text;
using UdonSharp;
using UnityEngine;
using VRC.SDK3.Data;

public class BitConverterExample : UdonSharpBehaviour
{
    void Start()
    {
        //Create test data
        int originalInt = 63;
        double originalDouble = 734531.433d;
        string originalString = "Test string";
        float[] originalFloatArray = new float[] { 543, 12.6f, 63.1231f };

        //Serialize and then deserialize
        byte[] serialized = Serialize(originalInt, originalDouble, originalString, originalFloatArray);
        Deserialize(serialized, out int newInt, out double newDouble, out string newString, out float[] newFloatArray); 
        
        //Print the results to see if everything matches
        Debug.Log($"{originalInt} - {newInt}");
        Debug.Log($"{originalDouble} - {newDouble}");
        Debug.Log($"{originalString} - {newString}");
        Debug.Log($"{originalFloatArray.Length} - {newFloatArray.Length}");
        for (int i = 0; i < originalFloatArray.Length && i < newFloatArray.Length; i++)
        {
            Debug.Log($"{originalFloatArray[i]} - {newFloatArray[i]}");
        }

        //For individual values we can also use DataToken Bitcasting to get bit access
        double doubleValue = 123.456d;
        DataToken doubleToken = new DataToken(doubleValue);
        //We used ulong because it has the same size as a double (8 bytes)
        DataToken ulongToken = doubleToken.Bitcast(TokenType.ULong);
        DataToken resultDoubleToken = ulongToken.Bitcast(TokenType.Double);
        Debug.Log($"{doubleToken} - 0x{ulongToken:02X} - {resultDoubleToken}");
    }

    /// <summary>
    /// An example function which serializes a pre-determined set of data into a byte array
    /// </summary>
    /// <param name="intValue">Integer which will be encoded into the output</param>
    /// <param name="doubleValue">Double which will be encoded into the output</param>
    /// <param name="stringValue">String which will be encoded into the output</param>
    /// <param name="floatArrayValues">Float array which will be encoded into the output</param>
    /// <returns></returns>
    byte[] Serialize(int intValue, double doubleValue, string stringValue, float[] floatArrayValues)
    {
        int size = 0;
        byte[] intBytes = BitConverter.GetBytes(intValue); //Convert int to bytes
        size += intBytes.Length;
        
        byte[] doubleBytes = BitConverter.GetBytes(doubleValue); //Convert int to bytes
        size += doubleBytes.Length;
        
        byte[] stringBytes = Encoding.UTF8.GetBytes(stringValue); //Convert string to bytes
        size += stringBytes.Length;
        Debug.Log($"String byte length {stringBytes.Length}");
        
        byte[] stringLengthBytes = BitConverter.GetBytes(stringBytes.Length); //Convert string length to bytes
        size += stringLengthBytes.Length;
        
        byte[] floatArrayLengthBytes = BitConverter.GetBytes(Buffer.ByteLength(floatArrayValues));
        size += floatArrayLengthBytes.Length;
        
        //It is not necessary to convert the float array into a byte array because we can BlockCopy it directly
        size += Buffer.ByteLength(floatArrayValues);

        byte[] output = new byte[size]; //Allocate an array of the correct size that should fit all of our items
        int offset = 0;

        Buffer.BlockCopy(intBytes, 0, output, offset, intBytes.Length); //Write int - this should take up 4 bytes
        offset += intBytes.Length; //Increment offset so the next item can write to the correct location
        
        Buffer.BlockCopy(doubleBytes, 0, output, offset, doubleBytes.Length); //Write double - this should take up 8 bytes
        offset += doubleBytes.Length;
        
        Buffer.BlockCopy(stringLengthBytes, 0, output, offset, stringLengthBytes.Length); //Write the length of the string so the decoder knows how much to decode - this should take up 4 bytes
        offset += stringLengthBytes.Length;

        Buffer.BlockCopy(stringBytes, 0, output, offset, stringBytes.Length); //Write string - this is variable, which is why we need to encode the length of the string above
        offset += stringBytes.Length;

        Buffer.BlockCopy(floatArrayLengthBytes, 0, output, offset, floatArrayLengthBytes.Length); //Write the length of the float array so the decoder knows how much to decode - this should take up 4 bytes
        offset += floatArrayLengthBytes.Length;
        
        Buffer.BlockCopy(floatArrayValues, 0, output, offset, Buffer.ByteLength(floatArrayValues)); //Write float array - this can be done directly without a byte array conversion because it's already an Array
        offset += Buffer.ByteLength(floatArrayValues);
        
        Debug.Log($"Encoded data in {output.Length} bytes");
        return output;
    }

    /// <summary>
    /// An example function which deserializes a pre-determined set of data described in the Serialize function above
    /// </summary>
    /// <param name="input">Input bytes - must be formatted in the expected manner by the Serialize function above</param>
    /// <param name="intValue">Output int value deserialized from the data inside the input</param>
    /// <param name="doubleValue">Output double value deserialized from the data inside the input</param>
    /// <param name="stringValue">Output string value deserialized from the data inside the input</param>
    /// <param name="floatArrayValues">Output float array value deserialized from the data inside the input</param>
    /// <returns></returns>
    bool Deserialize(byte[] input, out int intValue, out double doubleValue, out string stringValue, out float[] floatArrayValues)
    {
        int offset = 0;
        
        intValue = BitConverter.ToInt32(input, offset);
        offset += 4; //Increment the offset so the next item reads from the correct location. Ints should be 4 bytes long
        
        doubleValue = BitConverter.ToDouble(input, offset);
        offset += 8; //Doubles should be 8 bytes long
        
        int stringLength = BitConverter.ToInt32(input, offset);
        offset += 4; //String length is an int, which should be 4 bytes long
        
        Debug.Log($"Decoding string length {stringLength} at offset {offset} for buffer length {input.Length}");
        stringValue = Encoding.UTF8.GetString(input, offset, stringLength);
        offset += stringLength; //Strings are variable length

        int floatArrayByteLength = BitConverter.ToInt32(input, offset);
        offset += 4; //Float array length is an int, which should be 4 bytes long
        
        floatArrayValues = new float[floatArrayByteLength / 4]; //Create a new float array of the correct size to receive the data
        Buffer.BlockCopy(input, offset, floatArrayValues, 0, floatArrayByteLength); //Copy the data from the input into the float array
        
        return true;
    }
}
```

---

## Document: data-dictionaries.md

Path: /worlds/udon/data-containers/data-dictionaries.md
---
title: "Data Dictionaries"
slug: "data-dictionaries"
hidden: false
createdAt: "2023-04-24T23:48:21.052Z"
updatedAt: "2023-05-04T21:39:11.809Z"
---
# Data Dictionaries

Data Dictionaries store [Data Tokens](/worlds/udon/data-containers/data-tokens) by key-value pair, similarly to [C# Dictionaries](https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=net-7.0). Most Data Dictionary functions are just wrappers for the underlying C# dictionary, so the C# dictionary documentation also applies if you are looking for more specific details.

Both the keys and the values of a Data Dictionary are Data Tokens. This means that you can effectively use anything for your keys. However, if you intend to serialize to [VRCJSON](/worlds/udon/data-containers/vrcjson), only string keys are supported.

If you are using UdonSharp, include the `using VRC.SDK3.Data;` directive to use data dictionaries.

## Properties

| Property | Result                                       |
| -------- | -------------------------------------------- |
| Count    | Get the number of elements in the dictionary |

## Functions

| Function         | Input                             | Output                         | Result                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------- | --------------------------------- | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Add              | DataToken key, DataToken value    |                                | Adds the value at the specified key. The entire purpose of this function that sets it apart from SetValue is that an exception will be thrown if the key already exists. This is useful for initialization because it will cause a compile error, but it's not recommended for normal usage where it could cause a runtime error and halt your UdonBehaviour.                                                                         |
| Clear            |                                   |                                | Removes all keys and values from this dictionary                                                                                                                                                                                                                                                                                                                                                                                       |
| ContainsKey      | DataToken key                     | bool result                    | Returns true if the specified key exists on this dictionary.                                                                                                                                                                                                                                                                                                                                                                           |
| ContainsValue  | DataToken key                     | bool result                    | Returns true if the specified value exists on this dictionary.                                                                                                                                                                                                                                                                                                                                                                         |
| DeepClone      |                                   | DataDictionary result          | Clones the DataDictionary into a new DataDictionary that contains all the same values. Unlike ShallowClone, deep clone means that it will recursively navigate inside each DataList or DataDictionary and copy their contents as well. Items with the TokenType "Reference" will maintain the same reference as the original and not be deep cloned, which includes arrays.                                                            |
| GetKeys          |                                   | DataList keys                  | Returns a [Data List](/worlds/udon/data-containers/data-lists) of all keys that exist in this Data Dictionary. **Use this to iterate over all items in a Data Dictionary in a for loop.**                                                                                                                                                                                                                                    |
| GetValues      |                                   | DataList values                | Returns a [Data List](/worlds/udon/data-containers/data-lists) of all values that exist in this Data Dictionary.                                                                                                                                                                                                                                                                                                             |
| Remove           | DataToken key                     | bool success                   | Removes a specific key from this dictionary. Returns true if anything was successfully removed.                                                                                                                                                                                                                                                                                                                                        |
| Remove           | DataToken key                     | bool success, DataToken value  | Removes a specific key from this dictionary. Returns true if anything was successfully removed. If successful, copies the value that was removed into the `out DataToken`.                                                                                                                                                                                                                                                             |
| SetValue         | DataToken key, DataToken value    |                                | Sets the value at the specified key. If that key does not exist, a new one will be added.                                                                                                                                                                                                                                                                                                                                              |
| ShallowClone   |                                   | DataDictionary result          | Clones the DataDictionary into a new DataDictionary that contains all the same values. Unlike DeepClone, this means that if the DataDictionary contains other DataLists and DataDictionaries, those will still be the same reference.                                                                                                                                                                                                  |
| TryGetValue      | DataToken key                     | bool success, DataToken output | Gets a token from the specified key and puts it in the `out DataToken`. Returns true if the retrieval was successful, and false if it was not. Failing to retrieve a value will put a DataError in the `out DataToken` instead of a result.                                                                                                                                                                                            |
| TryGetValue      | DataToken key, TokenType expected | bool success, DataToken output | Gets a token from the specified key and puts it in the `out DataToken`. Returns true if the retrieval was successful, and false if it was not. Failing to retrieve a value will put a DataError in the `out DataToken` instead of a result. This version of `TryGetValue` includes a TokenType, which means it will do an automatic type check for you. If the type does not match, it will return false with `DataError.TypeMismatch` |

 Note that calling functions which affect or look at all values such as `ContainsValue`, `ShallowClone`, and `GetValues` on a Data Dictionary generated from Json will parse all top-level values that have not already been parsed, which may be expensive with many values. Once they are parsed, future operations will be cheaper.

## Getting a value from a DataDictionary

There are several different ways to get a value out of a dictionary. Each one has it's own use case, and it is up to you to choose which one you want to use.

- [TryGetValue](/worlds/udon/data-containers/data-dictionaries#trygetvalue)
- [TryGetValue with TokenType](/worlds/udon/data-containers/data-dictionaries#trygetvalue-with-tokentype)
- [Shorthand bracket syntax](/worlds/udon/data-containers/data-dictionaries#shorthand-bracket-syntax)

### TryGetValue

If you want to get a value out of a dictionary safely, but you don't care what type exists at that location, it is recommended to use `TryGetValue`. This is a function that returns true or false depending on whether or not getting the value was successful. It is intended to put this inside of the conditions for an `if` or a `branch` so that it is clear what happens when it succeeds and what happens when it fails.

```csharp title="Example of TryGetValue"
if (dictionary.TryGetValue("key", out DataToken value)) {
    Debug.Log($"Success! {value}");
} else {
    Debug.Log($"Failed! {value}");
}
```

If this does fail, the DataToken you receive is still valid, but rather than containing your data it will contain an [error](/worlds/udon/data-containers/data-tokens#errors).

This method is good for when you want to get some value from some location, but you don't care what it is exactly.

As this function does not have a type check built in, you should pair this function with some form of type checking, whether that be an `if`, `branch`, or `switch`. If you only care about one specific type, then it is recommended to just use the version of TryGetValue with TokenType, which does an automatic type check.

### TryGetValue with TokenType

If you want to get a value from a dictionary and you don't know what type it could be, it is important to do type checks. You could do that yourself in your own code, but that can get messy. Instead, you can use the version of TryGetValue that includes a TokenType. When you do this, it indicates that you only want to retrieve the value if it is the type you expect. Otherwise, it returns false and that can be handled gracefully. 

This method is good for when you want to get a specific value from a specific location, but the data is coming from an outside source so you are not confident that the source has the right data.

```csharp title="Example of TryGetValue with TokenType"
// You could do it this way, but it's a bit ugly
if (dictionary.TryGetValue("key", out DataToken value)) {
    if (value.TokenType == TokenType.DataDictionary)
    {
        Debug.Log($"Success! Matching dictionary has {value.DataDictionary.Count} items");
    }
}

// This approach has a type check built in! It's functionally the same, but streamlined.
if (dictionary.TryGetValue("key", TokenType.DataDictionary, out value)) {
    Debug.Log($"Success! Matching dictionary has {value.DataDictionary.Count} items");
}
```

### Shorthand Bracket syntax

You can also set and get items from a Data Dictionary using bracket syntax such as `dictionary["key"] = "value";` in UdonSharp or `DataDictionary Get Item` node in Udon graph. This method is smaller and easier to use. However, be aware that this is not completely safe and may halt your udonbehaviour if you attempt to perform an invalid operation such as trying to get a value from a key that does not exist. 

This method is good for when you have complete control over your data, can guarantee that it exists, and that it is the type you expect. Otherwise, it is recommended to use some form of `TryGetValue`.

```csharp title="Example of Shorthand Bracket syntax"
dictionary["A"] = 5;
dictionary["B"] = 10;

// This makes the assumption that A and B will always contain integers.
// This is a safe assumption to make since we set them just above in a controlled environment.
// If the data is coming from an external source, we shouldn't make these assumptions!
int sum = dictionary["A"].Int + dictionary["B"].Int;
```

## Initializing a Data Dictionary

In Udonsharp, Data Dictionaries can be initialized in private variables. This allows you to have a pre-existing set of data that is defined before your code runs. This also supports nested dictionaries and anything else that DataTokens support. Here is an example of how you should use this syntax:

```csharp title="Example of initializing a Data Dictionary"
private DataDictionary users = new DataDictionary()
    {
        { "John Doe", new DataDictionary()
            {
                {"email", "johndoe@example.com"},
                {"age", 35},
                {"address", new DataDictionary()
                    {
                        {"street", "123 Main St"},
                        {"city", "Anytown"},
                        {"state", "CA"},
                        {"zip", 12345}
                    }
                }
            }
        },
        { "Jane Smith", new DataDictionary()
            {
                {"email", "janesmith@example.com"},
                {"age", 28},
                {"address", new DataDictionary()
                    {
                        {"street", "456 Elm St"},
                        {"city", "Anytown"},
                        {"state", "CA"},
                        {"zip", 12345}
                    }
                }
            }
        },
        { "Bob Johnson", new DataDictionary()
            {
                {"email", "bobjohnson@example.com"},
                {"age", 42},
                {"address", new DataDictionary()
                    {
                        {"street", "789 Oak St"},
                        {"city", "Anytown"},
                        {"state", "CA"},
                        {"zip", 12345}
                    }
                }
            }
        }
    };
```

At the moment, Udonsharp does not support initializers of this type inside a function. This would be a feature request for Udonsharp.

At the moment, Unity does not serialize DataDictionaries, which means that **this is not recommended for serialized public variables.** It should be used for `private` or `[NonSerialized] public` variables only. This is an addition to the feature that we are still working on.

## Iterating over all entries in a dictionary

Iterating over all the entries in a dictionary is a bit different from a list because a dictionary is not ordered. You can't index directly into a dictionary, you must use a key. To do this, we have the `GetKeys()` function. This function gives you a DataList of all the keys in a dictionary. Once you have that, you can use a for loop to iterate over all the keys and access the value at each key.

```csharp title="Example of iterating over all entries in a dictionary"
// First get all the keys in the dictionary
DataList keys = dictionary.GetKeys();

// For loop over all the keys
for (int i = 0; i < keys.Count; i++)
{
    // Get the key at the current index
    DataToken key = keys[i];
    
    // Access the entry connected to that key
    Debug.Log(dictionary[key].ToString());
}
```

GetKeys may appear to be expensive at first glance, but it is cached so long as a key is not added or removed so it is generally performant to access frequently, aside from the overhead of Udon itself.

If you need to iterate over a dictionary in a sorted manner, a neat trick you can do thanks to this method is to `GetKeys()` then `Sort()` the keys, then go through the for loop. The dictionary itself doesn't have any context of ordering and cannot be sorted, but you can sort the list that you use to access it!

If you want to work with the values of the dictionary separately from the keys, you can also use `GetValues()`. This can be useful for some applications where you explicitly need all the values laid out, but it is worth mentioning that if you are not familiar with dictionaries, this method can be deceptive. Among other reasons, dictionaries have no order, and so you should never rely on a particular item to always be at a particular index when retrieved by `GetValues()`, nor should you expect the index of these items to correctly match with the index found in `GetKeys()`. In most cases, `GetKeys()` is all you need, and `GetValues()` is more of an option for people who need more advanced control over dictionaries.

## Syncing a Data Dictionary with other players over the network

Data Dictionaries cannot be directly synced. However, they can be serialized to/from JSON strings using [VRCJson](/worlds/udon/data-containers/vrcjson). This is the current recommended method of syncing Data Dictionaries with UdonSync. 

One way to do this is to use OnPreSerialization and OnDeserialization to Serialize and Deserialize the json string. Using this method, you won't need to worry about the serialization within the rest of your code, and you can simply set values and forget.

```csharp title="Example of syncing a Data Dictionary with other players over the network"
[UdonSynced]
private string _json = "";
private DataDictionary _dictionary;

public override void OnPreSerialization()
{
    if (VRCJson.TrySerializeToJson(_dictionary, JsonExportType.Minify, out DataToken result))
    {
        _json = result.String;
    }
    else
    {
        Debug.LogError(result.ToString());
    }
}

public override void OnDeserialization()
{
    if(VRCJson.TryDeserializeFromJson(_json, out DataToken result))
    {
        _dictionary = result.DataDictionary;
    }
    else
    {
        Debug.LogError(result.ToString());
    }
}
```

---

## Document: data-lists.md

Path: /worlds/udon/data-containers/data-lists.md
---
title: "Data Lists"
slug: "data-lists"
hidden: false
createdAt: "2023-04-24T23:48:11.427Z"
updatedAt: "2023-04-26T15:18:56.307Z"
---
# Data Lists

Data Lists store [Data Tokens](/worlds/udon/data-containers/data-tokens) by index, similarly to [C# Lists](https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1?view=net-7.0). Most Data List functions are just wrappers for the underlying C# list, so the C# list documentation also applies if you are looking for more specific details.

Data Lists can be serialized to/from JSON strings using [VRCJSON](/worlds/udon/data-containers/vrcjson). This is the current recommended method of syncing Data Lists over the network.

If you are using UdonSharp, include the `using VRC.SDK3.Data;` directive to use data lists.

## Properties

| Property | Result                                                                                                                                                                                 |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Capacity | Set or get the capacity of the list. See [C# documentation](https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1.capacity?view=net-8.0) for further details. |
| Count    | Get the number of elements in the list                                                                                                                                                 |

## Functions

| Function        | Input                                      | Output                         | Result                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --------------- | ------------------------------------------ | ------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Add             | DataToken                                  |                                | Adds a token at the end of the list                                                                                                                                                                                                                                                                                                                                                                                                           |
| AddRange      | DataList                                   |                                | Adds the values of another Data List at the end of this Data List.                                                                                                                                                                                                                                                                                                                                                                            |
| BinarySearch    | DataToken value                            | int index                      | Uses a binary search algorithm to locate a specific element in the List by comparison. **In order to perform a binary search, the list must be sorted**. See [C# documentation](https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1.binarysearch?view=net-8.0) for further details on binary search.                                                                                                               |
| BinarySearch    | DataToken value, int startIndex, int count | int index                      | Performs a binary search within the specified range, starting at the provided index and extending toward the end of the list by the provided count. Note that this function searches by comparison, and will compare dictionaries and lists by count rather than contents. This makes it unsuitable for finding a specific dictionary or list within a list.                                                                                  |
| Clear           |                                            |                                | Removes all values from this list.                                                                                                                                                                                                                                                                                                                                                                                                            |
| Contains        | DataToken value                            | bool result                    | Returns true if the Data List contains the specified value.                                                                                                                                                                                                                                                                                                                                                                                   |
| DeepClone     |                                            | DataList result                | Clones the DataList into a new DataList that contains all the same values. This does do a deep clone, which means that it will recursively navigate inside each DataList or DataDictionary and copy their contents as well. However, it will not look inside other structures such as arrays, and those will still have the same reference to the original.                                                                                   |
| GetRange        | int index, int count                       | DataList output                | Copies a segment of the DataList out to another DataList. Returns false if index or count were out of range.                                                                                                                                                                                                                                                                                                                                  |
| IndexOf       | DataToken item                             | int index                      | Searches for the specified object and returns the zero-based index of the first occurrence within the entire DataList. If not found, returns -1.                                                                                                                                                                                                                                                                                              |
| IndexOf       | DataToken item, int startIndex             | int index                      | Searches for the specified object and returns the zero-based index of the first occurrence within the range of elements in the DataList that extends from the specified index to the last element. If not found, returns -1.                                                                                                                                                                                                                  |
| IndexOf       | DataToken item, int startIndex, int count  | int index                      | Searches for the specified object and returns the zero-based index of the first occurrence within the range of elements in the DataList that starts at the specified index and contains the specified number of elements. If not found, returns -1.                                                                                                                                                                                           |
| Insert          | int index, DataToken input                 | bool success                   | Inserts a token into the middle of the list. All entries above the specified index will be shifted up one. Returns false if index was out of range.                                                                                                                                                                                                                                                                                           |
| InsertRange     | int index, DataList input                  |                                | Inserts a DataList into the middle of the DataList. All entries above the specified index will be shifted up. Returns false if index was out of range.                                                                                                                                                                                                                                                                                        |
| LastIndexOf   | DataToken item                             | int index                      | Searches for the specified object and returns the zero-based index of the last occurrence within the DataList. If not found, returns -1.                                                                                                                                                                                                                                                                                                      |
| LastIndexOf   | DataToken item, int startIndex             | int index                      | Searches for the specified object and returns the zero-based index of the last occurrence within the range of elements in the DataList that extends from the first element to the specified index. If not found, returns -1.                                                                                                                                                                                                                  |
| LastIndexOf   | DataToken item, int startIndex, int count  | int index                      | Searches for the specified object and returns the zero-based index of the last occurrence within the range of elements in the DataList that contains the specified number of elements and ends at the specified index. If not found, returns -1.                                                                                                                                                                                              |
| Remove        | DataToken value                            | bool success                   | Removes the first occurrence of the specified value. Returns true if a matching value was found, returns false if not.                                                                                                                                                                                                                                                                                                                        |
| RemoveAll     | DataToken value                            | bool success                   | Removes all occurrences of the specified value. Returns true if any matching values were found, returns false if not.                                                                                                                                                                                                                                                                                                                         |
| RemoveAt        | int index                                  |                                | Removes the element at the specified index.                                                                                                                                                                                                                                                                                                                                                                                                   |
| RemoveRange     | int index, int count                       |                                | Removes a range of elements from the list.                                                                                                                                                                                                                                                                                                                                                                                                    |
| Reverse         |                                            |                                | Reverses the order of all elements in the list.                                                                                                                                                                                                                                                                                                                                                                                               |
| Reverse         | int index, int count                       |                                | Reverses the order of elements within the range specified, starting at the provided index and extending toward the end of the list by the provided count.                                                                                                                                                                                                                                                                                     |
| SetValue        | int index, DataToken input                 |                                | Sets a DataToken at the specified index.                                                                                                                                                                                                                                                                                                                                                                                                      |
| ShallowClone  |                                            | DataList result                | Clones the DataList into a new DataList that contains all the same values. This does not do a deep clone, which means that if the DataList contains references to other Data Containers, those will still be the same reference.                                                                                                                                                                                                              |
| Sort          |                                            |                                | Sorts all the elements in the list. If all elements are the same type, then they will be sorted by that type's native comparison operation. If a DataList contains multiple different types but those types are all numbers, then it will sort them with a numeric conversion. If a DataList contains multiple different non-numeric types, then it will sort them in this order: `Null, Number, String, DataList, DataDictionary, Reference` |
| Sort          | int index, int count                       |                                | Performs the same operation as Sort but only within the range specified, starting at the provided index and extending toward the end of the list by the provided count.                                                                                                                                                                                                                                                                       |
| ToArray         |                                            | DataToken\[] output            | Converts the DataList into a DataToken array                                                                                                                                                                                                                                                                                                                                                                                                  |
| TrimExcess      |                                            |                                | Sets the capacity to the actual number of elements in the DataList, if that number is less than a threshold value.                                                                                                                                                                                                                                                                                                                            |
| TryGetValue     | int index                                  | DataToken output               | Gets a token from the specified index and puts it in the `out DataToken`. Returns true if successful.                                                                                                                                                                                                                                                                                                                                         |
| TryGetValue     | int index, TokenType expected              | bool success, DataToken output | Gets a token from the specified index and puts it in the `out DataToken`. Returns true if successful. This version of `TryGetValue` includes a TokenType, which means it will do an automatic type check for you. If the type does not match, it will return false with `DataError.TypeMismatch`                                                                                                                                              |

 Note that calling functions which affect or look at all values such as `Contains`, `IndexOf`, and `LastIndexOf` on a Data List generated from Json will parse all top-level values that have not already been parsed, which may be expensive with many values. Once they are parsed, future operations will be cheaper.

## Getting a value from a DataList

There are several different ways to get a value out of a DataList. Each one has it's own use case, and it is up to you to choose which one you want to use.

- [TryGetValue](/worlds/udon/data-containers/data-lists#trygetvalue)
- [TryGetValue with TokenType](/worlds/udon/data-containers/data-lists#trygetvalue-with-tokentype)
- [Shorthand bracket syntax](/worlds/udon/data-containers/data-lists#shorthand-bracket-syntax)

### TryGetValue

If you want to get a value out of a list safely, it is recommended to use `TryGetValue`. This is a function that returns true or false depending on whether or not getting the value was successful. It is intended to put this inside of the conditions for an `if` or a `branch` so that it is clear what happens when it succeeds and what happens when it fails.

```csharp title="Example of TryGetValue"
if (list.TryGetValue(0, out DataToken value))
{
    Debug.Log($"Success! {value}");
}
else
{
    Debug.Log("Failed! {value}");
}

```

If this does fail, the DataToken you receive is still valid, but rather than containing your data it will contain an [error](/worlds/udon/data-containers/data-tokens#errors).

This method is good for when you want to get some value from some location, but you don't care what it is exactly.

As this function does not have a type check built in, you should pair this function with some form of type checking, whether that be an `if`, `branch`, or `switch`. If you only care about one specific type, then it is recommended to just use the version of TryGetValue with TokenType, which does an automatic type check.

### TryGetValue with TokenType

If you want to get a value from a list and you don't know what type it could be, it is important to do type checks. You could do that yourself in your own code, but that can get messy. Instead, you can use the version of TryGetValue that includes a TokenType. When you do this, it indicates that you only want to retrieve the value if it is the type you expect. Otherwise, it returns false and that can be handled gracefully. 

This method is good for when you want to get a specific value from a specific location, but the data is coming from an outside source so you are not confident that the source has the right data.

```csharp title="Example of TryGetValue with TokenType"
// You could do it this way, but it's a bit ugly
if (list.TryGetValue(0, out DataToken value)) {
    if (value.TokenType == TokenType.DataDictionary)
    {
        Debug.Log($"Success! Matching dictionary has {value.DataDictionary.Count} items");
    }
}

// This approach has a type check built in! It's functionally the same, but streamlined.
if (list.TryGetValue(0, TokenType.DataDictionary, out value)) {
    Debug.Log($"Success! Matching dictionary has {value.DataDictionary.Count} items");
}
```

### Shorthand Bracket syntax

You can also set and get items from a DataList using bracket syntax such as `list[5] = "value";` in UdonSharp or `DataList Get Item` node in Udon graph. This method is smaller and easier to use. However, be aware that this is not completely safe and may halt your udonbehaviour if you attempt to perform an invalid operation. You should only use this if you have complete control over the data and can guarantee that it exists and is the type you expect. Otherwise, it is recommended to use some form of `TryGetValue`.

```csharp title="Example of Shorthand Bracket syntax"
list[0] = 5;
list[1] = 10;

// This makes the assumption that index 0 and 1 will always contain integers.
// This is a safe assumption to make since we set them just above in a controlled environment.
// If the data is coming from an external source, we shouldn't make these assumptions!
int sum = list[0].Int + list[1].Int;
```

## Initializing A Data List

In Udonsharp, Data Lists can be initialized in private variables. This allows you to have a pre-existing set of data that is defined before your code runs. This also supports nested dictionaries and anything else that DataTokens support. Here is an example of how you should use this syntax:

```csharp title="Example of initializing a Data List"
private DataList _groceries = new DataList()
{
    "Bananas",
    "Grapes",
    "Milk",
    "Soda",
    "Turkey",
    "Ham",
    "Roast Beef"
}
```

At the moment, Udonsharp does not support initializers of this type inside a function. This would be a feature request for Udonsharp.

At the moment, Unity does not serialize DataLists, which means that **this is not recommended for serialized public variables.** It should be used for `private` or `[NonSerialized] public` variables only. This is an addition to the feature that we are still working on.

## Syncing a Data List with other players over the network

Data Lists cannot be directly synced. However, they can be serialized to/from JSON strings using [VRCJson](/worlds/udon/data-containers/vrcjson). This is the current recommended method of syncing Data Lists with UdonSync.

One way to do this is to use OnPreSerialization and OnDeserialization to Serialize and Deserialize the json string. Using this method, you won't need to worry about the serialization within the rest of your code, and you can simply set values and forget.

```csharp title="Example of syncing a Data List with other players over the network"
[UdonSynced]
private string _json;
private DataList _list;

public override void OnPreSerialization()
{
    if (VRCJson.TrySerializeToJson(_list, JsonExportType.Minify, out DataToken result))
    {
        _json = result.String;
    }
    else
    {
        Debug.LogError(result.ToString());
    }
}

public override void OnDeserialization()
{
    if(VRCJson.TryDeserializeFromJson(_json, out DataToken result))
    {
        _list = result.DataList;
    }
    else
    {
        Debug.LogError(result.ToString());
    }
}
```

## FAQ

### Why not have a ToArray for each type?

It would be desirable to have a ToArray method for each data type. However, this is not currently feasible due to the lack of support for generics within Udon. While it is technically possible to create individual methods such as ToStringArray, ToFloatArray, ToDoubleArray, and others, this approach would result in excessive bloat to cover every possible type. Additionally, these methods would become deprecated once Udon 2 introduces support for generics. Furthermore, the basic ToArray methods would not provide significant added value. The real advantage would arise from the ability to execute ToArray on an object type, such as ToArray(typeof(Collider)), which would eliminate the need for casting. Nevertheless, supporting a ToArray of all possible objects is not practical, and supporting a ToArray of object specifically would be even worse than working with tokens.

Despite the fact that retrieving values from DataTokens can be a somewhat cumbersome process, they are specifically designed for this purpose and have several utilities to assist with this task.

### Arrays are similar, what's the difference?

Arrays are a similar structure, used for storing lots of values in a sequential order, accessed by index. They are also very simple, and highly efficient at doing _exactly_ that and nothing else. DataLists are a more complex type that can do a lot more. For example, an array has to be initialized with a specific length when it is first created, and you cannot add more items to it unless you create a new array to replace it. But don't be fooled - there are still good reasons to use an array instead of a list.

### When should I use a DataList instead of an array?

Picking a DataList over an array should be done when there is a particular feature you need, so not everything needs to be switched.

- When you want to add new items or remove items to the container dynamically. Arrays cannot do this.
- When you want a single container to contain multiple different types at the same time. Arrays cannot do this.
- When you want a container to contain containers arbitrarily. Arrays can do this, but they have to have a strict depth defined. DataLists can be nested arbitrarily deep however you want.

### When should I use an array instead of a DataList?

- When performance is critical, such as iterating over a container every frame. DataLists may have a very small amount of performance overhead due to pulling the value out of the token.
- When you want to sync the container over the network. DataLists technically support this through JSON if there is a reason you absolutely need a DataList, but that is going to be much more expensive on both performance and bandwidth than normal array syncing.
- When your container only needs to contain one specific type. DataLists can do this of course, but they bypass the strict typing nature of C#. This means that your code editor will be unable to know exactly what type the container contains, and this may allow you to write bugs that would have otherwise been compile errors.
- When you want to contain a type that is not directly supported by Data Tokens. Data Tokens can contain any type through the use of object references and boxing, but it's not ideal. You need to pull the reference out _and_ cast it to your desired type.

---

## Document: data-tokens.md

Path: /worlds/udon/data-containers/data-tokens.md
---
title: "Data Tokens"
slug: "data-tokens"
hidden: false
createdAt: "2023-04-24T23:48:30.309Z"
updatedAt: "2023-04-25T00:01:54.599Z"
---
# Data Tokens

Data Tokens store data. Each token stores one and only one variable. Data Tokens are used in [Data Dictionaries](/worlds/udon/data-containers/data-dictionaries) and [Data Lists](/worlds/udon/data-containers/data-lists).

Data Tokens can contain the following Token Types:

- Null
- Boolean
- SByte
- Byte
- Short
- UShort
- Int
- UInt
- Long
- ULong
- Float
- Double
- String
- Data Lists (Stores other DataTokens)
- Data Dictionaries (Stores other DataTokens)
- Object Reference (Able to store **anything** through boxing, but cannot be serialized)
- Data Errors (An enum that indicates what went wrong)

## Properties

| Property       | Result                                                                                                                                                                                                                                                                                                           |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| TokenType      | Returns the current TokenType of variable that this DataToken contains                                                                                                                                                                                                                                           |
| IsNumber       | Returns true if the DataToken contains any numeric type. Otherwise, returns false.                                                                                                                                                                                                                               |
| IsNull         | Returns true if the value contained within this DataToken is null in any form. Numbers and bools are never null, TokenType.Null is always null, strings check for null but not emptiness, and references use Utilities.IsValid internally to handle players that have left and objects that have been destroyed. |
| Boolean        | Returns a bool if the DataToken contains a bool. Otherwise, throws an exception.                                                                                                                                                                                                                                 |
| Number         | Returns a double if the DataToken contains any numeric type. Otherwise, throws an exception.                                                                                                                                                                                                                     |
| SByte          | Returns an 8-bit signed sbyte if the DataToken contains an sbyte. Otherwise, throws an exception.                                                                                                                                                                                                                |
| Byte           | Returns an 8-bit unsigned byte if the DataToken contains a byte. Otherwise, throws an exception.                                                                                                                                                                                                                 |
| Short          | Returns a 16-bit signed short if the DataToken contains a short, sbyte, or byte. Otherwise, throws an exception.                                                                                                                                                                                                 |
| UShort         | Returns a 16-bit unsigned ushort if the DataToken contains a ushort or byte. Otherwise, throws an exception.                                                                                                                                                                                                     |
| Int            | Returns a 32-bit signed int if the DataToken contains an int, sbyte, byte, short, or ushort. Otherwise, throws an exception.                                                                                                                                                                                     |
| UInt           | Returns a 32-bit unsigned uint if the DataToken contains a uint, byte, or ushort. Otherwise, throws an exception.                                                                                                                                                                                                |
| Long           | Returns a 64-bit signed long if the DataToken contains a long, sbyte, byte, short, ushort, or uint. Otherwise, throws an exception.                                                                                                                                                                              |
| ULong          | Returns a 64-bit unsigned ulong if the DataToken contains a ulong, byte, ushort, or uint. Otherwise, throws an exception.                                                                                                                                                                                        |
| Float          | Returns a 32-bit float if the DataToken contains a float, sbyte, byte, short, ushort, int, uint, long, or ulong. Otherwise, throws an exception.                                                                                                                                                                 |
| Double         | Returns a 32-bit double if the DataToken contains a double or any other numeric type. Otherwise, throws an exception.                                                                                                                                                                                            |
| String         | Returns a string if the DataToken contains a string. Otherwise, throws an exception.                                                                                                                                                                                                                             |
| DataDictionary | Returns a Data Dictionary if the DataToken contains a Data Dictionary. Otherwise, throws an exception.                                                                                                                                                                                                           |
| DataList       | Returns a Data List if the DataToken contains a Data List. Otherwise, throws an exception.                                                                                                                                                                                                                       |
| Reference      | Returns an object reference if the DataToken contains an object reference. Otherwise, throws an exception.                                                                                                                                                                                                       |
| Error          | Returns the error associated with this token. Otherwise, returns DataError.None. Unlike others, accessing this property will never throw an exception. If you attempt to access Error from a token that is not an error, it will simply return DataError.None.                                                   |

## Functions

| Function    | Result                                                                                                                                                                                                                                                                                                                                           |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Bitcast     | Reuse the existing data in the DataToken but change the type. Like reinterpret_cast in C++, or BitConverter in C#. Will truncate the value if the destination type is smaller than the source type, or zero-extend if the destination type is larger than the source type. Only works on primitive types and returns a copy. |
| ToString    | Converts the contents of the token to a string. Unlike accessing the String property, this function will always succeed because it will use the underlying value's ToString                                                                                                                                                                      |
| GetHashCode | Returns a hashcode of the contents of the token. This is mostly used for internal operations of dictionary keys.                                                                                                                                                                                                                                 |
| CompareTo   | Compares this token to another token, returning -1 if the other token is larger, 0 if they are equal, and 1 if the other token is smaller. Containers such as lists and dictionaries will be compared by count. When comparing two tokens that are not the same type and not numerical values, they will use the ordering of the TokenType enum. |

## Creating Data Tokens

### UdonSharp

In UdonSharp, DataTokens can be created "implicitly" which means that when a function asks for a DataToken, you do not need to do `new DataToken(value)`. Instead you can just pass the value in directly and it will create a DataToken for you automatically.

```csharp title="DataToken Creation"
// You could do this
DataToken _explicitFloat = new DataToken(5.3f);
DataToken _explicitInt = new DataToken(5);
DataToken _explicitString = new DataToken("value");
DataToken _explicitBool = new DataToken(true);

// But this is easier and simpler
DataToken _float = 5.3f;
DataToken _Int = 5;
DataToken _String = "value";
DataToken _Bool = true;
```

:::warning

Don't use `nameof()` to implicitly create DataTokens in UdonSharp, or you may run into errors.

:::

### Udon Graph

In Udon Graph, you'll need to use the `DataToken Implicit` or `DataToken Constructor` nodes to create a DataToken with the value inside.  
[IMAGE: data-tokens-7GAcVrY.png]

## Getting values out of a Data Token

Before getting a value out of a DataToken you need to be sure of what type it contains because if you try to pull an incompatible type, it will halt your UdonBehaviour. There are several ways to ensure that the type contained is compatible with what you want to pull out.

- You can check the `DataToken.TokenType` property to get the exact type
- When retrieving a value out of a Data List or Data Dictionary, you can use `TryGetValue` and specify a TokenType. If the TokenType is incorrect, that function will return false.
- You can check the `DataToken.IsNumber` property to get if it is a number. If it is, then you can safely pull the `Number` property which will give you a double upcasted from whichever type it actually was. This may lose precision if the type was `long` or `ulong`.
- Regardless of the type of the token, `ToString` is always a valid option and will never throw errors.

```csharp title="DataToken Retrieval in U#"
// If we know that it's a string, we can safely pull the string out of the token
if (unknownToken.TokenType == TokenType.String)
{
    Debug.Log(unknownToken.String);
}

// We can use IsNumber to see if it's some type of number, even if we don't know which.
if (unknownToken.IsNumber)
{
    Debug.Log(unknownToken.Number);
}

// If we're pulling a value from a container, we can use the version that does its own type check
if (dictionary.TryGetValue("key", TokenType.String, out DataToken value))
{
    Debug.Log(value.String);
}
```

[IMAGE: data-tokens-SqQqE5w.png]

Once you are sure that you have the right type, you can get the value out of the DataToken by accessing value properties such as `DataToken.Float` and `DataToken.Boolean`. Each type has it's own property which can be used to pull that specific type out.

If you have complete control over the data that you're working with, then you can skip all the TokenType checking and just get the value from the token directly. This can save some extra code, but make sure that you're not doing this if the data is coming from an outside source or there is any possibility that the type could be something else.

```csharp title="Example of Shorthand Bracket syntax"
dictionary["A"] = 5;
dictionary["B"] = 10;

// This makes the assumption that A and B will always contain integers.
// This is a safe assumption to make since we set them just above in a controlled environment.
// If the data is coming from an external source, we shouldn't make these assumptions!
int sum = dictionary["A"].Int + dictionary["B"].Int;
```

## Errors

When operations on a Data List or Data Dictionary fail and give a DataToken back, they will produce an error token. Error tokens contain both an enum classifying the type of error, as well as a string that elaborates on the error more specifically. Not all errors will produce a string because there is no need to elaborate further.

If you have an Error token, you can use `DataToken.Error` to get the error enum and `DataToken.String` to get the message. You can also use `DataToken.ToString()` which will automatically combine the enum and the string into a nice complete message, which makes it convenient to simply call `Debug.Log(token)`

An error token can be one of several different things:

| Value            | Meaning                                                                                                                                                                                                            |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| KeyDoesNotExist  | You tried to access a key from a data dictionary but that key does not exist                                                                                                                                       |
| IndexOutOfRange  | You tried to access an index from a data array but that index was either less than 0 or greater than or equal to the count of the array.                                                                           |
| TypeMismatch     | You tried to access a value but the value was not the type you expected. Note that this can only happen if you are using a version of TryGetValue that accepts a type.                                             |
| TypeUnsupported  | The data container had a type that is not supported by the serialization format you tried to use. This can happen if you put reference tokens into a Data Container and then try to serialize it into Json.        |
| ValueUnsupported | The data container had a value that is not supported by the serialization format you tried to use. This can happen if you put NaN or Infinity floats into a Data Container and then try to serialize it into Json. |
| UnableToParse    | The serialized format could not be parsed. This happens if the source Json is invalid.                                                                                                                             |

```csharp title="TryGetValue with TokenType"
if (dictionary.TryGetValue("key", TokenType.Float out DataToken value)) {
    // If TryGetValue succeeds, we can do things with the token
    Debug.Log($"Successfully retrieved value {token.Float}");
} else {
    // If TryGetValue fails, the token will instead be an error
    Debug.Log($"Failed to retrieve value with error {token.Error}");
}
```

[IMAGE: data-tokens-zcqKePv.png]

## FAQ

### What is the difference between String and ToString?

`DataToken.String` and `DataToken.ToString()` are similar but not quite the same, because `DataToken.String` is specifically accessing the string value inside the DataToken, while `DataToken.ToString()` is converting whatever exists into a string. 

As a result, `ToString` is always valid no matter what the DataToken contains and will never halt your UdonBehaviour. If it contains a bool, then it will give you either true or false. If it contains a number, it will create a string representation of that number using `ToString("G", CultureInfo.InvariantCulture)`.

On the other hand, accessing `DataToken.String` is only valid if the DataToken contains a string. If the DataToken contains a float and you attempt to access `DataToken.String`, then an exception will be thrown and your UdonBehaviour will halt. 

DataErrors are unique in that they contain both an Error enum and a string. It is recommended to use `ToString()` on DataErrors simply because `ToString()` will combine the enum and the string together into a single message that contains both the error and the reason for the error.

### Why not have a TryGetValue that gives the value directly, skipping tokens?

It would be beneficial to have a TryGetValue method that directly provides the value, bypassing the need for tokens. This is a valid question as it can be tedious to constantly retrieve the token from the container and then access the value within the container separately. There have been several options considered to simplify this process, and one such solution that has been implemented is to include a built-in type check with TryGetValue.

Another approach that was contemplated involved creating a generic version of TryGetValue where a system type is specified using a T argument. Although UdonSharp supports this approach (at least within static methods), Udon itself does not. Additionally, while this option would be advantageous, it would prevent the return of a DataError through the DataToken in case of an error, resulting in the default value being returned instead. Ultimately, we chose not to implement this approach as it would conceal the error from the user and make it more difficult to identify the problem. Fortunately, users have the ability to create their own solution for generic value retrieval using UdonSharp. This is made possible due to the availability of Generics, Statics, and extension methods within UdonSharp.

---

## Document: index.md

Path: /worlds/udon/data-containers/index.md
# Data Containers

Data Containers store [Data Tokens](/worlds/udon/data-containers/data-tokens) in various different formats, either as a sequential [Data List](/worlds/udon/data-containers/data-lists) or as a key-value pair [Data Dictionary](/worlds/udon/data-containers/data-dictionaries). They are functionally similar to C# Lists and Dictionaries.

DataTokens, in turn, store any other values that you could need. Each token stores one and only one variable, but that could include a whole other DataDictionary or DataList, in order to support nesting.

Additionally, Data Containers are compatible with [VRCJSON](/worlds/udon/data-containers/vrcjson), which allows you to convert data to/from the standard JSON format, which may come from external sources such as [remote string loading](/worlds/udon/string-loading).

import DocCardList from '@theme/DocCardList';

<DocCardList />

---

## Document: vrcjson.md

Path: /worlds/udon/data-containers/vrcjson.md
---
title: "VRCJSON"
slug: "vrcjson"
hidden: false
createdAt: "2023-04-24T23:48:39.230Z"
updatedAt: "2023-04-26T15:25:05.803Z"
---
# VRC JSON

[Data Dictionaries](/worlds/udon/data-containers/data-dictionaries) and [Data Lists](/worlds/udon/data-containers/data-lists) include functions to convert to and from JSON. A Data List is equivalent to a JSON array, and a JSON object is equivalent to a Data Dictionary with string keys.

See [Json documentation](https://www.json.org/json-en.html) for further details on the JSON schema itself. Everything in this page is relating to this particular implementation of the JSON schema.

## JSON functions

| Function                       | Inputs                          | Outputs                        | Result                                                                                                                                                                                                                                                                           |
| ------------------------------ | ------------------------------- | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| VRCJson.TryDeserializeFromJson | String input                    | success bool, DataToken result | Creates a DataList or DataDictionary from JSON string input. If successful, this returns true and the result token will be either a DataDictionary or DataList. If not successful, this returns false and puts an error explaining what the issue was in the result token.       |
| VRCJson.TrySerializeToJson     | DataToken input, JsonExportType | success bool, DataToken result | Attempts to convert a DataDictionary or DataList into JSON string output. If successful, this returns true and the result token will be a string with the final Json. If not successful, this returns false and puts an error explaining what the issue was in the result token. |

- Note that in Udon Graph, "VRC" is removed from the beginning of all class names, so you need to search for "Json" to find these functions.
- In UdonSharp, these classes are found in the `VRC.SDK3.Data` namespace.

## Supported types and values

JSON is a small, simple, and strict specification. DataLists and DataDictionaries are capable of supporting a much wider range of configurations, which means that you may face some limitations when going from Data container to JSON. Make sure you are aware of these limitations and avoid using these configurations in situations where you intend to use JSON.

**JSON does not support `Object Reference` Data Tokens.** If you have any object references in your Data containers when you try to serialize to JSON, the TrySerializeToJson function will return false with `DataError.TypeUnsupported`

**JSON only supports string-keyed dictionaries.** If you have any keys in your DataDictionaries that are not strings when you try to serialize to JSON, the TrySerializeToJson function will return false with `DataError.TypeUnsupported`.

**JSON does not support NaN or Infinity.** If you have any floats or doubles that contain NaN or Infinity, the TrySerializeToJson function will return false with `DataError.ValueUnsupported`.

**JSON does not support anything other than Dictionary or List as the root.** If you use a simple value DataToken without any children, the TrySerializeToJson function will return false with `DataError.TypeUnsupported`.

**JSON only supports one type of number.** It does not differentiate between all the different types. As a result, deserializing from JSON will store all numbers in `Double` format. If you have Data Tokens containing other types of numbers such as `int`, `byte`, or `float` then they can serialize to JSON, however if you Deserialize that same JSON back into Data Containers, you will find that they are now `Doubles` instead.

## Deserializing from JSON

`VRCJson.TryDeserializeFromJson` is the function you should use when you want to go from Json to Data containers. It is recommended to use it as the condition for an `if` or `branch` so that you can choose what happens if it fails and what happens if it succeeds.

If TryDeserializeFromJson returns true, then that means it has successfully turned your Json string into a DataList or DataDictionary. You should then do a type check on the result to determine what happens for each case. 

If this returns false, then the string you provided was not valid JSON. The DataToken you are given will be a DataError, and if you run DataToken.ToString on it, it will give you both the error and a string explaining more details about exactly what went wrong.

For performance reasons, VRCJSON does not parse everything immediately. Instead, it only parses the top level of JSON first. if the top level is valid, but you have have invalid JSON further down inside a nested structure, it is possible for the initial TryDeserializeFromJson to return true. Later, if you use TryGetValue to pull values from something that was invalid, it will return false and give you DataError.UnableToParse.

```csharp title="Deserializing from JSON"
if (VRCJson.TryDeserializeFromJson(json, out DataToken result))
{
    // Deserialization succeeded! Let's figure out what we've got.
    if (result.TokenType == TokenType.DataDictionary)
    {
        Debug.Log($"Successfully deserialized as a dictionary with {result.DataDictionary.Count} items.");
    }
    else if (result.TokenType == TokenType.DataList)
    {
        Debug.Log($"Successfully deserialized as a list with {result.DataList.Count} items.");
    }
    else 
    {
        // This should not be possible. If TryDeserializeFromJson returns true, this it *must* be either a dictionary or a list.
    }
} else {
    // Deserialization failed. Let's see what the error was.
    Debug.Log($"Failed to Deserialize json {json} - {result.ToString()}");
}
```

## Serializing to JSON

`VRCJson.TrySerializeToJson` is the function you should use when you want to go from Data containers to Json. It is recommended to use it as the condition for an `if` or `branch` so that you can choose what happens if it fails and what happens if it succeeds.

If TrySerializeToJson returns true, then that means it has successfully converted your DataList or DataDictionary into a Json string, and you can safely pull the string out of the result token.

```csharp title="Serializing to JSON"
if (VRCJson.TrySerializeToJson(dictionary, JsonExportType.Beautify, out DataToken json))
{
    // Successfully serialized! We can immediately get the string out of the token and do something with it.
    Debug.Log($"Successfully serialized to json: {json.String}");
} 
else 
{
    // Failed to serialize for some reason, running ToString on the result should tell us why.
    Debug.Log(json.ToString());
}
```

### JsonExportType

When serializing to Json, you can choose the JsonExportType you would like. If you want something human-readable, Beautify is better. If you want something compact for sending over the network, Minify is better.

- Beautify: Expands each element to a new line and adds one tab per depth.
- Minify: Keeps everything in one line and minimizes whitespace.


---

## Document: debugging-udon-projects.md

Path: /worlds/udon/debugging-udon-projects.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Debugging Udon Projects

Debugging is how you learn about what's going on under the hood in VRChat, your world, and your Udon code. It's a key skill to develop for programming in general, and for building your worlds.

It's important to test your worlds in VRChat before publishing them. Most errors can be fixed in the Unity editor, but you will sometimes find yourself with worlds or Udon programs that can only be debugged in VRChat.

## VRChat's Debug Log

To help you find errors and make them easier to understand, VRChat saves information about worlds you visit, errors you encounter, and other behind-the-scenes info. This is called the "output log" or the "debug log."

You can access VRChat's log directly in VRChat or as a text file on your PC.

### 1. View Logs in VRChat

When you launch VRChat with the Debug GUI enabled (see below), you can turn on special Debug overlays in both Desktop and VR modes. To view your log messages as they occur, press RShift + Backtick[^1] + 3. You can find all the shortcuts available for different debug overlays on the [Keyboard and Mouse](https://docs.vrchat.com/docs/keyboard-and-mouse) page.

[^1]: On a standard English US QWERTY layout keyboard, "Backtick" is the key in the top left, next to the `1` key. It shares a key with the tilde (`~`) character.

### 2. View Logs in a Text Editor
You can view these files during or after a VRChat session by finding them on your disk and opening them up. They are typically saved to the following folder, with your computer username instead of 'YourName':

`C:\Users\YourName\AppData\LocalLow\VRChat\VRChat`

In this folder, you'll find some more folders, and a handful of files with names like:
` output_log_08-55-48.txt`

These are your log files - a new one is made each time you launch VRChat, with a timestamp to keep the names unique. You can open them in any text browser to find detailed information of what happened during your session.

## How to enable Udon Debugging
By default, VRChat's log does not contain detailed information about Udon.

When you "Build and Test" your world using the button in the VRChat Control Panel, Unity launches VRChat with additional debugging features enabled. This gives you all the information possible.

In order to copy the way that *Build and Test* launches VRChat, you need to launch VRChat with additional launch parameters.

There are three ways to configure VRChat's launch parameters, described below.

### 1. VRC Quick Launcher

The [VRC Quick Launcher](https://vcc.docs.vrchat.com/tools/vrc-quick-launcher/) allows you to choose which debugging features to enable. You can find the VRC Quick Launcher in the "Tools" tab of the [Creator Companion](https://vcc.docs.vrchat.com/).

### 2. Batch Files
You can use a batch file to launch VRChat with special options. A batch file is a plain text file that contains some special commands. This gives you a convenient shortcut to immediately start VRChat with debugging enabled.
1. Make a new text file called `debug.bat` right next to the VRChat.exe on your machine.
2. Add this line to the file: `VRChat.exe --no-vr --enable-debug-gui --enable-sdk-log-levels --enable-udon-debug-logging`
	- This command turns on three flags for extra logging, and also forces VRChat to bypass VR for desktop testing.
	- There are more options you can pass along - you can include any of the flags from the [VRChat Launch Options](https://docs.vrchat.com/docs/launch-options) page as well as the [Unity Standalone Player command line arguments](https://docs.unity3d.com/2022.3/Documentation/Manual/CommandLineArguments.html).
	- For example, the following command launches VRChat on your secondary VRChat profile and forces a screen height of 720 pixels:
`VRChat.exe --profile=1 --no-vr --enable-debug-gui --enable-sdk-log-levels --enable-udon-debug-logging -screen-width 1280 -screen-height 720`
3. Save the batch file and run it.
4. (Optional) Right-click the batch file, create a shortcut, and move the shortcut to your desktop.
5. Run the batch file by double-clicking it.

### 3. Steam Launch Options
If you use the Steam version of VRChat, you enable debugging by changing VRChat's launch options. 

1. In your Steam Library, right-click on the VRChat entry and choose 'Properties'.
2. In the 'General' tab, press the 'Set Launch Options' button.
3. In the field that appears, you can enter the VRChat-specific flags you want always enabled, like `--enable-debug-gui --enable-udon-debug-logging` to always have the Debug GUI and Udon Debugging enabled.

:::note Debugging reduces performance

It is **not** recommend to always keep debugging enabled. It decreases VRChat's performance and increases the size of your log files. Disable debugging if you don't need it.

:::

## How to add Logs to your Udon Program 

If you're ever in a situation where Udon is not doing something that you want it to do, a good way to diagnose it is to add `Debug Log` nodes with unique text. You can do this anywhere in your script, at any time. For example:

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An Udon Graph showing the "InputJump" event, "Debug Log" node, and a string constant.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
using UdonSharp;  
using UnityEngine;  
using VRC.Udon.Common;  
  
public class JumpDetector : UdonSharpBehaviour  
{  
    public override void InputJump(bool value, UdonInputEventArgs args)  
    {  
        Debug.Log("Local player jumped!");  
    }  
}
```

</TabItem>
</Tabs>

Add logging messages before or after your script does something important. When your UdonBehaviour runs, look at Unity's or VRChat's log to see your log messages. This helps you identify whether your script behaves as expected, or whether your script stops running before your `Debug.Log` could be executed.

## Understanding Udon Errors
When an UdonBehaviour runs into a major issue while running in the client, it will disable itself. If you're looking at the VRChat's logs, you'll see an entry like this:
`[UdonBehaviour] An exception occurred during Udon execution, this UdonBehaviour will be halted.`
To find out more about what happened, open up your log files using the instructions above under *Finding Your Logs*, and search for the world 'halted'. There, you will find some more information about what happened.

### Example
Here's an error you might encounter in Udon. Let's take it apart:


```
2020.08.28 17:40:51 Error      -  [UdonBehaviour] An exception occurred during Udon execution, this UdonBehaviour will be halted.
VRC.Udon.VM.UdonVMException: An exception occurred in an UdonVM, execution will be halted. ---> VRC.Udon.VM.UdonVMException: An exception occurred during EXTERN to 'VRCSDK3VideoComponentsBaseBaseVRCVideoPlayer.__GetTime__SystemSingle'. ---> System.NullReferenceException: Object reference not set to an instance of an object.
  at VRC.SDK3.Internal.Video.Components.AVPro.AVProVideoPlayerInternal.GetTime () [0x00000] in <00000000000000000000000000000000>:0 
  at VRC.Udon.Wrapper.Modules.ExternVRCSDK3VideoComponentsBaseBaseVRCVideoPlayer.__GetTime__SystemSingle (VRC.Udon.Common.Interfaces.IUdonHeap heap, System.UInt32[] parameterAddresses) [0x00000] in <00000000000000000000000000000000>:0 
```

- The important information is in the second line.
	- `An exception occurred during EXTERN to 'VRCSDK3VideoComponentsBaseBaseVRCVideoPlayer.__GetTime__SystemSingle'. ---> System.NullReferenceException: Object reference not set to an instance of an object.`
- This error tells you that our world is trying to access something that does not exist.
	- Specifically, the script was trying to access a `VRCVideoPlayer` when it doesn't have one assigned. That's what ` Object reference not set to an instance of an object` means, and `VRCSDK3VideoComponentsBaseBaseVRCVideoPlayer.__GetTime__SystemSingle` tells you that it occurred when it tried to call `GetTime` on a `VRCVideoPlayer`.
	- Once you get comfortable reading logs, this kind of information is invaluable.
- You can now go to the graph that tries to call `VRCVideoPlayer.GetTime` and make sure it has a `VRCVideoPlayer` connected to it.

## Use Debug Log to Diagnose Udon
If you're ever in a situation where Udon is not doing something that you want it to do, a good way to diagnose it is to add logging.

Add the "Debug Log" node to your Udon Graph or execute `Debug.Log` in UdonSharp. Add unique message to help you understand your log, such as "The Rotating Cube script has finished running its Start event."

Put Debug Logs right before or after your script tries to do something important. Then when you run your UdonBehaviour, you can observe the log to see how far it's getting and whether or not it is doing what you expect.

## View UdonSharp Logs in Unity

UdonSharp includes a runtime exception watcher that looks for Udon exceptions from VRChat's output log. It allows you to see exactly which line in your UdonSharp script that threw an  exception. This feature is enabled by default but can be disabled in your Project Settings:

[IMAGE: Project Settings]
[IMAGE: Listen for Client Exceptions]

In VRChat, any errors that are thrown in your world will be shown to your editor's console. For example, in the following example, the script `FullBodyPlayerTracker.cs` encountered an error in line 92 at the 86th character:

[IMAGE: Error in Console]


---

## Document: event-execution-order.md

Path: /worlds/udon/event-execution-order.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Event Execution Order

Udon and Unity have built-in events that are automatically called if you include them in your scripts. For example, the `Start()` event runs once for every script, and the `Update()` event runs once per frame. When you're writing Udon scripts, it's helpful to know which of these events happen first.
:::note

Unity provides an (incomplete) <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/ExecutionOrder.html">list of built-in events</UnityVersionedLink>, many of which are also available in VRChat.
:::
The following diagram shows the execution order of the most important events available in Udon and Unity.

[IMAGE: Example banner]

:::caution

Unity and VRChat updates may change the event execution order depicted above.
Not all events are listed, and some events may be executed in a different order depending on circumstances (being an object's owner, joining a world late, etc.)

:::

---

## Document: external-urls.md

Path: /worlds/udon/external-urls.md
# External URLs
Udon can use external URLs to load remote content. URLs must be wrapped in a [VRCUrl](#vrcurl) object. Users can enter URLs into `VRCUrlInputField` components at runtime, and world creators can provide pre-defined VRCUrls with their uploaded worlds.

## Allowlist
For security reasons, VRChat restricts how external URLs can be used. By default, a [VRCUrl](#vrcurl) can only be accessed if it is on VRChat's domain allowlist.
If a URL is **not** on the required allowlist for its type, it cannot be used unless the user chooses to "Allow Untrusted URLs" in VRChat's settings. This allows Udon to use load untrusted URL from `VRCUrlInputField` components and any `VRCUrl` that was uploaded alongside the world.

|                                           | On allowlist | Not on allowlist                   |
| ----                                      | ----         | ----                               |
| User enters `VRCUrl` into input field     | ✔Allowed     | ⚠ Requires "Allow Untrusted URLs" |
| Udon declares the `VRCUrl` before runtime | ✔Allowed     | ⚠ Requires "Allow Untrusted URLs" |

## VRCUrl
`class VRC.SDKBase.VRCUrl`

### Constructor
| Name | Summary |
| --- | --- |
| VRCUrl(string url) | Constructor that takes a URL as input.  Note that this can only be called at *editor time*. |

### Properties
| Static | Type | Name | Summary |
| :---: | --- | --- | --- |
| ✔️ | [VRCUrl](#vrcurl) | Empty | An empty URL. |

### Methods
| Static | Returns | Name | Summary |
| :---: | --- | --- | --- |
|| string | Get() | Retrieves the current string value of the URL. |
| ✔️ | bool | IsNullOrEmpty([VRCUrl](#vrcurl) vrcUrl) | Indicates whether the specified [VRCUrl](#vrcurl) is null or referencing an empty string (""). |


---

## Document: event-nodes.md

Path: /worlds/udon/graph/event-nodes.md
# Event Nodes

This is a list of Udon Nodes that are considered "Events".

Your scripts can use events to detect actions and set off chains of action or logic. [Input Events](/worlds/udon/input-events)  have their own special page. To jump to an Event in the graph, click it in the Graph Sidebar.

All below nodes have flow nodes where logic requires it.

:::note

More events specifically related to networking are listed on the [Network Components](/worlds/udon/networking/network-components/#networking-events) page.

:::

### Interact
Fired when the local player interacts with this GameObject.

- Players can only interact with GameObjects that have a Collider component and an UdonBehaviour component.
- If you want players to interact with a 2D UI, use [VRC Ui Shape](/worlds/components/vrc_uishape/) and a Button component instead.

### OnDrop
Fired when the local player drops this object after being held.

### OnPickup
Fired when this object is picked up by the local player.

### OnPickupUseDown
Fired when the local player is holding this object presses the "Use" button. Fires when the button is pressed. Requires 'Auto Hold' on Desktop.
 
### OnPickupUseUp
Fired when the local player is holding this object presses the "Use" button. Fires when the button is released. Requires 'Auto Hold' on Desktop.

### OnPlayerJoined
Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when any player joins the instance. Outputs the `player` that joined.

When you join an instance, you execute OnPlayerJoined for every player in the instance, including yourself. When another player joins your instance, you only execute OnPlayerJoined for the player who joined.
 
### OnPlayerLeft
`Event_OnPlayerLeft`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when any player in the instance leaves. Outputs the `player` that left.

### OnPlayerRestored
`Event_OnPlayerRestored`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Triggered after all persistent data of a player in the instance has finished loading, including all of their [PlayerData](/worlds/udon/persistence/player-data) and [PlayerObjects](/worlds/udon/persistence/player-object). Outputs the `player` whose data was loaded.

When you join an instance, you execute OnPlayerRestored for every player in the instance, including yourself. When another player joins your instance, you only execute OnPlayerRestored for the player who joined.

### OnStationEntered
`Event_OnStationEntered`

Fired when the local player enters the station on this object.
 
### OnStationExited
`Event_OnStationExited`

Fired when the local player exits the station on this object.
 
### OnVideoEnd
`Event_OnVideoEnd`

Fired when the video player on this object is finished playing, either via the end of the video or via player interaction.

### OnVideoError
`Event_OnVideoError`

Outputs: `videoError` - `VRC.SDK3.Components.Video.VideoError`

Fired when the video player encounters an error loading the video.

### OnVideoLoop
`Event_OnVideoLoop`

If looping is enabled, fired when the video player finishes a loop.
 
### OnVideoPause
`Event_OnVideoPause`

Fired when the video player on this object is paused.
 
### OnVideoPlay
`Event_OnVideoPlay`

Fired when the video player on this object starts playback, either via the start of a new video in a queue, unpausing, or via player interaction.

### OnVideoStart
`Event_OnVideoStart`

Fired when the video player on this object starts playback from a stopped state.

### OnVideoReady
`Event_OnVideoReady`

Fired when the video player loads a new video.
## Player Events
### OnPlayerTriggerEnter
`Event_OnPlayerTriggerEnter`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when the capsule collider of any player in the instance enters a trigger collider.

### OnPlayerTriggerStay
`Event_OnPlayerTriggerStay`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired every frame while the capsule collider of any player in the instance is inside a trigger collider.

### OnPlayerTriggerExit
`Event_OnPlayerTriggerExit`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when the capsule collider of any player in the instance exits a trigger collider.

### OnPlayerCollisionEnter
`Event_OnPlayerCollisionEnter`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when the capsule collider of any player in the instance enters a collider.

### OnPlayerCollisionStay
`Event_OnPlayerCollisionStay`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired every frame while the capsule collider of any player in the instance is inside a collider.

### OnPlayerCollisionExit
`Event_OnPlayerCollisionExit`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when the capsule collider of any player in the instance exits a collider.

### OnPlayerParticleCollision
`Event_OnPlayerParticleCollision`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when a particle collides with the capsule collider of any player in the instance, assuming that particle system has "Collision" and "Send Collision Messages" turned on.

### OnPlayerRespawn
`Event_OnPlayerRespawn`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when the local player respawns by clicking "Respawn" in their menu.

### OnScreenUpdate
`Event_OnScreenUpdate`

Outputs: `data` - `VRC.SDK3.Platform.ScreenUpdateData`

Triggered when the local player first enters the world on a Mobile Device, and whenever the orientation of their device changes. Outputs a `ScreenUpdateData` struct with the following values:
* `type` - `ScreenUpdateType` - only `OrientationChanged` for now, can be expanded in the future.
* `orientation` - `VRCOrientation` - the orientation of the player's device, as a `VRC.SDKBase.Platform.VRCOrientation` enum, which is `Landscape` or `Portrait`.
* `resolution` - `Vector2` - the resolution of the player's device, as a `Vector2` struct. 

### OnInputMethodChanged
`Event_OnInputMethodChanged`
Outputs: `inputMethod` - `VRC.SDKBase.VRCInputMethod`
Fired when the local player uses a different input method - Keyboard, Mouse, Controller, etc.

### OnLanguageChanged
`Event_OnLanguageChanged`
Outputs: `language` - `string`
Fired when the local player updates their display language.

### OnPlayerSuspendChanged
`Event_OnPlayerSuspendChanged`

Outputs: `player` - `VRC.SDKBase.VRCPlayerApi`

Fired when the device of any player in the instance becomes suspended. A device is suspended if it enters sleep mode or switches to a different app. For the player that is being suspended, this event will fire on wakeup. Check `VRCPlayerApi.isSuspended` to know if this is a wakeup or suspend event.

While suspended, devices don't run Udon code or respond to network events until the player reopens VRChat.

When you create multiplayer interactions in VRChat, you should react to suspended players to ensure that your Udon code continues running as intended. For example, you may want to transfer the ownership of important objects to [a player who is not suspended](/worlds/udon/players/#get-issuspended).

Your code should account for any device becoming suspended at any time, regardless of platform. PC players currently never become suspended, but this should not be assumed.

### OnVRCPlusMassGift
`Event_OnVRCPlusMassGift`

Outputs: 
* `gifter` - `VRC.SDKBase.VRCPlayerApi`
* `numGifts` - `int`

Fired when any player in the instance drops a gift bomb.

### OnVRCCameraSettingsChanged
`Event_OnVRCCameraSettingsChanged`

Outputs: `camera` - `VRC.SDK3.Rendering.VRCCameraSettings`

Fired when the user changes certain options in the VRChat graphics settings, e.g. "Near Clip Override" or "Field of View."

Changing values yourself via `VRCCameraSettings` will _not_ trigger this event! Similarly, camera `Position` and `Rotation` will not trigger it, since those change almost every frame anyway.

The `camera` object passed in refers to either the `ScreenCamera` or the `PhotoCamera` (see [VRCCameraSettings](/worlds/udon/vrc-graphics/vrc-camera-settings)). Note that this event will trigger every frame while the user is using the zoom slider on the `PhotoCamera` or a Dolly path is adjusting the zoom value, since they affect the `FieldOfView` value.

Changing the screen resolution, including by resizing the VRChat window, will also call this event every frame. It is recommended to do minimal processing to avoid affecting performance.

This event may trigger multiple times per frame.

### OnVRCQualitySettingsChanged
`Event_OnVRCQualitySettingsChanged`

Fired when the user adjust Graphics settings affecting one or more values in `VRC.SDK3.Rendering.VRCQualitySettings`.

Similarly to `OnVRCCameraSettingsChanged`, this event may trigger often, and it is recommended to keep processing light.

### Advanced Notes
All nodes in this list have the type `System.Void`.


---

## Document: graph-elements.md

Path: /worlds/udon/graph/graph-elements.md
---
title: "Graph Elements"
slug: "graph-elements"
hidden: false
createdAt: "2020-06-24T22:08:14.066Z"
updatedAt: "2022-10-18T23:46:16.884Z"
---
## Overview
When you build programs in the graph, you mostly use Nodes. There are a few other items available, described here.

## Groups
Groups are helpful for organizing and describing your graph. They don't *change* the way your graphs function or compile.
[IMAGE: You can select elements and right-click to get the *Create Group* function.]
To create Groups, you can:
* Right-Click in the graph and choose 'Create Group', then drag and drop elements into the group.
* Select elements with a box-drag or by holding Ctrl while you click on them, then right-click on the graph and choose 'Create Group', or press 'Ctrl+G' for quick grouping.

To remove items from Groups, you can:
* Select the items, hold shift, then drag the items out of the group.
* Select the items, right-click and choose 'Remove From Group'.

To jump to a Group in the graph, click it in the Graph Sidebar.
:::note Nested Groups

Currently, nested groups are not supported. The current grouping behavior is to delete the existing group if you try to select and enclose it with a new group.
:::
## Comments

Comments are simple blocks of text that you can place near items that need more information.
[IMAGE: A comment next to a node.]
You can create comments by right-clicking on the Graph and choosing *Create Comment*. They can be added to groups, as well. You can use comments and groups together for ultimate readability!
[IMAGE: The 'SendEventOnTimer' graph included in the VRChat Examples folder uses groups and comments to explain what's happening in the graph.]
## Noodles
The noodles of a graph are what connect everything together, and how Udon gets its name! They connect nodes together through their ports. They are colored according to the ports to which they connect, so if you connect two ports with different types, you'll see the color change halfway through. In Unity documentation and elsewhere, they are called 'edges' - so if you see a reference to edges, they're talking about our tasty noodles.

---

## Document: index.md

Path: /worlds/udon/graph/index.md
---
sidebar_position: -1
---
# Udon Node Graph

The Udon Node Graph is the default interface for creation of Udon programs. This section goes over how to use it. If you want to dive right into examples, take a look at the [Udon Example Scene](/worlds/examples/udon-example-scene).

## Interface

You can open up the Udon Graph window using the Menu Item under **VRChatSDK > Udon Graph**, or by clicking the **Open Udon Graph** button on an UdonBehaviour Component.

[IMAGE: The Udon Window]

If you open the window through the Menu command, you'll see the welcome screen, which has a changelog and some settings.

Multiple Graphs can be opened simultaneously, and you can switch between them using the tabs at the top of the Graph Window. 

You can close tabs, by clicking the X in the corner of the tab you want to close. Graph Tabs are not "real" tabs, and simply reopen each tab as you select them. This means switching tabs takes as long as opening Graphs.

## Flow
The Flow of your graph defines which nodes will run, and the order in which they'll do it.
[IMAGE: Image]

The triangles in the picture above are the _Flow_ ports, and they trigger in order from left to right, following the noodles that connect them. To understand what is happening in Udon graphs and to make your own, _follow the flow_. 

There is a "Highlight flow" toggle on the topbar, which, when enabled, will highlight the nodes connected via the flow edges, allowing you to quickly see how does the program arrive to the particular node. 
[IMAGE: Image]

If the node doesn't have any flow connections, then nothing will happen.

In the graph above:
1. The _Start_ event triggers when the world loads
2. The Branch triggers next. It checks the value of its checkbox and then triggers either the *True* or *False* path.
3. If the value is True, then we trigger the top node, which sends a Custom Event called "Hello".
4. Otherwise, we will send a Custom Event called "Goodbye"

It's ok if you don't know what **Sending a Custom Event** means yet. Learning to read the flow of a graph is the first step to understanding what they do.

## Creating Nodes
Nodes are the boxes that represent the methods you can trigger. Building a graph consists of creating and connecting nodes together to create a program.

There are several ways to create nodes:
  * [Hotkeys](#hotkeys)
  * [Drag-and-Drop actions](#drag-and-drop-for-gameobjects-and-components)
  * [Search menus](#searching-for-nodes)

### Hotkeys
Press and hold one of the following keys, then click anywhere on the graph to create the corresponding node:
* `1` : float
* `2` : Vector2
* `3` : Vector3
* `4` : Vector4
* `+` : float addition
* `-` : float subtraction
* `=` - float equality comparison
* `b`: Branch
* `shift+b` : Block 

### Other Hotkeys:
* Press and hold "C", then click on a constant to convert it into a variable.
* Shift+A aligns selected nodes 
* Press and hold Ctrl+G for quick grouping
* L+Click logs the value of the selected node 
* Press and hold "Shift+F", then click on a node that outputs an array type, to generate a foreach loop automatically
Many of these features are also available in the right-click menus for their respective nodes.
[IMAGE: Making for loops the easy way!]
### Drag and Drop for GameObjects and Components

If you want to add interactivity to a GameObject or Component, you can drag and drop them from your hierarchy to the graph. For example, you can drag and drop a Light component by grabbing dragging from the 'Light' title onto the graph.
[IMAGE: Easy way to get a reference to a Light component so you can play with it.]
Creating nodes via Drag and Drop this way creates Variables that are tied to your GameObject or Component, so you'll see a new variable appear in the Variables window, and a node which is actually a "Get Variable" node which is automatically set up to get your new Component.

### Drag and Drop for Variables

You can create variables of any type by pressing the **+** button in the Variables pane of the Graph Sidebar. Then you can drag and drop the variable name onto the graph to create a "Get Variable" node, hold the **Ctrl** key while dragging to make a "Set Variable" node, or hold the **Alt** key to make an "On Variable Changed" node.

### Searching for Nodes

Press the **Spacebar** to open up Quick Search, then type in the first few letters of the class you want to interact with.
[IMAGE: Image]

This method of searching works best if you know Unity's basic classes and object types. There are other ways of searching, see: [Searching for nodes](/worlds/udon/graph/searching-for-nodes)

## Compiling the Graph
The graph automatically compiles in the background at regular intervals. When this happens, you'll see a flash in the upper-right corner of your graph, and the Status box will turn green if things went well, or red if there's an issue. In either case, you can click on the Status box to see the Assembly Code that was generated, or the errors if there was a problem.

[IMAGE: The status box shows 'OK' and we can see the Variables declared at the top of this Assembly.]
## Running the Graph
There are two ways to run the graphs in your scene before you upload them to VRChat.

### Running In-Editor
You can use Unity's Play Button to run your scene directly in the editor to test out some graphs. This will work for some simple methods and logic, but the following items won't work as expected:
* Synced Variables & Networked Events

### Running Build & Test
Use the VRChat SDK Window to do Local Testing. This takes slightly longer as it bundles your content into an offline world and launches the actual VRChat client to give you an Avatar that can Interact with objects and VRCPlayerAPI requests.
[IMAGE: The simplest way to test Sync features is to launch 2 local clients.]

To test Synced variables and NetworkEvents, you'll need two clients - you can use the 'Number of Clients' field to launch up to 8 local clients that will launch in a private test world. They will all have the same DisplayName, but they'll otherwise be recognized as separate players so you can test out your interactions.

If 'Force Non-VR' doesn't work for you, then switch to the 'Settings' tab of the VRChat SDK Window and set your VRChat Client Path to point at your actual VRChat installation.

[IMAGE: Installed Client Path setting in the VRChat SDK]

## Uploading Your World
You will be able to Build & Test as soon as you [make a VRChat Account](https://vrchat.com/home/register). In order to publish a world so others can visit, you need to spend some time in VRChat - visit worlds, make some friends and get inspired!


---

## Document: searching-for-nodes.md

Path: /worlds/udon/graph/searching-for-nodes.md
---
title: "Searching for Nodes"
slug: "searching-for-nodes"
hidden: false
createdAt: "2020-06-24T04:27:16.858Z"
updatedAt: "2022-10-18T23:45:45.454Z"
---
## Quick Search

Press the **Spacebar** to open up Quick Search, then type in the first few letters of the class you want to interact with.

[IMAGE: Image]

## Full Search

Press **Tab** to open up Full Search, then you can search for any method on any object. For GameObject.GetName, you could just search for 'getname' and see all the objects that have a way to get the name of the object. You could also search directly for 'gameobject.getname' and you will be directed to exactly the right node. This search method is slower than Quick Search, so it should be used only when you're not sure which class to look for in Quick Search.

[IMAGE: image]
## Search Bar

There is a searchbar at the top of the Udon Graph Sidebar which allows you to search through your graph. 
You can use "Ctrl+F" to to focus it from the Graph Window.
The search will begin to return results after you enter more than 3 characters.
Pressing "Enter" when there are search results, will jump between the results, in the order of "best match first".

[IMAGE: Image]

## Focused Search

This mode is turned off by default, so first you need to go to your Welcome Screen by clicking on 'Welcome' in the upper-left corner of a graph. Then check the box next to 'Focus Search On Selected Node'. This gives you a shortcut to skip to Quick Search part two - if you have a GameObject.GetName node, you can select it and press **Spacebar** to open up a search for more **GameObject** methods.

[IMAGE: Search on particular classes by pressing **Spacebar** with a Node selected]
## Search on Noodle Drop

This mode is also off by default - you'll need to open your Welcome Screen and check the box next to 'Search on Noodle Drop'. Once it's on, you can drag a noodle from any port and drop it into empty space to open up a search for **any** node that could connect to that port. This works forwards and backwards, and will also search for Variables that could be connected.

[IMAGE: image]

---

## Document: special-nodes.md

Path: /worlds/udon/graph/special-nodes.md
# Special Nodes

The "Special" category contains nodes for custom variables, custom events, flow control, and communicating with other UdonBehaviours.

### Block
Splits flow into multiple sections. One flow input, multiple flow output. Executes all right-side flow slots from top to bottom.

### Branch
Inputs: `Bool` - `System.Boolean`

Branches execution based on a conditional evaluation. If `Bool` is True, `True` flow path is executed. If `Bool` is False, `False` flow path is executed.

### Comment
Provides a space for the user to type a comment string. This string is not included during compilation.

### Const Null
Provides a "null" value for nullchecking purposes.

### Const This
Provides a reference to the GameObject that the UdonBehavior is a component of.

### Event Custom
Inputs: `name` - `System.String`

A a custom event that can be executed by [UdonBehaviour nodes](#udonbehaviour-nodes). 

You must name the custom event by typing its name in the Graph. The event name cannot be changed while your program is running.

### For
Inputs: `start`, `end`, `step` - `System.Int32`

Outputs: `index` - `System.Int32`

Executes flow by using a counter. A counter is initalized with the value of `start`. The `Body` flow is executed, and then the counter is incremented by the `step` value. This continues until the counter's value is equal or greater than `end`. Once that has occured, flow continues along on the `Exit` flow.

### Get Variable
Inputs: `name` - `System.String`

Outputs: `System.Object`

Gets the Udon variable named `name` and provides it as output.

### Set Variable
Inputs: `name` - `System.String` `value` - `System.Object` `sendChange` - `Boolean`

Sets the Udon variable named `name` to `value` when flow is executed. If `sendChange` is checked, it will also trigger the OnVariableChanged event for that variable.

### Get Program Variable
Inputs: `instance` - `UdonBehaviour` `symbolName` - `string`

Get the value of an Udon variable `symbolName` from another UdonBehaviour `instance`. Works best if the target UdonBehaviour is a public variable and it's wired up in the Inspector, which allows you to choose the target variable name from a dropdown. If there's no UdonBehaviour connected to instance, it will use the current UdonBehaviour's variable names. If you instead know the name of the variable and want to set it directly, use a `String const` node to write it in by hand.

### Set Program Variable
Inputs: `instance` - `UdonBehaviour` `symbolName` - `string` `value` - `Object`

Sets the value of an Udon variable `symbolName` on another UdonBehaviour `instance` to `value`. Works best if the target UdonBehaviour is a public variable and it's wired up in the Inspector, which allows you to choose the target variable name from a dropdown. If there's no UdonBehaviour connected to instance, it will use the current UdonBehaviour's variable names. If you instead know the name of the variable and want to set it directly, use a `String const` node to write it in by hand. This node will also trigger the OnVariableChanged event for the target variable.

### On Variable Changed
Outputs: `newValue` `oldValue`

Triggers whenever SetProgramVariable is called on the target variable, or when Set Variable is called with `sendChange` checked. Works for synced variables, too!

### While
Inputs: `Bool` - `System.Boolean`

Executes the flow of `Body` while `Bool` is true. If `Bool` is false, executes `Exit` flow.

## UdonBehaviour Nodes
Udonbehaviour nodes allow your programs to interact with other UdonBehaviours - either locally, with a delay, or over the network.

:::note UdonSharp

The nodes below only work for `public` events. If you use the Udon Graph, your custom events are always `public`. If you use UdonSharp, make sure to use `public` instead of `private` events here!

:::

### SendCustomEvent
Inputs: `instance` - `UdonBehaviour`, `eventName` - String

Runs the event 'eventName' on the target UdonBehaviour. If `instance` is left blank, it points to one of its own events.

### SendCustomEventDelayedFrames
Inputs: `instance` - `UdonBehaviour`, `eventName` - String, `delayFrames` - int, `eventTiming` - EventTiming

Runs the event `eventName` on the target UdonBehaviour, after waiting for `delayFrames`. It will run the event during Update or LateUpdate, depending on which `eventTiming` is selected. Minimum of 1 frame delay.

:::note Timing issues

Note that [Unity's frame count](https://docs.unity3d.com/ScriptReference/Time-frameCount.html) is based on the Update event. If you call SendCustomEventDelayedFrames [before the Update event](/worlds/udon/event-execution-order), such as [Start](https://docs.unity3d.com/ScriptReference/MonoBehaviour.Start.html) or an [Input event](/worlds/udon/input-events), the delay may be 1 frame shorter than expected.

:::

### SendCustomEventDelayedSeconds
Inputs: `instance` - `UdonBehaviour`, `eventName` - String, `delaySeconds` - float, `eventTiming` - EventTiming

Runs the event 'eventName' on the target UdonBehaviour, after waiting for `delaySeconds`. It will run the event during Update or LateUpdate, depending on which `eventTiming` is selected.

If `delaySeconds` is zero, the event will be executed in the same frame *or* the next frame (see [SendCustomEventDelayedFrames](/worlds/udon/graph/special-nodes#sendcustomeventdelayedframes) above).

### SendCustomNetworkEvent
Inputs: `instance` - `UdonBehaviour`, `target` - NetworkEventTarget, `eventName` - String

Runs the event `eventName` on the target UdonBehaviour for remote players according to `target`. Has overloads for including parameters.

Check the page on [Network Events](/worlds/udon/networking/events) for more details.

---

## Document: type-nodes.md

Path: /worlds/udon/graph/type-nodes.md
---
title: "Type Nodes"
slug: "type-nodes"
hidden: false
createdAt: "2020-03-20T20:08:24.139Z"
updatedAt: "2020-03-21T01:06:17.230Z"
---
These nodes are used to get references to certain types. All of them have one output of the type they're referring to.

We are only including documentation for VRChat types here. For information on the Unity types Udon refers to, please see their documentation.

### VRCSDK3ComponentsVRCAvatarPedestal
Type definition for `VRC.SDK3.Components.VRCAvatarPedestal`.

### VRCSDK3ComponentsVRCAvatarPedestal[]
Type definition for `VRC.SDK3.Components.VRCAvatarPedestal[]`.

### VRCSDK3ComponentsVRCAvatarPedestalRef
Type definition for `VRC.SDK3.Components.VRCAvatarPedestal`.

### VRCSDK3ComponentsVRCMirrorReflection
Type definition for `VRC.SDK3.Components.VRCMirrorReflection`.

### VRCSDK3ComponentsVRCMirrorReflection[]
Type definition for `VRC.SDK3.Components.VRCMirrorReflection[]`.

### VRCSDK3ComponentsVRCMirrorReflectionRef
Type definition for `VRC.SDK3.Components.VRCMirrorReflection`.

### VRCSDK3ComponentsVRCPickup
Type definition for `VRC.SDK3.Components.VRCPickup`.

### VRCSDK3ComponentsVRCPickup[]
Type definition for `VRC.SDK3.Components.VRCPickup[]`.

### VRCSDK3ComponentsVRCPickupRef
Type definition for `VRC.SDK3.Components.VRCPickup`.

### VRCSDK3ComponentsVRCPortalMarker
Type definition for `VRC.SDK3.Components.VRCPortalMarker`.

### VRCSDK3ComponentsVRCPortalMarker[]
Type definition for `VRC.SDK3.Components.VRCPortalMarker[]`.

### VRCSDK3ComponentsVRCPortalMarkerRef
Type definition for `VRC.SDK3.Components.VRCPortalMarker`.

### VRCSDK3ComponentsVRCStation
Type definition for `VRC.SDK3.Components.VRCStation`.

### VRCSDK3ComponentsVRCStation[]
Type definition for `VRC.SDK3.Components.VRCStation[]`.

### VRCSDK3ComponentsVRCStationRef
Type definition for `VRC.SDK3.Components.VRCStation`.

### VRCSDKBaseInputManager
Type definition for `VRC.SDKBase.InputManager`.

### VRCSDKBaseInputManager[]
Type definition for `VRC.SDKBase.InputManager[]`.

### VRCSDKBaseInputManagerRef
Type definition for `VRC.SDKBase.InputManager`.

### VRCSDKBaseIVRC Destructible
Type definition for `VRC.SDKBase.IVRC_Destructible`.

### VRCSDKBaseRPCDestination
Type definition for `VRC.SDKBase.RPC+Destination`.

### VRCSDKBaseVRC EventDispatcher
Type definition for `VRC.SDKBase.VRC_EventDispatcher`.

### VRCSDKBaseVRC EventHandler
Type definition for `VRC.SDKBase.VRC_EventHandler`.

### VRCSDKBaseVRC EventHandlerVrcBroadcastType
Type definition for `VRC.SDKBase.VRC_EventHandler+VrcBroadcastType`.

### VRCSDKBaseVRC Pickup
Type definition for `VRC.SDKBase.VRC_Pickup`.

### VRCSDKBaseVRC PickupPickupHand
Type definition for `VRC.SDKBase.VRC_Pickup+PickupHand`.

### VRCSDKBaseVRC SceneDescriptorSpawnOrientation
Type definition for `VRC.SDKBase.VRC_SceneDescriptor+SpawnOrientation`.

### VRCSDKBaseVRCInputMethod
Type definition for `VRC.SDKBase.VRCInputMethod`.

| Index | VRCInputMethod     |
| ----- | ------------------ |
| 0     | Keyboard           |
| 1     | Mouse              |
| 2     | Controller         |
| 3     | Gaze               |
| 5     | Vive               |
| 6     | Oculus             |
| 7     | ViveXR             |
| 10    | Index              |
| 11    | HPMotionController |
| 12    | Osc                |
| 13    | QuestHands         |
| 14    | Generic            |
| 15    | Touch              |
| 16    | OpenXRGeneric      |
| 17    | Pico               |
| 18    | SteamVR2           |

:::note Ambiguous Vive input names 

- `VRCInputMethod.Vive` is a Vive controller running through SteamVR.
- `VRCInputMethod.ViveXr` is a Vive XR Elite Controller running via OpenXR.

:::
 
### VRCSDKBaseVRCInputSetting
Type definition for `VRC.SDKBase.VRCInputSetting`.

### VRCSDKBaseVRCPlayerApi
Type definition for `VRC.SDKBase.VRCPlayerApi`.

### VRCSDKBaseVRCPlayerApi[]
Type definition for `VRC.SDKBase.VRCPlayerApi[]`.

### VRCSDKBaseVRCPlayerApiRef
Type definition for `VRC.SDKBase.VRCPlayerApi`.

### VRCSDKBaseVRCPlayerApiTrackingData
Type definition for `VRC.SDKBase.VRCPlayerApi+TrackingData`.

### VRCSDKBaseVRCPlayerApiTrackingData[]
Type definition for `VRC.SDKBase.VRCPlayerApi+TrackingData[]`.

### VRCSDKBaseVRCPlayerApiTrackingDataRef
Type definition for `VRC.SDKBase.VRCPlayerApi+TrackingData`.

### VRCSDKBaseVRCPlayerApiTrackingDataType
Type definition for `VRC.SDKBase.VRCPlayerApi+TrackingDataType`.

---

## Document: image-loading.md

Path: /worlds/udon/image-loading.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Image Loading

Image Loading allows you to display images from the internet in your VRChat world. When a user visits your world, the image can be downloaded from the internet and used as a texture in your materials. Here are a few examples on how Image Loading can be used:

- Updating textures in your world without a re-upload.
- Creating a poster in your world and updating it for seasonal events or parties.
- Reusing the same texture in multiple worlds and updating them all at once.

The SDK includes an easy-to-use `ImageDownload` script, or you can make your own script with the new `VRCImageDownloader` object.

:::tip
You can [view our Image Loader example](/worlds/examples/image-loading) to get started quickly.
:::
## Before You Begin

There are a few Image Loader limits and parameters you should know:

- The maximum resolution is 2048 × 2048 pixels. Attempting to download larger images will result in an error.
- One image can be downloaded every five seconds.
  - If this limit is exceeded, images downloads are queued and downloaded in a random order.
  - This limit applies to your entire scene, regardless of the amount of VRCImageDownload components used.
- The URL must point directly at an image file. URL redirection is not allowed and will result in an error.
- Downloaded images are automatically interpreted as RGBA, RGB, or RG images.
  - For example, a grayscale image with an alpha channel is interpreted as an RG image.
- There is a limit of 1000 elements in the queue.
- Both the Input and Output buffers are limited to a maximum of 32MB, images exceeding these will result in an error.

And only certain domains are allowed. If a domain is not on the list, images will not download unless **Allow Untrusted URLs** has been enabled in the user's settings.


- DisBridge (`*.disbridge.com`)
- Dropbox (`dl.dropbox.com`,`dl.dropboxusercontent.com`)
- GitHub (`*.github.io`)
- ImageBam (`images4.imagebam.com`)
- ImgBB (`i.ibb.co`)
- imgbox (`images2.imgbox.com`)
- Imgur (`i.imgur.com`)
- Postimages (`i.postimg.cc`)
- Reddit (`i.redd.it`)
- Twitter (`pbs.twimg.com`)
- VRCDN (`*.vrcdn.cloud`)
- VRChat (`assets.vrchat.com`)
- Ytimg (`i.ytimg.com`)

## Memory Management

Downloaded images can take up a lot of memory. Once you're done using an image, you should dispose of it via Udon, which frees up memory for something else.

For example, if you download a new image and want to use it to replace another image you downloaded earlier, you should use the `Dispose` method documented below to remove the old image from memory. If you don't do this and keep downloading new images, visitors to your world may run out of memory and crash after spending enough time in your world!

## UdonGraph Nodes

### VRCImageDownloader

Use `VRCImageDownloader`'s constructor to create an image downloader, which can download image from the Internet during runtime.

#### DownloadImage

Downloads an image, and calls an event indicating success or failure (see 'Events' below).  
Returns an `IVRCImageDownload`, which can be used to track the progress of the download.

- **Instance**: The `ImageDownloader` component to download the image with.  
- **Url** : The `VRCURL` of the texture to download.  
- **Material** (optional): The Material to automatically apply the downloaded image to, as a main texture.
- **UdonBehavior** (optional): The `Udonbehavior` to send `VRCImageDownloader` events to. If `udonBehavior` is empty, the current UdonBehaviour will receive all events.
  - Note that UdonSharp will not receive any events unless `udonBehavior` is specified.
- **TextureInfo** (optional):  The `TextureInfo` object containing settings for the newly created texture.

#### Dispose

Cleans up the `VRCImageDownloader`. Frees up downloaded textures from memory.

Calling `Dispose` on a `VRCImageDownloader` invalidates the object, meaning it can't be used to download any new images.

**Notes on disposal and garbage collection:**

- Calling `Dispose` will invalidate the `VRCImageDownloader`, all of its associated `IVRCImageDownload` objects, and the textures associated with those downloads.
  - If you only want to dispose of a single download, call `Dispose` on the `IVRCImageDownload` object instead.
- Make sure to save the reference to your `VRCImageDownloader` as a variable to prevent it (and any downloaded texture) from randomly being garbage collected.

### TextureInfo

Contains settings to apply to a downloaded texture. 

- **GenerateMipmaps**: Enables Mipmap generation. (Default: `false`)
- **FilterMode**: Sets the `FilterMode` of the texture. (Default: `Trilinear`)
- **WrapModeU**: The `TextureWrapMode` along the U (horizontal) axis (Default: `Repeat`)
- **WrapModeV**: The `TextureWrapMode` along the V (vertical) axis  (Default: `Repeat`)
- **WrapModeW**: The `TextureWrapMode` along the W (depth, only relevant for Texture3D) axis. (Default: `Repeat`)
- **AnisoLevel**: The `anisoLevel` of the texture. A value of 0 disables filtering, 16 equals full filtering. (Default: `9`)
  - VRChat uses forced anisotropic filtering. When the anisoLevel value is between 1 and 9, Unity sets the anisoLevel to 9. If the value is higher than 9, Unity clamps it between 9 and 16.
- **MaterialProperty**: Overrides which `MaterialProperty` to apply the downloaded texture to, if a `material` was specified in `DownloadImage`. (Default: `_MainTex`)

### IVRCImageDownload

Contains information about the downloaded image. Returned by `VRCImageDownloader`'s `DownloadImage` function, by `OnImageLoadSuccess`, and by `OnImageLoadError`.  
Note that many of these fields will be invalid until the download has completed or failed.

- **Get Error**: Gets the `VRCImageDownloadError` associated with the event. 
- **Get Errormessage**: Gets the error message as a `string`.  
- **Get Material**: Gets the Material sent into the `DownloadImage` function.  
- **Get Progress**:`Gets the progress of the image download as a`float\` between 0 and 1. Use this to track the progress of the download, i. e. for custom loading bars.
- **Get Result**: The `Texture2d` of the downloaded image.  
- **Get SizeInMemoryBytes**: Gets the size of the texture in bytes as an `int`. 
- **Get State**: Gets the `VRCImageDownloadState` indicating the state of the image download.  
- **Get TextureInfo**: The texture info given to the DownloadImage function (TextureInfo).  
- **Get Udonbehavior**: Gets the given udonbehavior the events of the download image are being sent to (UdonBehavior).
- **Get URL**: Gets the `VRCURL` of the image download.

VRChat automatically selects the <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/TextureFormat.html">texture format</UnityVersionedLink> of the downloaded image.
- Images with an alpha channel as loaded as RGBA32, RGB64, etc.
- Images without an alpha channel are loaded as RGB24, RGB48, etc.
- Greyscale images are loaded as R8, R16, etc.

#### Dispose

Cleans up the `IVRCImageDownload`. Unloads the downloaded texture and frees up the memory it was using.

Unlike the dispose method of `VRCImageDownloader`, this will only dispose this individual download and its associated texture, leaving other downloads and their textures intact.

Disposing an `IVRCImageDownload` will change its `State` to `Unloaded`.

### VRCImageDownloadState

Indicates the state of the image download in `IVRCImageDownload`:

- **Pending**: Not been started or still in progress.
- **Error**: Download failed an error (see `VRCImageDownloadError`).
- **Complete**: Download complete, texture is ready to use.
- **Unloaded**: Pending garbage collection after `Dispose` has been called on `IVRCImageDownload`.
- **Unknown**: Unknown state.

### VRCImageDownloadError

When an image download fails, `OnImageLoadError` is called. `IVRCImageDownload`'s `Error` field will contain one of the following error states:

- **InvalidURL**: The download URL used in `DownloadImage` is invalid.
- **AccessDenied**: Access to the URL was denied.
- **InvalidImage**: The downloaded image is invalid.
- **DownloadError**: A web request error occured.
- **Unknown**: Unknown error state.

## Events

* **OnImageLoadSuccess**: Returns `IVRCImageDownload`. Called when a `VRCImageDownloader` has successfully download an image.
* **OnImageLoadError**: Returns `IVRCImageDownload`. Called when a `VRCImageDownloader` has failed to download an image.


---

## Document: index.md

Path: /worlds/udon/index.md
---
sidebar_position: 1
---
# Udon

Udon allows players to interact with your world in interesting ways! Use scripts written by other creators, or create your own games, prefabs, and other experiences.

## What is Udon?

Udon is a programming language[^1] for VRChat worlds. Scripts can interact with scene objects, [players](./players), [synced networked variables](./networking), and more. Udon makes your world come to life!

Udon runs in both VRChat *and* the Unity Editor. You can test and debug your scripts without needing to build and upload your VRChat world. You can also use [Udon's debugging features](debugging-udon-projects).

After you [create your VRChat world](/sdk/), there are two main ways to create Udon scripts:
- The [Udon Node Graph](./graph) is a visual programming interface that uses nodes and wires to connect flow, inputs, and outputs.
	- The Graph is similar to Unity animators, Blender shaders, geometry nodes, or Unreal blueprints.
	- The Graph is unique to the VRChat SDK does not require any third-party tools.
	- Use the Graph if you're very new to programming or only want to create very simple scripts.
- [UdonSharp](./udonsharp) allows you to use C# to create scripts.
	- UdonSharp is similar to Unity's built-in C# scripting system.
	- Most UdonSharp users use an [IDE](https://en.wikipedia.org/wiki/Integrated_development_environment). [Visual Studio](https://visualstudio.microsoft.com/vs/unity-tools/) is free, and [Rider](https://www.jetbrains.com/rider/) is free for non-commercial use.
	- Use UdonSharp if you're already familiar with programming or want to create powerful scripts.


And if you're an expert user:

- You can write your own compiler to generate Udon Assembly code.
	- VRChat Udon is technically a [virtual machine](https://en.wikipedia.org/wiki/Virtual_machine) running bytecode compiled from Udon Assembly.
	- You *can* write Udon Assembly code manually, though this is extremely uncommon.

## Bug Reports and Feature Requests
To submit bug reports or feature requests, use VRChat's [Canny feedback board](https://vrchat.canny.io/udon).

[^1]: For the more technically inclined: **VRChat Udon** is a VM running bytecode compiled from **Udon Assembly**. You can generate **Udon Assembly** using the built-in **VRChat Udon Node Graph** UI, writing your own **Udon Assembly**, or even by writing your own compiler to generate **Udon Assembly** or bytecode programs directly.



---

## Document: input-events.md

Path: /worlds/udon/input-events.md
# Input Events

You can read the input of a player's controller in a unified way across all platforms by using Udon Input Events. These events will work correctly even when the player has remapped their controls. 

There are currently two types of events - [Button](#button-events) and [Axis](#axis-events), which include boolean and float values. Each event also holds a special [UdonInputEventArgs](#udoninputeventargs) object. You can also use [Unity input methods and properties](/worlds/udon/input-events#unity-input-methods-and-properties) to directly read input data. 

## Button Events
Button events include a *bool* value which is **true** when the button is pressed and **false** when it is released. 

### InputJump
Spacebar on Desktop, typically a face button on controllers.

### InputUse
Left-Click on Desktop, typically a trigger button on controllers.

### InputGrab
Left-Click on Desktop, typically a grip button on VR controllers.

### InputDrop
Right-Click on Desktop, press grip button on Vive Wands and some Windows Mixed Reality Controllers, release grip button on others.

## Axis Events
Axis events have a **float** value which typically ranges between -1 and 1. When using a controller with analog sticks, a new event will be triggered for each change in value, from 0 to 0.1, then to 0.2, etc. Desktop users will output whole numbers: -1, 0, 1, etc.

### InputMoveHorizontal
A and D on Desktop, typically the left stick/pad moving left and right on controllers.

### InputMoveVertical
W and S on Desktop, typically the left stick/pad moving up and down on controllers.

### InputLookVertical
Moving the mouse up and down on Desktop, typically the right stick up and down on gamepad and VR controllers.

### InputLookHorizontal
Moving the mouse left and right on Desktop, turning left and right using the right stick/pad without Comfort Turning on VR controllers, typically the right stick left and right on gamepad controllers.

## UdonInputEventArgs
This object is included in every input event, and holds additional data for the event which may be useful. We may add more data into this object in the future, let us know if you think of something handy you'd like to reference here. For now, it includes:

- **UdonInputEventType**: BUTTON or AXIS
- **boolValue**: True/False if this is a button event, false if it's an axis event (default value)
- **floatValue**: Number between -1 and 1 for an axis event, 0 if it's a button event (default value)
- **handType**: LEFT or RIGHT. Included for keyboard and mouse users as well (mouse is RIGHT, keyboard is LEFT).

## OnInputMethodChanged
This event fires whenever a user switches input methods, like from Keyboard to Mouse, Controller, or Touchscreen. It includes a [VRCInputMethod](/worlds/udon/graph/type-nodes/#vrcsdkbasevrcinputmethod) enum as its parameter.

:::note Ambiguous Vive input names 

- `VRCInputMethod.Vive` is a Vive controller running through SteamVR.
- `VRCInputMethod.ViveXr` is a Vive XR Elite Controller running via OpenXR.

:::

## Unity Input Methods and Properties

Udon can access some methods and properties from the [`UnityEngine.Input`](https://docs.unity3d.com/ScriptReference/Input.html) namespace. They provide detailed information about user input.

The following methods and properties are available in Udon: 
- [`Input.anyKey`](https://docs.unity3d.com/ScriptReference/Input-anyKey.html), [`Input.anyKeyDown`](https://docs.unity3d.com/ScriptReference/Input-anyKeyDown.html)
- [`Input.inputString`](https://docs.unity3d.com/ScriptReference/Input-inputString.html)
- [`Input.imeIsSelected`](https://docs.unity3d.com/ScriptReference/Input-imeIsSelected.html)
- [`Input.GetAxis()`](https://docs.unity3d.com/ScriptReference/Input.GetAxis.html), [`Input.GetAxisRaw()`](https://docs.unity3d.com/ScriptReference/Input.GetAxisRaw.html)
- [`Input.GetButton()`](https://docs.unity3d.com/ScriptReference/Input.GetButton.html), [`Input.GetButtonDown()`](https://docs.unity3d.com/ScriptReference/Input.GetButtonDown.html), [`Input.GetButtonUp()`](https://docs.unity3d.com/ScriptReference/Input.GetButtonUp.html)
- [`Input.GetMouseButton()`](https://docs.unity3d.com/ScriptReference/Input.GetMouseButton.html), [`Input.GetMouseButtonDown()`](https://docs.unity3d.com/ScriptReference/Input.GetMouseButtonDown.html), [`Input.GetMouseButtonUp()`](https://docs.unity3d.com/ScriptReference/Input.GetMouseButtonUp.html)
- [`Input.GetJoystickNames()`](https://docs.unity3d.com/ScriptReference/Input.GetJoystickNames.html)
- [`Input.GetKey()`](https://docs.unity3d.com/ScriptReference/Input.GetKey.html), [`Input.GetKeyUp()`](https://docs.unity3d.com/ScriptReference/Input.GetKeyUp.html), [`Input.GetKeyDown()`](https://docs.unity3d.com/ScriptReference/Input.GetKeyDown.html)

## Input Detection in VRChat Menus

Udon can't detect input while any of the following VRChat menus are open:
- Main menu
- Quick menu (Desktop or mobile only)
- Text input popup

When you open a VRChat menu, Udon releases all held inputs, even if you continue holding them. For example:
- If you hold the arrow key and open the VRChat menu, `Input.GetButtonUp()` returns `true` for that key.
- If you hold the jump button and open the VRChat menu, Udon executes `InputJump(false)`.

When you close a VRChat menu, Udon presses all held **Unity** inputs. For example:
- If you hold the right arrow key while closing the VRChat menu, `Input.GetButtonDown()` returns `true` for that key.
- If you hold the jump button and close the VRChat menu, Udon does **not** execute `InputJump(true)`.




---

## Document: index.md

Path: /worlds/udon/midi/index.md
# Midi in Udon

Since the 1980s, MIDI has connected musical instruments in imaginative ways. We've included it in VRChat so you can build worlds that respond to real-time instruments and prerecorded performances. 

>Read more about [MIDI on Wikipedia](https://en.wikipedia.org/wiki/MIDI).

[IMAGE: image]

There are two ways to work with MIDI in your Udon worlds:
- ## [Realtime](realtime-midi) data from an instrument plugged into your computer.
- ## [Playback](midi-playback) of MIDI data along with audio files.

Either way, you'll be working with Udon's MIDI Events, detailed below.

## Midi Events

### MidiNoteOn
Triggered when a 'Note On' message is received. Either triggered by MIDI playback, or by pressing a key/button on your device.
Outputs:
* `int channel` MIDI Channel that received the event, 0-15.
* `int number` Note number from 0-127 (your MIDI Device may not output the full range)
* `int velocity` Number from 0-127 representing the speed at which the note was triggered, if supported by your MIDI device.

### MidiNoteOff
Triggered when a 'Note Off' message is received, typically by releasing a key/button on your device.
Outputs:
* `int channel` Midi Channel that received the event, 0-15.
* `int number` Note number from 0-127 (your midi Device may not output the full range)
* `int velocity` This value is typically 0 for Note Off events, but may vary depending on your device.

### MidiControlChange
Triggered when a control change is received. These are typically sent by knobs and sliders on your Midi device.
Outputs:
* `int channel` Midi Channel that received the event, 0-15.
* `int number` Control number from 0-127.
* `int value` Number from 0-127 representing the value sent by your controller. For some knobs that can spin endlessly rather than being limited by physical start/end positions, this value might be simply 0 and 1 or some other range indicating "positive" and "negative" increments that you must manage on your own.

---

## Document: midi-playback.md

Path: /worlds/udon/midi/midi-playback.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Midi Playback

You can play back MIDI data along with an audio track to control anything you want in your Udon world. You can jump to the [Example Scene](#example-midiplaybackscene) to get started right away.

## Assets: MidiFile and AudioClip

Files with the extension .mid are processed as MIDI assets. To get started with your own MIDI and Audio files:
1. Drag and drop them somewhere into your Assets folder. The MIDI file must have the extension .mid, the audio file can be of any <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AudioClip.html">type supported by Unity</UnityVersionedLink> (.aif, .wav, .mp3, .ogg).
2. Select the MIDI file and set its AudioClip to the matching audio file.

[IMAGE: image]

3. It's imperative that the BPM for your MIDI file is set correctly. If the data seems like it doesn't match the audio, this is likely the issue. You can override the BPM here by toggling on "Override Bpm" and supplying the right value. Even better would be to edit your MIDI file and add the correct BPM.


## Component: VRCMidiPlayer

[IMAGE: VRCMidiPlayer]

This is the brains of the operation. It works similarly to an Audio Source but uses a Midi Asset instead. It sends MIDI [Note On](/worlds/udon/midi#midinoteon) and [Note Off](/worlds/udon/midi#midinoteoff) events to all target UdonBehaviours.

### Inspector Fields

Midi File

| Name                | Description                                                                                                           |
|---------------------|-----------------------------------------------------------------------------------------------------------------------|
| Midi File           | The MIDI file in SMF format whose data you want to trigger.                                                           |
| Audio Source        | The AudioSource component with the audio clip corresponding to your MIDI data.                                        |
| Target Behaviours   | An array of UdonBehaviours which will have MIDI [Note On](/worlds/udon/midi#midinoteon) and [Note Off](/worlds/udon/midi#midinoteoff) events sent to them. |
| Display Debug Blocks| When enabled, you can see a display of all the notes in your current MIDI file in the Scene View of the Unity Editor while the VRCMidiPlayer is selected. Helpful for a quick view into your data. |

### Methods

### Methods

| Name   | Description                                                                 |
|--------|-----------------------------------------------------------------------------|
| Play() | Starts the playback of MIDI events and the Audio Source.                    |
| Stop() | Stops the playback of MIDI events and the Audio Source.                     |

### Properties

| Name       | Description                                                                 |
|------------|-----------------------------------------------------------------------------|
| `float` time | Set and Get the current time of both the MIDI and Audio sources.           |
| `MidiData` midiData | Get a MidiData object containing all data about the current MIDI track. Can be used before playback to set things up. |

### Example: MidiPlaybackScene

<video controls>
  <source src="[IMAGE_URL]
</video>

Example Central includes [a simple MIDI playback example](/worlds/examples/midi-playback). You can load it from the menu bar under VRChat SDK > Samples > MidiPlayback.

## Class: MidiData

When requesting MIDI data from a VRCMidiPlayer, this is what you get. It holds an array of all tracks as well as the BPM.

| Type         | Name         | Description                                             |
|--------------|--------------|---------------------------------------------------------|
| `MidiTrack[]`| Tracks       | Array of MidiTracks in the file.                        |
| `byte`       | Bpm          | Represents the BPM of the track.                        |

## Class: MidiTrack

This class simply wraps an array of MidiBlocks, and provides some handy references for note and velocity ranges discovered in the track.

| Type         | Name         | Description                                             |
|--------------|--------------|---------------------------------------------------------|
| `MidiBlock[]`| Blocks       | Array of MidiBlocks in the track.                       |
| `byte`       | minNote      | The lowest note played in the track.                    |
| `byte`       | maxNote      | The highest note played in the track.                   |
| `byte`       | minVelocity  | The lowest velocity played in the track (besides 0).    |
| `byte`       | maxVelocity  | The highest velocity played in the track.               |

## Class: MidiBlock

A MidiBlock represents a whole Midi Note event from On to Off, and some helpful metadata.

| Type   | Name        | Description                                              |
|--------|-------------|----------------------------------------------------------|
| `byte` | Note        | 0-127 range number for the note played.                  |
| `byte` | Velocity    | 0-127 range number for the velocity of the note played.  |
| `byte` | Channel     | 1-16 range number for the channel on which the note is played. |
| `float`| StartTimeMs | The start time in Milliseconds at which the Note On event starts. |
| `float`| EndTimeMs   | The end time in Milliseconds at which the Note Off event triggers. |
| `float`| StartTimeSec| The start time in Seconds at which the Note On event starts. |
| `float`| EndTimeSec  | The end time in Seconds at which the Note Off event triggers. |
| `float`| LengthSec   | The length in Seconds of the whole event from Note on to Note Off. |


---

## Document: realtime-midi.md

Path: /worlds/udon/midi/realtime-midi.md
# Realtime Midi

You can use MIDI devices to control your Udon world in realtime using MIDI Notes and controller changes.

## Components

To get started with Midi in your scene, add a **VRC Midi Listener** component to one of your GameObjects.

[IMAGE: VRCMidiListener]

This component informs VRChat that you want to receive MIDI events and starts up the MIDI system if needed. **You need to select the events you want to receive** by pressing the 'Active Events' toggles to select them - no events are selected by default, so turn them on before you start testing. **You also need to choose an UdonBehaviour** that will receive these events by selecting it as the 'Behaviour' on the VRC Midi Listener. This UdonBehaviour can be on the same GameObject as the MIDI Listener, or any other object.

When you start your scene, you may notice a **VRCMidiHandler** GameObject that is added automatically. This handles the MIDI device driver and sends events to all the Listeners. DO NOT add this component anywhere yourself - it is meant to be automatically added and removed so that MIDI Devices are only connected to once, and disconnected when someone leaves your world.

## Device Selection - Editor

You can test your MIDI events in the Unity Editor by selecting your device through the VRChat SDK. It is saved in your Editor preferences, so Unity will remember your device for every project.

[IMAGE: Midi Utility Window]

[IMAGE: Midi Utility Selector]

## Device Selection - Runtime

When you visit a world with MIDI events, VRChat will try to open the first MIDI device it can find on your machine. If you have multiple devices and want to specify which one to use, you can pass part of its name as a command-line argument. For example, if you have a device that appears in Windows as "SchneebleCo MidiKeySmasher 89", you can add this to your launch options/script:
``--midi=midikeysmasher`
VRChat will match partial names and ignore capitalization. Learn about all other Launch Options: [Launch Options](https://docs.vrchat.com/docs/launch-options)

## Example Scene

Visit the  [Udon Midi Test](https://vrchat.com/home/world/wrld_f8bc6485-dcdf-4646-89d8-14e4772561ee) example world that reads and displays all three message types.

---

## Document: debugging.md

Path: /worlds/udon/networking/debugging.md
# Debugging Network Issues

The [World Debug Views](/worlds/udon/world-debug-views) are useful tools that can help you understand the ownership and network state of objects and data in your scene.

### Issue: Object Sync Not Working
#### Possible Causes:
- The object is missing a `VRCObjectSync` component.
- The object's ownership hasn't been transferred correctly.
- The object is not set to use Continuous syncing.

#### Fix:
- Ensure `VRCObjectSync` is added.
- Check ownership with:
  ```cs
  Debug.Log("Owner: " + Networking.GetOwner(gameObject).displayName);
  ```
- Use `RequestSerialization()` to send updates when using manual sync mode.

### Issue: Late Joiners See Incorrect State
#### Possible Causes:
- The object relies on events instead of synced variables.
- Missing serialization step for critical state updates.

#### Fix:
- Use synced variables for persistent state.
- Ensure data is serialized correctly using:
  ```cs
  public override void OnDeserialization()
  {
      Debug.Log("Synced data received: " + syncedVariable);
  }
  ```

### Issue: Ownership Conflicts
#### Possible Causes:
- Multiple scripts attempt to transfer ownership simultaneously.
- Unchecked ownership requests allow unexpected takeovers.

#### Fix:
- Verify ownership using:
  ```cs
  if (Networking.IsOwner(Networking.LocalPlayer, gameObject))
  {
      Debug.Log("I am the owner");
  }
  ```
- Use `OnOwnershipRequest()` to handle transfer conditions.

## Best Practices
- Use the debug overlays to check ownership and network quality.
- Minimize unnecessary ownership transfers to prevent desync.
- Test with multiple players to catch issues related to sync delays and ownership changes.
- Log key networking actions (`Debug.Log`) for analysis.

## Next Steps
For further networking troubleshooting, explore these topics:
- [Object Ownership & Transfers](/worlds/udon/networking/ownership)
- [Using Variables for Syncing](/worlds/udon/networking/variables)
- [Performance Considerations](/worlds/udon/networking/performance)

---

## Document: events.md

Path: /worlds/udon/networking/events.md
# Network Events

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Network events allow simple one-way network communication between your scripts. When a script executes a network event, it executes the event once for the target players currently in the instance.

Network events are not repeated for late joiners, so they're best for temporary actions that are only relevant for a short time, such as cosmetic effects. Don't use network events for important logic or state changes that are relevant for late joiners. Instead, use [network variables](/worlds/udon/networking/variables).

## Defining an Event

To declare an event, you have to give it a name. This has to be unique per Udon behaviour, but can be reused across different behaviours. The name is determined by the text field on the Udon Graph event node, or the UdonSharp method definition, and is case-sensitive. In UdonSharp, use `nameof` to allow your IDE to check this for you.

When [calling an event](#calling-an-event) using `SendCustomNetworkEvent`, the event name determines which method will be excecuted.

To allow a method or graph event node to be executed remotely, it must follow the rules listed below. For both Graph and UdonSharp, the *receiving* UdonBehaviour **must not** use [sync mode](/worlds/udon/udonsharp/attributes/#behavioursyncmode) `None`.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

For an Udon Graph custom event node to be network-callable, the following requirements have to be met:

- The name of the custom event **must not** start with an underscore `_`.
- The event node must have an active Flow connection.

</TabItem>

<TabItem value="cs" label="UdonSharp">

For an UdonSharp method to be network-callable, the following requirements have to be met:

* The method **must** use the attribute `[NetworkCallable]` (see [Legacy Events and Security](#legacy-events-and-security) for an exception).
* The method **must** use the access modifier `public`.
* The method **must not** use the modifier `static`, `virtual`, or `override`.
* The method **must not** use [**member overloading**](https://learn.microsoft.com/en-us/dotnet/standard/design-guidelines/member-overloading), including methods without a `[NetworkCallable]` attribute.
* The method **must not** have a return value, data can not be returned over the network this way.

In addition, if the method uses parameters, they must fulfill the following requirements:

* The method **must not** use more than 8 parameters.
* All parameters **must** be of a [supported type](/worlds/udon/networking/network-details#synced-variables).
* Parameters **must not** use the modifier `params`.
* Parameters **must not** have default values.

</TabItem>
</Tabs>

## Calling an Event

To trigger a network event, use the `SendCustomNetworkEvent` method available on `UdonBehaviour` and `UdonSharpBehaviour`, or make an explicit call via `NetworkCalling.SendCustomNetworkEvent`. These are identical and only provided for compatibility.

The `UdonBehaviour` you are targeting with the call can be different than the one executing `SendCustomNetworkEvent`. It is possible to target disabled behaviours.

### Example

Follow the example below to trigger a custom network event for players in your instance:

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: Udon graph for an object that logs a message when it is interacted with.]

1. Ensure that your UdonBehaviour's sync mode is set to "Continuous" or "Manual", not "None".
2. Create an "Event Custom" node.
3. Give this node a unique name using its input box.
4. Add a "Send Custom Network Event Node."
5. In the `eventName` dropdown, select the name you assigned to the event. You can also attach a string flow do dynamically choose the event name, or enter a name from a different behaviour.
6. Leave the default `All` as the target to trigger this event on each Player in your room, or change it to a [different option](#event-targeting).
7. You can leave the `instance` input empty to target the current UdonBehaviour, or connect a reference to another UdonBehaviour to fire a Custom Event on that one instead.

</TabItem>

<TabItem value="cs" label="UdonSharp">

```cs
using UdonSharp;  
using VRC.SDK3.UdonNetworkCalling;  
using VRC.Udon.Common.Interfaces;  
  
public class SyncedHelloOnInteract : UdonSharpBehaviour  
{  
    public override void Interact()  
    {  
        SendCustomNetworkEvent(NetworkEventTarget.All, nameof(SayHello));  
    }  
      
    [NetworkCallable]  
    public void SayHello()  
    {  
        Debug.Log("Hello, World!");  
    }  
}
```

</TabItem>
</Tabs>

Note that your Udon code will not wait for these events to be called on the remote players - it simply sends them off and continues on immediately. If your event will be received by the sender itself however, it _will_ trigger locally before moving on, just like a regular function call would.

The order in which events are sent and received is guaranteed as long as you don't hit your own defined [rate-limit](#rate-limiting). If you send event `A` followed by event `B`, the receiving side will receive them in the order `A, B` as well. This guarantee is valid across all behaviours in your scene, but not across multiple players sending events at the same time.

However, if an event is [rate-limited](#rate-limiting) by the `[NetworkCallable(maxEventsPerSecond: X)]` attribute (not including VRChat-internal rate or throughput limits!), it will not prevent other queues from draining. For example, if event A has a limit of 3 per second, and you send five events at once: `A1, A2, A3, A4, B1` - then they will arrive in order `A1, A2, A3, B1, A4`, since A4 will hit the rate limit, and so event B1 can "skip the queue".

## Event Targeting

Network events always target one or more players in the instance. You can choose between the following targets:

| Target | Description |
| - | - |
| `NetworkEventTarget.All` | All players in the instance receive the event. |
| `NetworkEventTarget.Others`| All players in the instance receive the event, excluding the local player. |
| `NetworkEventTarget.Owner` | The owner of the object receives the event. |
| `NetworkEventTarget.Self` | "Loopback" target. Only the sending player receives the event. This will bypass all [rate-limiting](#rate-limiting), since it never actually gets sent over the network. |

If the local player sends a network event to themselves, they execute it immediately. For example, `NetworkEventTarget.All` sends a network event to all other players, but the local player executes the event immediately without waiting.

To send an event to a specific player, you can include the target player's [`playerId`](/worlds/udon/players/getting-players#get-playerid) as a parameter and only execute your event if the received ID matches the local player. Use `NetworkEventTarget.All` in that case, or add a special case for triggering the event locally.

## Sending Events with Parameters

A network event can carry up to **eight** parameters. Each parameter must be a [syncable variable type](/worlds/udon/networking/network-details#synced-variables) (`int`, `string`, `float`, `bool`, …), and in UdonSharp, the receiving method must be marked `[NetworkCallable]`.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

When creating your custom event in Udon Graph, you can select how many parameters it should have. The default variant has no parameters. You can always change the amount of parameters later using the dropdown on the node.

On a node with parameters, you can select the types in dropdowns on the left. The output data ports will automatically change type.

To send parameters from a "Send Custom Network Event" node, choose the overload with the correct amount of parameters from the dropdown.

For example, here is a simple graph receiving a string and an integer:

[IMAGE: Udon graph that sends an event with 2 parameters of different types on Interact.]

</TabItem>

<TabItem value="cs" label="UdonSharp">

You can declare network callable functions with parameters just like usual in UdonSharp.

```cs
using UdonSharp;  
using UnityEngine;  
using VRC.SDK3.UdonNetworkCalling;  
using VRC.Udon.Common.Interfaces;  
  
public class EventParameterExample : UdonSharpBehaviour  
{  
    public override void Interact()  
    {  
        NetworkCalling.SendCustomNetworkEvent((IUdonEventReceiver)this, NetworkEventTarget.All, nameof(PrintMessage), "VRCat", 11);  
        // or: this.SendCustomNetworkEvent(NetworkEventTarget.All, nameof(PrintMessage), "VRCat", 11);  
    }  
      
    [NetworkCallable]  
    public void PrintMessage(string name, int age)  
    {  
        Debug.Log($"Congratulations on your {age}th birthday, {name}!");  
    }  
}
```

</TabItem>
</Tabs>

You need to ensure that the parameter types you pass to `SendCustomNetworkEvent` match the types you declared on the event, otherwise sending will fail!

When passing `null` as an input to `SendCustomNetworkEvent`, the method called on the receiving side will receive `default(T)` where `T` is the type of the parameter as declared in the method signature. This means nullable types will be received as `null`, while non-nullable types will receive a default value (e.g. `int` parameters sent as `null` will receive `0`, which is `default(int)`).

### Parameter Size Limits and Event Splitting

In general, keep parameter sizes minimal and avoid sending large objects or complex structures to avoid issues. There are a few hard-limits in place:

* The total size of all parameters in a single network event cannot exceed 16 KB.
* The size of a single parameter it not limited, other than by the total size of the event.
* Total outgoing data is hard-capped at approximately 18 KB/s. This includes _all_ network overhead however, so in practice it is unlikely you will see more than 8-10 KB/s.

In addition, there are two levels of limitation that may cause events to be delayed:

* Throughput-based limiting – This applies to the total amount of network data being processed at any time and follows the same rules as regular Udon sync.
* User-configured rate limiting – This controls how often network events can be sent per second and can be adjusted using the `[NetworkCallable(maxEventsPerSecond: X)]` attribute.

:::note

If you send an event containing more than **1024 bytes** (1 kilobyte) of parameter data, it will be split into multiple events internally. This process is _almost_ transparent to Udon, as the receiving size will re-assemble the event and call it only once on the targeted `UdonBehaviour`.

However, these internal events are visible in the [rate-limiting queue](#rate-limiting), and from the `Get(All)QueuedEvents` functions. For example, if you configure your rate-limit to be "2 events per second", but call `SendCustomNetworkEvent` with 2048 bytes of data, then the effective allowed rate will be only 1 event call per second. This is because at 2048 bytes, the single custom network event turns into 2 internal events.

:::

"Parameter Size" refers to the number of bytes your parameter data will be encoded as. This does **not** include internal headers or other overhead outside of your control. A few examples to demonstrate:

```cs
// fits into 1 internal event:
int x = 0; // = 4 bytes, sizeof(int)
Vector3 v = Vector3.zero; // = 12 bytes, sizeof(float) * 3
new string('x', 400); // = 400 bytes, UTF-8 encoded
"うどんは美味しい"; // = 24 bytes, UTF-8 encoded with non-ASCII characters
new char[128]; // = 256 bytes, UTF-16 (following C# spec)
new byte[1024]; // = 1024 bytes

// requires more than 1 internal event:
new byte[1025]; // = 1025 bytes, 2 events sent
new byte[16 * 1024] // = 16384 bytes, 16 events sent, maximum allowed size
new int[512]; // = 2048 bytes, sizeof(int) * 512, 2 events sent

// string[] and VRCUrl[] are special cases:
new string[2] { "test", "foobar" }; // = 18 bytes, 4 + 6 from UTF-8 encoded strings, 8 additional for a length value per array entry ( 2 * sizeof(int) )
```

## Rate Limiting

Network events are **rate-limited** to prevent excessive usage:
- Default rate: **5 events per second**
- Maximum configurable rate: **100 events per second**

To modify the rate limit, use the `[NetworkCallable(maxEventsPerSecond: X)]` attribute. `X` can be any integer between 1 and 100, inclusive range.

In Udon Graph, simply set the desired value in the corresponding input field on the node. Note that for events without parameters, you can set this to 0 to make it a [legacy event](#legacy-events-and-security).

This parameter specifies how quickly events can be sent. It is given in "Events per Second", e.g. a value of 5 means "maximum 5 events per second". **One call to `SendCustomNetworkEvent` may issue multiple events as far as the rate limiting is concerned, see [Event Splitting](#parameter-size-limits-and-event-splitting)!**

All rate-limiting is applied on a best-effort basis, it may not match the configured or specified values exactly based on local performance, network utilization, or server load.

:::warning

This limit exists so you can use it as a safety measure! It is strongly recommended to set this value **as low as you can** to mitigate malicious actors abusing your events to cause issues in your world.

:::

Note that this rate limit is enforced both on the sending client and server-side. In regular use, the server-side is only for protection against malicious users and generally not visible. The local client behaviour is that of queuing, meaning that if too many events are sent in short succession, they will be queued until the rate limit allows them to be sent. There is no limit on the amount of queued messages, so be careful not to send messages too quickly indefinitely as that will cause issues with _all_ Udon networking in your world.

Since events are executed immediately for the local player, there is no rate-limit applied in that case. This means that events may end up in a queue for remote players after already having executed locally.

Lastly, note that there is a global overall limit on outgoing events too, which is currently also approximately 100 events per second. This limit is dynamic and not configurable - it may change at any time, although VRChat will communicate any substantial decrease ahead of the change. This limit applies in the same way as the configurable one where events will be queued.

### Congestion Monitoring

The following functions in `NetworkCalling` are available to help work with rate limits:

| Function | Description |
|----------|-------------|
| `int NetworkCalling.GetQueuedEvents(udonBehaviour, eventName)` | Returns how many events are currently queued for sending. In normal operation, this number will be between 0 and your configured rate limit. If it exceeds your rate limit, you are sending events too quickly and they will be queued until the rate limit allows them to be drained. |
| `int NetworkCalling.GetAllQueuedEvents` | Returns how many events are queued across your entire world. A number above 0 does not automatically indicate bad network conditions, as events may end up queued for a short duration even under low load. |

You can also use the overall `Networking.IsClogged` property to determine network conditions. This will be affected by excessive event sending.

For example:

```cs
using TMPro;  
using UdonSharp;  
using UnityEngine;  
using VRC.SDK3.UdonNetworkCalling;  
using VRC.Udon.Common.Interfaces;  
  
public class EventQueueExample : UdonSharpBehaviour  
{  
    [SerializeField] private TextMeshProUGUI queueStatus;  
      
    void Update()  
    {  
        queueStatus.text = $"Queue: {NetworkCalling.GetAllQueuedEvents()}";  
        queueStatus.text += $"\nSpecific Event Queue: {NetworkCalling.GetQueuedEvents((IUdonEventReceiver)this, "SomeNetworkEvent")}";  
        queueStatus.text += $"\nClogged: {Networking.IsClogged}";  
    }  
      
    // some network events...  
}  
```

### Mismatched World Versions in the Same Instance

As a very special edge-case, there is one scenario where server-side rate limiting may actively drop events without malicious action. Since rate limits are applied based on every client's _local_ view of the world, if you upload a new version of your world with reduced rate limits and have users in the same instance spread across world versions, a sending client may exceed a receiving client's rate limit expectations. In this case, and _only_ then, the server may silently drop events and not deliver them.

## Accessing the Sender of an Event

The `NetworkCalling` class has some useful properties for working with events:

| Property                                    | Description                                                                                        |
|---------------------------------------------|----------------------------------------------------------------------------------------------------|
| `VRCPlayerApi NetworkCalling.CallingPlayer` | The `VRCPlayerApi` of the player who initiated this network call. `null` if not in a network call. |
| `bool NetworkCalling.InNetworkCall`         | Indicates if the current line is executed as part of a network call. Note that this is only reset once the entry function terminates, i.e. calling a secondary script or different function from your Event entrypoint will keep this state. |

## Legacy Events and Security

`[NetworkCallable]` was introduced in SDK 3.7.7 - Udon used to allow any public method to be called, unless it started with an underscore like `_MethodName`. For backwards compatibility, you can still call any parameter-less public method which doesn't start with an underscore, but it's not recommended. Adding the `[NetworkCallable]` attribute to a method with an underscore _will_ allow it to be called over the network.

In Udon Graph, a custom event node is considered "Legacy" if the `MaxEventsPerSecond` input field is set to 0.

:::warning

To prevent a public method or graph event from ever being called over the network, you should use a name starting with an underscore `_`. This can increase the security of your world or prefab.

:::

### Component Index Targeting

As an extra special note about legacy events, consider the semantics of sending an event to a `GameObject` vs a specific `Component` on an object.

Calling a function marked via `[NetworkCallable]` will make that call use `Component` targeting semantics. This means that even if you have 2 or more `UdonBehaviour`s on a GameObject, only the specified `UdonBehaviour` will receive the event.

The legacy case - meaning sending an event with no parameters to a function _not_ marked with `[NetworkCallable]` - will use `GameObject` semantics. That is, it operates similar to Unity's built-in [`GameObject.SendMessage`](https://docs.unity3d.com/2022.3/Documentation/ScriptReference/GameObject.SendMessage.html) and will call the function on _all_ `UdonBehaviours` on the object containing the behaviour you targeted.

Note that `Component` targeting relies on component indices (order), meaning it is not recommended to use `Destroy` with components on a `GameObject` that uses networked `UdonBehaviour`s. Doing so will result in undefined behaviour.


---

## Document: index.md

Path: /worlds/udon/networking/index.md
# Networking

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Multiplayer experiences are at the heart of VRChat. To create a world that reacts to players and synchronizes data between them, you need to understand networking in VRChat.

This guide introduces the core networking concepts, with a path to deeper learning.

<iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FMb6ZYBEhxiI%3Flist%3DPLe9XHNvXcouQjg5GULWGLj1tMzeythnQi&display_name=YouTube&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DMb6ZYBEhxiI&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FMb6ZYBEhxiI%2Fhqdefault.jpg&key=f2aa6fc3595946d0afc3d76cbbd25dc3&type=text%2Fhtml&schema=youtube" width="854" height="480" scrolling="no" title="YouTube embed" frameborder="0" allow="autoplay; fullscreen" allowfullscreen="true"></iframe>

## Overview

VRChat networking is built around three key concepts:

- **Variables** – Variables store data that can be shared across all players in a world. These values can represent anything from numerical scores to object positions or player states. When a variable is synchronized, its updates are sent to all players in the instance.

- **Events** – Events are triggered actions that occur at specific moments in time. Unlike variables, which hold persistent values, events execute once and then disappear. They can be used to create interactions, trigger animations, or activate scripted behaviors.

- **Ownership** – Ownership determines which player can modify and update a networked object. By default, the first player to enter an instance owns all networked objects. Ownership can be transferred between players, allowing different users to control objects and sync their interactions with others.

Understanding these core concepts is essential for building networked experiences in VRChat. The following sections will explore how to use variables, events, and ownership effectively.

## Using Variables for Syncing

There are two types of sync available:
1. **Continuous** – Best for frequently updating values (e.g., a growing tree).
2. **Manual** – Best for crucial values that must always be correct (e.g., a scoreboard).

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: The Variables window in an Udon Graph shows the variables you've created, and lets you edit their properties.]

In the image above, we have three different variables, with the 'synced' box checked for the 'sliderValue' variable. The Owner of this GameObject will be in charge of this variable value, and their changes will be sent to everyone else.

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
[SerializeField] private Slider slider;
[SerializeField] private Text sliderValueText;
[SerializeField, UdonSynced] private float sliderValue;
```

In the code above, we have three different variables, with the 'UdonSynced' attribute for the 'sliderValue' variable. The Owner of this GameObject will be in charge of this variable value, and their changes will be sent to everyone else.

</TabItem>
</Tabs>


### Example: Synced Slider
[IMAGE: Image]

In this example, the Owner of a Slider syncs its value to everyone else. Note that this is meant to illustrate the concepts - we'll release a separate example that goes into the nitty-gritty 'how-to' details.

The slider's value is a number between 0 and 1, which we call a floating point value, or a float for short. So we make a variable to save and sync this value named *sliderValue*, with a type of **float**. 

We set up our slider to update *sliderValue* whenever the Owner moves it. This variable is then packed up and sent to everyone else, to update their own *sliderValue* variable to match. 

The process of packing and sending the variable is called **Serialization**, and **Deserialization** is when the data is received and unpacked.

When a new Player joins a instance, all of the synced variables in that world are sent to them so they can see what everyone else sees.

## Using Events for Syncing
Unlike variables, **events do not stick around**—they happen and then disappear. If we used an Event in the Synced Slider example above, any new Players who joined the instance would not have their Sliders synced up. So events are useful for things that you want to happen **right away** for everyone who's in the instance **right now**.

### Example: Bubble Gun
[IMAGE: Image]

In this example, we have an object with a particle system and an animator that spins its bubble wand and generates bubble particles. We want this to happen for everyone in the world when the user holding the wand presses the trigger.

In our Udon Graph, we have a custom event we call "Trigger" which Plays the 'Spin' animation and triggers 22 Particles to Emit - this is just a local event in our graph.

To make this happen for everyone, we tie the **OnPickupUseDown** event which is triggered when someone presses Use while holding our Bubble Gun, and we use **SendCustomNetworkEvent** with a target of *All* to fire the "Trigger" event for everyone, including the Owner of the object.

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: Networked pickup particles in the Udon Graph]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
using UdonSharp;  
using UnityEngine;  
using VRC.Udon.Common.Interfaces;  
  
[UdonBehaviourSyncMode(BehaviourSyncMode.Manual)]  
public class BubbleGun : UdonSharpBehaviour  
{  
    [SerializeField] private Animator animator;  
    [SerializeField] private ParticleSystem particles;  
      
    public override void OnPickupUseDown()  
    {  
        SendCustomNetworkEvent(NetworkEventTarget.All, nameof(Trigger));  
    }  
  
    public void Trigger()  
    {  
        animator.Play("Spin");  
        particles.Emit(22);  
    }  
}
```

</TabItem>
</Tabs>

## Example Package & Next Steps
To see these concepts in action, download the example package:

[UdonNetworkingConcepts.unitypackage](https://assets.vrchat.com/sdk/UdonNetworkingConcepts.unitypackage)

After you've read the above and explored the example, continue below to dig deeper into VRChat Networking.

## More Networking Concepts

- **[Custom Network Events](/worlds/udon/networking/events)**
  - How to send and receive events over the network, including parameters.
- **[Network Variables](/worlds/udon/networking/variables)**
  - More info on how to best use variables to keep your players synced up.
- **[Late Joiners](/worlds/udon/networking/late-joiners)**
  - Learn how to quickly sync up anyone who joins your world with the rest of the players, instead of hanging up a "late joiners not supported" sign.
- **[Object Ownership](/worlds/udon/networking/ownership)**
  - Changing ownership of objects dynamically.
- **[Debugging Network Issues](/worlds/udon/networking/debugging)**
  - Using debug tools to track sync issues.

See the navigation bar for the full list of networking-related topics to learn about!

---

## Document: late-joiners.md

Path: /worlds/udon/networking/late-joiners.md
# Late Joiners & Sync Issues

When a player joins a VRChat instance after some synchronized variables have been changed, they need to be caught up to the latest state of the world. This guide explains how to ensure late joiners experience a consistent and synchronized world.

## How VRChat Handles Late Joiners
When a new player joins an instance, VRChat does the following:
- Sends them the latest **synced variable** values, via the `OnDeserialization` event.
- Sets objects' owners to the proper Players. 
- Events are **not** replayed.

## Ensuring Late Joiners See the Correct State
### **1. Use Synced Variables Instead of Events for State**
Events trigger once and do not persist, meaning late joiners **miss any event-based changes**. Instead:

- Store important data in `UdonSynced` variables.
- Ensure owners call `RequestSerialization()` after modifying synced data for Manually-synced UdonBehaviours.

Example: Instead of sending an event to open a door, sync a variable:
```cs
[SerializeField, UdonSynced] private bool isDoorClosed;

public void OpenDoor()
{
    isDoorClosed = false;
    RequestSerialization();
}
```
Late joiners will receive the `isDoorClosed` state correctly when they join.

### **2. Catch up Objects for Late Joiners**

Apply changes when they join. You can accomplish this in the `OnDeserialization` event which triggers for them once they've loaded in:
```cs
private GameObject lockedDoor;

public override void OnDeserialization()
{
    // show or hide the door depending on its synced state
    lockedDoor.SetActive(isDoorClosed);
}
```

### **3. Combine Events and Synced Variables when Needed**
You can change a synced variable from an Event if needed. For example, to update the synced state of a door whenever anyone opens it, you can send an event to the object's owner:
```cs
public override void Interact()
{
    SendCustomNetworkEvent(NetworkEventTarget.Owner, nameof(OpenDoor));
}
```
This saves you from needing to change the Owner of the door to the player who Interacted with it just to set its variable.

---

## Document: network-components.md

Path: /worlds/udon/networking/network-components.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Network Components

This doc covers Networking Components, Properties and Events you can use in your Udon Programs.

## Networking Properties

Special properties you can *get* from Networking:

| Property name    | Description |
| ---------------- | ----------- |
| LocalPlayer      | Returns the [VRC Player API](/worlds/udon/players) object of the local player. |
| IsInstanceOwner  | Returns `true` for the instance creator in Invite, Invite+, Friends, and Friends+ instances.<br />Always returns `false` in Group instances, Public instances, and the SDK's "Build & Test" mode. |
| InstanceOwner    | Returns the [VRC Player API](/worlds/udon/players) object of the player who owns the instance. If the owner is currently not in the instance, this returns `null` instead. If the owner returns, it returns the instance owner again.<br />The instance owner has special moderation permissions. Instance ownership never changes.
| IsMaster         | Returns `true` if the local player is the [instance master](/worlds/udon/networking/#the-instance-master). The master is the default owner for networked game objects.<br/>You should not use this for security or gating access to your world. Use `IsInstanceOwner` or implement a moderation system instead. |
| Master           | Returns the [VRC Player API](/worlds/udon/players) object of the player who is the current instance master. Is always valid. |
| IsNetworkSettled | Returns `true` if all the data in the instance has been deserialized, applied, and is ready for use. |
| IsClogged        | Returns `true` if there is too much data trying to get out. You can use this to wait until the network is unclogged or to adjust your logic. |
| SimulationTime   | Returns the current simulation time of a player or object with networking components. See below for more details. |

### Simulation time

Simulation time is a timestamp that refers to how far back in time an object is simulated. This value is used internally for [`VRCObjectSync`](/worlds/udon/networking/network-components#vrc-object-sync) and [players](/worlds/udon/players#simulationtime), but can be used in Udon scripts as well. For example, if your ` Time.realtimeSinceStartup ` is 45 and the SimulationTime of an object is 44.5, then VRChat believes 500ms of delay is necessary to smoothly replicate the object at that moment. You can use that number to learn some information about what `VRCObjectSync` is doing, or to create your own system similar to `VRCObjectSync`. For example, if you do `Time.realTimeSinceStartup - SimulationTime(player)` then that will tell you exactly how much latency that player has at that moment.
 
Simulation time is frequently adjusted depending on network conditions, including many factors such as latency, reliability, and frequency of the packets being received. The goal of this adjustment is to be as close to real-time as possible to reduce latency, but to leave enough room to prevent hitching. There are a variety of factors that can cause hitching, but one example can be running out of received packets from the owner.

## Networking Events

These are the events available as part of the Networking system to control how your data is synced.

### OnPreSerialization
This event triggers just before serialized data will be sent out, it's a good place to set synced variables that you want to be updated for other players.

### OnDeserialization
This event triggers when sync data has been transformed from bytes back into usable variables. It does not tell you *which* data has been updated, but serves as a jumping-off point to either update everything that watches synced variables, or a place to check new data against old data and make specific updates.

### OnDeserialization(DeserializationResult)
Same as OnDeserialization, but with additional information about the time at which the request was sent and received.

#### DeserializationResult
`DeserializationResult` contains three properties:
- `sendTime`: The time in seconds at which this message was sent.
- `receiveTime`: The time in seconds at which this message was received.
- `isFromStorage`: If true, then the included data was restored from storage rather than received from other realtime clients.

Both `sendTime` and `receiveTime` measure based on the time in seconds since VRChat has started, from your perspective (see <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Time-realtimeSinceStartup.html">Time.realtimeSinceStartup</UnityVersionedLink>). This means that if you want to know how many seconds ago a certain Deserialization was sent, you can calculate it with `Time.realtimeSinceStartup - sendTime`.

Note that every user's `Time.realtimeSinceStartup` is different, so one player's `sendTime` is going to be different from another player's `sendTime`. As a result, if you want to sync a specific `sendTime` to other players, you will need to calculate its offset by subtracting your `Time.realtimeSinceStartup`. Then, when the other players receive that offset, they can add back their own `Time.realtimeSinceStartup` to the offset in order to determine the absolute time relative to their own clock.

SendTime can be a negative number if the message was sent by someone else before you ever launched VRChat.

### OnPostSerialization
This event triggers just after an attempt was made to send serialized data. It returns a **SerializationResult** struct with a 'success' bool and 'byteCount' int with the number of bytes sent.

### OnSpawn
This event is deprecated - use the typical OnEnabled event if you want to do something when an object is 'Spawned' from the pool.

### OnOwnershipRequest
This event is triggered when someone has requested to take ownership. It includes the PlayerObjects for the Requester and the Requested Owner. To approve or deny the change, set a boolean value into a "Set Return Value" node. This logic runs locally on both the requester and the owner, so be aware that disagreements in logic between the two will cause a desync. This is most likely to be expressed by the ownership transfer being unexpectedly rejected by the owner.

### OnOwnershipTransferred
This event is triggered for everyone in the instance when an objects ownership is changed, and includes the PlayerObject for the new owner.

### OnMasterTransferred
This event is triggered for everyone in the instance when the instance master changes because the previous instance master has left the instance.
It includes one parameter, `newMaster,` which is the [VRC Player API](/worlds/udon/players) object of the player that has become master. This parameter is always valid.
For the first user joining a new instance, this event will trigger after `OnPlayerJoined` to indicate that the master state was transferred from "nobody".

### OnVariableChanged
This is a special type of event that you can create for any variable. In Udon Graph, you create it by dragging and dropping a variable into the graph while holding alt. This event detects when the variable changes, which can include when you receive synced variables from other players. 
* changing the contents of an array does not trigger a change, because the array itself is still the same.
* OnVariableChanged triggers immediately when the variable itself is written to, unlike OnDeserialization which triggers after it has finished writing all the synced variables. This means that if you use OnVariableChanged from one synced variable and try to get the contents of a different synced variable, it is not guaranteed that it has been updated with the latest synced data yet.
  
## VRC Object Sync
This component will automatically sync the Transform (position, rotation scale) and Rigidbody (physics) of the object you put it on. It has a few special methods and properties you can access:

### FlagDiscontinuity
Trigger this when you want to teleport the object - the changes you make this frame will be applied without smoothing.

### Set/Get Gravity
When gravity is on, this rigidbody is affected by gravity and will fall to the ground. Normally, gravity is a property of the rigidbody. However, when you have VRCObjectSync, this property must be controlled by the VRCObjectSync component instead. You can use these functions to do that. This effectively behaves like a synced variable, so **only the owner can set gravity.**

### Set/Get Kinematic
When kinematic is on, this rigidbody ignores forces, collisions and joints. Normally, kinematic is a property of the rigidbody.  However, when you have VRCObjectSync, this property must be controlled by the VRCObjectSync component instead. You can use these functions to do that. This effectively behaves like a synced variable, so **only the owner can set kinematic.**

### Respawn
Teleports this object back to its starting Position and Rotation, and removes its Velocities. 
Specifically, it sets **DiscontinuityHint** to true to make the following changes instant instead of smooth. Then it:
* sets transform.position to initial position
* sets transform.rotation to initial rotation

If the object has a rigidbody:
* sets the rigidbody.velocity to Vector3.zero
* sets the rigidbody.angularVelocity Vector3.zero
* sets the rigidbody.position to initial position
* sets the rigidbody.rotation to initial rotation
  
## VRC Object Pool
VRC Object Pool provides a lightweight method of managing an array of game objects. The pool will manage and synchronize the active state of each object it holds.

To make an object active, the Owner of the pool triggers the **TryToSpawn** node, which will return the object that was made active, or a null object if none are available. Objects may be returned to the pool by the pool's owner, and automatically disabled, via the **Return** node.

Late joiners will have the objects automatically made active or inactive where appropriate.


---

## Document: network-details.md

Path: /worlds/udon/networking/network-details.md
# Networking Specs & Tricks

Networking in Udon can be challenging! Try to keep things simple until you're more experienced.

## Specs
### Bandwidth limits

:::note

Note: All specs subject to change. You can see some specific information about the data used per-object in [Debug Menu 6](/worlds/udon/world-debug-views/#debug-menu-6).

:::

- Udon scripts can send out about **11 kilobytes** per second.
- Udon scripts with manual sync are limited to roughly **280,496 bytes** per serialization.
- Udon scripts with continuous sync are limited to roughly **200 bytes** per serialization.

If a world exceeds limits, its networking will become clogged (see [IsClogged](/worlds/udon/networking/network-components/#networking-properties)). This has a different effect depending on the sync type of the UdonBehaviour:
* Continuous behaviours will fail to raise the network event and write errors in the logs.
* Manual behaviours will cache the event and try again. 
In both cases, the logic of the UdonBehaviour will continue to work, but the data will not be sent nor received.

Try designing your scripts in ways that reduce the amount of networking required. For example: If an object will move on a fixed or predictable path, then its position may not need to be synchronized. Instead, its initial location, velocity, and time of departure may be sufficient.

### Continuous synchronization

Continuous synchronization is intended for data that changes frequently and where intermediary values don't matter, like the position of an erratically moving transform. VRChat will perform intermediary value approximation to recover lost data, and will attempt to optimize network data for continuous synchronization.

Continuous sync is limited to roughly 200 bytes per serialization.

### Manual synchronization

Manual synchronization is good for variables that are updated frequently, but quickly. It is intended for data that changes infrequently and where intermediary values matter; like the positions of pieces on a chess board.

Each manually-synced object is rate limited as a factor of the data size. The more it sends, the more its send rate is limited. Scripts can call RequestSerialization as often as they want, but Udon will wait until enough time has passed before calling OnPreSerialization, sending the data, and calling OnPostSerialization with the result.

Manual sync is limited to **280,496 bytes** per serialization.

## Synced Variables
These variables are available for syncing across the network.

:::note
In the lists below, 'size' refers to the **approximate** size in memory. When networked, the data is serialized, which may lead to more data being transmitted. For example, syncing a `bool` will send **at least** 1 byte of data (instead of 1 bit) in addition to any networking overhead.
To find out how many bytes of serialized data were, use `byteCount` in the [`OnPostSerialization`](/worlds/udon/networking/network-components/#onpostserialization) event.
:::

### Boolean  types
| Type | Size    |
| ---- | ------- |
| bool | 1 byte  |
### Integral numeric types
| Type   | Range                           | Size    |
|--------|---------------------------------|---------|
| sbyte  | -128 to 127                     | 1 byte  |
| byte   | 0 to 255                        | 1 byte  |
| short  | -32,768 to 32,767               | 2 bytes |
| ushort | 0 to 65,535                     | 2 bytes |
| int    | -2,147,483,648 to 2,147,483,647 | 4 bytes |
| uint   | 0 to 4,294,967,295              | 4 bytes |
| long   | -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 | 8 bytes |
| ulong  | 0 to 18,446,744,073,709,551,615 | 8 bytes |
### Floating-point numeric types
| Type   | Approximate range             | Precision     | Size    |
|--------|-------------------------------|---------------|---------|
| float  | ±1.5 x 10^(−45) to ±3.4 x 10^(38)   | ~6-9 digits   | 4 bytes |
| double | ±5.0 × 10^(−324) to ±1.7 × 10^(308) | ~15-17 digits | 8 bytes |
### Vector mathematics types and structures (Unity)
| Type        | Range         | Size     |
|-------------|---------------|----------|
| [Vector2](https://docs.unity3d.com/ScriptReference/Vector2.html)   | same as float | 8 bytes  |
| [Vector3](https://docs.unity3d.com/ScriptReference/Vector3.html)   | same as float | 12 bytes  |
| [Vector4](https://docs.unity3d.com/ScriptReference/Vector4.html)   | same as float | 16 bytes |
| [Quaternion](https://docs.unity3d.com/ScriptReference/Quaternion.html)| same as float | 16 bytes  |
### Color structures
| Type     | Range / Precision | Size    |
|----------|-------------------|---------|
| [Color](https://docs.unity3d.com/ScriptReference/Color.html)  | same as float     | 16 bytes |
| [Color32](https://docs.unity3d.com/ScriptReference/Color32.html)| same as byte      | 4 bytes |
### Text types and structures
| Type   | Range            | Size           |
|--------|------------------|----------------|
| char   | U+0000 to U+FFFF | 2 bytes        |
| string | same as char     | 2 bytes / char |
### Other structures
| Type   | Range            | Size           |
|--------|------------------|----------------|
| [VRCUrl](#vrcurl) | U+0000 to U+FFFF | 2 bytes / char |


---

If you have multiple UdonBehaviours on an object, the sync method will default to the most restrictive settings - a Manual UdonBehaviour and a Continuous one on the same object will both act as manual.

### Prioritization of visible objects

Udon's networking prioritizes synchronized game objects that are currently visible to the local user.

Udon *periodically* checks the visibility of all mesh renderer children of synchronized objects. This is used in the quality of service behaviour of Udon's network load balancing.

---

## Document: network-id-utility.md

Path: /worlds/udon/networking/network-id-utility.md
# Network ID Utility
A network ID is the identifier that is used to determine which object is which when it comes to networking. In most cases, you don’t need to worry about this, but it can come up when working with cross-platform worlds where players are technically loading two different versions of your world. 

Network IDs are the link between those different versions, to make sure that everybody is seeing the same thing and that the data is being transmitted to the correct objects.

To be more specific, a network ID is simply a number assigned to a GameObject. For example, let's assume you have a beach ball with the ID 1 and an ice cream cone with the ID 2. If these get mixed up, then you may try to kick around a beach ball while somebody else sees you kicking around an ice cream!

To deal with these potential issues and to make sure that your different scenes are in sync, we have created a network ID utility.

## Network ID Import and Export Utility

This utility allows you to save and transfer network IDs between scenes or projects. It can be found in the Unity Editor, under `VRChat SDK/Utilities/Network ID Import and Export Utility`. 
:::note

You should only need to use this utility if you are developing a cross-platform world and your different versions are in different scenes or projects.
:::

[IMAGE: network-id-utility-9936cee-image1.png]

When using this tool, you will see a list of all your network IDs in the entire scene. If you don’t have this yet, you can click Regenerate Scene IDs.
[IMAGE: network-id-utility-05130bf-image4.png]

When you are ready to transfer network IDs from one scene to another, click on the **Export** button to save the file somewhere. Then go to the other scene and click **Import**, and select that file.

**Network IDs in this format are saved as a path to the object.** As such, try to keep the path to each object the same between your scenes. Other objects in the scene that do not have any networking (such as meshes) do not matter and they can be different between your scenes, as long as they do not conflict with something that does need to be synced.
[IMAGE: network-id-utility-3b30a4e-image5.png]

If everything matches between your two scenes, you should see one big block with an **Accept All** button. Go ahead and click that, and you’re good to go!

## Resolving Conflicts

There are several conflict resolution tools within this utility.
[IMAGE: network-id-utility-22a9bcf-image3.png]

Here is an example of an object that exists in the file but does not exist in the scene. The file says that there is a network ID at this path, but it can’t find an object with that path. At this point, you can choose to either ignore it or specify a different object. If you know for sure that this is an object which doesn’t need to exist in this scene, then you can safely ignore it. However, if it is an object that should exist in your scene but simply has a different name, then you can select it. Once you’ve resolved this conflict, it will move down to the section where you can accept the network ID.
[IMAGE: network-id-utility-c5175f8-image2.png]

Here's another example where an object says it has the network ID of 25, but the file says that a different path should have 25. 

This, and many other odd situations, can only happen if the scene has existing network IDs before you tried to import a new file on top. If you are copying IDs between scenes, then most likely you will want to clear IDs before importing so that you don’t get this issue. However, these options do exist in case you need to do something very specific like attempt to repair a scene without breaking some existing network IDs.

If you need to resolve these conflicts, you can choose to either click the Ignore All button which will not touch the scene at all, or you can hand-pick which one gets the ID. When you click the “Select” button that will resolve the conflict by applying the ID to the object that you have selected. This can resolve one or more conflicts, so don't be surprised if many conflicts disappear when you resolve just one.

---

## Document: network-stats.md

Path: /worlds/udon/networking/network-stats.md
# Network Stats
A number of networking stats are available to Udon via the `VRC.SDK3.Network.Stats` static class.

## Global Network Statistics

`ThroughputPercentage` - a running average of the amount of allowed output data throughput currently in use.

`RoundTripVariance` - the statistical variance in transport time to our servers and back again.

`RoundTripTime` - the current time it takes for our servers to respond to a message.

`BytesInMax` - the maximum bytes received in a second.

`BytesOutMax` - the maximum bytes sent in a second.

`BytesOutAverage` - the running average of bytes sent per second.

`BytesInAverage` - the running average of bytes received per second.

`HitchesPerNetworkTick` - a running average the recorded number of missing samples.

`Suffering` - a measure of the number of queued outbound messages.

`TimeInRoom` - the length of time spent in the current instance.

## Per Game Object and Per Player Statistics

All game object statistics will return the default value if the object is not synchronized over the network, or is not in any other way networked.

`UpdateInterval` - the running average of time between the sending of network messages for this object.

`ReceiveInterval` - the running average of time between the receipt of network messages for this object.

`FinalDelay` - the synchronization time adjustment for the object.

`Group` - all objects are grouped with nearby relevant objects for the purposes of network synchronization; this number represents the group the object is currently associated with.

`GroupDelay` - the running average of the synchronization adjustment for all objects in the object's associated group.

`Sleeping` - true if the object is at rest and not sending or receiving network messages.

`Size` - the size, in bytes, of the most recent network message associated with this object.

`BytesPerSecondAverage` - the running average of the network throughput for the object, in bytes.

`TotalBytes` - the total network data consumption for the object.

`ReliableEventsInOutboundQueue` - the number of manual synchronization and other reliable events currently enqueued to send for the object.

`LastSendTime` - the last time a message was sent on behalf of the object.

`LastReceiveTime` - the last time a message was received for the object.

---

## Document: ownership.md

Path: /worlds/udon/networking/ownership.md
# Object Ownership

## Introduction
In VRChat, every networked GameObject has an owner. Ownership determines which player can modify and update a networked object. Understanding and managing ownership is crucial for properly synchronizing objects across all players in an instance.

## How Ownership Works
- The **first player** to join an instance becomes the owner of all networked objects by default.
- Ownership can be **transferred** from one player to another dynamically.
- Only the **owner** of a networked object can modify its synchronized Udon variables.
- If the owner leaves the instance, VRChat **automatically assigns** a new owner.

## Transferring Ownership
You can transfer ownership of an object using Udon:

```cs
Networking.SetOwner(VRCPlayerApi player, GameObject obj);
```

### Example: Changing Object Ownership
If you want a player to take ownership of an object when they interact with it:

```cs
public override void Interact()
{
    Networking.SetOwner(Networking.LocalPlayer, gameObject);
}
```

After this function runs, the local player will become the new owner of the object.

## Ownership Events
VRChat provides two key events related to ownership:

### OnOwnershipRequest

This event is called **before** ownership is transferred, allowing you to **approve or reject** the request.

```cs
public override bool OnOwnershipRequest(VRCPlayerApi requestingPlayer, VRCPlayerApi newOwner)
{
    return true; // Approve transfer
}
```

### OnOwnershipTransferred
Triggered when ownership of an object changes. You can use this to update UI elements or other behaviors when ownership shifts.

```cs
public override void OnOwnershipTransferred(VRCPlayerApi newOwner)
{
    Debug.Log($"New owner: {newOwner.displayName}");
}
```

## Transfer Events Diagram
This image shows the order of events so you can understand the steps involved in successfully transferring ownership of an object.

[IMAGE: Image]

## The Instance Master

The instance master is the player that owns any object that never had its ownership manually set or transferred. You can check if a player is the master via [`VRCPlayerApi.isMaster`](/worlds/udon/players/#get-ismaster).

Whether a player is the instance master should _not_ be used as a way to gate access to certain features of a world. For that, consider using "instance owner" instead.

The master player selection follows these rules:

- There will always be a valid master player in an instance.
- The first player to enter a previously empty instance will become the initial master.
- The master player changes when the current master leaves the instance.
	- The master player may also change if they're on Android and kept VRChat in the background for too long.
- When the current master leaves, a new master is chosen from the other players in the instance before `OnPlayerLeft` is called.
- You must not rely on any particular player becoming master. The new master player will be chosen based on various criteria on the server side (platform, network conditions, etc.).

These are the _only_ guarantees VRChat currently makes about network master behaviour. Any other observed behaviour is subject to change.

:::note Don't rely on master if you can avoid it!

It is recommended to use ownership checks for your networking logic instead of checking for instance master wherever possible.
There are scenarios where a master player might become unresponsive for a while, and events during that time might not be executed.
:::

## Best Practices
- If you want a player to be able to change a variable on an object, make sure to check or request ownership first.
- Ensure that ownership-related logic accounts for **player disconnects** and **late joiners**.
- Avoid relying on **Instance Master** if you can — use proper ownership handling instead.

## Next Steps
For further details, explore these networking topics:
- [Using Variables for Syncing](/worlds/udon/networking/variables)
- [Using Events for Syncing](/worlds/udon/networking/events)
- [Debugging Networked Objects](/worlds/udon/networking/debugging)



---

## Document: performance.md

Path: /worlds/udon/networking/performance.md
# Performance Considerations

## Introduction
Efficient networking is key to smooth multiplayer experiences in VRChat. Poorly optimized networked objects can lead to increased bandwidth usage, lag, and desynchronization issues. This guide provides best practices to ensure your networking logic is optimized.

## When to Use Variables vs. Events

### **Variables (Synced Data)**
Use synced variables for persistent states that need to be replicated across all players, such as:
- Player scores in a game.
- A door’s open/close state.
- Any data which needs to be available for [late joiners](/worlds/udon/networking/late-joiners).

#### **Best Practices:**
- Use **Continuous Sync** only when small updates are frequent (e.g., a progress bar).
- Use **Manual Sync** for data that must be accurate at all times (e.g., leaderboards).
- Avoid overusing synced variables, as excessive sync messages can cause bandwidth spikes.

### **Events (Temporary Actions)**
Use events for one-time actions that do not need to be persistent, and do not need to be received by late joiners such as:
- Playing an animation when a button is pressed.
- Firing a gun or triggering a sound effect.
- Spawning a temporary visual effect.

#### **Best Practices:**
- Use `SendCustomNetworkEvent(NetworkEventTarget.All, "EventName")` sparingly.
- Avoid using events for state persistence (e.g., setting a door to open state without synced variables).
- Consider local-only logic for effects that don’t need to be networked.

## Reducing Bandwidth Usage
### **Avoid Unnecessary Syncing**
- **Limit networked object updates**: Only send updates when values change significantly.
- **Optimize physics interactions**: Do not network rigidbodies unless necessary.
- **Use interpolation/extrapolation** to smooth movement instead of sending frequent position updates.

### **Optimizing Variable Syncing**
- **Group related variables** into arrays when possible.
- **Minimize float precision** (e.g., avoid syncing unnecessarily high-precision values).
- **Use binary flags** when syncing multiple boolean values.

## Best Practices for Ownership & Object Sync
- Only transfer ownership when required (e.g., for interactive objects like pickups).
- Avoid frequent ownership swaps, as they introduce latency and potential desync.

## Testing & Debugging Performance
- **Use the debug GUI (`--enable-debug-gui`)** to monitor bandwidth and sync behavior.
- **Test in real multiplayer conditions** to observe network behavior in different latency environments.
- **Profile network messages** to ensure minimal redundant data transmission.

## Next Steps
For further insights into optimizing networking, explore these related guides:
- [Debugging Networked Objects](/worlds/udon/networking/debugging)
- [Object Ownership & Transfers](/worlds/udon/networking/ownership)
- [Using Variables for Syncing](/worlds/udon/networking/variables)



---

## Document: variables.md

Path: /worlds/udon/networking/variables.md
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Network Variables

Network variables (also known as synced variables) allow Udon scripts to share data across all players in a VRChat instance. Unlike network events, which trigger once and do not persist, network variables ensure that all players—including late joiners—see the correct state of an object.

This guide covers how network variables work, when to use them, and best practices for keeping your networking efficient.

## How Synced Variables Work

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

VRChat synchronizes variables if you tick the "synced" checkox.

[IMAGE: An Udon Graph screenshot showing the OnPlayerLeft event connected to an IsValid node.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

VRChat synchronizes variables marked with the `[UdonSynced]` attribute.

```cs
[UdonSynced] private string score;
```

</TabItem>
</Tabs>

Synced variables behave differently than other variables:

- If your UdonBehaviour uses [manual sync](/worlds/udon/networking/network-details/#manual-synchronization), it must call `RequestSerialization()` to synchronize the variable from the owner to all players.
- If your UdonBehaviour uses [continuous sync](/worlds/udon/networking/network-details/#continuous-synchronization), variables will update for all players automatically.
- Your script must perform an [ownership transfer](/worlds/udon/networking/ownership) to allow another player to modify synced variables.
- [Late joiners](/worlds/udon/networking/late-joiners) receive the latest state of the variable, just like other users in the instance. This works regardless of sync type, you do not need to manually call `RequestSerialization` when a user joins.
- Not all types of variables can be synced. For example, you cannot sync references to scene objects. Supported types are listed [here](/worlds/udon/networking/network-details#synced-variables).

## Types of Variable Syncing

There are two types of syncing available:

### **1. Continuous Sync**
- Updates automatically when the owner changes the value.
- Best for frequently updated values (e.g., a progress bar, a player position tracker).
- Can apply interpolation to smooth changes between updates.
- Does not require calling `RequestSerialization()` - updates will be sent out regularly.

### **2. Manual Sync**
- Requires calling `RequestSerialization()` to send data updates.
- Best for crucial values that do not change often (e.g., a scoreboard, a game state variable).
- Helps reduce unnecessary network traffic.

### Setting the Sync Mode

[IMAGE: Showing how to set the Sync Type in the inspector]

You can use the Synchronization dropdown in the inspector for an UdonBehaviour to set its sync mode, as shown in the image above.

For UdonSharpBehaviours, you can alternatively use the [UdonBehaviourSyncMode](/worlds/udon/udonsharp/attributes/#udonbehavioursyncmode) attribute to control this from a script, as shown below.

```cs
[UdonBehaviourSyncMode(BehaviourSyncMode.Manual)]
public class Example : UdonSharpBehaviour 
{
  // This class's sync mode is manual.
}
```


### Example: Using Manual Sync
```cs
[SerializeField, UdonSynced] private bool isDoorOpen;

public void ToggleDoor()
{
    isDoorOpen = !isDoorOpen;
    RequestSerialization(); // Manually send update to all players
}
```

## Handling Late Joiners with Variables

Make sure to learn about how to sync variables for [late joiners](/worlds/udon/networking/late-joiners)!

---

## Document: index.md

Path: /worlds/udon/persistence/index.md
# Persistence

## What is Persistence?

Persistence allows worlds to save high scores, inventories, the player's last position, currency, unlocks, preferences, and much more. When a player leaves a world and returns later, Udon can access their saved data.

This data is stored on VRChat's servers and is accessible on all platforms and in all instances of the same world. It is connected to the user's account, so if a player visits a world on a completely different device, Udon will still have access to that world's data.

One of the primary ways to use persistence is with [PlayerData](/worlds/udon/persistence/player-data). PlayerData is a key-value storage system associated with each player. Any script can access the data, and it's capable of storing all integer types, floats, doubles, vectors, colors, strings, and byte arrays.

Persistence also includes [PlayerObjects](/worlds/udon/persistence/player-object). Any game object with this component is automatically instantiated for each player. Udon scripts can be attached to PlayerObjects, and if a `VRCEnablePersistence` component is added to them then all synced data on those objects will persist. PlayerObjects also have many uses outside of persistence, serving a similar use-case as per-player object pools. They can be used for anything that should be tied to each player in the instance, such as health bars, colliders for combat systems, and robust networked systems without ownership transfers.

## Examples of using Persistence

You can find all our [Persistence Examples here](/worlds/examples/persistence).

## Persistent User Data

Data saved by Persistence is called "User Data." Persistence has two types of User Data that Udon can save and load from VRChat's servers:

- [PlayerData](/worlds/udon/persistence/player-data) is a key-value database that allows Udon scripts to save and load User Data.
- [PlayerObject](/worlds/udon/persistence/player-object) are GameObjects that automatically instantiate themselves for each player. All their synced Udon variables can be persistent, if marked with a `VRCEnablePersistence` component.

## Data storage in different environments

User Data is stored in different locations if you're testing your world during development: 

- **Uploaded World**:
	- Persistent data is stored on VRChat's servers connected to your account. You can visit your world on any device and the data will be available.
	- If you open VRChat multiple times on the same account in the same world at the same time, you may cause conflicts and accidently overwrite your own data.
- **[Local Test World](/worlds/udon/graph/#running-build--test)**
	- User Data is stored locally if you "Build & Test."
		- When you launch a test client, it starts with no User Data.
		- When you rejoin or "Build & Reload," User Data is **not** reset.
		- When you close a test client, it deletes its User Data.
	- If you set "Number of Clients" to two or higher, User Data is stored separately for each test client.
- **ClientSim**
	- Persistent data is stored in JSON files within your project
	- See [ClientSim Persistence documentation](/worlds/clientsim/) for more details.

## Limitations

Please consider the following limitations when using Persistence in your world:

- Each world may store 100 kilobytes(KB) of PlayerData and 100 KB of PlayerObject data per player on VRChat's servers.
	- VRChat stores User Data in a compressed format. If your world's data is easy to compress, you may be able to store more than 300 KB (compressed into 100 KB by VRChat).
	- You cannot save data that would cause you to exceed this limit. Instead, VRChat logs an error and your data won't be saved. Reduce the size of your data to avoid this.
- The local player's User Data must be saved before they leave the world. Persistent data cannot be saved in the local player's [OnPlayerLeft](https://creators.vrchat.com/worlds/udon/graph/event-nodes/#onplayerleft) event. 
- Persistent data cannot be shared between different worlds.
- Persistence does not have a feature for "save slots" built-in. However, world creators can use Udon to build a save slot system inside their worlds.

## Making Persistent Prefabs

When building prefabs that have persistent behavior, it's important to consider how they will interact with other prefabs in creators' projects.

First, consider using PlayerObjects rather than PlayerData, which are a better fit for _most_ prefabs. PlayerObjects are nicely contained within a Prefab's hierarchy and are a better fit for persist large amounts of data and/or data that changes frequently. Remember that 
when you change **any** PlayerData for the local player, **all** of their PlayerData is sent, including data that hasn't changed. Every prefab in a world which uses PlayerData will add to this collection and require sending each time, which could quickly expand the networking usage in a world and could lead to bandwidth issues.

If PlayerData is _still_ a better place for some of your prefab's data, consider adding a prefix to all the keys your prefab uses. For example, Momo's Persistent Post-Processing settings could pick the prefix "Momo-PPP-" and then use the keys:
- Momo-PPP-BloomAmount
- Momo-PPP-Vignette
- Momo-PPP-Weight

This approach will greatly reduce the likelihood of the name colliding with another Prefab. The "Weight" key above, for example, could easily run into an issue if you had two different prefabs with a "Weight" parameter, but it's not very likely that another prefab will use "Momo-PPP" as their prefix.

## Reset User Data

:::danger

This is irreversible! You cannot restore your user data after deleting it.

:::

You can delete your own persistent user data. This allows you (or your players) to "start over" or to resolve technical issues.

There are multiple ways to reset user data, both in VRChat and on our website.
### In VRChat

Resetting your user data in VRChat is the easiest option.

#### A specific world

You can delete your User Data for any world by following the steps below:

1. Select a world in VRChat's main menu.
2. Scroll down to the "Actions" section.
3. Select "Reset User Data."
    - This button only appears if you have User Data for this world.
5. Select "YES, RESET."

If you're currently in a persistent world, you may need to leave or rejoin the world before you can reset user data.

#### All worlds

You can also delete your User Data for all worlds that you have visited by following the steps below:

1. Open your settings in VRChat's main menu.
2. Select the "Debug" section.
3. Scroll down to the "User Data" section.
4. Select "Reset All User Data"
5. Select "YES, RESET."

### On the VRChat Website

You can reset your User Data on the VRChat website. Please ensure that you have a VRChat account. If you only have a Meta, Pico, or Viveport account, you must [link it to a VRChat account](https://help.vrchat.com/hc/en-us/articles/360062659053-I-want-to-turn-my-platform-account-through-Steam-Meta-Pico-or-Viveport-into-a-VRChat-account) first.

#### A specific world

You can reset your own User Data for a specific world by following the steps below:

1. Open [a world on VRChat.com.](https://vrchat.com/home/world/wrld_4432ea9b-729c-46e3-8eaf-846aa0a37fdd)
2. Scroll down to the "User Data" section
    - This section will not exist if you do not have User Data for that world.
4. Click **Reset User Data**.
5. After reading the warning, click **Yes** to confirm.

#### All worlds

You can reset your own User Data for all worlds you visited by going to the VRChat website:

1. Open the [settings page on VRChat.com.](https://vrchat.com/home/profile).
2. Scroll down to the **Persistent Data** section.
3. Click **Reset All User Data**.
4. After reading the warning, click **Yes** to confirm.


---

## Document: player-data.md

Path: /worlds/udon/persistence/player-data.md
# PlayerData


import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

PlayerData is a [key-value database](https://en.wikipedia.org/wiki/Key%E2%80%93value_database) for storing [persistent data](/worlds/udon/persistence/) about players, such as their score in a game or their preferences in a world.

## Setup

In order for an UdonBehaviour to use PlayerData, you simply need to use the various PlayerData functions described below. Any Udonbehaviour can access those functions anywhere, at almost any time.

## Best Practices

* When using `OnPlayerDataUpdated`, consider whether your script can be limited to trigger on changes for the local player, or if it needs to trigger for every remote player, as well. 
    * For example - a user setting for video player volume can just update for the local player, but a co-op dog-petting game that tallies a "total dogs pet" score for the instance can react to the increase of any player's score to increment the global score.
* Wait for the `OnPlayerRestored` event before using Player Data. `OnPlayerRestored` indicates that the player's saved data has been loaded and is safe to access with Udon. This event will run even if you have no save data.
* Iterating through all Player Keys can be slow if you have many of them. As a general guideline, use the `TryGet` methods to directly check the values of specific keys if you're only checking a few keys or you have more than ten keys to check through.

## Networking

PlayerData does not rely on an UdonBehaviour's [synchronization](/worlds/udon/networking/) settings because it is not tied to any one specific UdonBehaviour. Setting a script to "None" instead of "Manual" or "Continuous" will not stop that script from being able to access and modify PlayerData, nor will it negatively affect the operation of PlayerData as a whole.

When an UdonBehaviour sets a value in PlayerData, PlayerData automatically synchronizes that value. Internally, PlayerData sends the value in a similar manner as manual synchronization with the `RequestSerialization` event. This means that an UdonBehaviour can set multiple PlayerData keys simultaneously and send them together. The UdonBehaviour won't need to send each key separately. Similarly, if an UdonBehaviour sets a key to one value and then immediately changes to something else, remote users don't receive the intermediate value. If data is changed too quickly, only the final state is received by remote users.

PlayerData has a similar [bandwidth cost](/worlds/udon/networking/network-details) as one UdonBehaviour with [synchronization](/worlds/udon/networking/) set to "Manual."

All UdonBehaviours in your world share access to your world's PlayerData. When you set a PlayerData key, any UdonBehaviour in your world can access it. PlayerData is not 'separated' between different UdonBehaviours.

When you change **any** data for the local player, **all** of their PlayerData is sent, including data that hasn't changed. You are unlikely to run into [Udon's bandwidth limits](/worlds/udon/networking/network-details#bandwidth-limits) if you have a small amount of data that updates very frequently or a large amount of data that updates slowly. But if you use PlayerData to synchronize **large amounts** of data and also **high-frequency** data, you should consider moving one of those to a [player object](/worlds/udon/persistence/player-object). You can use player objects to sync persistent variables, but each object is synced separately. This allows you to separate your fast data from your big data, reducing your world's networking bandwidth.

## Events

| Event | Output | Notes |
| -------- | -------- | -------- |
| OnPlayerDataUpdated | VRCPlayerApi player, PlayerData.Info[] infos | Triggered at the end of the frame if the PlayerData of any player has changed or been received.<br/>Provides the VRCPlayerApi of the player associated with that data, along with an array of information on all the keys in that data. The information in the array includes both the keys used for the data and the state of that data, such as whether it was changed, added, or unchanged. |
| [OnPlayerRestored](/worlds/udon/graph/event-nodes#onplayerrestored) | VRCPlayerApi player | Triggered after a VRChat player's persistent data has been loaded.

:::info Watch out for timing issues

Wait for the `OnPlayerRestored` event before you read or write PlayerData.

When a player joins, the [OnPlayerJoined](/worlds/udon/graph/event-nodes#onplayerjoined) event is called. However, it may take some additional time before their PlayerData is received. If you set PlayerData too early, it may be overwritten when the persistent data is received. 

:::

## PlayerData Info

The `OnPlayerDataUpdated` event provides a `PlayerData.Info` array. This array contains all the current PlayerData keys associated with that player. Each element contains the following information:

| Property | Type | Notes |
| -------- | -------- | -------- |
| Key | String | The string associated with the PlayerData key, which can be used in queries and mutators. |
| State | Enum | The most recent state of the PlayerData Key at the point in which this OnPlayerDataUpdated has happened. |

The `State` enum describes these possible states:

| State     | Index | Notes                                                                                                                                                                                                                                       |
| --------- | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Unchanged | 0     | Indicates that the data in this key has not changed since the last update.                                                                                                                                                                  |
| Added     | 1     | Indicates that this key has been added since the last update.                                                                                                                                                                               |
| Removed   | 2     | Indicates that this key has been removed since the last update. Keys which have been removed will only appear in this array once with this state, and the next time they will be gone.*<br/>Note: Removing keys is not currently possible.* |
| Changed   | 3     | Indicates that the data in this key has been changed since the last update.                                                                                                                                                                 |
| Restored  | 4     | Indicates that this key has been restored from persistent records. This only happens when you join the instance after having been there before.                                                                                             |

## Best Practices

* When using `OnPlayerDataUpdated`, consider whether your script can be limited to trigger on changes for the local player, or if it needs to trigger for every remote player, as well. 
    * For example - a user setting for video player volume can just update for the local player, but a co-op dog-petting game that tallies a "total dogs pet" score for the instance can react to the increase of any player's score to increment the global score.
* Wait for the `OnPlayerDataRestored` event before using PlayerData. `OnPlayerRestored` indicates that the player's saved data has been loaded and is safe to access with Udon.
* Iterating through all Player Keys can be slow if you have many of them. As a general guideline, use the `TryGet` methods to directly check the values of specific keys if you're only checking a few keys or you have more than ten keys to check through.

## Methods

### Queries

Use these methods to retrieve more information about the value associated with a key. They are helpful to gather more information about what exists at a key before attempting to do something with it.

| Function | Input | Output | Notes |
| -------- | -------- | -------- | ------- |
| HasKey | VRCPlayerApi player, string key     | bool value     | Returns true if a value exists in PlayerData at that key |
| GetType | VRCPlayerApi player, string key | Type | Gets the type of the value contained in PlayerData at that key |
| TryGetType | VRCPlayerApi player, string key | out Type t, bool success | Gets the type of the value contained in PlayerData at that key. Returns false if that key does not exist |

### Mutators

Use these methods to save PlayerData for the local player. It is not possible to set a remote player's data.

Values can be overwritten, even if they previously had a different type. **Keys cannot be deleted after being written.**

| Function      | Input                        |
| ------------- | ---------------------------- |
| SetString     | string key, string value     |
| SetBool       | string key, bool value       |
| SetSByte      | string key, sbyte value      |
| SetByte       | string key, byte value       |
| SetBytes      | string key, byte[] value     |
| SetShort      | string key, short value      |
| SetUShort     | string key, ushort value     |
| SetInt        | string key, int value        |
| SetUInt       | string key, uint value       |
| SetLong       | string key, long value       |
| SetULong      | string key, ulong value      |
| SetFloat      | string key, float value      |
| SetDouble     | string key, double value     |
| SetQuaternion | string key, Quaternion value |
| SetVector4    | string key, Vector4 value    |
| SetVector3    | string key, Vector3 value    |
| SetVector2    | string key, Vector2 value    |
| SetColor      | string key, Color32 value    |
| SetColor32    | string key, Color32 value    |

### Accessors

Use these methods to get PlayerData for any player in the instance.

If a key does not exist, the default value for that type is returned. For example, calling `PlayerData.GetInt()` would return `0`.

Default values are also returned when using the wrong accessor type, such as using `GetInt` on a key which contains a `string`.

If default values are undesirable, use `TryGet` or Queries to distinguish default values from missing keys. 

| Function | Input | Output |
| -------- | -------- | -------- |
| GetString | VRCPlayerApi player, string key | string value |  
| TryGetString | VRCPlayerApi player, string key | string value, bool success | 
| GetBool | VRCPlayerApi player, string key | bool value | 
| TryGetBool | VRCPlayerApi player, string key | bool value, bool success | 
| GetSByte | VRCPlayerApi player, string key | sbyte value | 
| TryGetSByte | VRCPlayerApi player, string key | sbyte value, bool success | 
| GetByte | VRCPlayerApi player, string key | byte value | 
| TryGetByte | VRCPlayerApi player, string key | byte value, bool success | 
| GetBytes | VRCPlayerApi player, string key | byte[] value | 
| TryGetBytes | VRCPlayerApi player, string key | byte[] value, bool value | 
| GetShort | VRCPlayerApi player, string key | short value | 
| TryGetShort | VRCPlayerApi player, string key | bool value | 
| GetUShort | VRCPlayerApi player, string key | ushort value | 
| TryGetUShort | VRCPlayerApi player, string key | ushort value, bool success | 
| GetInt | VRCPlayerApi player, string key | int value | 
| TryGetInt | VRCPlayerApi player, string key | int value, bool success | 
| GetUInt | VRCPlayerApi player, string key | uint value | 
| TryGetUInt | VRCPlayerApi player, string key | uint value, bool success | 
| GetLong | VRCPlayerApi player, string key | long | 
| TryGetLong | VRCPlayerApi player, string key | long value, bool success | 
| GetULong | VRCPlayerApi player, string key | ulong | 
| TryGetULong | VRCPlayerApi player, string key | ulong value, bool success | 
| GetFloat | VRCPlayerApi player, string key | float | 
| TryGetFloat | VRCPlayerApi player, string key | float value, bool success | 
| GetDouble | VRCPlayerApi player, string key | double | 
| TryGetDouble | VRCPlayerApi player, string key |  double value, bool success | 
| GetQuaternion | VRCPlayerApi player, string key | Quaternion | 
| TryGetQuaternion | VRCPlayerApi player, string key |  Quaternion value, bool success | 
| GetVector4 | VRCPlayerApi player, string key | Vector4 | 
| TryGetVector4 | VRCPlayerApi player, string key | Vector4 value, bool success | 
| GetVector3 | VRCPlayerApi player, string key | Vector3 | 
| TryGetVector3 | VRCPlayerApi player, string key | Vector3 value, bool success | 
| GetVector2 | VRCPlayerApi player, string key | Vector2 | 
| TryGetVector2 | VRCPlayerApi player, string key | Vector2 value, bool success | 
| GetColor | VRCPlayerApi player, string key | Color | 
| TryGetColor | VRCPlayerApi player, string key | Color value, bool success | 
| GetColor32 | VRCPlayerApi player, string key | Color32 | 
| TryGetColor32 | VRCPlayerApi player, string key | Color32 value, bool success | 

## Examples

### Persistent Jumps Counter

<Tabs>
<TabItem value="graph" label="Udon Graph">


[IMAGE: The persistent jump counter example script in the Udon Graph.]


</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
using TMPro;
using UdonSharp;
using VRC.SDK3.Persistence;
using VRC.SDKBase;
using VRC.Udon.Common;

public class JumpCounter : UdonSharpBehaviour
{
    public TextMeshProUGUI jumpText;
    private const string JumpsKey = "jumps";
    public override void InputJump(bool value, UdonInputEventArgs args)
    {
        if (value)
        {
            AddJump();
        }
    }

    public override void OnPlayerDataUpdated(VRCPlayerApi player, PlayerData.Info[] infos)
    {
        if (player.isLocal)
        {
            UpdateTextComponent();
        }
    }

    private void AddJump()
    {
        var currentJumps = PlayerData.GetInt(Networking.LocalPlayer, JumpsKey);
        PlayerData.SetInt(JumpsKey, currentJumps + 1);
    }
    
    private void UpdateTextComponent()  
    {  
        jumpText.text = $"Jumps: {PlayerData.GetInt(Networking.LocalPlayer, JumpsKey)}";    
    }
}
```

</TabItem>
</Tabs>


---

## Document: player-object.md

Path: /worlds/udon/persistence/player-object.md
# PlayerObject

PlayerObjects allow you to automatically give each player who joins your world a copy of a GameObject, such as a flashlight, a health bar, or a sword.

- VRChat automatically spawns a copy of the GameObject for each player when they join your world.
- The copy includes all components and child GameObjects.
- The copy spawns with the same position, rotation, scale and parent as the original [PlayerObject Template](#playerobject-templates).


## Setup

Follow the instructions below to create a simple PlayerObject. When a player joins an instance, VRChat will spawn the PlayerObject for them.

1. Create a GameObject in your scene's hierarchy.
2. Add the `VRCPlayerObject` component 
	- This turns your GameObject into a PlayerObject [template](#playerobject-templates).
3. (Optional) Add an `UdonBehaviour` component to the GameObject (or one of its children).
4. (Optional) Add the `VRCEnablePersistence` to the same GameObject as the `UdonBehaviour` if you want synced variables to persist.

## Loading Persistent User Data

VRChat automatically loads Persistent User Data on PlayerObject that fulfill these conditions:

- The PlayerObject (or a child GameObject) has an `UdonBehaviour` component.
- The `UdonBehaviour` has synced variables.
- The `UdonBehaviour`'s GameObject also has a `VRCEnablePersistence` component.

Use the [`OnPlayerRestored`](/worlds/udon/graph/event-nodes#onplayerrestored) to detect that a PlayerObject has finished loading User Data. This event is executed once for every player in the instance, including the owner of the PlayerObject.

OnPlayerRestored includes a reference to the player whose data was just restored. You can use this to make the Owner of the GameObject initialize variables or execute events.

In the `Start` and `OnDeserialization` events, ownership is guaranteed to be correct. However, you should avoid reading or writing a PlayerObject's User Data before the `OnPlayerRestored` event. You might accidently read or write outdated User Data, and your changes may be overwritten when User Data is received from VRChat's server.

## Ownership

When players own a PlayerObject, they also own all GameObjects with synced `UdonBehaviours` within their PlayerObject. They cannot transfer them to anyone else.

This is convenient for giving players tools or pickups that can never be "stolen" by other players. You can guarantee that they will always own their own PlayerObjects. 

## PlayerObject Templates

PlayerObject templates are the original GameObjects that you create in the editor by adding a `VRCPlayerObject`. VRChat copies your Template to spawn PlayerObjects.

Components on Templates and PlayerObjects can contain references to other components: 
- Templates can reference their own components or child components.
- Templates can reference other components in your scene.
- Components in your scene can **not** reference Templates.
	- Instead, your scene objects must use direct references to spawned PlayerObjects.
	- Templates are automatically disabled by VRChat, but still exist in the scene.
	- Do not modify, destroy, or edit your Template after it has been disabled! This may cause errors or unexpected behaviour.
  
Use the following methods in your scripts to find references to PlayerObjects and their components:
- Use `Networking.GetPlayerObjects` to get all the PlayerObjects associated with a player, then sort through that array and find the specific thing you are looking for.
- Use `Networking.FindComponentInPlayerObjects` to translate a reference from a PlayerObject template into a specific player's PlayerObject.
- See the [examples](#examples) below.

## Events

There is only one event related to PlayerObjects:

| Event | Output | Notes |
| -------- | -------- | -------- |
| [OnPlayerRestored](/worlds/udon/graph/event-nodes#onplayerrestored) | VRCPlayerApi player | Triggered after all of a VRChat player's persistent data has been loaded. |

## Methods

PlayerObject methods are in the `VRC.SDKBase.Networking` namespace.

| Function | Input | Output | Notes |
| -------- | -------- | -------- | ------- |
| GetPlayerObjects | VRCPlayerApi target | GameObject[] objects | Returns an array of all the PlayerObjects associated with the player provided |
| FindComponentInPlayerObjects | VRCPlayerApi player, Component referenceComponent | Component | Using the `referenceComponent` which must be a child of a PlayerObject template, this function returns the corresponding component associated with the provided player. |

Utility wrappers to these methods are found on the `VRCPlayerApi` class.

| Function | Input | Output | Notes |
| -------- | -------- | -------- | ------- |
| GetPlayerObjects | | GameObject[] objects | Returns an array of all the PlayerObjects associated with the provided player. |

## Examples

### Finding a custom script on a PlayerObject

This example automatically looks through all PlayerObjects and finds a specific component that you're looking for. Replace `CustomPlayerObjectScript` with the type of component that you want to find.

```cs
public CustomPlayerObjectScript Find(VRCPlayerApi player)
{
    var objects = Networking.GetPlayerObjects(player);
    for (int i = 0; i < objects.Length; i++)
    {
        if (!Utilities.IsValid(objects[i])) continue;
        CustomPlayerObjectScript foundScript = objects[i].GetComponentInChildren<CustomPlayerObjectScript>();
        if (Utilities.IsValid(foundScript)) return foundScript;
    }
    return null;
}
```

### Finding a component on a PlayerObject

This example will use the `FindComponentInPlayerObjects` function to translate a reference from the PlayerObject template into a reference from a specific player's PlayerObject. 

```cs
public Transform referenceChildTransform; // A reference to a Transform on a PlayerObject or a child of a PlayerObject

public void Find(VRCPlayerApi targetPlayer)
{
    Component foundComponent = Networking.FindComponentInPlayerObjects(targetPlayer, referenceChildTransform);
    // foundComponent will be of type Transform and will correspond to the targetPlayer's PlayerObject that matches the reference.
}
```


---

## Document: accessing-drones.md

Path: /worlds/udon/players/drones/accessing-drones.md
---
title: "Getting Drones"
slug: "getting-drones"
hidden: false
createdAt: "2025-03-05T14:52:00.02Z"
updatedAt: "2025-03-05T14:52:00.02Z"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Methods

### VRCPlayerApi.GetDrone
Gets the Drone API that belongs to the target player.

**Output**
- `VRCDroneApi`


### VRCDroneApi.GetPlayer
Gets the owning player for the target drone.

**Output**
- `VRCPlayerApi`

## Events

### OnDroneTriggerEnter
This event is invoked when a Drone enters a trigger.

**Output**
- `VRCDroneApi`


### OnDroneTriggerExit
This event is invoked when a Drone exits or is despawned inside of a trigger.

**Output**
- `VRCDroneApi`


### OnDroneTriggerStay
This event is invoked when a Drone stays inside of a trigger.

**Output**
- `VRCDroneAPi`


---

## Document: drone-information.md

Path: /worlds/udon/players/drones/drone-information.md
---
title: "Drone Information"
slug: "drone-information"
hidden: false
createdAt: "2025-03-05T14:52:00.02Z"
updatedAt: "2025-03-05T14:52:00.02Z"
---
## Drone API

### GetPlayer

Gets the owner of the Drone.

**Output**
- `VRCPlayerApi`: The owning player object.  

### IsDeployed

Get whether the Drone is deployed in the world.

**Ouput**
- `bool`: Whether the drone is deployed.

### GetPosition

Gets the position of the Drone.

**Output**
- `Vector3`: The drone's position in world space.  

### TryGetPosition

Try to get the position of the Drone.

**Out**
- `Vector3 position`: The drone's position in world space.

**Output**
- `bool`: indicates whether it was successful

### GetRotation

Gets the rotation of the Drone.

**Output**
- `Quaternion`: The drone's rotation in world space.  

### TryGetRotation

Try to get the rotation of the Drone.

**Out**
- `Quaternion rotation`: The rotation of the Drone in world space.

**Output**
- `bool`: indicates whether it was successful

### GetVelocity

Get the speed and direction of the drone's movement.

**Output**
- `Vector3 velocity`: The drone's velocity in world space.  

### TryGetVelocity

Try to get the speed and direction of the drone's movement.

**Out**
- `Vector3 velocity`: The drone's velocity in world space.

**Output**
- `bool`: indicates whether it was successful

### TeleportTo

Set the world position and rotation of the Drone.

**Input**
- `Vector3`: The drone's position in world space.  
- `Quaternion`: The drone's rotation in world space.  
- `bool` (optional): If set to false or left unset, remote users' drones will snap to the target values. If set to true, remote users' drones will smoothly lerp to the target values.

### SetVelocity

Set the speed and direction of the drone's movement.

**Input**
- `Vector3`: The drone's velocity in world space.  

---

## Document: index.md

Path: /worlds/udon/players/drones/index.md
---
sidebar_position: 1
---
# Drone API

You can use Udon to retrieve information about the player drones in your world instance.

Udon interacts with Drones through the `VRCDroneApi`. You can retrieve the `VRCDroneApi` object from each Player that is using it.

Your world can detect a Drone interacting with a Trigger Collider and execute the following events:

- [OnDroneTriggerEnter](/worlds/udon/players/drones/getting-drones#ondronetriggerenter)
- [OnDroneTriggerExit](/worlds/udon/players/drones/getting-drones#ondronetriggerexit)
- [OnDroneTriggerStay](/worlds/udon/players/drones/getting-drones#ondronetriggerstay)

See these pages for more details on working with Drones via Udon:
* [Getting Drones](/worlds/udon/players/drones/getting-drones)
* [Drone Information](/worlds/udon/players/drones/drone-information)

---

## Document: getting-players.md

Path: /worlds/udon/players/getting-players.md
---
title: "Getting Players"
slug: "getting-players"
hidden: false
createdAt: "2021-01-22T01:48:13.564Z"
updatedAt: "2021-11-12T01:23:15.713Z"
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

These nodes are useful for getting an individual Player, a group of them, or all of them.

### [Networking.get LocalPlayer](/worlds/udon/networking/network-components)
*VRCPlayerApi*

:::note

Please note that this function is a member of the Networking class, but it is being included here.

:::
The local player is the Player that this Udon script is currently running on-- alternately, the local player is *you*. It's very important to know yourself!

### GetPlayerCount
*int*

Gets the actual number of Players in the instance when it is called.

### GetPlayers
*VRCPlayerApi[]*

This is how you get all the Players in your world so you can go through them in a For Loop and apply settings, make changes, look for a particular name, etc. To use it, you *first need to create a VRCPlayerApi Array*.


<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: The bare minimum for a working call to GetPlayers. A better approach would be to construct VRCPlayerApi[] as a variable so you can reuse it.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
var players = new VRCPlayerApi[VRCPlayerApi.GetPlayerCount()];  
VRCPlayerApi.GetPlayers(players);
```

</TabItem>
</Tabs>



Above, you can see the bare minimum for a working call to GetPlayers. A better approach would be to construct VRCPlayerApi\[\] as a variable so you can reuse it.

### GetPlayerById
*int*

Get a VRCPlayerApi object for the given player Id if it exists.

### get playerId
*int*

Get the cached PlayerId, calls GetPlayerId if it hasn't been cached yet.

### GetPlayerId
*int*

Gets the Player's Network Id from the source.

## Player Tag System
This system is a quick-and-dirty way of assigning strings to players without creating your own variables and collections.

### SetPlayerTag / GetPlayerTag
Set: *string, string*

Get: *string*

Sets a string variable that you can look up later. For example, you could set the "role" of a player in a cooking game to "chef" or "customer". Then you could GetPlayerTag for "role" and get back either "chef" or "customer".

### ClearPlayerTags
*VRCPlayerApi*

Remove all tags that you've set on a Player.

### GetPlayersWithTag

:::caution

Not currently working. Returns a List, which is unavailable in Udon.

You will be able to pass in an array of VRCPlayerApi objects and a tag and the method will fill the array with Players who have that tag set.

:::

---

## Document: index.md

Path: /worlds/udon/players/index.md
---
sidebar_position: 1
---
# Player API

You can use Udon to retrieve information about players in your world instance.

Udon interacts with Players through the VRCPlayerApi. Each Player has a VRCPlayerApi Object, and your world fires the OnPlayerJoined / OnPlayerLeft events on any UdonBehaviours that listen for them when a player joins or leaves.

This page includes info on using some general player properties and methods. Since there are so many things you can do with the VRCPlayerApi object, we grouped some information together on the following pages:

* [Getting Players](/worlds/udon/players/getting-players)
* [Player Positions](/worlds/udon/players/player-positions)
* [Player Forces](/worlds/udon/players/player-forces)
* [Player Collisions](/worlds/udon/players/player-collisions)
* [Player Audio](/worlds/udon/players/player-audio)
* [Player Avatar Scaling](/worlds/udon/players/player-avatar-scaling)
* [Player Events](/worlds/udon/graph/event-nodes#player-events)

## Generally Useful Properties and Methods

### IsValid
*VRCPlayerApi, Boolean*

Before you try to get or set anything on a Player, check whether IsValid returns true. If a player has left since you saved a reference to them, this will return False. For easier use on the graph, search for the generic "IsValid" method which works for any Object, since it gives you separate flows for True and False.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: An Udon Graph screenshot showing the OnPlayerLeft event connected to an IsValid node.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
   public override void OnPlayerLeft(VRCPlayerApi player)  
   {  
	if (Utilities.IsValid(player))
	{
		// Player is valid
	}
	else
	{
		// Player is not valid
	}
}  
```

</TabItem>
</Tabs>



### EnablePickups
*VRCPlayerApi, Boolean*

Turn off the Player's ability to pickup and use VRCPickup objects in the world. This property is *on* by default, so you only need to use the method if you want to turn it off.

### get displayName
*VRCPlayerApi*

Get the name displayed for the Player (can be different than Username, which is used to log into VRChat and not exposed publicly)

### Get isLocal
in: *VRCPlayerApi*

out: *Boolean*

Tells you whether the given Player is the local one.

### Get isMaster
in: *VRCPlayerApi*

out: *Boolean*

Tells you whether the given Player is the [instance master](/worlds/udon/networking#the-instance-master).

### Get isInstanceOwner
in: *VRCPlayerApi*

out: *Boolean*

Tells you whether the given player is the current instance owner.

### Get isSuspended
in: *VRCPlayerApi*

out: *Boolean*

Tells you if the player's device is suspended. A device is suspended if it enters sleep mode or switches to a different app. While suspended, devices don't run Udon code or respond to network events until the player reopens VRChat.

Your code should account for any device becoming suspended at any time, regardless of platform. PC players currently never become suspended, but this should not be assumed.

Note that `isSuspended` is always `false` for the local player - Udon cannot run while the local player is suspended.

### GetPickupInHand
in: *VRCPlayerApi, Hand (none, left, right)*

out: *VRCPickup*

Gets the pickup a Player is holding in the specified hand. Only works for the Local Player. Returns null if no VRCPickup is found.

### IsOwner
in: *VRCPlayerApi, GameObject*

out: *Boolean*

Tells you whether a Player is the Owner of a given GameObject, important for Sync.

### IsUserInVR
in: *VRCPlayerApi*

out: *Boolean*

Tells you whether a Player is using a VR headset.

### PlayHapticEventInHand
*VRCPlayerApi, Hand, float, float, float*

Vibrate the Player's Haptic controllers if they have them. The float inputs should be in the range 0-1. *duration* is the amount of time that they vibrate, *amplitude* is the strength with which they vibrate, and *frequency* is the speed at which they vibrate. The feeling can vary quite a bit between controllers.

### UseAttachedStation
*VRCPlayerApi*

Makes the player get into the Station which is on the same GameObject as this UdonBehaviour.

### SimulationTime
*float*

The [simulation time](/worlds/udon/networking/network-components) of a player.

### UseLegacyLocomotion
*VRCPlayerApi*

**NOT RECOMMENDED** - Turns on legacy locomotion for this player, mimicking how players moved in VRChat's deprecated SDK2. After enabling legacy locomotion, it stays enabled until the user leaves your world.

## Language

### GetCurrentLanguage
*string*

Gets the selected language of the local user. The value is formatted in the RFC 5646 syntax. (`en`, `ja`, `es`, `zh-CN`, etc.)

### GetAvailableLanguages
*string[]*

Gets all available languages a player can select in VRChat's settings. The value is formatted in the RFC 5646 syntax. (`en`, `ja`, `es`, `zh-CN`, etc.)

---

## Document: player-audio.md

Path: /worlds/udon/players/player-audio.md
# Player Audio

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Players have two sources of audio: the voice coming through their microphone, and sounds attached to their Avatar. With Udon, you can change how a Player hears *other* players' voices and avatar sounds. For example, this code makes a player quieter by setting their gain to 5 dB (which is lower than the default of 15 dB):

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: Setting the player's voice gain in Udon Graph.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
somePlayer.SetVoiceGain(5);
```

</TabItem>
</Tabs>

Here are all the properties you can access:

## Voice

### Set Voice Gain
*in Decibels, Range 0-24*
Add boost to the Player's voice in decibels. Default is 15.

### Set Voice Distance Near
*in Meters, Range 0 - 1,000,000*
The near radius, in meters, where volume begins to fall off. It is strongly recommended to leave the Near value at zero for realism and effective spatialization for user voices.

### Set Voice Distance Far
*in Meters, Range is 0 - 1,000,000*
This sets the end of the range for hearing the user's voice. Default is 25 meters. You can lower this to make another player's voice not travel as far, all the way to 0 to effectively 'mute' the player.

### Set Voice Volumetric Radius
*in Meters, Range is 0 -1,000*
Default is 0.
A player's voice is normally simulated to be a point source, however changing this value allows the source to appear to come from a larger area. This should be used carefully, and is mainly for distant audio sources that need to sound "large" as you move past them. **Keep this at zero unless you know what you're doing.** The value for Volumetric Radius should always be lower than Voice Distance Far.

If you want a user's voice to sound like it is close no matter how far it is, increase the Voice Distance Near range to a large value.

### Set Voice Lowpass
*On/Off*
When a voice is some distance off, it is passed through a low-pass filter to help with understanding noisy worlds. You can disable this if you want to skip this filter. For example, if you intend for a player to use their voice channel to play a high-quality DJ mix, turning this filter off is advisable.

## Avatar

### SetAvatarAudioGain
*in Decibels, Range 0-10*
Set the Maximum Gain allowed on Avatar Audio. Default is 10.

### SetAvatarAudioFarRadius
*in Meters, Range is not limited*
This sets the maximum end of the range for hearing the avatar's audio. Default is 40 meters. You can lower this to make another player's avatar audio not travel as far, all the way to 0 to effectively 'mute' the player. Note that this is compared to the audio source's maxDistance, and the smaller value is used.

### SetAvatarAudioNearRadius
*in Meters, Range is not limited*
This sets the maximum start of the range for hearing the avatar's audio. Default is 0 meters. Increasing this value makes the avatar audio sources reach their maximum volume from a further distance. Note that this is compared to the audio source's maxDistance, and the smaller value is used.

### SetAvatarAudioVolumetricRadius
*in Meters, Range is not limited*
An avatar's audio source is normally simulated to be a point source, however changing this value allows the source to appear to come from a larger area. This should be used carefully, and is mainly for distant audio sources that need to sound "large" as you move past them. Keep this at zero unless you know what you're doing. The value for Volumetric Radius should always be lower than Avatar AudioFarRadius. Default is 0 meters.

### SetAvatarAudioForceSpatial
*On/Off*
If this is on, then Spatialization is enabled for the source, and the spatialBlend is set to 1. Default is Off.

### SetAvatarAudioCustomCurve
*On/Off*
This sets whether the audio source should use a pre-configured custom curve. Default is Off.


---

## Document: player-avatar-scaling.md

Path: /worlds/udon/players/player-avatar-scaling.md
---
title: "Player Avatar Scaling"
slug: "player-avatar-scaling"
hidden: false
createdAt: "2023-06-22T01:23:45.678Z"
updatedAt: "2023-07-19T01:23:45.678Z"
---
Udon provides functions allowing world creators to
- Permit or enforce avatar scaling features and parameters.
- React to changes in player height.

To see relevant events to use in concert with these functions, including "OnAvatarChanged" and "OnAvatarEyeHeightChanged", see [Avatar Events](/worlds/udon/avatar-events)

:::note Scaling and collision
Please note that scaling an avatar to another size does **not** affect its collision with the environment -- just as uploading an avatar that you've scaled up in Unity would not do so.
:::

Avatar Scaling operates in two modes and can be adjusted individually on a player-by-player basis:

1. A player-controlled mode, where the player is allowed to utilize a radial puppet in their action menu or a "Match Eye Height" button in their quick menu to adjust their own height.
2. A world-authoritative mode where these features are disabled, and player heights can only be set by an Udon program running in the world.

In either case, avatar changes and eye height changes will fire "OnAvatarChanged" and "OnAvatarEyeHeightChanged" events so that an Udon program can react to these occurrences.

:::note Player-controlled by default

Currently, avatar scaling is operating in the player-controlled mode by default. If you wish to operate in the world-authoritative mode, you must disable it on the website or with the Udon functions below.

:::

## Disabling player-controlled scaling via the website
If you simply wish to disable the avatar scaling system in your world, you can log into the [My Worlds section of the VRChat Website](https://vrchat.com/home/content/worlds), select your world, toggle it off, and save your changes.

[IMAGE: It's really easy!]

When you disable avatar scaling via the website, the system is disabled for players in your world entirely. They will only be able to use your world at their default scale, and the menu components for avatar scaling will be disabled. 

Because of this, the following `VRCPlayerApi` functions are not available to Udon when avatar scaling is disabled via the website, and using them will have no effect: `SetManualAvatarScalingAllowed`, `SetAvatarEyeHeightMinimumByMeters`, `SetAvatarEyeHeightMaximumByMeters`, `SetAvatarEyeHeightByMeters`, `SetAvatarEyeHeightByMultiplier`.

If you wish to retain access to these Udon functions but don't want users to be able to scale themselves via the radial puppet in their Action Menu, please leave avatar scaling enabled via the website and instead use Udon to disable the player-controlled avatar scaling mode via `SetManualAvatarScalingAllowed`.

## Functions for player-controlled scaling
:::note Local player only
Unless otherwise stated, all of the functions below can only be used by an Udon program affecting the local player and cannot be called on a `VRCPlayerApi` object belonging to another player successfully.
:::

### GetManualAvatarScalingAllowed
Checks if the local player is allowed to control their avatar scale.

**Output**
- `bool`: `true` if the local player is in the player-controlled avatar scaling mode, or `false` if they're in the world-authoritative avatar scaling mode.

### SetManualAvatarScalingAllowed
Toggles between player-controlled and world-authoritative scaling modes.

**Input**
- `bool`: `true` sets the player-controlled mode, and `false` sets the world-authoritative mode.

### GetAvatarEyeHeightMinimumAsMeters

Returns the minimum eye height in meters that the local player is permitted to scale themselves to in the player-controlled avatar scaling mode. (Greater than or equal to 0.2 meters.)

**Output**
- `float`: The minimum eye height in meters.

### SetAvatarEyeHeightMinimumByMeters
Sets the minimum height in meters that the local player is permitted to scale themselves to in the player-controlled avatar scaling mode. (Must be greater than or equal to 0.2 meters.)

**Input**
- `float`: Sets the minimum avatar eye height in meters.

### GetAvatarEyeHeightMaximumAsMeters

Returns the maximum eye height that the local player is permitted to scale themselves to in the player-controlled avatar scaling mode. (Less or equal to 5 meters )

**Output**
- `float`: The maximum avatar eye height in meters.

### SetAvatarEyeHeightMaximumByMeters
Sets the maximum eye height in meters that the local player is permitted to scale themselves to in the player-controlled avatar scaling mode. (Must be less or equal to 5 meters.)

**Input**
- `float`: Sets the maximum eye height in meters.

## Functions for world-authoritative scaling

:::note Local player only
Unless otherwise stated, all of the functions below can only be used by an Udon program affecting the local player and cannot be called on a `VRCPlayerApi` object belonging to another player successfully.
:::

### GetAvatarEyeHeightAsMeters

Returns the configured eye height for the target player's avatar. This function works for the local player **and** remote players.

**Output**
- `float`: The configured eye height for the target player's avatar.

### SetAvatarEyeHeightByMeters

**Input**
- `float`: Sets the eye height in meters for the current player avatar.

### SetAvatarEyeHeightByMultiplier

**Input**
- `float`: Sets the eye height as a multiple of the target player's avatar eye height at its prefab scale.


---

## Document: player-collisions.md

Path: /worlds/udon/players/player-collisions.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Player Collisions

Udon has three ways to detect when a Player and an Object Collide - **Triggers**, **Physics**, and **Particles**.

## Triggers

If you want to detect when a player has entered or exited an area, your best bet will be to use the **OnPlayerTrigger **events. There are three of these:

- **OnPlayerTriggerEnter** is called when a player's capsule enters a Trigger Collider 
- **OnPlayerTriggerStay** is called on frames while a player's capsule is inside a Trigger Collider
- **OnPlayerTriggerExit** is called when a player's capsule exits a Trigger Collider.

[IMAGE: A simple Box Collider with 'Is Trigger' checked.]

To use these events, add an object with a [collider](https://docs.unity3d.com/Manual/collider-shapes-introduction.html) component and enable the 'Is Trigger' box on the collider. A trigger collider allows objects and players pass through it and calls events when those objects have colliders. You can learn more about <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/CollidersOverview.html">Collision in Unity's documentation</UnityVersionedLink>.


:::danger

There are some edge cases where one of these events could be skipped, like when a player teleports in/out of a collider, or is moving VERY fast.

:::
## Physics
There is another set of events you can use when you've got objects like bouncing balls or bullets that you're moving around with physics. These objects have Colliders with IsTrigger turned off so that they'll interact with the environment and each other. 

To detect events on these Colliders, you can use:
- **OnPlayerCollisionEnter** is called when a player's capsule enters a Collider.
- **OnPlayerCollisionStay** is called on frames while a player's capsule is inside a Collider.
- **OnPlayerCollisionExit** is called when a player's capsule exits a Collider.
- **OnControllerColliderHitPlayer** is called when a CharacterController hits a Player.

:::caution OnPlayerCollision Events are for Moving Objects

These events WILL NOT be called when a player 'walks into' a stationary object. If you want to handle that, use a Trigger Collider.

:::
## Particles
Finally, you can use **OnPlayerParticleCollision** to detect when a Particle colliders with a player, assuming that Particle System has Collision and Send Collision Messages turned on.

[IMAGE: This Particle System has the Collision module turned on, is set to 'World' and '3D' modes, with 'Send Collision Messages' turned on.]
## Examples

The [Udon example scene](https://creators.vrchat.com/worlds/examples/udon-example-scene/) demonstrates how to use all three methods of detecting player collisions. 

[IMAGE: Check out the Udon Example Scene to see how these events can be used.]

---

## Document: player-forces.md

Path: /worlds/udon/players/player-forces.md
---
title: "Player Forces"
slug: "player-forces"
hidden: false
createdAt: "2021-01-22T00:32:15.132Z"
updatedAt: "2021-01-22T01:07:11.156Z"
---
Here are the nodes relating to forces that act on Players. For nodes that deal with Player positions, see [Player Positions](/worlds/udon/players/player-positions) 

:::note Local player only

Only use these nodes for the [local player](/worlds/udon/players/getting-players/#networkingget-localplayer). They can't be used for remote players.

:::



### GetWalkSpeed / SetWalkSpeed
*float, working range around 0-5*

The speed at which a Player can walk around your world. Set this below your Run Speed. Default is 2.

### GetRunSpeed / SetRunSpeed
*float, working range around 0-10*

The speed at which a Player can run around your world. Set this above your Walk Speed. Default is 4.

### GetStrafeSpeed / SetStrafeSpeed
*float, working range around 0-5*

The speed at which a Player can move sideways through your world. Recommended to be set to the same as Walk Speed. Not affected by running. Default is 2.

### GetJumpImpulse / SetJumpImpulse
*float, working range around 0-10*

How much force applied when a player jumps. Default is 0, so set this if you want to enable jump in your world. The default VRCWorld prefab sets this to 3.

### GetGravityStrength / SetGravityStrength
*float, working range around 0-10*

Multiplier for the Gravity force of the world (set to Earth's default). Don't change Unity's Physics.Gravity in your project, get and set it here instead. Default is 1.

### Immobilize
*Boolean*

Set to true to keep a Player stuck in place, turning off their Locomotion. Note that VR Players may be able to move their viewpoint around a bit anyways, but their Avatar will stay in place.

---

## Document: player-positions.md

Path: /worlds/udon/players/player-positions.md
---
title: "Player Positions"
slug: "player-positions"
hidden: false
createdAt: "2021-01-22T00:32:00.432Z"
updatedAt: "2023-03-28T19:07:26.827Z"
---
The player's position, rotation, and velocity can be accessed and changed with Udon. All of the following nodes require `VRCPlayerAPI` as an input.

For nodes that deal with forces relating to Players, see [Player Forces](/worlds/udon/players/player-forces). 
### GetPosition

Gets the position of the Player.

**Output**
- `Vector3`: The player's position in world space.  


### GetRotation

Gets the rotation of the Player.

**Input**

**Output**
- `Quaternion`: The player's rotation in world space.  

### GetBonePosition

Gets the position of the specified Bone in the Player's Avatar, or Vector3.Zero (0,0,0) if the bone does not exist. Note that Avatars may not have all the same bones in the places you expect, so be careful making assumptions about attributes like a player's height, pose etc based on the position of bones.

**Input**
- `HumanBodyBones`: The bone to check.

**Output**
- `Vector3`: The bone position in world space.
### GetBoneRotation

Gets the rotation of the specified Bone in the Player's Avatar, or Quaternion.Identity (0,0,0,1) if the bone does not exist. Note that Avatars may not have all the same bones in the places you expect, so be careful making assumptions about attributes like a player's height, pose etc based on the rotation of bones.

**Output**
- `Quaternion`: The bone rotation in world space.

### GetTrackingData

Gets a struct called TrackingData, which contains separate Position and Rotation data. This is the suggested way to get position and rotation data for a Player's head and hands. This returns data from the TrackingManager for a Local Player (ie the data coming from their headset / trackers) and from the RightHand, LeftHand and Head bones for a Remote Player. Origin returns the center of the local VR user's playspace, while returning the player's position for local Desktop users and all remote users. AvatarRoot returns data for the root transform of the avatar (the same transform that the player capsule is attached to). For users in Fully-Body Tracking, AvatarRoot will not rotate with the head facing direction. If you need data reflecting the general forward facing direction of a Player, consider using GetRotation instead.

**Input**
- `TrackingDataType`: The tracking data to check.

**Output**
- `TrackingData`: The player's tracking data of the specified type.  

### GetVelocity

Get the speed and direction of the player's movement.

**Output**
- `Vector3 velocity`: The player's velocity in world space.  

### SetVelocity

Set the speed and direction of the player's movement. If SetVelocity is called on the local player, their 'IsGrounded' property is set to false since they are not in direct control of their movements while this is happening.

**Input**
- `Vector3`: The player's velocity in world space.  

### IsPlayerGrounded

Get whether the player is touching the ground, which enables Jump.

**Ouput**
- `bool IsPlayerGrounded`: Whether the player is grounded.  

### TeleportTo

Send the [local player](/worlds/udon/players/getting-players/#networkingget-localplayer) to a new position and specified rotation, unless a Station does not allow it.

- Udon can only teleport the local player. Use [networking](/worlds/udon/networking/) to cause other players to teleport themselves. 
- Stations can prevent Udon from teleporting players.
- When you teleport very often or across very short distances, consider setting `lerpOnRemote` to `false`.

:::warning

Do not teleport players during network updates (e.g. [OnDeserialization](/worlds/udon/networking/network-components/#ondeserialization)). Otherwise, their avatar may unexpectedly collide with geometry during the teleport. Instead, use [SendCustomEventDelayedFrames](/worlds/udon/graph/special-nodes/#sendcustomeventdelayedframes) and delay the teleport by one frame.

:::

**Inputs**
- `Vector3 teleportPos`: The target position in world space.
- `Quaternion teleportRot`: The target rotation in world space.
- `SceneDescriptorSpawnOrientation TeleportOrientation` (optional): How to align players with the destination position and rotation. 
- `bool lerpOnRemote` (optional): Whether the interpolate the player's movement for remote players.
    - (Default) If `false`, the teleportation looks instant to remote players. The network bandwidth cost increases.
    - If `true,` the teleportation is treated like normal player movement, and movement looks smooth to remote players.


---

## Document: string-loading.md

Path: /worlds/udon/string-loading.md
# String Loading

String Loading allows you to download text files from the internet and use them in your VRChat world. You can either use the `DownloadString` script included in the SDK, or you can make your own script using the new `VRCStringDownloader.LoadUrl` function.

- Your text files can be in any format, such as `.txt` or `.json`.
* One string can be downloaded every five seconds.
If this limit is exceeded, string downloads are queued and downloaded in a random order.
* One string can only be of a maximum of 100MB
* You can only have 1000 elements in the queue

## Trusted URLs
If a site is not on the list, it will not download unless ‘Allow Untrusted URLs’ has been enabled in the user’s settings.

The following URLs are available:

* Disbridge (`*.disbridge.com`)
* GitHub (`*.github.io`)
* Github Gist (`gist.githubusercontent.com`)
* Pastebin (`pastebin.com`)
* VRCDN (`*.vrcdn.cloud`)

## Guides

There are multiple ways to use string loading in your world.

### Using the `DownloadString` script to download a string
The SDK includes a script to download strings easily:

1. Create a new GameObject in your scene.
2. Add an `UdonBehaviour` component.
3. Select `DownloadString` as the program source.
4. Enter the URL and select the text component where you'd like to display the downloaded text.

### Create your own script for LoadUrl
You can use the function `VRCStringDownloader.LoadUrl` to download strings in your own scripts by following these steps:

1. Execute `VRCStringDownloader.LoadUrl` with a URL and specify an UdonBehaviour.
	- You can find `VRCStringDownloader` in the `VRC.SDK3.StringLoading` namespace.
2. Wait for the `OnStringLoadSuccess` or `OnStringLoadError` event to be called on the specified UdonBehaviour.
3. Use the event's `IVRCStringDownload` to get the `Result` of the string download.

## New events

### OnStringLoadSuccess
Returns `IVRCStringDownload`. Called when the function `LoadUrl` has successfully downloaded the string from the internet.

### OnStringLoadError
Returns `IVRCStringDownload`. Called when the function `LoadUrl` has failed to download the string.

## New types
### VRCStringDownloader

Use this static class to download strings from the web.

#### VRCStringDownloader.LoadUrl
* **Url**: the URL to load from the internet.
* **UdonBehaviour**: the UdonBehaviour to send the events to. 
    * In Udon Graph, this defaults to the current UdonBehaviour
    * In Udon Sharp, you can use `(IUdonEventReceiver)this`


### IVRCStringDownload
Result from the string load events.

* **Get Error (`string`)**: The error message for `OnStringLoadError`.
* **Get ErrorCode (`int`)**: The HTTP Error code for `OnStringLoadError`.
* **Get ResultBytes (`byte[]`)**: The raw data that was downloaded as a byte array. You can use `System.Text.Encoding` on this to decode a string in a custom format. Accessing this property will return a copy of the data.
* **Get Result (`string`)**: The string that was downloaded, decoded via the UTF8 standard.
* **Get UdonBehaviour (`UdonBehaviour`)**: The UdonBehaviour to which events are sent.
* **Get Url (`VRCUrl`)**: Gets the URL from which the download was attempted.

## Example Code

```csharp title="String Download Example, Custom Text Encoding"
using System.Text;
using UdonSharp;
using UnityEngine;
using VRC.SDK3.StringLoading;
using VRC.SDKBase;
using VRC.Udon.Common.Interfaces;

public class ResultBytesExample : UdonSharpBehaviour
{
    [SerializeField]
    private VRCUrl url;

    void Start()
    {
        VRCStringDownloader.LoadUrl(url, (IUdonEventReceiver)this);
    }

    public override void OnStringLoadSuccess(IVRCStringDownload result)
    {
        string resultAsUTF8 = result.Result;
        byte[] resultAsBytes = result.ResultBytes;
        string resultAsASCII = Encoding.ASCII.GetString(resultAsBytes);
        Debug.Log($"UTF8: {resultAsUTF8}");
        Debug.Log($"ASCII: {resultAsASCII}");
    }

    public override void OnStringLoadError(IVRCStringDownload result)
    {
        Debug.LogError($"Error loading string: {result.ErrorCode} - {result.Error}");
    }
}
```


---

## Document: udon-moderation-tool-guidelines.md

Path: /worlds/udon/udon-moderation-tool-guidelines.md
# Udon Moderation Tool Guidelines

For information on Udon-powered moderation tools in worlds, please consult the [VRChat Creator Guidelines](https://hello.vrchat.com/creator-guidelines), which contains a section on Worlds. 


---

## Document: attributes.md

Path: /worlds/udon/udonsharp/attributes.md
# Attributes

Attributes extend the functionality of your UdonSharp classes, fields, and methods. UdonSharp adds new attributes, but also supports many existing C# and Unity attributes.

:::tip

For a helpful overview of UdonSharp attributes, read [Varneon's UdonSharp Development Practices](https://vrclibrary.com/wiki/books/varneons-udonsharp-development-practices/page/attributes). 
:::

## UdonSharp Attributes

The following attributes are to unique to UdonSharp and the VRChat SDK.

### UdonSynced
`[UdonSynced]` / `[UdonSynced(UdonSyncMode)]`

Fields with this attribute are synchronized over the network for all players in the instance. Read VRChat's [networking documentation](/worlds/udon/networking/) to learn more.

**Example**
```cs
public class Example : UdonSharpBehaviour 
{
    [UdonSynced]
    public bool synchronizedBoolean;

    [UdonSynced(UdonSyncMode.Linear)]
    // This float will be linearly interpolated
    public float synchronizedFloat;
}
```
### UdonSyncMode
`UdonSharp.UdonSyncMode`

By default, `[UdonSynced]` fields are not interpolated. When the field changes, it changes instantly. You can change the sync mode to smoothly interpolate between the old and new value.

| Name        | Summary                                   |
| ----------- | ----------------------------------------- |
| None        | No interpolation (Default)                |
| Linear      | Linear interpolation                      |
| Smooth      | Smooth interpolation                      |
| *NotSynced* | *(Default when not using `[UdonSynced]`)* |
### UdonBehaviourSyncMode
`[UdonBehaviourSyncMode]` / `[UdonBehaviourSyncMode(BehaviourSyncMode)]`

This attribute allows you to choose a [sync mode](#behavioursyncmode) that is applied to all instances of this UdonBehaviour. If you add this attribute, UdonSharp will hide the dropdown for choosing a sync mode in Unity. It also enabled additional validations to ensure that your synced variables are suitable for the chosen sync mode.

**Example**
```cs
[UdonBehaviourSyncMode(BehaviourSyncMode.Manual)]
public class Example : UdonSharpBehaviour 
{
  // This class's sync mode is manual.
}
```

### BehaviourSyncMode
`UdonSharp.BehaviourSyncMode`

Use this in conjunction with [UdonBehaviourSyncMode](#udonbehavioursyncmode) to choose a sync mode for your behaviour.

| Name           | Summary                                                                                                                                                                                              |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Any            | Nothing is enforced. You can set any sync type in Unity. (Default)                                                                                                                                   |
| Continuous     | Synced variables will be updated automatically at a very frequent rate, but may not always reliably update to save bandwidth.                                                                        |
| Manual         | Synced variables are updated manually by the user less frequently, but ensures that updates are reliable when requested.                                                                             |
| None           | Enforces no synced variables on the behaviour and hides the selection dropdown in the UI for the sync mode. Nothing is synced and SendCustomNetworkEvent/NetworkCalling will not work on the behaviour.             |
| NoVariableSync | Enforces that there are no synced variables on the behaviour, hides the sync mode selection dropdown, and allows you to use the behaviours on GameObjects that use either Manual or Continuous sync. |


---

## Document: class-exposure-tree.md

Path: /worlds/udon/udonsharp/class-exposure-tree.md
# Class Exposure Tree

The Class Exposure Tree shows you which classes and methods are available in UdonSharp.

You can open the window by going to "VRChat SDK" > "Udon Sharp" > "Class Exposure Tree."

- Red = Not exposed to Udon
- Green = Exposed to Udon

[IMAGE: Udon Type Exposure Tree]

The "Show base members" toggle shows methods inherited from base classes that are exposed. For example, any class inheriting from `UnityEngine.Component` will show `GetComponent<T>()` functions because they're defined in the base class.

---

## Document: configuration.md

Path: /worlds/udon/udonsharp/configuration.md
# Configuration

UdonSharp's settings can be found at `Edit > Project Settings > Udon Sharp`.

[IMAGE: UdonSharp Settings window]

## Udon Sharp

### Auto compile on modify
Having this enabled will automatically compile scripts when they are modified and saved.

### Compile all script
Compiles all scripts whenever changes are detected to a U# script.

### Compile on focus
Will only compile when the editor gets focused and changes have been made to a script.

### Script template override
You can define your own custom template to be used when creating U# scripts.
This can be done by dragging a script into the `Script template override` field and that will now be used when you create a new U# script.

`<TemplateClassName>` can be used to set the class name based on the file name you give.

**Default Template**
```cs
using UdonSharp;
using UnityEngine;
using VRC.SDKBase;
using VRC.Udon;

public class <TemplateClassName> : UdonSharpBehaviour
{
    void Start()
    {
        
    }
}
```

## Debugging

### Debug build
Enables or disabled `Inline Code` and `Listen for client exceptions`

### Inline Code
Includes the C# inline code in the generated assembly code.

### Listen for client exceptions
This will listen for exceptions from the output log the VRChat client makes, then try to match it up against scripts in the project.

[Read more here on how to set it up](https://github.com/vrchat-community/UdonSharp/wiki/class-exposure-tree)

---

## Document: editorscripting.md

Path: /worlds/udon/udonsharp/editorscripting.md
# Editor Scripting

UdonSharp includes an editor scripting API that allows you to make custom editors and editor scripts that interact with UdonSharpBehaviours the same as you would interact with the normal C# version of a behaviour.

For the most part the editor scripting API allows you to write C# code that just works the same as it would for the C# version of the script, but there are some things to keep in mind while working with the scripts. 

The basis for U# editor scripting is that UdonSharp will create instances of the C# version of your behaviour script and copy the fields from the UdonBehaviour version of the script to the C# 'proxy' behind the scenes. This proxy is what you'll be interacting with most of the time from editor scripts.

## Proxies
UdonSharp scripts are valid C#, which allows you to add them to GameObjects as Proxies alongside typical standalone components. Proxies are similar to Unity's `SerializedObject` type, where any changes you apply to the SerializedObject need to be applied to the original object, and any changes to the original object need to be updated on the serialized object.

Proxies are created on the same GameObject as their backing UdonBehaviour and are disabled. They should remain disabled at all times so Unity does not execute events on them. They are marked as hidden in the GameObject inspector so you cannot see them on the GameObject directly, but they are there. Proxies are also flagged to not be saved in the scene and not be saved in builds so you don't have to worry about them bloating package or download size since they only exist in the editor. 

You can execute methods on the proxies and have them work the same as running events on UdonBehaviours. The main thing you need to keep in mind is that in C# UdonSharpBehaviours are not UdonBehaviours, this is explained in further detail below.

## Differences from regular C# behaviours and from U#
### UdonSharpBehaviours are not UdonBehaviours
In UdonSharp code, it is possible to treat **UdonBehaviours** as **UdonSharpBehaviours**, since they are represented as the same object internally. Technically, UdonSharpBehaviours do not actually inherit from UdonBehaviours, so it's best to use `UdonSharpBehaviour` as variable types instead of `UdonBehaviour` when working in UdonSharp.

Because of this, unless you want to allow people to plug in Udon behaviours built from the graph, you should always prefer to use `UdonSharpBehaviour` as variable types instead of `UdonBehaviour`.

### Proxy references are automatically handled only for UdonSharpBehaviour variables
Only variable types for UdonSharpBehaviours will have their proxies handled automatically. When you reference another proxy behaviour in a proxy behaviour, its reference will automatically be converted to the UdonBehaviour reference by the proxy system. Because of this, variables that reference other **UdonSharpBehaviours** should be stored as the specific **UdonSharpBehaviour** type, or as the base **UdonSharpBehaviour** type if any **UdonSharpBehaviour** type can be stored in the variable. 

If you use variables of the type `UdonBehaviour`, store plain `Component` references, or anything ambiguous at all, the proxy system will just populate the reference to the underlying UdonBehaviour. This is good if you want to allow references to graph assets since they do not fall under the proxy API.

An important thing to keep in mind is that if you store references to the proxy behaviours directly in a variable that is not an UdonSharpBehaviour variable or some subclass of UdonSharpBehaviour, the reference will get cleared to null on build. For instance, if you want to have an `Component` reference, make sure it's referencing the UdonBehaviour and not the proxy UdonSharpBehaviour.

### Proxies are always disabled and should remain disabled
Proxies get disabled to prevent Unity from calling events and running the same logic twice during gameplay on them. You should never re-enable the proxy behaviours. Because proxy behaviours are disabled, if you run methods on the proxy behaviour that call things like GetComponentInChildren without telling it to get disabled behaviours as well, it will not return the proxies.

## Making a custom inspector for your UdonSharpBehaviour
When making custom editors for UdonSharpBehaviours, most things are abstracted to the point that it's exactly like making a normal custom inspector. You just need to make a class that inherits from `Editor` and add the `CustomEditor` attribute with the type of your UdonSharpBehaviour.

When making custom editors for any U# or C# scripts, you must ensure that your editor code is not included in the game build since it uses Editor libraries that are not allowed in Unity games (your world will fail to build if it includes them).

There are two recommended ways to exclude Editor code from your world.
- Place your inspector scripts inside a folder named **Editor**.
- Wrap your code in a check for the preprocessor definition `UNITY_EDITOR`, for example:
```cs
#if UNITY_EDITOR
[CustomEditor(typeof(CustomInspectorBehaviour))]
public class CustomInspectorEditor : Editor
{
    ...
}
#endif
```

Using statements for editor only namespaces like `UnityEditor` will also need to be wrapped in the same `UNITY_EDITOR` check

If you want to write your inspector in the same script file as your UdonSharpBehaviour script, you will need to use the `COMPILER_UDONSHARP` preprocessor definition to prevent UdonSharp from parsing the editor only code. Using the above example with this it would look like the following:
```cs
public class CustomInspectorBehaviour : UdonSharpBehaviour 
{
    ...
}

#if !COMPILER_UDONSHARP && UNITY_EDITOR
[CustomEditor(typeof(CustomInspectorBehaviour))]
public class CustomInspectorEditor : Editor
{
    ...
}
#endif
```

:::warning

The `COMPILER_UDONSHARP` preprocessor definition will only ever be `true` inside the same script as the UdonSharpBehaviour. External scripts that do not contain an UdonSharpBehaviour and are not connected to an UdonSharpProgramAsset will never set `COMPILER_UDONSHARP` to `true`.

:::

:::warning

Do not use `COMPILER_UDONSHARP` or `UNITY_EDITOR` to conditionally remove or add fields to UdonSharpBehaviours. This will result in unexpected behavior

:::

When you make a custom inspector, you should always start the OnInspectorGUI with 
```cs
if (UdonSharpGUI.DrawDefaultUdonSharpBehaviourHeader(target)) return;
```
This handles drawing the default UdonSharp header that contains the convert to behaviour button for C# scripts, the syncing settings, the interact settings, and the utilities. You can draw each individual section as well, look at the implementation of `DrawDefaultUdonSharpBehaviourHeader()` for what you can draw.

### Example inspector
This example is included with UdonSharp

```cs
using UnityEngine;
using VRC.SDK3.Components;
using VRC.SDKBase;
using VRC.Udon;

#if !COMPILER_UDONSHARP && UNITY_EDITOR // These using statements must be wrapped in this check to prevent issues on builds
using UnityEditor;
using UdonSharpEditor;
#endif

namespace UdonSharp.Examples.Inspectors
{
    /// <summary>
    /// Example behaviour that has a custom inspector
    /// </summary>
    public class CustomInspectorBehaviour : UdonSharpBehaviour 
    {
        public string stringVal;

        private void Update()
        {
            Debug.Log($"CustomInspectorBehaviour: {stringVal}");
        }
    }

    // Editor scripts must be wrapped in a UNITY_EDITOR check to prevent issues while uploading worlds. The !COMPILER_UDONSHARP check prevents UdonSharp from throwing errors about unsupported code here.
#if !COMPILER_UDONSHARP && UNITY_EDITOR 
    [CustomEditor(typeof(CustomInspectorBehaviour))]
    public class CustomInspectorEditor : Editor
    {
        public override void OnInspectorGUI()
        {
            // Draws the default convert to UdonBehaviour button, program asset field, sync settings, etc.
            if (UdonSharpGUI.DrawDefaultUdonSharpBehaviourHeader(target)) return;

            CustomInspectorBehaviour inspectorBehaviour = (CustomInspectorBehaviour)target;

            EditorGUI.BeginChangeCheck();

            // A simple string field modification with Undo handling
            string newStrVal = EditorGUILayout.TextField("String Val", inspectorBehaviour.stringVal);

            if (EditorGUI.EndChangeCheck())
            {
                Undo.RecordObject(inspectorBehaviour, "Modify string val");

                inspectorBehaviour.stringVal = newStrVal;
            }
        }
    }
#endif
}
```

## Using [Handles](https://docs.unity3d.com/ScriptReference/Handles.html)
This works the same as making a custom inspector GUI, everything is handled automatically for the most part. You just use the OnSceneGUI event on the Editor and it should work as expected.

## Using [Gizmos](https://docs.unity3d.com/ScriptReference/Gizmos.html)
Gizmos need a little special handling to work as you'd expect. One of the [example scripts](https://github.com/vrchat-community/UdonSharp/blob/master/Packages/com.vrchat.UdonSharp/Samples~/CustomInspectors/CustomInspectorChildBehaviour.cs#L33) makes use of Gizmos. For Gizmos you should wrap the OnDrawGizmos events themselves in the same `#if !COMPILER_UDONSHARP && UNITY_EDITOR` check that we wrapped the editor in, and the **OnDrawGizmos** and **OnDrawGizmosSelected** events should go on the behaviour itself.

Gizmos draw using the proxy behaviour that gets attached to all UdonBehaviours with UdonSharpProgramAssets. They do not get executed through Udon since Udon does not run UdonBehaviours when not in play mode. The Gizmos events are not managed by UdonSharp so you need to do a little to make sure your proxy behaviour is up to date. To do this, call either of these two methods, both do the same thing, `UpdateProxy` is just made to emulate the Unity API's for serialized objects.
```cs
// Call this
UdonSharpEditorUtility.CopyUdonToProxy(this);
// Or this
this.UpdateProxy();
// Do not call both since you'd be doing redundant work
```
You can see an example of this in the example script linked above.

## Non-inspector Editor Scripts
When you are creating editor scripts that create/delete/modify UdonSharpBehaviours, you need to manage updating the proxy and applying its modifications yourself. 

### Adding an UdonSharpBehaviour
Adding a new UdonSharpBehaviour is as simple as getting the GameObject you want to attach it to and calling .`AddUdonSharpComponent<T>()` on it.
```cs
GameObject targetGameObject = ... // Get some game object from somewhere here
MyComponentType newComponent = targetGameObject.AddUdonSharpComponent<MyComponentType>();
```
Now newComponent is a valid UdonSharpBehaviour proxy of your component type MyComponentType. You can interact with this like any other C# component from the editor script. If you want the component creation to be undoable, instead use:
```cs
GameObject targetGameObject = ... // Get some game object from somewhere here
MyComponentType newComponent = UdonSharpUndo.AddComponent<MyComponentType>(targetGameObject);
```

### Getting an existing UdonSharpBehaviour
UdonSharp has equivalents for GetComponent(s) defined as extension methods to GameObject. When you are working with editor scripts, instead of calling `GetComponent<T>()`, you should call its equivalent `GetUdonSharpComponent<T>()`.

In order to get all UdonSharpBehaviours of the type `MyComponentType` on children of a GameObject, you would do the following:
```cs
GameObject sourceGameObject = ... // Get some game object from somewhere here
MyComponentType[] myComponents = sourceGameObject.GetUdonSharpComponentsInChildren<MyComponentType>();
```

### Working with an UdonSharpBehaviour and modifying it
Once you have an UdonSharpBehaviour to work with, you will need to handle making sure any modifications to the proxy get propagated to Udon.

If Udon is making any changes to the behaviour, the behaviour should get updated if you are using GetUdonSharpComponent(s) since those will automatically update the behaviour. If you store a reference to the behaviour, you will need to update it yourself. This can be done by calling `UpdateProxy()` on the behaviour.

Once you have modified your behaviour, you must apply the modifications on the proxy behaviour to Udon. This can be done by calling `ApplyProxyModifications()` on the behaviour.

You can think of this as being similar to working with Unity SerializedObjects.

```cs
MyComponentType myComponent = ...
// We only need to update the proxy if we storing some persistent reference to it
myComponent.UpdateProxy();
// Add 5 to a `float` on our behaviour
myComponent.myFloatField += 5f;
// Apply the changes to myComponent to the Udon copy of it
myComponent.ApplyProxyModifications();
```

## Destroying UdonSharpBehaviours
You should use the UdonSharpEditorUtility.DestroyImmediate() method to destroy UdonSharpBehaviours and delete their underlying UdonBehaviour.


---

## Document: index.md

Path: /worlds/udon/udonsharp/index.md
---
sidebar_position: -1
---
# UdonSharp

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

UdonSharp allows you to create Udon scripts in C#. UdonSharp is included in the VRChat worlds SDK and compiles your C# to Udon Assembly code.

- Add helpful [attributes](./attributes) to extend the functionality of your UdonSharp scripts. 
- Open the [class exposure tree](./class-exposure-tree) to see which C# classes and methods are available in UdonSharp.
- Change your [configuration](./configuration) to disable auto-compilation or change other settings.
- Learn how to write [custom editor scripts](./editorscripting).
- Learn how to [migrate](./migration) projects that use very old versions of UdonSharp.

## How to create an UdonSharp script

You can create an UdonSharp script the project window or the hierarchy window by following the steps below.

### In the Project window
1. Right-click in your project's asset explorer.
2. Navigate to "Create" > "U# script".
3. Click "U# script". This will open a file creation dialog.
4. Choose a name for your script and click "Save".
5. This will create a `.cs` script file and an UdonSharp program asset that's set up for the script in the same directory.
### In the Hierarchy window
1. Create a new game object in your scene.
2. Add an `Udon Behaviour` component to the object.
3. Below the "New Program" button click the dropdown and select "Udon C# Program Asset".
4. Now click the "New Program" button. This will create a new UdonSharp program asset for you.
5. Click the "Create Script" button and choose a save destination and name for the script.

When you create a new UdonSharp script, you end up with two files:
- An "UdonSharp Program Asset" file. (You don't need to edit this file after creating it.)
- A `.cs` file. It has the class `UdonSharpBehaviour` and looks like this:

<Tabs>
<TabItem value="cs" label="UdonSharp">

```cs
using UdonSharp;
using UnityEngine;
using VRC.SDKBase;
using VRC.Udon;

public class YourScriptName : UdonSharpBehaviour
{
    void Start()
    {
        
    }
}
```

</TabItem>
</Tabs>

Edit the UdonSharpBehaviour in your editor of choice and start programming. You can add the UdonSharpBehaviour to any GameObject in your scene.



## Supported C# Features

UdonSharp support most of C#'s basic syntax:

- Flow control: `if`, `else`, `while`, `for`, `do`, `foreach`, `switch`, `return`, `break`, `continue`, `ternary operator (condition ? true : false)`, `??`
- Implicit and explicit type conversions
- Arrays and array indexers
- All built-in arithmetic operators
- Conditional short circuiting `(true || CheckIfTrue())` will not execute `CheckIfTrue()`
- `typeof()`
- Extern methods with `out` or `ref` parameters, such as many variants of `Physics.Raycast()`
- User defined methods with parameters and return values, supports out/ref, extension methods, and `params`
- User defined properties
- Static user methods
- UdonSharpBehaviour inheritence, virtual methods, etc
- Unity/Udon event callbacks with arguments. For instance, registering an `OnPlayerJoined` event with a `VRCPlayerApi` argument is valid.
- String interpolation
- Field initializers
- Jagged arrays
- Referencing other custom UdonSharpBehaviour classes, accessing fields, and calling methods on them
- Recursive method calls are supported via the `[RecursiveMethod]` attribute

## Differences from Unity/C# Features

UdonSharp is not conformant to any version of the C# language specification. Some C# features are not implemented or will not work.

- For the best experience when creating UdonSharp scripts, make your scripts inherit from `UdonSharpBehaviour` instead of `MonoBehaviour`.
- If you need to call `GetComponent<UdonBehaviour>()`, you will need to use `(UdonBehaviour)GetComponent(typeof(UdonBehaviour))` since the generic get component is not exposed for UdonBehaviours yet. `GetComponent<T>()` works for other Unity component types though.
- Udon currently only supports array `[]` collections. By extension, UdonSharp only supports arrays at the moment. `List<T>` is not supported yet.
- Field initializers are evaluated at compile time. If you have any initialization logic that depends on other objects in the scene you should use `Start`.
- Use the `[UdonSynced]` attribute on fields that you want to sync over the network for all players.
- Numeric casts are checked for overflow due to UdonVM limitations.
- The internal type of variables returned by `.GetType()` will not always match what you may expect since U# abstracts some types in order to make them work in Udon. For instance, any jagged array type will return a type of `object[]` instead of something like `int[][]` for a 2D `int` jagged array.


## Example scripts

### The rotating cube demo

This rotates the object that it's attached to by 90 degrees every second.

```cs
using UnityEngine;
using UdonSharp;

public class RotatingCubeBehaviour : UdonSharpBehaviour
{
    private void Update()
    {
        transform.Rotate(Vector3.up, 90f * Time.deltaTime);
    }
}
```

### Other examples

- The VRChat Worlds SDK contains UdonSharp examples in `Assets/UdonSharp/UtilityScripts`. 
	- These scripts can be safely deleted if they are not used.
- For more example scripts, take a look at the [GitHub wiki examples](https://github.com/vrchat-community/UdonSharp/wiki/examples) or the Examples folder included with U#.
- Visit the [VRChat Creator Hub](https://ask.vrchat.com/c/creator-hub/63/none) to speak to other creators and see their examples.

## Frequently asked questions

### Does UdonSharp support all Udon features?
Yes. If Udon supports it, then so does UdonSharp. You can check the [class exposure tree](https://github.com/Merlin-san/UdonSharp/wiki/class-exposure-tree) to see everything UdonSharp has access to.

### Can I access the player camera?
No, Udon can not access the player's camera. You can, however, get the head position and rotation. For example, you can use [VRCPlayerApi.GetTrackingData](https://github.com/Merlin-san/UdonSharp/wiki/vrchat-api#vrchatplayerapi) like this:
 
`var headPosition = localPlayer.GetTrackingData(TrackingDataType.Head).position`

### Can I have more than one UdonSharp UdonBehavior on a GameObject?
Yes.

### I'm starting from scratch and need to use C# tutorials. What common aspects of C# don't work in UdonSharp?
If you are learning UdonSharp and not familiar with C# already, you may run across some commonly used techniques that don't work in Udon and UdonSharp yet. These include, but are not limited to, the following:
- Generic classes (`Class<T>`) and generic non-static methods,
- Interfaces
- Method overloads
- Properties

---

## Document: migration.md

Path: /worlds/udon/udonsharp/migration.md
---
unlisted: true
---
# Migration

UdonSharp 0.x (the .unitypackage version) is deprecated and no longer supported.

Newer versions of UdonSharp are included in the VRChat Worlds SDK, which is easy to install through the [Creator Companion](https://vcc.docs.vrchat.com). We recommend you [Migrate your Projects using the Creator Companion](https://vcc.docs.vrchat.com/vpm/migrating). If you want to do the migration manually, read [Manual Migration](#manual-migration).

## New Features in UdonSharp 1.0
* **More C# features** in your UdonSharp programs:
	* `static` methods
	* Generic `static` methods
	* `params`, `out`, `ref`, and default parameters
	* Extension methods
	* Inheritance, virtual methods, and abstract classes
	* Partial classes
	* Enums
- **Multi-edit** multiple UdonSharp scripts in the Unity inspector
- **Prefab variants**, **instances**, and **nesting** are now fully supported
- **Editor scripting** has been overhauled and simplified
- **Compiler fixes** and **optimizations**
- **Fixed various bugs**, edge cases, and other rough edges

## Known Issues

When migrating your project from a very old version of UdonSharp, you may encounter some known issues. Here's how you can address them.

:::tip Try this first!

Is UdonSharp giving you trouble? Try reimporting all assets with "Assets" > "Reimport All."

In many cases, this fixes import issues related to UdonSharp, especially when migrating or upgrading your project from an older version.

:::

### Nested Prefabs

**Issue**: UdonSharp always warned against using nested prefabs. When migrating from an old version, nested prefabs may break.

**Symptoms**: Errors in Unity's console like `Cannot upgrade scene behaviour 'SomethingOrOther' since its prefab must be upgraded`.

**How to Fix**: Unpack the prefab in your 0.x UdonSharp project first. You can also open the "Udon Sharp" menu item and choose "Force Upgrade".

### Does Not Belong to U# Assembly

**Issue**: Libraries with their own Assembly Definitions need to have an U# assembly definition, too.

**Symptoms**: Errors in Unity's console like `[UdonSharp] Script 'Assets/MyScript.cs' does not belong to a U# assembly, have you made a U# assembly definition for the assembly the script is a part of?`

**How to Fix**:
1. Use the Project window to find the file ending in `.asmdef` in the same or a parent directory of the script in question. 
2. Right-click in the folder which has this Assembly Definition and choose `Create > U# Assembly Definition`. 
3. Select this new U# asmdef, and use the inspector to set its "Source Assembly" to the other Assembly Definition File. 
4. You may need to restart Unity after doing this.

### Newtonsoft.Json.Dll

**Issue**: Some packages include their own copy of this JSON library, which the VRCSDK pulls in itself. This results in two copies of the library.

**Symptoms**: Errors in Unity's console which mention the above library. It might not be at the front of the sentence, but something like `System.TypeInitializationException: the type initializer for blah blah blah...Assets/SketchfabForUnity/Dependencies/Libraries/Newtonsoft.Json.dll`

**How to Fix**: Remove any copies of Newtonsoft.Json.dll from your Assets folder. The VRCSDK will provide it for any package that needs it through the Package Manager.

### Other breaking changes
- Your U# behaviour name must match the .cs file name.
- Duplicate program assets may not reference the same `.cs` file.
- Program assets must point to a script and may not be empty.
- Editor scripting is now different: Data is owned by a C# proxy of the UdonSharpBehaviour, and the corresponding UdonBehaviour is empty until runtime.
- Obsoleted overloads for station and player join events may no longer be used.

## Manual Migration

Follow these steps to upgrade a project that uses a version of UdonSharp below 1.0 without using the Creator Companion:

1. Back up your project.
2. Delete the VRCSDK folder, Udon folder, UdonSharp folder, and Gizmos/UdonSharp folders from your project's "Assets" folder.
3. Download and install the [Unity Package versions of the World SDK](https://vrchat.com/download/sdk3-worlds).
4. Download and install the [Unity Package version of the UdonSharp SDK](https://github.com/vrchat-community/UdonSharp/releases/download/1.1.7/com.vrchat.udonsharp-1.1.7.unitypackage).


---

## Document: performance-tips.md

Path: /worlds/udon/udonsharp/performance-tips.md

# Performance Tips

This page contains a few tips on how to improve the performance of your UdonSharp scripts.

## UdonSharp is slower than C\#
Udon can take about 200x to 1000x longer to run a piece of code than the equivalent in normal C#, depending on what you're doing. 
- Avoid massive complex algorithms that iterate over thousands of elements.
- Avoid iterating over very long arrays every frame.
	- Consider "time-slicing" your array by only processing only a limited amount of array elements per frame.
- Use native Unity components or VRChat SDK components whenever possible.
	- For example: Instead of rotating 40 GameObjects in Udon, use an animation.
- Cache method results to improve performance.
	- For example: Instead of getting [`GameObject.transform`](https://docs.unity3d.com/ScriptReference/GameObject-transform.html) or [`Networking.LocalPlayer`](/worlds/udon/players/getting-players/#networkingget-localplayer) every frame, use the `Start()` event to save them as variables and reuse them later.

## Use `private` methods
You should mark methods as `private` if they are not being called from other scripts. Due to how Udon searches for methods to call, the fewer public methods you have, the better the performance of your custom events.

Calls across behaviours are slower than local method calls. If you can, keep similar behavior in one UdonSharpBehaviour rather than separating it into different behaviours.

Don't forget that in order to send a [CustomNetworkEvent](/worlds/udon/graph/special-nodes#udonbehaviour-nodes), the target method must be `public`. If it is not public, it will not fire. Additionally, any methods that start with an underscore such as `_MyLocalMethod` will not receive network events.

## Don't use `GetComponent<T>` frequently
You should only use `GetComponent<T>` in the `Start()` event or event that happen that don't happen frequently.

`GetComponent<T>()` is slow, especially when retrieving an UdonSharpBehaviour type in Udon. That's because UdonSharp needs to insert a loop that checks all UdonBehaviours to make sure they're the correct UdonSharpBehaviour type. 


---

## Document: ui-events.md

Path: /worlds/udon/ui-events.md
# UI Events

You can use Unity UI events to directly call methods for simple interactions, rather than building an UdonBehaviour. 
[IMAGE: ui-events-3c37d22-UIEventTarget.png]

However, we've limited what can be called to this list:
# Allowed UI Event Targets
### Animator
* Play
* PlayInFixedTime
* Rebind
* SetBool
* SetFloat
* SetInteger
* SetTrigger
* ResetTrigger
* speed

### AudioSource
* Pause
* Play
* PlayDelayed
* PlayOneShot
* Stop
* UnPause
* bypassEffects
* bypassListenerEffects
* bypassReverbZones
* dopplerLevel
* enabled
* loop
* maxDistance
* rolloffMode
* minDistance
* mute
* pitch
* playOnAwake
* priority
* spatialize
* spread
* time
* volume

### AudioDistortionFilter
* decayRatio
* delay
* dryMix
* enabled
* wetMix

### AudioEchoFilter
* decayRatio
* delay
* dryMix
* enabled
* wetMix

### AudioHighPassFilter
* cutoffFrequency
* enabled
* highpassResonanceQ

### AudioLowPassFilter
* cutoffFrequency
* enabled
* lowpassResonanceQ

### AudioReverbFilter
* decayHFRatio
* decayTime
* density
* diffusion
* dryLevel
* enabled
* hfReference
* reflectionsDelay
* reflectionsLevel
* reverbDelay
* reverbLevel
* room
* roomHF
* roomLF

### AudioReverbZone
* decayHFRatio
* decayTime
* density
* diffusion
* enabled
* HFReference
* LFReference
* maxDistance
* minDistance
* reflections
* reflectionsDelay
* room
* roomHF
* roomLF

### Button
* enabled
* interactable
* targetGraphic

### Collider
* enabled
* isTrigger

### Dropdown
* captionText
* enabled
* interactable
* itemText
* targetGraphic
* template
* value

### Image
* alphaHitTestMinimumThreshold
* enabled
* fillAmount
* fillCenter
* fillClockwise
* fillOrigin
* maskable
* preserveAspect
* raycastTarget
* useSpriteMesh

### GameObject
* SetActive

### InputField
:::caution Character limit

Please note that input fields are limited to 16.000 characters, which is the maximum amount of characters a text component can render.
:::
* ForceLabelUpdate
* caretBlinkRate
* caretPosition
* caretWidth
* characterLimit
* customCaretColor
* enabled
* interactable
* readOnly
* selectionAnchorPosition
* text
* textComponent
* selectionFocusPosition


### Light
* Reset
* bounceIntensity
* colorTemperature
* cookie
* enabled
* intensity
* range
* shadowBias
* shadowNearPlane
* shadowNormalBias
* shadowStrength
* spotAngle

### LineRenderer
* allowOcclusionWhenDynamic
* shadowCastingMode
* enabled
* endWidth
* loop
* motionVectorGenerationMode
* numCapVertices
* numCornerVertices
* probeAnchor
* receiveShadows
* shadowBias
* startWidth
* lightProbeUsage
* useWorldSpace
* widthMultiplier

### Mask
* enabled
* showMaskGraphic

### MeshRenderer
* shadowCastingMode
* enabled
* probeAnchor
* probeAnchor
* receiveShadows
* lightProbeUsage

### ParticleSystem
* Clear
* Emit
* Pause
* Pause
* Play
* Simulate
* Stop
* Stop
* TriggerSubEmitter
* time
* useAutoRandomSeed

### ParticleSystemForceField
* endRange
* gravityFocus
* length
* multiplyDragByParticleSize
* multiplyDragByParticleVelocity
* startRange

### Projector
* aspectRatio
* enabled
* nearClipPlane
* farClipPlane
* fieldOfView
* orthographic
* orthographicSize

### RawImage
* enabled
* maskable
* raycastTarget

### RectMask2D
* enabled

### Scrollbar
* enabled
* handleRect
* interactable
* numberOfSteps
* size
* targetGraphic
* value

### ScrollRect
* content
* decelerationRate
* elasticity
* enabled
* horizontal
* horizontalNormalizedPosition
* horizontalScrollbar
* horizontalScrollbarSpacing
* inertia
* scrollSensitivity
* vertical
* verticalNormalizedPosition
* verticalScrollbar
* verticalScrollbarSpacing
* viewport

### Selectable
* enabled
* interactable
* targetGraphic

### SkinnedMeshRenderer
* allowOcclusionWhenDynamic
* shadowCastingMode
* enabled
* lightProbeProxyVolumeOverride
* motionVectorGenerationMode
* probeAnchor
* receiveShadows
* rootBone
* skinnedMotionVectors
* updateWhenOffscreen
* lightProbeUsage

### Slider
* enabled
* fillRect
* handleRect
* interactable
* maxValue
* minValue
* normalizedValue
* targetGraphic
* value
* wholeNumbers

### Text
* alignByGeometry
* enabled
* fontSize
* lineSpacing
* maskable
* raycastTarget
* resizeTextForBestFit
* resizeTextMaxSize
* resizeTextMinSize
* supportRichText
* text

### Toggle
* enabled
* group
* interactable
* isOn
* targetGraphic

### ToggleGroup
* allowSwitchOff
* enabled

### TrailRenderer
* Clear
* allowOcclusionWhenDynamic
* autodestruct
* shadowCastingMode
* enabled
* emitting
* endWidth
* motionVectorGenerationMode
* numCapVertices
* numCornerVertices
* probeAnchor
* receiveShadows
* shadowBias
* startWidth
* lightProbeUsage
* widthMultiplier


### UdonBehaviour
* RunProgram
* SendCustomEvent
* Interact

---

## Document: using-build-test.md

Path: /worlds/udon/using-build-test.md
# Using Build & Test

:::note

Before you read this page, you should read [What is Udon?](/worlds/udon/#what-is-udon)

:::

<iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2Fvideoseries%3Flist%3DPLe9XHNvXcouQjg5GULWGLj1tMzeythnQi%26start%3D0&display_name=YouTube&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D8yaQY0arCnc&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F8yaQY0arCnc%2Fhqdefault.jpg&key=f2aa6fc3595946d0afc3d76cbbd25dc3&type=text%2Fhtml&schema=youtube" width="854" height="480" scrolling="no" title="YouTube embed" frameborder="0" allow="autoplay; fullscreen" allowfullscreen="true"></iframe>
Some simple things in your world will work just by pressing 'Play' in the Editor - mouse events, timers, things that don't need interaction from avatars or networking. For a lot of the interesting functionality, you're going to need to make a build of your world that runs in the actual VRChat Client.

## Open the UdonExampleScene

Open the UdonExampleScene from the VRChat Examples folder - this scene has lots of great reusable Graphs from which you can learn. It's all set up to work as-is, so we can use it to make sure everything's working.

## Setting Up Your Settings

1. Start by creating a new project, making sure the Worlds SDK has been imported correctly, and opening up the VRChat Control panel through the Menu Bar under "VRChat SDK > Show Control Panel".

[IMAGE: Image]

2. Enter your Login information on the 'Authentication' tab and press 'Sign In'.
[IMAGE: Image]

3. Click on the Settings tab and look for the 'VRChat Client' entry at the bottom. This is the VRChat Client that Unity will use to test your worlds. If you don't set this, your worlds may not launch correctly. 
[IMAGE: Image]

Press 'Edit' to bring up a File Chooser, then navigate to the place you installed VRChat and choose the VRChat.exe program. Here are some default places it might be:
* Steam: `C:\Program Files (x86)\Steam\steamapps\common\VRChat\VRChat.exe`
* Oculus: `C:\Program Files\Oculus\Software\Software\vrchat-vrchat\VRChat.exe`
* Viveport: `C:\Viveport\ViveApps\469fbcbb-bfde-40b5-a7d4-381249d387cd\1597468388\VRChat.exe`

4. Switch to the 'Builder' tab. We need to set up our Layers and Collision Matrix to the way that VRChat expects.  Just press the 'Setup Layers for VRChat' button, then 'Do it!' on the popup that appears.
[IMAGE: Image]

Next, do the same thing for the 'Set Collision Matrix' button.
[IMAGE: Image]

## Running Your First Test

With all of our settings correct, we're ready to make a build of the scene. Once you've cleared the issues from the Builder tab by following the instructions above, you have access to the 'Build & Test' button. For this first test, turn on 'Force Non-VR', then press Build & Test.

[IMAGE: Image]

Your VRChat client should launch into a local copy of this world where you can run around and try everything out!

[IMAGE: Image]

## Launching Multiple Clients
In order to test Synced Variables and Custom Network Events, you need multiple people in the same world. The easiest way to accomplish this is to use the Builder tab to launch multiple clients. Close the VRChat client window you just launched if it's still open, and change the 'Number of Clients' to 2, then press Build and Test again. This time, Unity will open up two VRChat clients, with your same avatar in both of them. You can swap between the windows to control your two avatars, and even see yourself talking in both of them. Try playing with the Synced Variables area. The first avatar that loads in will be the Master of the instance and therefore Owner of those GameObjects, so they will be able to update the UI Elements, whereas the second avatar can only see the updates. The one exception in this scene is the 'SyncButtonAnyone' which transfers ownership to whoever clicks on it.

## Build & Reload
When testing many clients, it can be a hassle to arrange your windows and wait for VRChat to login every time you make a change to your world. You can change the 'Number of Clients' to launch to 0 to change "Build & Test" into "Build & Reload"

[IMAGE: Build & Reload!]

This will build a new version of your world and move all open clients into that new local instance, skipping the VRChat startup sequence altogether.

You can also do this for clients you launch yourself, if you want to test with multiple profiles. You can use the new command-line flag `--watch-worlds` to turn this functionality on. For example, this command launches VRChat with my main profile in desktop mode, with full debugging, at 1920x1080, with reloading worlds turned on.
```shell
VRChat.exe --watch-worlds --profile=0 --no-vr --enable-debug-gui --enable-sdk-log-levels --enable-udon-debug-logging -screen-width 1920 -screen-height 1080
```

:::danger New 'Build & Test' Clients Don't Join Reloaded Worlds

If you Build & Reload some clients, then choose 'Build & Test' to add more clients, they may not be joined into the right room. However, you can simply reduce the number of clients back to 0 and then 'Build & Reload' or 'Reload Last Build' in order to join them all together again.
:::

---

## Document: index.md

Path: /worlds/udon/video-players/index.md
# Video Players

You can add video players to your VRChat world with the SDK's `VRCAVProVideoPlayer` or `VRCUnityVideoPlayer`.

:::note top Community prefabs

Are you looking for community-created video player prefabs? Try [VideoTXL](https://github.com/vrctxl/VideoTXL), [ProTV](https://gitlab.com/techanon/protv), or [USharpVideo](https://github.com/MerlinVR/USharpVideo).

:::

## Using the Prefabs

The easiest way to put a Video Player in your Udon world is by using one of the Prefabs, which you can find in `Packages/VRChat SDK - Worlds/Samples/UdonExampleScene/Prefabs/VideoPlayers`.

[IMAGE: The two Video Player prefabs, ready to drop into your world.]

Both of these prefabs will play a video of your choosing, synchronized for everyone in your world. They won't loop - the graph turns off looping for now to get sync to work. If you want them to loop, turn on 'Loop' and remove the UdonBehaviour.

:::note These are Synced Player EXAMPLES

You don't have to use the "UdonSyncPlayer" Udon Behaviours. You can use just the VRC Video Player component if you don't need the videos synced in your world. You can also make your own Sync Graphs using the provided one as a starting point or you can make one from scratch.

:::
## Choosing AVPro or Unity Video Player

Why would you choose one or the other?
**AVPro** supports live streams on multiple platforms, like YouTube Live, Twitch, and some others! You'll need to make a graph that calls PlayURL on the Video Player to make this work. The **Unity Video** player does not support these live streams.

In addition, **AVPro** does not play in the editor - you'll need to Build & Test your world to see it working. **Unity Video** works in Play Mode in the Editor when using links that point directly to supported video file types like 'mp4' and 'webm'. Hosted services like YouTube and Vimeo will only work in the client.

Notably, the AVPro speaker component implies support for 8 channel audio. This is not correct-- only 6 channel (usually 5.1 audio) can be played. [AVPro support EAC3 7.1 audio on PCVR only]

## Android / Quest Compatibility

An application that VRChat uses to resolve links into videos is also available on Android now, so previous workarounds aren't needed.
In the past, some workarounds existed for advanced users, because Quest had no URL resolver.

## Rate Limiting

A given user is only permitted to handle a new video player URL once every five seconds. This is a global limit across all video players. This applies to the default URLs as well as those set with LoadURL and PlayURL.

With a single video player, this isn't an issue-- but if you have multiple video players, you need to ensure that a request isn't sent too quickly after a previous request.

This also applies to late-joiners. If you have 2 video players running in your world, a late-joiner will see that they must send out two video requests. Unmanaged, they will attempt to do so simultaneously and will fail. In cases where you have more than one video player playing simultaneously in a world, you'll have to account for this.

## Supported Video Hosts
To play a video, you need to provide a URL in the Video URL field when you set up your Video Player in the editor, or you can paste a URL into the VRCUrlInputField provided in the prefabs.

A full list of our supported hosts is available at [Video Player Allowlist](/worlds/udon/video-players/www-whitelist). Some recommendations are below.
:::note Disclaimer

*The listings below do not constitute partnerships or endorsements*. These are services that are widely accessible and have been tested to work properly with VRChat video players.
:::
### Your Own Host

- **Cost**: Paid - varies depending on your Provider
- **Links**: Link directly to the .mp4 or .webm file
- **Limitations**: If you have your own host outside of our allowlist, users must have the "Allow Untrusted URLs" option enabled in their Settings to see your content.

You may want to consider looking into a "content delivery network" (CDN) to host your content. This is useful if you plan on your video being accessible for many users, or to be fast for many users across the world. CDNs will distribute your file across many servers worldwide to ensure that there is a source close to the viewer to ensure fast downloads.

We have tested *Amazon Cloudfront* and *BunnyCDN*. CDN services are usually paid services, but tend to be low-cost for bulk storage/transmission of data. However, due to their openness, they are not present in our allowlist and will require that users enable the "Allow Untrusted URLs" setting.

### YouTube
- **Cost**: Free
- **Links**: Use the ['watch' url](https://www.youtube.com/watch?v=8yaQY0arCnc)
- **Limitations**: None
### Vimeo Basic
- **Cost**: Free
- **Links**: Use the [basic video url](https://vimeo.com/383935156)
- **Limitations**: None

### Vimeo Pro or Business
- **Cost**: [Paid](https://vimeo.com/upgrade)
- **Links**: Use the direct video links
- **Limitations**: None

### Optimizing your videos
When encoding your videos, we strongly recommend uploading a web-optimized version. For `.MP4` files, this option is also known as 'fast start'. It is a one-tick setting that makes a huge difference in the streamability of a self-hosted video file. Without fast start, you generally have to download the entire video file for it to play. With fast start enabled, you can stream the video file in chunks, and streams will begin immediately.

- In FFMPEG, use the parameter `-movflags +faststart`.
- In HandBrake, tick the 'Web Optimized' checkbox.
- Other software should have similar options for enabling fast start.

[IMAGE: Enabling Fast Start]


---

## Document: www-whitelist.md

Path: /worlds/udon/video-players/www-whitelist.md
---
title: "Video Player Allowlist"
slug: "www-whitelist"
hidden: false
createdAt: "2020-09-10T18:56:07.748Z"
updatedAt: "2024-06-28T22:55:53.659Z"
---

The following services are on the video player allowlist.

If a service is not on this list, it will not play unless "Allow Untrusted URLs" is checked in Settings.

VRChat on Android will not play video if the host is not using HTTPS protocol.

:::caution

The example video player in the SDK will not handle cases in which the master has "Untrusted URLs" disabled, which will result in videos being unable to play. User-created video players may want to modify the Udon code to give sync ownership to the user requesting the video.
:::

## Allowlisted Services
The services listed below are inherently trusted and are permitted with our default URL allowlist. The resource being accessed (as in, the URL you enter into/use in the video player) must reside in the service domain listed next to the service name. This means that short-links may not work!

:::note

*The listings below do not constitute partnerships or endorsements and may change at any time without notice*.
:::

| Service | Domain |
| --- | --- |
| Akamai CDN | `vod-progressive.akamaized.net` |
| Facebook Video | `*.facebook.com`,`*.fbcdn.net` |
| Google Video | `*.googlevideo.com` |
| Hyperbeam | `*.hyperbeam.com`,`*.hyperbeam.dev` |
| Mixcloud | `*.mixcloud.com` |
| NicoNico | `*.nicovideo.jp` |
| Soundcloud | `soundcloud.com`,`*.sndcdn.com` |
| Topaz Chat | `*.topaz.chat` |
| Twitch.TV | `*.twitch.tv`,`*.ttvnw.net`,`*.twitchcdn.net` |
| VRCDN | `*.vrcdn.live`,`*.vrcdn.video`,`*.vrcdn.cloud` |
| Vimeo | `*.vimeo.com` |
| Youku | `*.youku.com` |
| YouTube | `*.youtube.com`,`youtu.be` |


---

## Document: index.md

Path: /worlds/udon/vm-and-assembly/index.md
# The Udon VM and Udon Assembly

:::info
This page was written by a member of the VRChat community. Thank you for your contribution!
The VRChat team can't guarantee the validity of the information on this page. If you would like to suggest changes, go to the bottom of this page and click "Edit this page."
:::

## Overview of the Udon VM

The Udon VM is a bytecode interpreter designed to run compiled Udon Graph programs.

As such, it's important to keep in mind what it has and doesn't have:

* The Udon VM is expected to be running inside a .NET environment. While reflection is not used to access functions, the Udon VM is 'styled' like it is.
* It doesn't directly implement call/return or subroutines (though `JUMP_INDIRECT` exists and can be used for the purpose).
* It has flow control, via `JUMP`, `JUMP_INDIRECT`, and `JUMP_IF_FALSE`.
* It can call functions from C# (where allowed).
* It doesn't have local variables; only fields on the object.
* It has an integer stack, but this integer stack should be treated as essentially "extra parameters" for opcodes in most cases. It is possible to use it as part of a call/return mechanism, but remember that there are no local variables, so recursive functions must be implemented very carefully.

:::tip

You can export Udon Assembly from Udon Graph and UdonSharp programs.

This can help in getting an idea of how the code you write is compiled, and help you find extern names!

:::

## Udon Types

"Udon Types" are how Udon refers to C# types. 

The easiest way to understand these type names is to start with the corresponding .NET name, such as `System.Int32[]`.

There are various rules in the construction of Udon Types:

* All `.`s and `+`s are removed, i.e. `VRC.SDKBase.VRCPlayerApi+TrackingData` becomes `VRCSDKBaseVRCPlayerApiTrackingData`.
* The type may have `Array` appended, representing `[]`.

As such, the example above is `SystemInt32Array`.

## Udon Assembly

Udon Assembly programs are made up of two sections: The data section, and the code section.

These sections are marked with start/end directives, as so:

```
.data_start
    # Data goes here!
.data_end
.code_start
    # Code goes here, instead!
.code_end
```

### The Data Section

The data section marks the behaviour's variables, and which are exported (public).

Data in these sections is stored in the "Udon Heap", which, despite the name, is in fact a flat array of values with their types. A "heap index" is an index in this array.

An example of defining a variable in Udon Assembly:

```
message: %SystemString, "Hello, world!"
```

Here, the variable's symbol is `message`, the type is `SystemString`, and the contents are `"Hello, world!"`.

Note that the type may be better described as the _initial_ type, as variables can change type at runtime (but probably shouldn't if public).

Values can be `null`, `this`, `true`, `false`, strings, character constants, integers, unsigned integers (integers ending with `u`), and floats, though the assembler is strict about which of these can be specified when.

In particular:

* `SystemSingle` and `SystemDouble` must be numbers or `null`.
* `SystemInt32` and `SystemUInt32` must be integers of either kind or `null`.
* `SystemString` must be a string literal or `null`.
* All other types, including `SystemObject`, can only be `this` or `null`.

`this` does not have its "traditional" meaning per-se. Depending on the type of the variable, it can be:

* `GameObject`: The `GameObject` of the `UdonBehaviour`.
* `Transform`: `GameObject.transform`.
* `UdonBehaviour`, `IUdonBehaviour`, or `Object`: The `UdonBehaviour` itself.

If it is none of these, an error occurs.

:::caution

It is not presently possible to specify a non-null value for `SystemType` in Udon Assembly, but it is possible in Udon Graph and UdonSharp. Similar issues exist for `SystemInt64`, `SystemUInt64`, `SystemSByte`, `SystemByte`, `SystemInt16`, `SystemUInt16`, and `SystemBoolean` (yes, it is impossible to actually _successfully_ specify `true` or `false`).

These are Udon Assembly limitations. They can only be circumvented by not using Udon Assembly.

Floating-point numbers are always read as floats, even if the intended type is a double.

:::

These variables can also be marked as public, using, i.e. `.export message`, and can be marked with sync metadata, i.e. `.sync message, none`.

Marking a variable with sync metadata is equivalent to the `synced` checkbox; see [Networking](../networking#variables) for details.

`none` here is the interpolation mode. The interpolation modes are `none`, `linear`, and `smooth`, though not all interpolation modes are valid for all types.

### The Code Section

The code section is a list of opcodes with labels and possible exports.

```
.export _start
_start:
	PUSH, message
	EXTERN, "UnityEngineDebug.__Log__SystemObject__SystemVoid"
	JUMP, 0xFFFFFFFC
```

`.export _start` (an example; replace `_start` with whatever symbol you're exporting) is used to export code symbols for event handlers.

Standard events start with `_` and have their parameters passed in variables, not public, which you are expected to create; this is a long list, and best explored via Udon Graph.

However, importantly, the first two events that run are `_onEnable` and `_start`, in that order. There is no gap between them in this initial run, and these will always run before any other event; if something attempts to bypass that, the invocation will be ignored. See [Event Execution Order](../event-execution-order) for more details.

Custom events never take parameters (outside of whatever mechanism you define), and don't start with `_`.

The actual opcodes are reasonably simple. There is the opcode name, and then for some opcodes, a parameter. This parameter can be an integer, a symbol (integer value of that symbol, i.e. heap index or code address), or a string. When it is a string, the assembler will create a hidden, unnamed variable for that string, and the actual value will be the heap index.

:::caution

For some reason, defining two code symbols that point to the same position is not allowed, causing an `Address aliasing detected` error.

:::

## Udon Opcodes

### `NOP`

* Opcode: 0
* Parameters: 0

This opcode does nothing. There is generally no reason to use this, unless you get the `Address aliasing detected:` error.

### `PUSH, parameter`

* Opcode: 1
* Parameters: 1

This opcode pushes an integer to the top of the stack.

Udon Assembly may give the impression that a value is being pushed; this is not the case.

In these cases, it is the heap address that is being pushed.

Unless you are very dedicated to size-optimizing your Udon programs (even at the expense of runtime speed in some cases), or trying to obfuscate, there is never any reason to use this in a conditional fashion. Simply push everything immediately before `EXTERN`, `COPY` or `JUMP_IF_FALSE`.

### `POP`

* Opcode: 2
* Parameters: 0

This opcode removes the top integer from the stack, with no further effects.

### `JUMP_IF_FALSE, parameter`

* Opcode: 4
* Parameters: 1

Pops a heap index from the stack and reads a `SystemBoolean` from it.

If this value is `false`, jumps to the parameter as a bytecode position. Otherwise, continues to the next instruction.

### `JUMP, parameter`

* Opcode: 5
* Parameters: 1

Jumps to the bytecode position given by the parameter.

`JUMP, 0xFFFFFFFC` is also used to end execution (i.e. return from Udon code).

### `EXTERN, parameter`

* Opcode: 6
* Parameters: 1

This opcode is how Udon performs any useful operation whatsoever.

The first thing to note is that the parameter is a heap index, initially containing the extern name (as a string), _but this is also written to._

As an optimization, Udon caches information about the extern after it is first run in the given heap index. These values are still heap values and can be copied.

The parameters to the extern are given in `PUSH` order; that is, the first value pushed is the first argument. 

These heap values are read for normal (i.e. `in`) arguments, read and written for `ref` arguments, and written for `out` arguments.

If the extern is not static (i.e. if it has a `this` argument), the `this` argument is added at the start. If there is a return value (i.e. the return type is not `SystemVoid`), it is treated like an `out` argument at the end.

### `ANNOTATION, parameter`

* Opcode: 7
* Parameters: 1

This is effectively a "long NOP". The parameter is ignored.

### `JUMP_INDIRECT, parameter`

* Opcode: 8
* Parameters: 1

Gets a heap index from the parameter and reads a `SystemUInt32` from it.

Interprets this as a bytecode position and jumps to it.

### `COPY`

* Opcode: 9
* Parameters: 0

Pops two heap indexes. The value from the second heap index popped (aka the first heap index pushed) is copied to the first heap index popped (aka the second heap index pushed).

## Externs Reference

:::caution

Relying on the exact format of extern signatures is less than advisable, outside of relying on specific externs that are already known to exist.

The format can be weird at the best of times and inferring attributes such as 'is this a static method' from a signature is impossible, not to mention the specifics of generics.

If you are trying to make something which relies on total knowledge of the API, you will likely need to write C# code to scrape the list of Udon Graph nodes.

:::

Externs have the form `SomeUdonTypeName.SomeSignature`. (There is one case where the Udon type name is "falsified", that being `VRCInstantiate`.)

Here, the example will be `SystemDateTimeOffset.__TryParseExact__SystemString_SystemStringArray_SystemIFormatProvider_SystemGlobalizationDateTimeStyles_SystemDateTimeOffsetRef__SystemBoolean`.

This is `System.DateTimeOffset.TryParseExact(string, string[], System.IFormatProvider, System.Globalization.DateTimeStyles, out System.DateTimeOffset)`. This is a static method. It is worth noting that if it was not a static method, the 'this' parameter would still not be marked in the signature.

The signature itself always starts with `__`, followed by the function name, followed by `__`. The function name is `ctor` for constructors; here it is `TryParseExact`.

Each non-`this` parameter then follows as its Udon type name, separated by `_`. There is a special modifier to the Udon type name in the case of `ref` and `out` parameters, that being the `Ref` suffix.

Finally, the signature ends with `__` followed by the Udon type name of the returned type.

There are some particularly weird cases:

* Generics list their type parameters as "Udon types" such as `T` in their signature, and have invisible `SystemType` parameters.
* `VRCUdonUdonBehaviour` becomes `VRCUdonCommonInterfacesIUdonEventReceiver`. (`Array` is still appended if relevant, etc.)

_There is presently no complete reference of externs._

However:

* [The UdonSharp documentation has an API reference for the VRChat methods.](https://udonsharp.docs.vrchat.com/vrchat-api)
* UdonSharp provides a way to explore what's available, using the [Class Exposure Tree](https://udonsharp.docs.vrchat.com/class-exposure-tree).

:::caution

The ability to copy member names in the UdonSharp Class Exposure Tree is broken at this time. This is a good way to quickly scout what's available, but you'll still need to actually get the extern name using Udon Graph.

:::

---

## Document: asyncgpureadback.md

Path: /worlds/udon/vrc-graphics/asyncgpureadback.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# AsyncGPUReadback

AsyncGPUReadback in Unity is a feature that allows developers to copy data, such as a specific pixel's color, from textures on the GPU to code on the CPU. This function is similar to `Texture2D.GetPixels`except it does not block tasks on the main thread as it runs asynchronously.

By performing the data transfer asynchronously, Unity ensures that the process does not negatively affect the application's frame rate and overall performance. AsyncGPUReadback helps developers avoid stalling the rendering pipeline, as the data transfer occurs in the background, parallel to the main thread.

Common use cases for AsyncGPUReadback include generating CPU-side data based on the rendered output, such as creating a texture mipmap chain, implementing custom post-processing effects, or analyzing rendered frames for AI and computer vision purposes.

## Differences between Unity AsyncGpuReadback and VRCAsyncGpuReadback

VRChat's implementation of AsyncGpuReadback employs a wrapper that calls the Unity functions. This wrapper uses a different interface. The differences are as follows:

- Rather than calling AsyncGpuReadback, you need to use VRCAsyncGpuReadback.
- Rather than providing `Action<AsyncGPUReadbackRequest> callback`, you provide an UdonBehaviour, and then that UdonBehaviour will receive `OnAsyncGpuReadbackComplete` when the readback is complete.
- Rather than using `GetData` on the completed readback, you need to use `TryGetData`.

See Unity's documentation on this feature for other shared details:  
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Rendering.AsyncGPUReadback.Request.html">Making a readback request</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Rendering.AsyncGPUReadbackRequest.html">Getting data from a readback</UnityVersionedLink>

## Using VRCAsyncGpuReadback

When using VRCAsyncGpuReadback, there are 4 main steps that you need to follow:

1. Set up an array of data to be used.
2. Make the AsyncGpuReadback request
3. Receive the message when the request is complete
4. Get the data out of the request

## Udon Node Graph Example

[IMAGE: asyncgpureadback-mu8QGGS.png]

## UdonSharp Example

```csharp

using UdonSharp;
using UnityEngine;
using VRC.SDK3.Rendering;
using VRC.Udon.Common.Interfaces;
​
public class AGPURB : UdonSharpBehaviour
{
    public Texture texture;
​
    void Start()
    {
        VRCAsyncGPUReadback.Request(texture, 0, (IUdonEventReceiver)this);
    }
​
    public void OnAsyncGpuReadbackComplete(VRCAsyncGPUReadbackRequest request)
    {
        if (request.hasError)
        {
            Debug.LogError("GPU readback error!");
            return;
        }
        else
        {
            var px = new Color32[texture.width * texture.height];
            Debug.Log("GPU readback success: " + request.TryGetData(px));
            Debug.Log("GPU readback data: " + px[0]);
        }
    }
}
```

---

## Document: index.md

Path: /worlds/udon/vrc-graphics/index.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# VRCGraphics

Udon has access to a variety of Unity's graphics functions.

## Types

### VRCShader

Overarching class for global shader setters. See [functions documented below](#vrcshaderpropertytoid) for more.

### VRCGraphics

Exposes a subset of Unity’s built-in \`Graphics\` class. See documented functions for more.

## VRCCameraSettings & VRCQualitySettings

Exposes information and limited control over the user's screen camera, the handheld camera, and Unity's global quality settings. See [VRCCameraSettings](/worlds/udon/vrc-graphics/vrc-camera-settings) for more.

## Exposed Functions

### VRCGraphics.Blit()

Copies source texture into destination RenderTexture with a shader. Note that we do not allow you to supply a null destination.

See <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Graphics.Blit.html">Graphics.Blit</UnityVersionedLink>.

Check out the [Minimap Example](/worlds/examples/minimap) to learn more about how to use VRCGraphics.Blit().

[IMAGE: Minimap Example World]

#### Meta Quest Exceptions

VRCGraphics.Blit will not work on the Quest GPU unless you:

Add ZTest Always to the shader
OR
Turn off the depth on the target RenderTexture.

Failing to do so will cause the operation to fail.

### VRCGraphics.DrawMeshInstanced()

Draw the same mesh multiple times using GPU instancing.

See <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Graphics.DrawMeshInstanced.html">Graphics.DrawMeshInstanced</UnityVersionedLink>.

### VRCShader.PropertyToID()

Use PropertyToID to get an ID based on a shader property name. Call this function only once during initialization, the ID can be reused and will not change, even between different materials and shaders.

Note that the property name must be prefixed with “\_Udon”, or be the literal string “\_AudioTexture” in order to be used with VRCShader.SetGlobal, however, will still return the ID regardless of this.

See <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Shader.PropertyToID.html">Shader.PropertyToID</UnityVersionedLink>.

### VRCShader.SetGlobal()

Use the ID acquired with PropertyToID as a key and specify a value of the correct type. The value will be available in _all_ shaders in the world (including ones on avatars!) under the name passed into PropertyToID.

Available variants:

  * VRCShader.SetGlobalColor()
  * VRCShader.SetGlobalFloat()
  * VRCShader.SetGlobalFloatArray()
  * VRCShader.SetGlobalInteger() still sets the value as `float` for now, due to a Unity bug
  * VRCShader.SetGlobalMatrix()
  * VRCShader.SetGlobalMatrixArray()
  * VRCShader.SetGlobalTexture()
  * VRCShader.SetGlobalVector()
  * VRCShader.SetGlobalVectorArray()

# Additional shader globals

VRChat exposes a few special global shader variables you can use in any custom avatar or world shader. They are listed [here](/worlds/udon/vrc-graphics/vrchat-shader-globals).

---

## Document: vrc-camera-settings.md

Path: /worlds/udon/vrc-graphics/vrc-camera-settings.md
---
title: "VRC Camera Settings"
slug: "vrc-camera-settings"
hidden: false
createdAt: "2025-02-21T18:46:09.500Z"
updatedAt: "2025-02-21T18:46:09.500Z"
---

import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# VRCCameraSettings

Exposes information and limited control over the user's screen camera, the handheld camera, and Unity's global quality settings via APIs listed here.

You can access 2 instances of this class via the following static accessors:

- `VRCCameraSettings.ScreenCamera`: The user's screen camera, i.e. what is rendering their current view (will be a stereo camera if the user is in VR)
- `VRCCameraSettings.PhotoCamera`: The user's handheld photo camera. Note that properties on this instance will only update if the user has the camera enabled, you can use the `Active` property to check for that. Further note that this property will always point to the camera rendering the preview image, not the one used for taking pictures itself or rendering the view for the stream camera (although most properties will by synced from and to those whenever the Shutter is pressed).
  - ⚠️ In ClientSim, this property will be `null` as there is no photo camera available. In a real VRChat client, it will never be `null`.

:::note

These two properties may not always refer to a single real `Camera` component under the hood. VRChat abstracts away some of the complexity for you, and you should never need to worry about this. But for completeness, note the following:

- The [Focus View](/worlds/components/vrc_uishape/#focus-view) camera will be affected when changing properties on `VRCCameraSettings.ScreenCamera`.
- Similarly, the component used while the handheld camera is opened in "Stream Camera" mode will be affected when accessing `VRCCameraSettings.PhotoCamera`.
- The `VRCCameraSettings.PhotoCamera` is also linked to all cameras used in a Dolly Multi Cam setup, although some properties like `FieldOfView` may differ between them. In this case, the first camera's settings will be returned.

For advanced use-cases this state can be read via the [`CameraMode`](#camera-mode) property.

:::

### Exposed properties

These instances will expose certain properties of Unity's <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Camera.html">Camera</UnityVersionedLink> class (you can reference the Unity docs for detailed information on these properties). Note that for safety reasons, you will not be able to access the raw `Camera` components. The `Camera` class is exposed for components that you have placed into your world manually however.

Currently exposed as **read-only**:

- `Vector3 Position`: World-space position
- `Quaternion Rotation`: World-space rotation
- `Vector3 Forward`: World-space forward vector, convenience
- `Vector3 Up`: World-space up vector, convenience
- `Vector3 Right`: World-space right vector, convenience
- `int PixelWidth` and `int PixelHeight`: The current render target's size in pixels (may be affected by VR super-sampling settings)
- `float Aspect`: The current aspect ratio of the render target
- `float FieldOfView`: The camera's current _vertical_ field of view (this may be inaccurate for VR users)
- `bool Active`: If the camera is currently rendering. Will always be true for `ScreenCamera`, useful to detect the handheld camera via `PhotoCamera`. Also `true` for `PhotoCamera` while Spout streaming is enabled.
- `bool StereoEnabled`: `true` for `ScreenCamera` if the user is in VR. It is recommended to check the [Player API](/worlds/udon/players) to detect VR users instead.


:::note

Transform data like `Position` and `Rotation` will be all 0 if `Active` is `false`. `Forward/Up/Right` will return `Vector3.forward/up/right` respectively in that case.

:::

Currently exposed as **read-write**:

- `float NearClipPlane` and `float FarClipPlane`: You can adjust the camera's clipping planes at runtime. This follows similar restrictions to setting them via the Reference Camera in your scene descriptor:
  - `NearClipPlane` may be adjusted by the user's "Forced Camera Near Distance" settings. You can detect this happening by reading the value back after setting it.
  - `NearClipPlane` will be clamped between `0.001` and `0.05`
  - `FarClipPlane` can only be set to `0.1` higher than `NearClipPlane` at the lowest, this will be clamped
  - Adjusting the `FarClipPlane` may also adjust the `NearClipPlane` if the user has "Forced Camera Near Distance" set to "Dynamic"
- `bool AllowHDR`: If the camera will submit HDR values to the render target
- `DepthTextureMode DepthTextureMode`: Can be used to enable camera depth texture rendering, which is useful for certain shader effects. This can be used instead of a realtime-light with shadows enabled to force a camera depth texture. Note however, that having such a light in your scene will not change the `DepthTextureMode` property, meaning that reading a value of `None` from this property does _not_ mean there is no depth-light in the scene forcing a depth-pass to render regardless.
- `bool UseOcclusionCulling`: Whether or not the Camera will use occlusion culling during rendering. Defaults to `true`, but will only have an effect if your world has baked occlusion data.
- `bool AllowMSAA`: Disable all MSAA (anti-aliasing) on this camera if set to `false`, regardless of user settings. Defaults to `true`, where it will use the user's graphics settings.
- `CameraClearFlags ClearFlags`: Sets the background clear mode used when rendering this camera.
  - `Color BackgroundColor`: The color to use when `ClearFlags` is set to `SolidColor`.
- `bool LayerCullSpherical`: See <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Camera-layerCullSpherical.html">Unity Docs</UnityVersionedLink>.
- `float[] LayerCullDistances`: See <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/Camera-layerCullDistances.html">Unity Docs</UnityVersionedLink>. Array must have 32 entries, corresponding to GameObject layers. A value of `0` for a layer means it will use the value of `FarClipPlane`. Setting this property to `null` is the same as passing in `0` for every layer.
  - Just like `FarClipPlane`, this will be clamped to a minimum of `NearClipPlane + 0.1`. Any `reserved` [layer](/worlds/layers) and `InternalUI` cannot be changed and will always read `0`.

### Camera Mode

The `CameraMode` property is available on the `ScreenCamera` and `PhotoCamera`.

`ScreenCamera` has the following camera modes:

| Mode        | Description                                                                                            |
|-------------|--------------------------------------------------------------------------------------------------------|
| Screen      | The default mode for rendering the user's current view.                                                |
| FocusView   | Active when the user is in [Focus View](/worlds/components/vrc_uishape/#focus-view) on mobile devices. |

`PhotoCamera` has the following camera modes:

| Mode            | Description                                                                   |
|-----------------|-------------------------------------------------------------------------------|
| PhotoOrVideo    | Camera is in Photo or Stream mode. Includes modes such as Emoji and Stickers. |
| Print           | Camera has the "Prints" skin active.                                          |
| DroneHandheld   | Camera is in Drone mode.                                                      |
| DroneFPV        | The user is flying the Drone in FPV mode.                                     |
| Unknown         | Set when `Active` is `false`.                                                 |

### Static functions

Mostly useful for VR users, 2 static functions are exposed on `VRCCameraSettings`:

* `Vector3 GetEyePosition(Camera.StereoscopicEye eye)`: Returns the specified eye's world space position. Equivalent to `ScreenCamera.Position` for non-VR users.
* `Quaternion GetEyeRotation(Camera.StereoscopicEye eye)`: Returns the specified eye's world space rotation. Equivalent to `ScreenCamera.Rotation` for non-VR users.

## OnChanged Event

When a user changes certain graphics settings, such as "Near Clip Override", the [OnVRCCameraSettingsChanged](/worlds/udon/graph/event-nodes/#onvrccamerasettingschanged) event is triggered.

This event may trigger every frame, or even multiple times per frame. It is recommended to do minimal processing to avoid affecting performance.

## Example

<Tabs groupId="udon-compiler-language">
<TabItem value="graph" label="Udon Graph">

[IMAGE: Udon graph that prints screen size and FOV on Start and whenever it changes.]

</TabItem>
<TabItem value="cs" label="UdonSharp">

```cs
using TMPro;
using UdonSharp;
using UnityEngine;
using UnityEngine.UI;
using VRC.SDK3.Rendering;
​
public class CameraInfoDisplay : UdonSharpBehaviour
{
    [SerializeField] private TextMeshProUGUI info;

    void Start()
    {
        // call it once to initialize
        OnVRCCameraSettingsChanged(VRCCameraSettings.ScreenCamera);

        Debug.Log($"Started CameraInfoDisplay at resolution of {VRCCameraSettings.ScreenCamera.PixelWidth}x{VRCCameraSettings.ScreenCamera.PixelHeight}");
        Debug.Log($"The handheld photo camera is {(VRCCameraSettings.PhotoCamera.Active ? "enabled" : "disabled")}");
    }
​
    // will be called if resolution or a couple other properties change
    public override void OnVRCCameraSettingsChanged(VRCCameraSettings camera)
    {
        // ignore handheld photo camera
        if (camera != VRCCameraSettings.ScreenCamera)
            return;

        info.text = $"{camera.PixelWidth}x{camera.PixelHeight} fov={camera.FieldOfView} frame={Time.frameCount}°";
    }
}
```

</TabItem>
</Tabs>

---

## Document: vrc-quality-settings.md

Path: /worlds/udon/vrc-graphics/vrc-quality-settings.md
---
title: "VRC Quality Settings"
slug: "vrc-quality-settings"
hidden: false
createdAt: "2025-04-22T18:46:09.500Z"
updatedAt: "2025-04-22T18:46:09.500Z"
---

import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# VRCQualitySettings

A thin read-only layer over properties of <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/QualitySettings.html">UnityEngine.QualitySettings</UnityVersionedLink>.

Currently exposed:

- `int AntiAliasing`
- `int PixelLightCount`
- `float LODBias`
- `int MaximumLODLevel`
- `ShadowResolution ShadowResolution`
- `float ShadowDistance`
- `int ShadowCascades`
- `int vSyncCount`

Some of these may be affected by the user's graphics settings.

### Shadow Distance

You can override the <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/shadow-distance.html">shadow distance</UnityVersionedLink> in your world using `VRCQualitySettings.SetShadowDistance()`. In VRChat, the value is clamped between `0.1f` and `10000.0f`.

`SetShadowDistance()` takes four float parameters: `low`, `medium`, `high`, and `mobile`. These correspond to the "Low", "Medium" and "High" shadow quality settings in the graphics settings menu. If you specify different values, the parameter that matches the local user's current setting is used. `mobile` applies to all non-PC platforms, regardless of settings. If you want to use the same value for all four parameters, use the overload method of `SetShadowDistance()` that accepts a single parameter.

Once you set a shadow distance using this property, the user's configured "Shadow Quality" setting will be overridden. The user will see a warning in their graphics settings. Be careful what you set as your shadow distance, since larger values can have heavy performance implications.

To disable the override and go back to the user configured shadow distance value, you can call `VRCQualitySettings.ResetShadowDistance()`.

## OnChanged Event

When a user changes graphics settings that affect an exposed property, the [OnVRCQualitySettingsChanged](/worlds/udon/graph/event-nodes/#onvrcqualitysettingschanged) event is triggered.

---

## Document: vrchat-shader-globals.md

Path: /worlds/udon/vrc-graphics/vrchat-shader-globals.md
---
title: "VRChat Shader Globals"
slug: "vrchat-shader-globals"
hidden: false
createdAt: "2023-04-11T20:25:09.753Z"
updatedAt: "2023-04-11T20:28:55.746Z"
---
VRChat provides multiple global shader parameters Shader creators can use to implement VRChat-specific features.

The following shader globals are currently available:

- `float _VRChatCameraMode`:
  - `0` - Rendering normally
  - `1` - Rendering in VR handheld camera
  - `2` - Rendering in Desktop handheld camera
  - `3` - Rendering for a screenshot
- `uint _VRChatCameraMask` - The `cullingMask` property of the active camera, available if `_VRChatCameraMode != 0`
- `float _VRChatMirrorMode`:
  - `0` - Rendering normally, not in a mirror
  - `1` - Rendering in a mirror viewed in VR
  - `2` - Rendering in a mirror viewed in desktop mode
- `float3 _VRChatMirrorCameraPos` - World space position of mirror camera (eye independent, "centered" in VR), `(0,0,0)` when not rendering in a mirror
- `float3 _VRChatScreenCameraPos` - World space position of main screen camera
- `float4 _VRChatScreenCameraRot` - World space rotation (quaternion) of main screen camera
- `float3 _VRChatPhotoCameraPos` - World space position of handheld photo camera (first instance when using Dolly Multicam), `(0,0,0)` when camera is not active
- `float4 _VRChatPhotoCameraRot` - Look, you get the idea

---

## Document: world-debug-views.md

Path: /worlds/udon/world-debug-views.md
# World Debug Views

These are the tools you can use to debug your worlds in-game.

In order to access debug views you need two things:
* Launch VRChat with the launch parameter `--enable-debug-gui`
* Press Rshift + Tilde + 1-9.

If you have a keyboard layout where tilde is not directly to the left of the 1 key, try using whichever key is directly to the left of the 1 key, as it will prioritize the position of the key over the character of the key itself.
[IMAGE: world-debug-views-2103941-szhLVX11II.png]

## Debug Menu 1

[IMAGE: world-debug-views-9bfe518-VRChat_Q9pMRjUJHI.png]

Debug menu 1 displays some information about your connection to the VRChat API. It is mostly irrelevant to world development.
## Debug Menu 2

[IMAGE: world-debug-views-ae12b10-VRChat_kGTo5o998Y.png]

Debug menu 2 displays the current build of VRChat that you are using, along with your FPS.
## Debug Menu 3

[IMAGE: world-debug-views-e85c111-VRChat_gk2BOiYkIr.png]

Debug menu 3 displays your output log. The output log is very useful for world creators because it can show you information such as Udon Behaviour crashes, any information logged via the Debug.Log nodes, and any other potential errors in your world generated by Unity or VRChat.

You can hold the Tab key to activate the mouse cursor and use the buttons on the top to toggle different options on and off, as well as scroll the log output.
## Debug Menu 4

[IMAGE: world-debug-views-0db830e-VRChat_pZdYm9u4ox.png]

Debug menu 4 displays various stats about other players.
* M: Whether or not the player is the [master of the instance](/worlds/udon/networking#the-instance-master)
* L: Whether or not the player is the local player
* VR: Whether or not the player is in VR
* Ping: The player's ping
* Desrd D: The desired delay that the internal system is targeting. The actual delay is frequently adjusted to find a good balance between latency and smoothness.
* Intrvl: The amount of time between the player sending synced data about themselves.
* G: The current group that the player is in. Grouping in this context is an internal networking system used to combine multiple objects together by distance so that their data can be sent together.
* D: The current delay, or how far back in time you are viewing this player.
## Debug Menu 5

[IMAGE: world-debug-views-1232152-VRChat_SVxaMmgiLC.png]

Debug menu 5 displays some graphs related to networking. They are unlabeled and mostly not useful.
:::caution World debugging views above 5 are restricted

By default, only the world creator can access debug menus above 5. However, you can allow others to see it as well by enabling World Debugging in your world's settings on the website. Don't forget to click "Save Changes"! Other users will need to rejoin the world to be able to access this debug view after World Debugging gets enabled.
:::

[IMAGE: world-debug-views-da70084-unknown_7.png]

## Debug Menu 6

[IMAGE: world-debug-views-b0257d6-VRChat_ZRiWB4bTU7.png]

Debug menu 6 displays all the networked objects in your world, along with various stats.
* Owner: The playerid of the owner of the object.
* Group: The current group that this object is in. Grouping in this context is an internal networking system used to combine multiple objects together by distance so that their data can be sent together.
* Sleeping: Whether or not the object is sleeping. Only objects with VRCObjectSync can sleep. Sleeping causes the object to stop transmitting data.
* Delay: The current delay of this object between the owner and the viewer
* Size: The current number of bytes per serialization of this object. Every time it needs to sync, it will send this many bytes.
* Bps: A rough approximation of how many bytes per second this object is using up.
* Since Last: A running counter of how long it has been since the last time this object has sent data.
* Interval: A rough approximation of how many times this object tries to sync per second.
## Debug Menu 7

[IMAGE: world-debug-views-6ea6192-VRChat_pWGDiXUnlh.png]

Debug menu 7 displays all the same information as 6, but filtered and sorted to bring objects that have the highest networking impact to the top.
## Debug Menu 8

[IMAGE: world-debug-views-88ea4e6-VRChat_6e9Vhf8jnq.png]

Debug menu 8 overlays a panel on top of every synced object in the world. Each panel displays various stats about that specific object
* P: Ping of the owner
* Q: Quality of the data (100% is no dropped packets)
* O: PlayerID of the owner of the object
* G: The current group that this object is in. Grouping in this context is an internal networking system used to combine multiple objects together by distance so that their data can be sent together.
* Held: Whether or not this object is held, if it is a pickup
* Status: Displays various things about what this object is doing, such as `Should Sleep`, `Player`, `Held`, or `Discontinuity`


---

## Document: whitelisted-world-components.md

Path: /worlds/whitelisted-world-components.md
import UnityVersionedLink from '@site/src/components/UnityVersionedLink.js';

# Allowlisted World Components

The following is the complete list of scripts usable within worlds. Components that are not in this list will not work.
:::caution Oculus Quest

The Android version of VRChat has some exceptions to this list. Check [here](/platforms/android/quest-content-limitations#components) for more info.
:::
## Unity Components
- Animator
- AudioChorusFilter
- AudioDistortionFilter
- AudioEchoFilter
- AudioHighPassFilter
- AudioLowPassFilter
- AudioReverbFilter
- AudioReverbZone
- AudioSource
- BillboardRenderer
- BoxCollider
- Camera
- Canvas
- CanvasGroup
- CanvasRenderer
- CapsuleCollider
- CharacterJoint
- Cloth
- Collider
- ConfigurableJoint
- ConstantForce
- EllipsoidParticleEmitter
- FixedJoint
- FlareLayer
- GUIElement
- GUILayer
- Grid
- GridLayout
- Halo
- HingeJoint
- Joint
- LODGroup
- LensFlare
- Light
- LightProbeGroup
- LightProbeProxyVolume
- LineRenderer
- MeshCollider
- MeshFilter
- MeshParticleEmitter
- MeshRenderer
- NavMeshAgent
- NavMeshObstacle
- OcclusionArea
- OcclusionPortal
- OffMeshLink
- ParticleAnimator
- ParticleEmitter
- ParticleRenderer
- ParticleSystem
- ParticleSystemRenderer
- PlayableDirector
- Projector
- RectTransform
- ReflectionProbe
- Rendering.SortingGroup
- Rigidbody
- SkinnedMeshRenderer
- Skybox
- SphereCollider
- SpringJoint
- SpriteMask
- SpriteRenderer
- Terrain
- TerrainCollider
- TextMesh
- Tilemap
- TilemapRenderer
- TrailRenderer
- Transform
- Tree
- VideoPlayer
- WheelCollider
- WorldParticleCollider
- WindZone

### Unity Components

:::info

VRChat is currently working on [VRCConstraint](https://feedback.vrchat.com/avatar-30/p/vrcconstraint-optimized-replacement-for-unity-constraints), an optimized replacement for Unity's Constraints. 

:::

- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-AimConstraint.html">AimConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-LookAtConstraint.html">LookAtConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ParentConstraint.html">ParentConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ParticleSystemForceField.html">ParticleSystemForceField</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-PositionConstraint.html">PositionConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-RotationConstraint.html">RotationConstraint</UnityVersionedLink>
- <UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/class-ScaleConstraint.html">ScaleConstraint</UnityVersionedLink>

## VRChat Components
- [VRC_AvatarPedestal](/worlds/components/vrc_avatarpedestal)
- [VRC_IKFollower](https://docs.vrchat.com/docs/vrc_ikfollower) - Deprecated. Use 
<UnityVersionedLink versionKey="minor" url="https://docs.unity3d.com/<VERSION>/Documentation/Manual/Constraints.html">Constraints</UnityVersionedLink> instead!
- [VRC_MidiListener](/worlds/udon/midi/realtime-midi/)
- [VRC_MirrorReflection](/worlds/components/vrc_mirrorreflection)
- [VRCPipelineManager](/sdk/vrcpipelinemanager)
- [VRC_PortalMarker](/worlds/components/vrc_portalmarker)
- [VRC_SceneDescriptor](/worlds/components/vrc_scenedescriptor)
- [VRC_SpatialAudioSource](/worlds/components/vrc_spatialaudiosource)
- [VRC_Station](/worlds/components/vrc_station)
- [VRC_UiShape](/worlds/components/vrc_uishape)

## Dynamic Bone
- DynamicBone
- DynamicBoneCollider

## Text Mesh Pro
- TMP_Dropdown
- TMP_InputField
- TMP_ScrollbarEventHandler
- TMP_SelectionCaret
- TMP_SpriteAnimator
- TMP_SubMesh
- TMP_SubMeshUI
- TMP_Text
- TextContainer
- TextMeshPro
- TextMeshProUGUI

## Unity Event System
- BaseInput
- BaseInputModule
- BaseRaycaster
- EventSystem
- EventTrigger
- PhysicsRaycaster
- PointerInputModule
- StandaloneInputModule
- TouchInputModule
- UIBehaviour

## Unity UI
- AspectRatioFitter
- BaseMeshEffect
- Button
- CanvasScaler
- ContentSizeFitter
- Dropdown
- Dropdown
- Graphic
- GraphicRaycaster
- GridLayoutGroup
- HorizontalLayoutGroup
- HorizontalOrVerticalLayoutGroup
- Image
- InputField
- LayoutElement
- LayoutGroup
- Mask
- MaskableGraphic
- Outline
- PositionAsUV1
- RawImage
- RectMask2D
- ScrollRect
- Scrollbar
- Selectable
- Shadow
- Slider
- Text
- Toggle
- ToggleGroup
- VerticalLayoutGroup

## Post Processing Stack V2
:::caution Post Processing Stack v1

PPSv1 is not supported in either VRCSDK2 or VRCSDK3. It has been deprecated by Unity.
:::
- PostProcessDebug
- PostProcessLayer
- PostProcessVolume

## AVPro
- ApplyToMaterial
- ApplyToMesh
- AudioOutput
- DisplayIMGUI
- DisplayUGUI
- MediaPlayer
- SubtitlesUGUI

## Oculus Spatializer Unity
- ONSPAmbisonicsNative
- ONSPAudioSource
- ONSPReflectionZone
- OculusSpatializerUnity

## Final IK

:::caution FinalIK Components Modified

VRChat has highly modified its implementation of FinalIK. As such, these components may not work as documented.

We do not directly support or test custom FinalIK implementations in worlds. However, they *should* work fine, and if we must intentionally break one or more of these, we will try our best to inform creators.

If you discover a bug, please [let us know](https://feedback.vrchat.com).
:::

- AimIK
- AimPoser
- Amplifier
- AnimationBlocker
- BehaviourBase
- BehaviourFall
- BehaviourPuppet
- BipedIK
- BipedRagdollCreator
- BodyTilt
- CCDIK
- FABRIK
- FABRIKRoot
- FBBIKArmBending
- FBBIKHeadEffector
- FingerRig
- FullBodyBipedIK
- GenericPoser
- Grounder
- GrounderBipedIK
- GrounderFBBIK
- GrounderIK
- GrounderQuadruped
- GrounderVRIK
- HandPoser
- HitReaction
- HitReactionVRIK
- IK
- IKExecutionOrder
- Inertia
- InteractionObject
- InteractionSystem
- InteractionTarget
- InteractionTrigger
- JointBreakBroadcaster
- LegIK
- LimbIK
- LookAtIK
- MuscleCollisionBroadcaster
- OffsetModifier
- OffsetModifierVRIK
- OffsetPose
- Poser
- PressureSensor
- Prop
- PropRoot
- PuppetMaster
- PuppetMasterSettings
- RagdollCreator
- RagdollEditor
- RagdollUtility
- Recoil
- RotationLimit
- RotationLimitAngle
- RotationLimitHinge
- RotationLimitPolygonal
- RotationLimitSpline
- ShoulderRotator
- SolverManager
- TriggerEventBroadcaster
- TrigonometricIK
- TwistRelaxer
- VRIK

---

# End of Documentation
